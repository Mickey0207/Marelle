import{r as L,j as c}from"./index-09c3368c.js";import{G as ve}from"./GlassModal-a6c5f610.js";import{Q as ue}from"./QrCodeIcon-0fb2cc7f.js";import{A as De}from"./ArrowDownTrayIcon-2accbe6b.js";var V={},_e=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ne={},p={};let ae;const Fe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];p.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};p.getSymbolTotalCodewords=function(t){return Fe[t]};p.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};p.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');ae=t};p.isKanjiModeEnabled=function(){return typeof ae<"u"};p.toSJIS=function(t){return ae(t)};var O={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,i){if(e.isValid(n))return n;try{return t(n)}catch{return i}}})(O);function Ce(){this.buffer=[],this.length=0}Ce.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var $e=Ce;function Q(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Q.prototype.set=function(e,t,r,n){const i=e*this.size+t;this.data[i]=r,n&&(this.reservedBit[i]=!0)};Q.prototype.get=function(e,t){return this.data[e*this.size+t]};Q.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r};Q.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var ze=Q,be={};(function(e){const t=p.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,o=t(n),a=o===145?26:Math.ceil((o-13)/(2*i-2))*2,s=[o-7];for(let l=1;l<i-1;l++)s[l]=s[l-1]-a;return s.push(6),s.reverse()},e.getPositions=function(n){const i=[],o=e.getRowColCoords(n),a=o.length;for(let s=0;s<a;s++)for(let l=0;l<a;l++)s===0&&l===0||s===0&&l===a-1||s===a-1&&l===0||i.push([o[s],o[l]]);return i}})(be);var Ee={};const Ke=p.getSymbolSize,me=7;Ee.getPositions=function(t){const r=Ke(t);return[[0,0],[r-me,0],[0,r-me]]};var xe={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},e.from=function(i){return e.isValid(i)?parseInt(i,10):void 0},e.getPenaltyN1=function(i){const o=i.size;let a=0,s=0,l=0,f=null,h=null;for(let x=0;x<o;x++){s=l=0,f=h=null;for(let w=0;w<o;w++){let m=i.get(x,w);m===f?s++:(s>=5&&(a+=t.N1+(s-5)),f=m,s=1),m=i.get(w,x),m===h?l++:(l>=5&&(a+=t.N1+(l-5)),h=m,l=1)}s>=5&&(a+=t.N1+(s-5)),l>=5&&(a+=t.N1+(l-5))}return a},e.getPenaltyN2=function(i){const o=i.size;let a=0;for(let s=0;s<o-1;s++)for(let l=0;l<o-1;l++){const f=i.get(s,l)+i.get(s,l+1)+i.get(s+1,l)+i.get(s+1,l+1);(f===4||f===0)&&a++}return a*t.N2},e.getPenaltyN3=function(i){const o=i.size;let a=0,s=0,l=0;for(let f=0;f<o;f++){s=l=0;for(let h=0;h<o;h++)s=s<<1&2047|i.get(f,h),h>=10&&(s===1488||s===93)&&a++,l=l<<1&2047|i.get(h,f),h>=10&&(l===1488||l===93)&&a++}return a*t.N3},e.getPenaltyN4=function(i){let o=0;const a=i.data.length;for(let l=0;l<a;l++)o+=i.data[l];return Math.abs(Math.ceil(o*100/a/5)-10)*t.N4};function r(n,i,o){switch(n){case e.Patterns.PATTERN000:return(i+o)%2===0;case e.Patterns.PATTERN001:return i%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(i+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return i*o%2+i*o%3===0;case e.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case e.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(i,o){const a=o.size;for(let s=0;s<a;s++)for(let l=0;l<a;l++)o.isReserved(l,s)||o.xor(l,s,r(i,l,s))},e.getBestMask=function(i,o){const a=Object.keys(e.Patterns).length;let s=0,l=1/0;for(let f=0;f<a;f++){o(f),e.applyMask(f,i);const h=e.getPenaltyN1(i)+e.getPenaltyN2(i)+e.getPenaltyN3(i)+e.getPenaltyN4(i);e.applyMask(f,i),h<l&&(l=h,s=f)}return s}})(xe);var q={};const U=O,H=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],J=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];q.getBlocksCount=function(t,r){switch(r){case U.L:return H[(t-1)*4+0];case U.M:return H[(t-1)*4+1];case U.Q:return H[(t-1)*4+2];case U.H:return H[(t-1)*4+3];default:return}};q.getTotalCodewordsCount=function(t,r){switch(r){case U.L:return J[(t-1)*4+0];case U.M:return J[(t-1)*4+1];case U.Q:return J[(t-1)*4+2];case U.H:return J[(t-1)*4+3];default:return}};var Be={},W={};const z=new Uint8Array(512),G=new Uint8Array(256);(function(){let t=1;for(let r=0;r<255;r++)z[r]=t,G[t]=r,t<<=1,t&256&&(t^=285);for(let r=255;r<512;r++)z[r]=z[r-255]})();W.log=function(t){if(t<1)throw new Error("log("+t+")");return G[t]};W.exp=function(t){return z[t]};W.mul=function(t,r){return t===0||r===0?0:z[G[t]+G[r]]};(function(e){const t=W;e.mul=function(n,i){const o=new Uint8Array(n.length+i.length-1);for(let a=0;a<n.length;a++)for(let s=0;s<i.length;s++)o[a+s]^=t.mul(n[a],i[s]);return o},e.mod=function(n,i){let o=new Uint8Array(n);for(;o.length-i.length>=0;){const a=o[0];for(let l=0;l<i.length;l++)o[l]^=t.mul(i[l],a);let s=0;for(;s<o.length&&o[s]===0;)s++;o=o.slice(s)}return o},e.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let o=0;o<n;o++)i=e.mul(i,new Uint8Array([1,t.exp(o)]));return i}})(Be);const Ae=Be;function le(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}le.prototype.initialize=function(t){this.degree=t,this.genPoly=Ae.generateECPolynomial(this.degree)};le.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const n=Ae.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const o=new Uint8Array(this.degree);return o.set(n,i),o}return n};var Ve=le,Pe={},v={},ce={};ce.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var M={};const Te="[0-9]+",Qe="[A-Z $%*+\\-./:]+";let K="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";K=K.replace(/u/g,"\\u");const He="(?:(?![A-Z0-9 $%*+\\-./:]|"+K+`)(?:.|[\r
]))+`;M.KANJI=new RegExp(K,"g");M.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");M.BYTE=new RegExp(He,"g");M.NUMERIC=new RegExp(Te,"g");M.ALPHANUMERIC=new RegExp(Qe,"g");const Je=new RegExp("^"+K+"$"),Ge=new RegExp("^"+Te+"$"),Ye=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");M.testKanji=function(t){return Je.test(t)};M.testNumeric=function(t){return Ge.test(t)};M.testAlphanumeric=function(t){return Ye.test(t)};(function(e){const t=ce,r=M;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return r.testNumeric(o)?e.NUMERIC:r.testAlphanumeric(o)?e.ALPHANUMERIC:r.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+i)}}e.from=function(o,a){if(e.isValid(o))return o;try{return n(o)}catch{return a}}})(v);(function(e){const t=p,r=q,n=O,i=v,o=ce,a=7973,s=t.getBCHDigit(a);function l(w,m,g){for(let N=1;N<=40;N++)if(m<=e.getCapacity(N,g,w))return N}function f(w,m){return i.getCharCountIndicator(w,m)+4}function h(w,m){let g=0;return w.forEach(function(N){const B=f(N.mode,m);g+=B+N.getBitsLength()}),g}function x(w,m){for(let g=1;g<=40;g++)if(h(w,g)<=e.getCapacity(g,m,i.MIXED))return g}e.from=function(m,g){return o.isValid(m)?parseInt(m,10):g},e.getCapacity=function(m,g,N){if(!o.isValid(m))throw new Error("Invalid QR Code version");typeof N>"u"&&(N=i.BYTE);const B=t.getSymbolTotalCodewords(m),d=r.getTotalCodewordsCount(m,g),C=(B-d)*8;if(N===i.MIXED)return C;const y=C-f(N,m);switch(N){case i.NUMERIC:return Math.floor(y/10*3);case i.ALPHANUMERIC:return Math.floor(y/11*2);case i.KANJI:return Math.floor(y/13);case i.BYTE:default:return Math.floor(y/8)}},e.getBestVersionForData=function(m,g){let N;const B=n.from(g,n.M);if(Array.isArray(m)){if(m.length>1)return x(m,B);if(m.length===0)return 1;N=m[0]}else N=m;return l(N.mode,N.getLength(),B)},e.getEncodedBits=function(m){if(!o.isValid(m)||m<7)throw new Error("Invalid QR Code version");let g=m<<12;for(;t.getBCHDigit(g)-s>=0;)g^=a<<t.getBCHDigit(g)-s;return m<<12|g}})(Pe);var Se={};const re=p,Ie=1335,Oe=21522,ye=re.getBCHDigit(Ie);Se.getEncodedBits=function(t,r){const n=t.bit<<3|r;let i=n<<10;for(;re.getBCHDigit(i)-ye>=0;)i^=Ie<<re.getBCHDigit(i)-ye;return(n<<10|i)^Oe};var pe={};const qe=v;function D(e){this.mode=qe.NUMERIC,this.data=e.toString()}D.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};D.prototype.getLength=function(){return this.data.length};D.prototype.getBitsLength=function(){return D.getBitsLength(this.data.length)};D.prototype.write=function(t){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),t.put(i,10);const o=this.data.length-r;o>0&&(n=this.data.substr(r),i=parseInt(n,10),t.put(i,o*3+1))};var We=D;const Ze=v,X=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function _(e){this.mode=Ze.ALPHANUMERIC,this.data=e}_.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};_.prototype.getLength=function(){return this.data.length};_.prototype.getBitsLength=function(){return _.getBitsLength(this.data.length)};_.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let n=X.indexOf(this.data[r])*45;n+=X.indexOf(this.data[r+1]),t.put(n,11)}this.data.length%2&&t.put(X.indexOf(this.data[r]),6)};var Xe=_;const ke=v;function F(e){this.mode=ke.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}F.getBitsLength=function(t){return t*8};F.prototype.getLength=function(){return this.data.length};F.prototype.getBitsLength=function(){return F.getBitsLength(this.data.length)};F.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)};var et=F;const tt=v,nt=p;function $(e){this.mode=tt.KANJI,this.data=e}$.getBitsLength=function(t){return t*13};$.prototype.getLength=function(){return this.data.length};$.prototype.getBitsLength=function(){return $.getBitsLength(this.data.length)};$.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=nt.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}};var rt=$,Re={exports:{}};(function(e){var t={single_source_shortest_paths:function(r,n,i){var o={},a={};a[n]=0;var s=t.PriorityQueue.make();s.push(n,0);for(var l,f,h,x,w,m,g,N,B;!s.empty();){l=s.pop(),f=l.value,x=l.cost,w=r[f]||{};for(h in w)w.hasOwnProperty(h)&&(m=w[h],g=x+m,N=a[h],B=typeof a[h]>"u",(B||N>g)&&(a[h]=g,s.push(h,g),o[h]=f))}if(typeof i<"u"&&typeof a[i]>"u"){var d=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(d)}return o},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],o=n;o;)i.push(o),r[o],o=r[o];return i.reverse(),i},find_path:function(r,n,i){var o=t.single_source_shortest_paths(r,n,i);return t.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(r){var n=t.PriorityQueue,i={},o;r=r||{};for(o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Re);var it=Re.exports;(function(e){const t=v,r=We,n=Xe,i=et,o=rt,a=M,s=p,l=it;function f(d){return unescape(encodeURIComponent(d)).length}function h(d,C,y){const u=[];let b;for(;(b=d.exec(y))!==null;)u.push({data:b[0],index:b.index,mode:C,length:b[0].length});return u}function x(d){const C=h(a.NUMERIC,t.NUMERIC,d),y=h(a.ALPHANUMERIC,t.ALPHANUMERIC,d);let u,b;return s.isKanjiModeEnabled()?(u=h(a.BYTE,t.BYTE,d),b=h(a.KANJI,t.KANJI,d)):(u=h(a.BYTE_KANJI,t.BYTE,d),b=[]),C.concat(y,u,b).sort(function(P,T){return P.index-T.index}).map(function(P){return{data:P.data,mode:P.mode,length:P.length}})}function w(d,C){switch(C){case t.NUMERIC:return r.getBitsLength(d);case t.ALPHANUMERIC:return n.getBitsLength(d);case t.KANJI:return o.getBitsLength(d);case t.BYTE:return i.getBitsLength(d)}}function m(d){return d.reduce(function(C,y){const u=C.length-1>=0?C[C.length-1]:null;return u&&u.mode===y.mode?(C[C.length-1].data+=y.data,C):(C.push(y),C)},[])}function g(d){const C=[];for(let y=0;y<d.length;y++){const u=d[y];switch(u.mode){case t.NUMERIC:C.push([u,{data:u.data,mode:t.ALPHANUMERIC,length:u.length},{data:u.data,mode:t.BYTE,length:u.length}]);break;case t.ALPHANUMERIC:C.push([u,{data:u.data,mode:t.BYTE,length:u.length}]);break;case t.KANJI:C.push([u,{data:u.data,mode:t.BYTE,length:f(u.data)}]);break;case t.BYTE:C.push([{data:u.data,mode:t.BYTE,length:f(u.data)}])}}return C}function N(d,C){const y={},u={start:{}};let b=["start"];for(let A=0;A<d.length;A++){const P=d[A],T=[];for(let I=0;I<P.length;I++){const S=P[I],E=""+A+I;T.push(E),y[E]={node:S,lastCount:0},u[E]={};for(let j=0;j<b.length;j++){const R=b[j];y[R]&&y[R].node.mode===S.mode?(u[R][E]=w(y[R].lastCount+S.length,S.mode)-w(y[R].lastCount,S.mode),y[R].lastCount+=S.length):(y[R]&&(y[R].lastCount=S.length),u[R][E]=w(S.length,S.mode)+4+t.getCharCountIndicator(S.mode,C))}}b=T}for(let A=0;A<b.length;A++)u[b[A]].end=0;return{map:u,table:y}}function B(d,C){let y;const u=t.getBestModeForData(d);if(y=t.from(C,u),y!==t.BYTE&&y.bit<u.bit)throw new Error('"'+d+'" cannot be encoded with mode '+t.toString(y)+`.
 Suggested mode is: `+t.toString(u));switch(y===t.KANJI&&!s.isKanjiModeEnabled()&&(y=t.BYTE),y){case t.NUMERIC:return new r(d);case t.ALPHANUMERIC:return new n(d);case t.KANJI:return new o(d);case t.BYTE:return new i(d)}}e.fromArray=function(C){return C.reduce(function(y,u){return typeof u=="string"?y.push(B(u,null)):u.data&&y.push(B(u.data,u.mode)),y},[])},e.fromString=function(C,y){const u=x(C,s.isKanjiModeEnabled()),b=g(u),A=N(b,y),P=l.find_path(A.map,"start","end"),T=[];for(let I=1;I<P.length-1;I++)T.push(A.table[P[I]].node);return e.fromArray(m(T))},e.rawSplit=function(C){return e.fromArray(x(C,s.isKanjiModeEnabled()))}})(pe);const Z=p,k=O,ot=$e,st=ze,at=be,lt=Ee,ie=xe,oe=q,ct=Ve,Y=Pe,ft=Se,dt=v,ee=pe;function gt(e,t){const r=e.size,n=lt.getPositions(t);for(let i=0;i<n.length;i++){const o=n[i][0],a=n[i][1];for(let s=-1;s<=7;s++)if(!(o+s<=-1||r<=o+s))for(let l=-1;l<=7;l++)a+l<=-1||r<=a+l||(s>=0&&s<=6&&(l===0||l===6)||l>=0&&l<=6&&(s===0||s===6)||s>=2&&s<=4&&l>=2&&l<=4?e.set(o+s,a+l,!0,!0):e.set(o+s,a+l,!1,!0))}}function ht(e){const t=e.size;for(let r=8;r<t-8;r++){const n=r%2===0;e.set(r,6,n,!0),e.set(6,r,n,!0)}}function ut(e,t){const r=at.getPositions(t);for(let n=0;n<r.length;n++){const i=r[n][0],o=r[n][1];for(let a=-2;a<=2;a++)for(let s=-2;s<=2;s++)a===-2||a===2||s===-2||s===2||a===0&&s===0?e.set(i+a,o+s,!0,!0):e.set(i+a,o+s,!1,!0)}}function mt(e,t){const r=e.size,n=Y.getEncodedBits(t);let i,o,a;for(let s=0;s<18;s++)i=Math.floor(s/3),o=s%3+r-8-3,a=(n>>s&1)===1,e.set(i,o,a,!0),e.set(o,i,a,!0)}function te(e,t,r){const n=e.size,i=ft.getEncodedBits(t,r);let o,a;for(o=0;o<15;o++)a=(i>>o&1)===1,o<6?e.set(o,8,a,!0):o<8?e.set(o+1,8,a,!0):e.set(n-15+o,8,a,!0),o<8?e.set(8,n-o-1,a,!0):o<9?e.set(8,15-o-1+1,a,!0):e.set(8,15-o-1,a,!0);e.set(n-8,8,1,!0)}function yt(e,t){const r=e.size;let n=-1,i=r-1,o=7,a=0;for(let s=r-1;s>0;s-=2)for(s===6&&s--;;){for(let l=0;l<2;l++)if(!e.isReserved(i,s-l)){let f=!1;a<t.length&&(f=(t[a]>>>o&1)===1),e.set(i,s-l,f),o--,o===-1&&(a++,o=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function wt(e,t,r){const n=new ot;r.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),dt.getCharCountIndicator(l.mode,e)),l.write(n)});const i=Z.getSymbolTotalCodewords(e),o=oe.getTotalCodewordsCount(e,t),a=(i-o)*8;for(n.getLengthInBits()+4<=a&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const s=(a-n.getLengthInBits())/8;for(let l=0;l<s;l++)n.put(l%2?17:236,8);return Nt(n,e,t)}function Nt(e,t,r){const n=Z.getSymbolTotalCodewords(t),i=oe.getTotalCodewordsCount(t,r),o=n-i,a=oe.getBlocksCount(t,r),s=n%a,l=a-s,f=Math.floor(n/a),h=Math.floor(o/a),x=h+1,w=f-h,m=new ct(w);let g=0;const N=new Array(a),B=new Array(a);let d=0;const C=new Uint8Array(e.buffer);for(let P=0;P<a;P++){const T=P<l?h:x;N[P]=C.slice(g,g+T),B[P]=m.encode(N[P]),g+=T,d=Math.max(d,T)}const y=new Uint8Array(n);let u=0,b,A;for(b=0;b<d;b++)for(A=0;A<a;A++)b<N[A].length&&(y[u++]=N[A][b]);for(b=0;b<w;b++)for(A=0;A<a;A++)y[u++]=B[A][b];return y}function Ct(e,t,r,n){let i;if(Array.isArray(e))i=ee.fromArray(e);else if(typeof e=="string"){let f=t;if(!f){const h=ee.rawSplit(e);f=Y.getBestVersionForData(h,r)}i=ee.fromString(e,f||40)}else throw new Error("Invalid data");const o=Y.getBestVersionForData(i,r);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const a=wt(t,r,i),s=Z.getSymbolSize(t),l=new st(s);return gt(l,t),ht(l),ut(l,t),te(l,r,0),t>=7&&mt(l,t),yt(l,a),isNaN(n)&&(n=ie.getBestMask(l,te.bind(null,l,r))),ie.applyMask(n,l),te(l,r,n),{modules:l,version:t,errorCorrectionLevel:r,maskPattern:n,segments:i}}Ne.create=function(t,r){if(typeof t>"u"||t==="")throw new Error("No input text");let n=k.M,i,o;return typeof r<"u"&&(n=k.from(r.errorCorrectionLevel,k.M),i=Y.from(r.version),o=ie.from(r.maskPattern),r.toSJISFunc&&Z.setToSJISFunction(r.toSJISFunc)),Ct(t,i,n,o)};var Me={},fe={};(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:o,scale:o?4:a,margin:i,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},e.getImageWidth=function(n,i){const o=e.getScale(n,i);return Math.floor((n+i.margin*2)*o)},e.qrToImageData=function(n,i,o){const a=i.modules.size,s=i.modules.data,l=e.getScale(a,o),f=Math.floor((a+o.margin*2)*l),h=o.margin*l,x=[o.color.light,o.color.dark];for(let w=0;w<f;w++)for(let m=0;m<f;m++){let g=(w*f+m)*4,N=o.color.light;if(w>=h&&m>=h&&w<f-h&&m<f-h){const B=Math.floor((w-h)/l),d=Math.floor((m-h)/l);N=x[s[B*a+d]?1:0]}n[g++]=N.r,n[g++]=N.g,n[g++]=N.b,n[g]=N.a}}})(fe);(function(e){const t=fe;function r(i,o,a){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,a,s){let l=s,f=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(f=n()),l=t.getOptions(l);const h=t.getImageWidth(o.modules.size,l),x=f.getContext("2d"),w=x.createImageData(h,h);return t.qrToImageData(w.data,o,l),r(x,f,h),x.putImageData(w,0,0),f},e.renderToDataURL=function(o,a,s){let l=s;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const f=e.render(o,a,l),h=l.type||"image/png",x=l.rendererOpts||{};return f.toDataURL(h,x.quality)}})(Me);var je={};const bt=fe;function we(e,t){const r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function ne(e,t,r){let n=e+t;return typeof r<"u"&&(n+=" "+r),n}function Et(e,t,r){let n="",i=0,o=!1,a=0;for(let s=0;s<e.length;s++){const l=Math.floor(s%t),f=Math.floor(s/t);!l&&!o&&(o=!0),e[s]?(a++,s>0&&l>0&&e[s-1]||(n+=o?ne("M",l+r,.5+f+r):ne("m",i,0),i=0,o=!1),l+1<t&&e[s+1]||(n+=ne("h",a),a=0)):i++}return n}je.render=function(t,r,n){const i=bt.getOptions(r),o=t.modules.size,a=t.modules.data,s=o+i.margin*2,l=i.color.light.a?"<path "+we(i.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",f="<path "+we(i.color.dark,"stroke")+' d="'+Et(a,o,i.margin)+'"/>',h='viewBox="0 0 '+s+" "+s+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+l+f+`</svg>
`;return typeof n=="function"&&n(null,w),w};const xt=_e,se=Ne,Le=Me,Bt=je;function de(e,t,r,n,i){const o=[].slice.call(arguments,1),a=o.length,s=typeof o[a-1]=="function";if(!s&&!xt())throw new Error("Callback required as last argument");if(s){if(a<2)throw new Error("Too few arguments provided");a===2?(i=r,r=t,t=n=void 0):a===3&&(t.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(r=t,t=n=void 0):a===2&&!t.getContext&&(n=r,r=t,t=void 0),new Promise(function(l,f){try{const h=se.create(r,n);l(e(h,t,n))}catch(h){f(h)}})}try{const l=se.create(r,n);i(null,e(l,t,n))}catch(l){i(l)}}V.create=se.create;V.toCanvas=de.bind(null,Le.render);V.toDataURL=de.bind(null,Le.renderToDataURL);V.toString=de.bind(null,function(e,t,r){return Bt.render(e,r)});const At=({product:e,sku:t=null,onGenerated:r,autoGenerate:n=!1,compact:i=!1})=>{const[o,a]=L.useState(!1),[s,l]=L.useState(null),f=()=>{var P,T,I,S;const g={}.VITE_PUBLIC_BASE_URL||window.location.origin,N=((P=e==null?void 0:e.name)==null?void 0:P["zh-TW"])||(e==null?void 0:e.name)||"",d=(Array.isArray(t==null?void 0:t.variantPath)?t.variantPath:[]).map((E,j)=>{var ge,he;const R=((ge=E==null?void 0:E.levelName)==null?void 0:ge["zh-TW"])||(E==null?void 0:E.level)||`層級${j+1}`,Ue=((he=E==null?void 0:E.optionName)==null?void 0:he["zh-TW"])||(E==null?void 0:E.option)||"選項";return`${R}: ${Ue}`}).join(" / ")||"基本款",C=Array.isArray(e==null?void 0:e.categories)?e.categories.map(E=>{var j;return((j=E==null?void 0:E.name)==null?void 0:j["zh-TW"])||(E==null?void 0:E.name)||(E==null?void 0:E.title)||(E==null?void 0:E.slug)||(E==null?void 0:E.id)}).filter(Boolean):[],y=`${g}/products/${(e==null?void 0:e.slug)||((T=e==null?void 0:e.urlSlug)==null?void 0:T["zh-TW"])||(e==null?void 0:e.id)||""}`,u=Array.isArray(t==null?void 0:t.images)&&t.images.length>0?((I=t.images[0])==null?void 0:I.url)||t.images[0]:null,b=Array.isArray(e==null?void 0:e.images)&&e.images.length>0?((S=e.images[0])==null?void 0:S.url)||e.images[0]:null,A=u||b||"";return{type:"product_bundle",url:y,productName:N,sku:(t==null?void 0:t.sku)||(t==null?void 0:t.fullSKU)||`${(e==null?void 0:e.skuPrefix)||""}BASE`,salePrice:(t==null?void 0:t.salePrice)??(t==null?void 0:t.price)??(e==null?void 0:e.price)??null,comparePrice:(t==null?void 0:t.comparePrice)??(e==null?void 0:e.comparePrice)??null,costPrice:(t==null?void 0:t.costPrice)??(e==null?void 0:e.costPrice)??null,variantInfo:d,categories:C,imageUrl:A,description:"商品連結 + SKU 資訊 + 圖片"}},h=async g=>{const N=(g==null?void 0:g.url)||JSON.stringify(g),B={errorCorrectionLevel:"M",margin:2,scale:6,color:{dark:"#000000",light:"#FFFFFF"}};return await V.toDataURL(N,B)},x=async()=>{a(!0);try{const g=f();if(!g)throw new Error("無效的QR Code類型");await new Promise(d=>setTimeout(d,1500));const N=await h(g),B={id:Date.now(),type:g.type,data:g,imageUrl:N,productId:e.id,skuId:(t==null?void 0:t.id)||null,createdAt:new Date().toISOString()};l(B),r&&r(B)}catch(g){console.error("QR Code生成失敗:",g),alert("QR Code生成失敗，請稍後再試")}finally{a(!1)}};L.useEffect(()=>{n&&!s&&!o&&x()},[n]);const w=()=>{if(!s)return;const g=document.createElement("a");g.href=s.imageUrl,g.download=`qr-${s.type}-${(t==null?void 0:t.sku)||e.skuPrefix||"product"}.svg`,document.body.appendChild(g),g.click(),document.body.removeChild(g)},m=()=>{if(!s)return;const g=JSON.stringify(s.data,null,2);navigator.clipboard.writeText(g).then(()=>{alert("QR Code數據已複製到剪貼簿")})};return i?c.jsx("div",{className:"qr-generator",children:s?c.jsx("div",{className:"text-center",children:c.jsx("img",{src:s.imageUrl,alt:"Generated QR Code",className:"w-56 h-56 mx-auto border rounded-lg shadow-md"})}):c.jsx("div",{className:"py-10 text-center text-sm text-gray-500 font-chinese",children:o?"生成中…":"準備中…"})}):c.jsxs("div",{className:"qr-generator glass rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(ue,{className:"w-6 h-6 text-[#cc824d] mr-2"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"QR Code 生成器（整合版）"})]}),c.jsx("div",{className:"flex items-center space-x-3 mb-6",children:c.jsx("button",{onClick:x,disabled:o,className:"flex-1 px-4 py-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-chinese flex items-center justify-center",children:o?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"生成中..."]}):c.jsxs(c.Fragment,{children:[c.jsx(ue,{className:"w-5 h-5 mr-2"}),"生成 QR Code"]})})}),s&&c.jsxs("div",{className:"border-t pt-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 font-chinese",children:"生成結果"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:m,className:"px-3 py-1 text-sm text-[#cc824d] border border-[#cc824d] rounded hover:bg-[#cc824d] hover:text-white transition-colors font-chinese",children:"複製數據"}),c.jsxs("button",{onClick:w,className:"px-3 py-1 text-sm bg-[#cc824d] text-white rounded hover:bg-[#b3723f] transition-colors font-chinese flex items-center",children:[c.jsx(De,{className:"w-4 h-4 mr-1"}),"下載"]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("img",{src:s.imageUrl,alt:"Generated QR Code",className:"w-48 h-48 mx-auto border rounded-lg shadow-md"}),c.jsx("p",{className:"text-sm text-gray-600 mt-2 font-chinese",children:"商品連結 + SKU 資訊 + 圖片"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"類型"}),c.jsx("p",{className:"text-sm text-gray-900",children:s.type})]}),s.data.url&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"連結"}),c.jsx("p",{className:"text-sm text-gray-900 break-all",children:s.data.url})]}),s.data.imageUrl&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"圖片"}),c.jsx("img",{src:s.data.imageUrl,alt:"Variant/Product",className:"w-24 h-24 object-cover rounded border"})]}),s.data.sku&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"SKU"}),c.jsx("p",{className:"text-sm text-gray-900",children:s.data.sku})]}),s.data.variantInfo&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"變體資訊"}),c.jsx("p",{className:"text-sm text-gray-900",children:s.data.variantInfo})]}),typeof s.data.salePrice<"u"&&c.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"售價"}),c.jsx("p",{className:"text-sm text-gray-900",children:s.data.salePrice!=null?`NT$${Number(s.data.salePrice).toLocaleString()}`:"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"原價"}),c.jsx("p",{className:"text-sm text-gray-900",children:s.data.comparePrice!=null?`NT$${Number(s.data.comparePrice).toLocaleString()}`:"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"成本價"}),c.jsx("p",{className:"text-sm text-gray-900",children:s.data.costPrice!=null?`NT$${Number(s.data.costPrice).toLocaleString()}`:"-"})]})]}),Array.isArray(s.data.categories)&&s.data.categories.length>0&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"分類"}),c.jsx("p",{className:"text-sm text-gray-900",children:s.data.categories.join(" / ")})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"生成時間"}),c.jsx("p",{className:"text-sm text-gray-900",children:new Date(s.createdAt).toLocaleString("zh-TW")})]})]})]})]})]})},pt=({isOpen:e,onClose:t,product:r,sku:n,details:i,title:o,size:a="max-w-2xl",autoGenerate:s=!0,headerClass:l})=>{var B;const[f,h]=L.useState(null),[x,w]=L.useState(!1),m=L.useMemo(()=>e?c.jsx("div",{className:"sr-only","aria-hidden":!0,children:c.jsx(At,{compact:!0,autoGenerate:s,product:r,sku:n,onGenerated:d=>{h(d),w(!1)}})}):null,[e,s,r,n]);L.useEffect(()=>{e&&(w(!0),h(null))},[e]);const g=L.useMemo(()=>{var y;const d=Array.isArray(n==null?void 0:n.variantPath)?n.variantPath:[],C=u=>u.map((b,A)=>{var I,S;const P=((I=b==null?void 0:b.levelName)==null?void 0:I["zh-TW"])||(b==null?void 0:b.level)||`層級${A+1}`,T=((S=b==null?void 0:b.optionName)==null?void 0:S["zh-TW"])||(b==null?void 0:b.option)||"選項";return`${P}: ${T}`}).join(" / ");return[{label:"商品名稱",value:((y=r==null?void 0:r.name)==null?void 0:y["zh-TW"])||(r==null?void 0:r.name)||"-"},{label:"SKU",value:(n==null?void 0:n.sku)||(n==null?void 0:n.fullSKU)||"-",mono:!0},{label:"規格",value:d.length?C(d):"-"},{label:"分類",value:Array.isArray(r==null?void 0:r.categories)?r.categories.map(u=>(u==null?void 0:u.name)||u).join("、"):"-"},{label:"售價",value:((n==null?void 0:n.salePrice)??(r==null?void 0:r.price))!=null?`NT$ ${Number((n==null?void 0:n.salePrice)??(r==null?void 0:r.price)).toLocaleString()}`:"-"},{label:"原價",value:((n==null?void 0:n.comparePrice)??(r==null?void 0:r.comparePrice))!=null?`NT$ ${Number((n==null?void 0:n.comparePrice)??(r==null?void 0:r.comparePrice)).toLocaleString()}`:"-"},{label:"成本價",value:((n==null?void 0:n.costPrice)??(r==null?void 0:r.costPrice))!=null?`NT$ ${Number((n==null?void 0:n.costPrice)??(r==null?void 0:r.costPrice)).toLocaleString()}`:"-"}]},[r,n]),N=i&&Array.isArray(i)?i:g;return c.jsxs(ve,{isOpen:e,onClose:t,title:o||`QR 預覽 - ${(n==null?void 0:n.sku)||(n==null?void 0:n.fullSKU)||""}`,size:a,...l?{headerClass:l}:{},children:[c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsx("div",{className:"flex items-start justify-center min-h-[18rem]",children:f!=null&&f.imageUrl?c.jsx("img",{src:f.imageUrl,alt:"Generated QR Code",className:"w-64 h-64 mx-auto border rounded-lg shadow-md bg-white"}):c.jsx("div",{className:"py-10 text-center text-sm text-gray-500",children:x?"生成中…":"準備中…"})}),c.jsxs("div",{className:"text-sm space-y-2",children:[N.map((d,C)=>c.jsxs("div",{className:"flex justify-between gap-3",children:[c.jsx("span",{className:"text-gray-600 font-chinese",children:d.label}),c.jsx("span",{className:`${d.mono?"font-mono":"font-chinese"} text-gray-900 max-w-[60%] truncate text-right`,title:String(d.value||""),children:d.value||"-"})]},C)),((B=f==null?void 0:f.data)==null?void 0:B.url)&&c.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[c.jsx("button",{onClick:()=>navigator.clipboard.writeText(f.data.url),className:"px-3 py-2 border border-[#cc824d] text-[#cc824d] rounded hover:bg-[#cc824d] hover:text-white transition-colors text-sm font-chinese",children:"複製連結"}),c.jsx("button",{onClick:()=>{const d=document.createElement("a");d.href=f.imageUrl,d.download=`qr-${(n==null?void 0:n.sku)||"product"}.png`,document.body.appendChild(d),d.click(),document.body.removeChild(d)},className:"px-3 py-2 bg-[#cc824d] text-white rounded hover:bg-[#b3723f] transition-colors text-sm font-chinese",children:"下載"})]})]})]})}),m]})};export{pt as Q};
