import{r as x,j as e,A as oe}from"./index-09c3368c.js";import{G as ie}from"./GlassModal-a6c5f610.js";import{T as de}from"./TabNavigation-8088ee11.js";import{S as xe}from"./StandardTable-d1cd024c.js";import{S as I}from"./SearchableSelect-bf34f521.js";import{F as me}from"./FunnelIcon-694d59fc.js";import{U as he}from"./UsersIcon-56853008.js";import{P as ge}from"./PlusIcon-3d2e3b30.js";import{T as re}from"./TagIcon-88ee5672.js";import{G as pe}from"./GiftIcon-2b55a02f.js";import{E as ue}from"./EyeIcon-bb65ea7b.js";import{P as be}from"./PencilIcon-619ae986.js";import{C as je}from"./CreditCardIcon-8584d4ca.js";import"./XMarkIcon-93d59038.js";import"./chevron-down-5d12351e.js";function ve({title:t,titleId:l,...r},c){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},r),t?x.createElement("title",{id:l},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const Ne=x.forwardRef(ve),fe=Ne;function ye({title:t,titleId:l,...r},c){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},r),t?x.createElement("title",{id:l},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const we=x.forwardRef(ye),ke=we,Ce=Array.from({length:20}).map((t,l)=>({id:`MBR-${100+l}`,memberNo:`M-${100+l}`,name:["çŽ‹å°æ˜Ž","æŽå°ç¾Ž","é™³å¤§æ–‡","æž—éœæ€¡","å¼µé›…å©·"][l%5],email:`user${l}@example.com`,phone:`09${String(1e7+l).slice(0,8)}`,level:["ä¸€èˆ¬","é‡‘å¡","éŠ€å¡","VIP"][l%4],status:l%3===0?"inactive":"active",totalOrders:Math.floor(Math.random()*20),totalSpent:Math.floor(Math.random()*5e4)})),v={async getMembers(){return await new Promise(t=>setTimeout(t,80)),{success:!0,data:[...Ce]}}};function Se(t){return Array.from({length:Math.floor(Math.random()*6)+2}).map((l,r)=>({id:`${t}-ORD-${r+1}`,date:new Date(Date.now()-r*864e5).toISOString().slice(0,10),items:Math.floor(Math.random()*4)+1,amount:Math.floor(Math.random()*4e3)+500,status:["pending","processing","shipped","delivered"][r%4]}))}function Me(t){return Array.from({length:Math.floor(Math.random()*3)}).map((l,r)=>({id:`${t}-RF-${r+1}`,date:new Date(Date.now()-r*1728e5).toISOString().slice(0,10),amount:Math.floor(Math.random()*2e3)+200,status:["requested","approved","rejected"][r%3]}))}const ne={async getOrdersByMember(t){return await new Promise(l=>setTimeout(l,60)),{success:!0,data:Se(t)}},async getRefundsByMember(t){return await new Promise(l=>setTimeout(l,60)),{success:!0,data:Me(t)}}},u=t=>`NT$ ${Number(t||0).toLocaleString()}`,De=({detail:t})=>{var i,s,o,g,R,w,k,C,S,j,f,M,N,h,y,E,D,L,O,$,n,d,m,p,T,A,F,B,V,P,_,z,G,q,H,K,W,U,Z,Y,J,Q,X,ee,se,te,ae,le;const[l,r]=x.useState("items"),c=t.type==="order",a=t.data;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:c?"è¨‚å–®ç·¨è™Ÿ":"é€€æ¬¾ç·¨è™Ÿ"}),e.jsx("div",{className:"font-mono text-sm mt-1",children:c?a.orderNo:a.refundNo})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"å»ºç«‹æ™‚é–“"}),e.jsx("div",{className:"text-sm mt-1",children:a.createdAt||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"ç‹€æ…‹"}),e.jsx("div",{className:"mt-1 inline-flex px-2 py-0.5 text-xs rounded bg-gray-100 text-gray-700",children:a.status||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:c?"é‡‘é¡":"é€€æ¬¾é‡‘é¡"}),e.jsx("div",{className:`text-sm mt-1 ${c?"font-semibold":"text-red-600 font-semibold"}`,children:c?u((i=a.totals)==null?void 0:i.grandTotal):`- ${u((s=a.amounts)==null?void 0:s.totalRefund)}`})]})]}),e.jsx(de,{mode:"controlled",activeKey:l,onTabChange:b=>r(b.key),layout:"left",tabs:[{key:"items",label:"å•†å“æ˜Žç´°"},{key:"shipping",label:"é…é€ç´°ç¯€"},{key:"payment",label:"ä»˜æ¬¾èˆ‡é‡‘é¡"},{key:"invoice",label:"ç™¼ç¥¨/æŠ˜è®“"}]}),l==="items"&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs text-gray-500 px-2 mb-1",children:[e.jsx("div",{className:"col-span-6",children:"å•†å“"}),e.jsx("div",{className:"col-span-2 text-right",children:"å–®åƒ¹"}),e.jsx("div",{className:"col-span-2 text-right",children:"æ•¸é‡"}),e.jsx("div",{className:"col-span-2 text-right",children:"å°è¨ˆ"})]}),e.jsx("div",{className:"space-y-2",children:(a.items||[]).map((b,ce)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center bg-white/60 rounded px-2 py-3",children:[e.jsxs("div",{className:"col-span-6 flex items-center gap-3",children:[b.image&&e.jsx("img",{src:b.image,alt:"",className:"w-10 h-10 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:b.name}),e.jsx("div",{className:"text-xs text-gray-500",children:b.sku||""})]})]}),e.jsx("div",{className:"col-span-2 text-right",children:u(b.price)}),e.jsxs("div",{className:"col-span-2 text-right",children:["x ",b.qty]}),e.jsx("div",{className:"col-span-2 text-right font-semibold",children:u((b.price||0)*(b.qty||0))})]},ce))})]}),l==="shipping"&&e.jsx("div",{className:"text-sm grid grid-cols-2 gap-4",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"é…é€æ–¹å¼"}),e.jsx("div",{className:"font-medium",children:((o=a.shipping)==null?void 0:o.method)==="home"?"å®…é…":"è¶…å•†å–è²¨"}),((g=a.shipping)==null?void 0:g.method)==="home"?e.jsxs("div",{className:"text-gray-700 mt-2",children:[(w=(R=a.shipping)==null?void 0:R.address)==null?void 0:w.postalCode," ",(C=(k=a.shipping)==null?void 0:k.address)==null?void 0:C.city,(j=(S=a.shipping)==null?void 0:S.address)==null?void 0:j.district,(M=(f=a.shipping)==null?void 0:f.address)==null?void 0:M.streetAddress]}):e.jsxs("div",{className:"text-gray-700 mt-2",children:[(h=(N=a.shipping)==null?void 0:N.store)==null?void 0:h.name,"ï¼ˆ",(E=(y=a.shipping)==null?void 0:y.store)==null?void 0:E.id,"ï¼‰- ",(L=(D=a.shipping)==null?void 0:D.store)==null?void 0:L.address]})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"ç‰©æµè³‡è¨Š"}),e.jsxs("div",{children:["ç‰©æµï¼š",((O=a.shipping)==null?void 0:O.carrier)||"â€”"]}),e.jsxs("div",{children:["è¿½è¹¤ï¼š",(($=a.shipping)==null?void 0:$.trackingNo)||"â€”"]}),e.jsxs("div",{children:["ç‹€æ…‹ï¼š",a.status||"â€”"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"é€€è²¨æ–¹å¼"}),e.jsx("div",{className:"font-medium",children:((n=a.shippingReturn)==null?void 0:n.method)==="home"?"å®…é…":"è¶…å•†å¯„ä»¶"}),((d=a.shippingReturn)==null?void 0:d.method)==="home"?e.jsx("div",{className:"text-gray-700 mt-2",children:((p=(m=a.shippingReturn)==null?void 0:m.address)==null?void 0:p.postalCode)||""}):e.jsxs("div",{className:"text-gray-700 mt-2",children:[((T=a.shippingReturn)==null?void 0:T.storeName)||"","ï¼ˆ",((A=a.shippingReturn)==null?void 0:A.storeId)||"","ï¼‰"]})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"ç‰©æµè³‡è¨Š"}),e.jsxs("div",{children:["ç‰©æµï¼š",((F=a.shippingReturn)==null?void 0:F.carrier)||((B=a.shippingReturn)==null?void 0:B.provider)||"â€”"]}),e.jsxs("div",{children:["è¿½è¹¤ï¼š",((V=a.shippingReturn)==null?void 0:V.trackingNo)||"â€”"]}),e.jsxs("div",{children:["ç‹€æ…‹ï¼š",a.status||"â€”"]})]})]})}),l==="payment"&&e.jsxs("div",{className:"text-sm space-y-3",children:[e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:c?"ä»˜æ¬¾æ–¹å¼":"é€€æ¬¾æ–¹å¼"}),e.jsxs("div",{children:[((P=a.payment)==null?void 0:P.method)||"â€”","ï¼ˆ",((_=a.payment)==null?void 0:_.status)||"â€”","ï¼‰"]})]}),c?e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"å°è¨ˆ"}),e.jsx("div",{className:"font-medium mt-1",children:u((z=a.totals)==null?void 0:z.subtotal)})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"æŠ˜æ‰£"}),e.jsx("div",{className:"font-medium mt-1",children:u((G=a.totals)==null?void 0:G.discount)})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"é‹è²»"}),e.jsx("div",{className:"font-medium mt-1",children:u((q=a.totals)==null?void 0:q.shipping)})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"æ‡‰ä»˜é‡‘é¡"}),e.jsx("div",{className:"font-semibold mt-1",children:u((H=a.totals)==null?void 0:H.grandTotal)})]})]}):e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"é€€è²¨å•†å“é‡‘é¡"}),e.jsx("div",{className:"font-medium mt-1",children:u((K=a.amounts)==null?void 0:K.subtotal)})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"é€€é‹è²»"}),e.jsx("div",{className:"font-medium mt-1",children:u((W=a.amounts)==null?void 0:W.shippingRefund)})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"é€€æ¬¾ç¸½é¡"}),e.jsx("div",{className:"font-semibold text-red-600 mt-1",children:u((U=a.amounts)==null?void 0:U.totalRefund)})]})]})]}),l==="invoice"&&e.jsx("div",{className:"text-sm grid grid-cols-2 gap-3",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"ç™¼ç¥¨é¡žåž‹"}),e.jsx("div",{className:"mt-1",children:((Z=a.invoice)==null?void 0:Z.type)||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"ç™¼ç¥¨è™Ÿç¢¼"}),e.jsx("div",{className:"mt-1",children:((Y=a.invoice)==null?void 0:Y.number)||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"è¼‰å…·"}),e.jsx("div",{className:"mt-1",children:((J=a.invoice)==null?void 0:J.carrier)||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"æŠ¬é ­"}),e.jsx("div",{className:"mt-1",children:((Q=a.invoice)==null?void 0:Q.title)||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"é–‹ç«‹æ—¥æœŸ"}),e.jsx("div",{className:"mt-1",children:((X=a.invoice)==null?void 0:X.issuedAt)||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"ç‹€æ…‹"}),e.jsx("div",{className:"mt-1",children:((ee=a.invoice)==null?void 0:ee.status)||"â€”"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"é¡žåž‹"}),e.jsx("div",{className:"mt-1",children:((se=a.invoice)==null?void 0:se.type)||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"æŠ˜è®“å–®è™Ÿ"}),e.jsx("div",{className:"mt-1",children:((te=a.invoice)==null?void 0:te.number)||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"é–‹ç«‹æ—¥æœŸ"}),e.jsx("div",{className:"mt-1",children:((ae=a.invoice)==null?void 0:ae.issuedAt)||"â€”"})]}),e.jsxs("div",{className:"glass rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"ç‹€æ…‹"}),e.jsx("div",{className:"mt-1",children:((le=a.invoice)==null?void 0:le.status)||"â€”"})]})]})})]})},Ie=["å°åŒ—å¸‚","æ–°åŒ—å¸‚","æ¡ƒåœ’å¸‚","å°ä¸­å¸‚","å°å—å¸‚","é«˜é›„å¸‚"];function Re(t){return{å°åŒ—å¸‚:["ä¸­æ­£å€","å¤§å®‰å€","ä¿¡ç¾©å€"],æ–°åŒ—å¸‚:["æ¿æ©‹å€","æ–°åº—å€","æ–°èŽŠå€"],æ¡ƒåœ’å¸‚:["æ¡ƒåœ’å€","ä¸­å£¢å€","é¾œå±±å€"]}[t]||[]}const Ee=({newAddress:t,setNewAddress:l,onSave:r,saving:c})=>{const a=x.useMemo(()=>(Ie||[]).map(s=>({value:s,label:s})),[]),i=x.useMemo(()=>t.city?Re(t.city).map(s=>({value:s.name,label:`${s.name}ï¼ˆ${s.zip}ï¼‰`,zip:s.zip})):[],[t.city]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"æ”¶ä»¶äºº"}),e.jsx("input",{value:t.contactName||"",onChange:s=>l(o=>({...o,contactName:s.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"çŽ‹å°æ˜Ž"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"é›»è©±"}),e.jsx("input",{value:t.phone||"",onChange:s=>l(o=>({...o,phone:s.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"09xx-xxx-xxx"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"ç¸£å¸‚"}),e.jsx(I,{options:a,value:t.city||null,onChange:s=>l(o=>({...o,city:s,district:"",postalCode:""})),placeholder:"é¸æ“‡ç¸£å¸‚"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"è¡Œæ”¿å€"}),e.jsx(I,{options:i,value:t.district||null,onChange:(s,o)=>l(g=>({...g,district:s,postalCode:(o==null?void 0:o.zip)||""})),placeholder:"é¸æ“‡è¡Œæ”¿å€",disabled:!t.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"éƒµéžå€è™Ÿ"}),e.jsx("input",{value:t.postalCode||"",onChange:s=>l(o=>({...o,postalCode:s.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"e.g., 100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"è©³ç´°åœ°å€"}),e.jsx("input",{value:t.streetAddress||"",onChange:s=>l(o=>({...o,streetAddress:s.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"æŸæŸè·¯ 123 è™Ÿ 5 æ¨“"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!t.isDefault,onChange:s=>l(o=>({...o,isDefault:s.target.checked}))}),"è¨­ç‚ºé è¨­åœ°å€"]}),e.jsx("button",{onClick:r,disabled:!!c,className:"px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",children:c?"å„²å­˜ä¸­â€¦":"æ–°å¢žåœ°å€"})]})]})},Le=[{value:"711",label:"7-ELEVEN",icon:()=>e.jsx("span",{className:"inline-block w-4 h-4 rounded-sm bg-green-600"})},{value:"familymart",label:"å…¨å®¶ FamilyMart",icon:()=>e.jsx("span",{className:"inline-block w-4 h-4 rounded-sm bg-emerald-500"})},{value:"hilife",label:"èŠçˆ¾å¯Œ Hi-Life",icon:()=>e.jsx("span",{className:"inline-block w-4 h-4 rounded-sm bg-red-500"})},{value:"okmart",label:"OK mart",icon:()=>e.jsx("span",{className:"inline-block w-4 h-4 rounded-sm bg-rose-500"})}],Oe=({newAddress:t,setNewAddress:l,onSave:r,saving:c})=>{const a=x.useMemo(()=>Le.map(i=>({value:i.value,label:i.label,icon:i.icon})),[]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"å–ä»¶äºº"}),e.jsx("input",{value:t.contactName||"",onChange:i=>l(s=>({...s,contactName:i.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"çŽ‹å°æ˜Ž"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"é›»è©±"}),e.jsx("input",{value:t.phone||"",onChange:i=>l(s=>({...s,phone:i.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"09xx-xxx-xxx"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"è¶…å•†"}),e.jsx(I,{options:a,value:t.provider||null,onChange:i=>l(s=>({...s,provider:i})),placeholder:"é¸æ“‡å“ç‰Œ"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"é–€å¸‚åç¨±"}),e.jsx("input",{value:t.storeName||"",onChange:i=>l(s=>({...s,storeName:i.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"å¦‚ å°åŒ—ç«™å‰é–€å¸‚"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"é–€å¸‚ä»£è™Ÿ"}),e.jsx("input",{value:t.storeId||"",onChange:i=>l(s=>({...s,storeId:i.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"e.g., 123456"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"é–€å¸‚åœ°å€"}),e.jsx("input",{value:t.storeAddress||"",onChange:i=>l(s=>({...s,storeAddress:i.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"å®Œæ•´åœ°å€"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!t.isDefault,onChange:i=>l(s=>({...s,isDefault:i.target.checked}))}),"è¨­ç‚ºé è¨­é–€å¸‚"]}),e.jsx("button",{onClick:r,disabled:!!c,className:"px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",children:c?"å„²å­˜ä¸­â€¦":"æ–°å¢žé–€å¸‚"})]})]})},$e=({selectedLevel:t,onChangeLevel:l,selectedStatus:r,onChangeStatus:c,total:a})=>e.jsx("div",{className:"glass rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5 text-gray-400"}),e.jsx(I,{options:[{value:"å…¨éƒ¨",label:"å…¨éƒ¨ç­‰ç´š"},{value:"VIP",label:"VIP"},{value:"é‡‘å¡",label:"é‡‘å¡"},{value:"éŠ€å¡",label:"éŠ€å¡"},{value:"ä¸€èˆ¬",label:"ä¸€èˆ¬"}],value:t,onChange:l,placeholder:"é¸æ“‡æœƒå“¡ç­‰ç´š",className:"w-36"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"w-5 h-5 text-gray-400"}),e.jsx(I,{options:[{value:"å…¨éƒ¨",label:"å…¨éƒ¨ç‹€æ…‹"},{value:"active",label:"æ´»å‹•"},{value:"inactive",label:"ä¼‘çœ "}],value:r,onChange:c,placeholder:"é¸æ“‡æœƒå“¡ç‹€æ…‹",className:"w-28"})]}),e.jsxs("div",{className:"text-sm text-gray-500 font-chinese",children:["å…± ",a," ä½æœƒå“¡"]})]})}),Te=({orders:t,onOpen:l})=>!t||t.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"å°šç„¡è¨‚å–®"}):e.jsx("div",{className:"space-y-3",children:t.map(r=>e.jsx("button",{className:"w-full text-left glass rounded-xl p-4 hover:bg-white/60 transition",onClick:()=>l({type:"order",data:r}),children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between",children:[e.jsx("div",{className:"font-mono text-sm",children:r.orderNo}),e.jsx("div",{className:"text-sm text-gray-600",children:r.createdAt}),e.jsxs("div",{className:"text-sm font-semibold",children:["NT$ ",r.totals.grandTotal.toLocaleString()]}),e.jsx("div",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-700",children:r.status})]})},r.id))}),Ae=({refunds:t,onOpen:l})=>!t||t.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"å°šç„¡é€€æ¬¾ç´€éŒ„"}):e.jsx("div",{className:"space-y-3",children:t.map(r=>e.jsx("button",{className:"w-full text-left glass rounded-xl p-4 hover:bg-white/60 transition",onClick:()=>l({type:"refund",data:r}),children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between",children:[e.jsx("div",{className:"font-mono text-sm",children:r.refundNo}),e.jsx("div",{className:"text-sm text-gray-600",children:r.createdAt}),e.jsxs("div",{className:"text-sm font-semibold text-red-600",children:["- NT$ ",r.amounts.totalRefund.toLocaleString()]}),e.jsx("div",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-700",children:r.status})]})},r.id))}),Fe=({addresses:t,memberId:l,refreshAfter:r,dataManager:c})=>{const a=(t||[]).filter(i=>i.type==="home");return a.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"å°šç„¡å®…é…åœ°å€"}):e.jsx("div",{className:"space-y-3",children:a.map(i=>e.jsxs("div",{className:"glass rounded-xl p-4 flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-chinese font-semibold",children:[i.contactName,"ï¼ˆ",i.phone,"ï¼‰",i.isDefault&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded",children:"é è¨­"})]}),e.jsxs("div",{className:"text-gray-600",children:[i.postalCode," ",i.city,i.district,i.streetAddress]})]}),e.jsxs("div",{className:"flex gap-2 mt-0",children:[!i.isDefault&&e.jsx("button",{className:"px-3 py-1 text-xs bg-blue-600 text-white rounded",onClick:async()=>{await c.setDefaultShippingAddress(l,i.id),await r()},children:"è¨­ç‚ºé è¨­"}),e.jsx("button",{className:"px-3 py-1 text-xs bg-red-600 text-white rounded",onClick:async()=>{await c.deleteShippingAddress(l,i.id),await r()},children:"åˆªé™¤"})]})]},i.id))})},Be=({addresses:t,memberId:l,refreshAfter:r,dataManager:c})=>{const a=(t||[]).filter(i=>i.type==="cvs");return a.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"å°šç„¡è¶…å•†å–è²¨åœ°å€"}):e.jsx("div",{className:"space-y-3",children:a.map(i=>e.jsxs("div",{className:"glass rounded-xl p-4 flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-chinese font-semibold",children:[i.provider," é–€å¸‚",i.isDefault&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded",children:"é è¨­"})]}),e.jsxs("div",{className:"text-gray-600",children:[i.storeName,"ï¼ˆ",i.storeId,"ï¼‰- ",i.storeAddress]})]}),e.jsxs("div",{className:"flex gap-2 mt-0",children:[!i.isDefault&&e.jsx("button",{className:"px-3 py-1 text-xs bg-blue-600 text-white rounded",onClick:async()=>{await c.setDefaultShippingAddress(l,i.id),await r()},children:"è¨­ç‚ºé è¨­"}),e.jsx("button",{className:"px-3 py-1 text-xs bg-red-600 text-white rounded",onClick:async()=>{await c.deleteShippingAddress(l,i.id),await r()},children:"åˆªé™¤"})]})]},i.id))})},Ve=[],ss=()=>{const[t,l]=x.useState("å…¨éƒ¨"),[r,c]=x.useState("å…¨éƒ¨"),[a,i]=x.useState(!1),[s,o]=x.useState(null),[g,R]=x.useState("profile"),[w,k]=x.useState([]),[C,S]=x.useState([]),[j,f]=x.useState(null),[M,N]=x.useState(Ve),[h,y]=x.useState({type:"home",contactName:"",phone:"",postalCode:"",city:"",district:"",streetAddress:"",provider:"7-ELEVEN",storeId:"",storeName:"",storeAddress:""});x.useEffect(()=>{(async()=>{const{success:d,data:m}=await v.getMembers();d&&N(m)})()},[]),x.useEffect(()=>{(async()=>{if(s!=null&&s.id){const{success:d,data:m}=await ne.getOrdersByMember(s.id);d&&k(m);const p=await ne.getRefundsByMember(s.id);p.success&&S(p.data)}else k([]),S([])})()},[s]);const E=()=>f(null),D=x.useMemo(()=>M.filter(d=>{const m=t==="å…¨éƒ¨"||d.level===t,p=r==="å…¨éƒ¨"||d.status===r;return m&&p}),[t,r,M]),L=n=>{const d={VIP:{bg:"bg-purple-100",text:"text-purple-700",icon:"ðŸ‘‘"},é‡‘å¡:{bg:"bg-yellow-100",text:"text-yellow-700",icon:"ðŸ¥‡"},éŠ€å¡:{bg:"bg-gray-100",text:"text-gray-700",icon:"ðŸ¥ˆ"},ä¸€èˆ¬:{bg:"bg-blue-100",text:"text-blue-700",icon:"âœ…"}},m=d[n]||d.ä¸€èˆ¬;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-bold rounded font-chinese ${m.bg} ${m.text}`,children:[m.icon," ",n]})},O=n=>n==="active"?e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-green-100 text-green-700 rounded font-chinese",children:"æ´»å‹•"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-red-100 text-red-700 rounded font-chinese",children:"ä¼‘çœ "}),$=[{key:"memberNo",label:"æœƒå“¡ç·¨è™Ÿ",sortable:!0,render:n=>e.jsx("span",{className:"font-mono text-sm",children:n})},{key:"name",label:"å§“å",sortable:!0,render:n=>e.jsx("span",{className:"font-chinese font-medium",children:n})},{key:"contact",label:"è¯çµ¡è³‡æ–™",sortable:!1,render:(n,d)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:d.email}),e.jsx("div",{className:"text-gray-500",children:d.phone})]})},{key:"level",label:"æœƒå“¡ç­‰ç´š",sortable:!0,render:n=>L(n)},{key:"totalSpent",label:"æ¶ˆè²»é‡‘é¡",sortable:!0,render:n=>e.jsxs("span",{className:"font-bold text-green-600",children:["NT$ ",Number(n||0).toLocaleString()]})},{key:"points",label:"ç©åˆ†",sortable:!0,render:n=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{className:"w-4 h-4 text-amber-500 mr-1"}),n]})},{key:"orders",label:"è¨‚å–®æ•¸",sortable:!0},{key:"status",label:"ç‹€æ…‹",sortable:!1,render:n=>O(n)},{key:"tags",label:"æ¨™ç±¤",sortable:!1,render:(n=[])=>e.jsx("div",{className:"flex flex-wrap gap-1",children:n.slice(0,2).map((d,m)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded font-chinese",children:[e.jsx(re,{className:"w-3 h-3 mr-1"}),d]},m))})},{key:"actions",label:"æ“ä½œ",sortable:!1,render:(n,d)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"æŸ¥çœ‹è©³æƒ…",onClick:()=>o(d),children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"ç·¨è¼¯",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"æºé€šç´€éŒ„",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-amber-600 hover:bg-amber-100 rounded",title:"ç©åˆ†ç®¡ç†",children:e.jsx(je,{className:"w-4 h-4"})})]})}];return e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen",children:e.jsxs("div",{className:oe.contentContainerFluid,children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"w-8 h-8 text-amber-500 mr-3"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-chinese",children:"æœƒå“¡ç®¡ç†ç³»çµ±"})]}),e.jsxs("button",{className:"btn btn-primary flex items-center",onClick:()=>i(!0),children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),"æ–°å¢žæœƒå“¡"]})]}),e.jsx($e,{selectedLevel:t,onChangeLevel:l,selectedStatus:r,onChangeStatus:c,total:D.length}),e.jsx(xe,{data:D,columns:$,title:"æœƒå“¡æ¸…å–®",emptyMessage:"æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„æœƒå“¡è³‡æ–™",exportFileName:"æœƒå“¡æ¸…å–®"}),e.jsx(ie,{isOpen:!!s,onClose:()=>{f(null),o(null)},title:"æœƒå“¡è©³æƒ…",size:"max-w-2xl",children:s&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(de,{mode:"controlled",activeKey:g,onTabChange:n=>R(n.key),layout:"left",tabs:[{key:"profile",label:"åŸºæœ¬è³‡æ–™"},{key:"orders",label:`è¨‚å–® (${w.length})`},{key:"home",label:"å®…é…åœ°å€"},{key:"cvs",label:"è¶…å•†å–è²¨åœ°å€"},{key:"refunds",label:`é€€æ¬¾ (${C.length})`}]}),g==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"æœƒå“¡ç·¨è™Ÿ"}),e.jsx("div",{className:"text-gray-900",children:s.memberNo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"å§“å"}),e.jsx("div",{className:"text-gray-900 font-chinese",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"Email"}),e.jsx("div",{className:"text-gray-900",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"é›»è©±"}),e.jsx("div",{className:"text-gray-900",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"æ€§åˆ¥"}),e.jsx("div",{className:"text-gray-900 font-chinese",children:s.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"ç”Ÿæ—¥"}),e.jsx("div",{className:"text-gray-900",children:s.birthday})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"è¨»å†Šæ—¥æœŸ"}),e.jsx("div",{className:"text-gray-900",children:s.registerDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"æœ€å¾Œç™»å…¥"}),e.jsx("div",{className:"text-gray-900",children:s.lastLoginDate})]})]}),e.jsxs("div",{className:"border-t border-white/30 pt-6",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"æœƒå“¡æ¨™ç±¤"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(s.tags||[]).map((n,d)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-sm bg-blue-100/80 text-blue-700 rounded-full font-chinese backdrop-blur-sm",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),n]},d))})]})]}),g==="orders"&&e.jsx(Te,{orders:w,onOpen:f}),g==="refunds"&&e.jsx(Ae,{refunds:C,onOpen:f}),g==="home"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(Fe,{addresses:s.shippingAddresses,memberId:s.id,dataManager:v,refreshAfter:async()=>{const{data:n}=await v.getMembers();N(n),o(n.find(d=>d.id===s.id))}}),e.jsx("div",{className:"mt-2",children:e.jsx(Ee,{newAddress:h,setNewAddress:y,onSave:async()=>{const n={type:"home",contactName:h.contactName,phone:h.phone,postalCode:h.postalCode,city:h.city,district:h.district,streetAddress:h.streetAddress,isDefault:!!h.isDefault};await v.addShippingAddress(s.id,n);const{data:d}=await v.getMembers();N(d);const m=d.find(p=>p.id===s.id);o(m),y({type:"home",contactName:"",phone:"",postalCode:"",city:"",district:"",streetAddress:"",provider:"7-ELEVEN",storeId:"",storeName:"",storeAddress:""})}})})]}),g==="cvs"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(Be,{addresses:s.shippingAddresses,memberId:s.id,dataManager:v,refreshAfter:async()=>{const{data:n}=await v.getMembers();N(n),o(n.find(d=>d.id===s.id))}}),e.jsx("div",{className:"mt-2",children:e.jsx(Oe,{newAddress:h,setNewAddress:y,onSave:async()=>{const n={type:"cvs",provider:h.provider,storeId:h.storeId,storeName:h.storeName,storeAddress:h.storeAddress,isDefault:!!h.isDefault};await v.addShippingAddress(s.id,n);const{data:d}=await v.getMembers();N(d);const m=d.find(p=>p.id===s.id);o(m),y({type:"home",contactName:"",phone:"",postalCode:"",city:"",district:"",streetAddress:"",provider:"7-ELEVEN",storeId:"",storeName:"",storeAddress:""})}})})]})]})}),j&&e.jsx(ie,{isOpen:!!j,onClose:E,title:j.type==="order"?`è¨‚å–®è©³æƒ…ï¼š${j.data.orderNo}`:`é€€æ¬¾è©³æƒ…ï¼š${j.data.refundNo}`,size:"max-w-4xl",children:e.jsx("div",{className:"p-4",children:e.jsx(De,{detail:j})})})]})})};export{ss as default};
