import{u as x,a as m,r as n,j as e}from"./index-09c3368c.js";import{i as h}from"./inboxDataManager-a3acafe0.js";import{S as b}from"./StandardTable-d1cd024c.js";import{S as d}from"./SearchableSelect-bf34f521.js";import{B as y}from"./BellIcon-118e5e67.js";import{E as f}from"./EyeIcon-bb65ea7b.js";import"./chevron-down-5d12351e.js";const g=[{key:"title",label:"標題",render:(s,l)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:l.source})]})},{key:"type",label:"類型",render:s=>e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-700",children:s})},{key:"severity",label:"等級",render:s=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${s==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:s})},{key:"status",label:"狀態",render:s=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${s==="unread"?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,children:s})},{key:"receivedAt",label:"接收時間",render:s=>new Date(s).toLocaleString()},{key:"actions",label:"操作",sortable:!1,render:(s,l)=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"p-2 text-gray-500 hover:text-[#cc824d]",title:"檢視",children:e.jsx(f,{className:"w-5 h-5"})})})}],E=()=>{const s=x(),l=m(),o=new URLSearchParams(l.search),[t,c]=n.useState({status:o.get("status")||"all",type:o.get("type")||"all"}),i=h.getAll(),u=n.useMemo(()=>i.filter(a=>!(t.status!=="all"&&(t.status==="error"&&a.severity!=="error"||["unread","read","resolved"].includes(t.status)&&a.status!==t.status)||t.type!=="all"&&a.type!==t.type)),[i,t]);return n.useEffect(()=>{const a=new URLSearchParams(l.search);t.status&&t.status!=="all"?a.set("status",t.status):a.delete("status"),t.type&&t.type!=="all"?a.set("type",t.type):a.delete("type");const r=a.toString(),p=l.search.startsWith("?")?l.search.slice(1):l.search;r!==p&&s({pathname:l.pathname,search:r?`?${r}`:""},{replace:!0})},[t.status,t.type]),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-serif font-bold text-[#2d1e0f]",children:"通知中心"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"接收來自顧客、金流與系統的所有訊息"})]}),e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg border border-white/20 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsx(d,{options:[{value:"all",label:"所有狀態"},{value:"unread",label:"未讀"},{value:"read",label:"已讀"},{value:"resolved",label:"已處理"},{value:"error",label:"錯誤/告警"}],value:t.status,onChange:a=>c(r=>({...r,status:a||"all"})),placeholder:"選擇狀態",allowClear:!1}),e.jsx(d,{options:[{value:"all",label:"所有類型"},{value:"order",label:"訂單"},{value:"payment",label:"金流"},{value:"review",label:"評價"},{value:"system",label:"系統"}],value:t.type,onChange:a=>c(r=>({...r,type:a||"all"})),placeholder:"選擇類型",allowClear:!1})]})}),e.jsx(b,{data:u,columns:g,title:"收件匣",exportFileName:"notification-center",getRowId:a=>a.id,emptyIcon:y})]})};export{E as default};
