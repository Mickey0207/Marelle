import{r as i,j as a}from"./index-5be64975.js";import{S as x}from"./StandardTable-046e436b.js";import{p as m}from"./paymentTypes-e4fcadae.js";import{G as h}from"./GlassModal-8d9cbd14.js";import{T as p}from"./TabNavigation-b0ee78ba.js";import{I as b}from"./IconActionButton-2bcd0b2a.js";import{Q as y}from"./QrCodeIcon-befa0648.js";import{E as j}from"./EyeIcon-db27fda4.js";import"./chevron-down-e41c1b61.js";import"./XMarkIcon-404a829f.js";const o=Date.now();function d(e,l){return{id:`EC-${e+1}`,MerchantTradeNo:`MTN${6e5+e}`,TradeNo:`TN${7e5+e}`,RtnMsg:"取號成功",TradeAmt:l,TradeDate:new Date(o-e*54e5).toISOString(),MerchantID:"2000132",StoreID:"",CustomField1:"",CustomField2:"",CustomField3:"",CustomField4:"",CheckMacValue:`MOCKEDCHECKMACCODE${e}`}}function u(e){const l=200+e%5*50;return{...d(e,l),PaymentType:"ATM_TAISHIN",BankCode:"812",vAccount:`812-${1e7+e}`,ExpireDate:new Date(o+3*24*60*60*1e3).toISOString()}}function g(e){const l=150+e%7*30,s=["CVS_FAMILY","CVS_OK","CVS_HILIFE"];return{...d(e,l),PaymentType:s[e%s.length],PaymentNo:`${88e6+e}`,ExpireDate:new Date(o+2*24*60*60*1e3).toISOString()}}function C(e){const l=300+e%4*40;return{...d(e,l),PaymentType:"BARCODE",Barcode1:`${1e3+e}`,Barcode2:`${2e3+e}`,Barcode3:`${3e3+e}`,ExpireDate:new Date(o+5*24*60*60*1e3).toISOString()}}const f=[...Array.from({length:6},(e,l)=>u(l)),...Array.from({length:6},(e,l)=>g(l+6)),...Array.from({length:6},(e,l)=>C(l+12))],T={getList(){return[...f]}},N=[{key:"MerchantTradeNo",label:"特店交易編號"},{key:"TradeNo",label:"綠界交易編號"},{key:"RtnMsg",label:"狀態訊息"},{key:"TradeAmt",label:"交易金額",render:e=>a.jsxs("span",{children:["$",e]})},{key:"PaymentType",label:"付款方式",render:e=>m.formatWithChinese(e)},{key:"TradeDate",label:"訂單成立時間"},{key:"_code",label:"繳費碼",sortable:!1,render:(e,l)=>{var s,n,c;if((s=l.PaymentType)!=null&&s.startsWith("ATM"))return l.vAccount||"-";if((n=l.PaymentType)!=null&&n.startsWith("CVS"))return l.PaymentNo||"-";if((c=l.PaymentType)!=null&&c.startsWith("BARCODE")){const r=[l.Barcode1,l.Barcode2,l.Barcode3].filter(Boolean);return r.length?r.join(" "):"-"}return"-"}},{key:"_actions",label:"操作",sortable:!1,render:(e,l)=>a.jsx(b,{Icon:j,label:"查看詳情",variant:"blue",onClick:()=>{var s;return(s=l.__onView)==null?void 0:s.call(l,l)}})}];function F(){const[e,l]=i.useState(null),[s,n]=i.useState("basic"),c=i.useMemo(()=>T.getList().map(r=>({...r,__onView:()=>{l(r),n("basic")}})),[]);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-serif font-bold text-[#2d1e0f]",children:"通知中心"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"綠界取號"})]}),a.jsx(x,{data:c,columns:N,title:"綠界取號",exportFileName:"ecpay-codes",getRowId:r=>r.id,emptyIcon:y}),a.jsx(h,{isOpen:!!e,onClose:()=>l(null),title:"取號詳情",size:"max-w-5xl",contentMaxHeight:"max-h-[calc(85vh-80px)]",children:e&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"border-b",children:a.jsx(p,{tabs:[{key:"basic",label:"基本資料"},{key:"atm",label:"ATM"},{key:"cvs",label:"CVS"},{key:"barcode",label:"BARCODE"},{key:"meta",label:"其他"}],mode:"controlled",activeKey:s,onTabChange:r=>n(r.key),layout:"left",className:"px-4"})}),a.jsxs("div",{className:"p-6 space-y-6",children:[s==="basic"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(t,{label:"特店交易編號",children:e.MerchantTradeNo}),a.jsx(t,{label:"綠界交易編號",children:e.TradeNo}),a.jsx(t,{label:"交易金額",children:`NT$${e.TradeAmt}`}),a.jsx(t,{label:"付款方式",children:m.formatWithChinese(e.PaymentType)}),a.jsx(t,{label:"狀態訊息",children:e.RtnMsg}),a.jsx(t,{label:"訂單成立時間",children:e.TradeDate}),a.jsx(t,{label:"檢查碼",children:a.jsx("code",{className:"text-xs break-all",children:e.CheckMacValue})})]}),s==="atm"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(t,{label:"繳費銀行代碼",children:e.BankCode||"-"}),a.jsx(t,{label:"繳費虛擬帳號",children:e.vAccount||"-"}),a.jsx(t,{label:"繳費期限",children:e.ExpireDate||"-"})]}),s==="cvs"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(t,{label:"繳費代碼",children:e.PaymentNo||"-"}),a.jsx(t,{label:"繳費期限",children:e.ExpireDate||"-"})]}),s==="barcode"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(t,{label:"條碼一",children:e.Barcode1||"-"}),a.jsx(t,{label:"條碼二",children:e.Barcode2||"-"}),a.jsx(t,{label:"條碼三",children:e.Barcode3||"-"}),a.jsx(t,{label:"繳費期限",children:e.ExpireDate||"-"})]}),s==="meta"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(t,{label:"特店編號",children:e.MerchantID}),a.jsx(t,{label:"店舖代號",children:e.StoreID||"-"}),a.jsx(t,{label:"自訂欄位1",children:e.CustomField1||"-"}),a.jsx(t,{label:"自訂欄位2",children:e.CustomField2||"-"}),a.jsx(t,{label:"自訂欄位3",children:e.CustomField3||"-"}),a.jsx(t,{label:"自訂欄位4",children:e.CustomField4||"-"})]})]})]})})]})}const t=({label:e,children:l})=>a.jsxs("div",{className:"grid grid-cols-3 gap-4 py-2",children:[a.jsx("div",{className:"text-sm text-gray-500 font-chinese col-span-1",children:e}),a.jsx("div",{className:"col-span-2 text-gray-900 text-sm break-words",children:l||"-"})]});export{F as default};
