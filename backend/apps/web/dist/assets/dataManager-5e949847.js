const f=["PageView","AddToCart","Checkout","Purchase"],P={PageView:"頁面瀏覽",AddToCart:"加入購物車",Checkout:"結帳",Purchase:"完成購買"},p=["Direct","Email","Ads","Social","Referral"],m=["Desktop","Mobile","Tablet"],h=(o,r)=>Math.floor(Math.random()*(r-o+1))+o;function V(o={}){const r=Date.now(),a=Array.from({length:120}).map((c,t)=>{const d=f[t%f.length],w=p[t%p.length],S=m[t%m.length],E=`S-${1e3+t%40}`,A=`U-${200+t%30}`,_=r-t*6e4,u={id:`EV-${t+1}`,ts:_,type:d,userId:A,sessionId:E,source:w,device:S};return d==="PageView"?{...u,path:["/","/products","/cart","/checkout"][t%4]}:d==="AddToCart"?{...u,sku:`SKU-${100+t%50}`,productId:`P-${t%80}`}:d==="Checkout"?{...u,step:["address","payment","review"][t%3]}:d==="Purchase"?{...u,value:h(300,5e3),currency:"TWD"}:u}),{types:s,sources:n,devices:e}=o;return a.filter(c=>(!s||s.length===0||s.includes(c.type))&&(!n||n.length===0||n.includes(c.source))&&(!e||e.length===0||e.includes(c.device)))}function $(o={}){const r=Date.now(),a=Array.from({length:40}).map((e,c)=>{const t=`S-${1e3+c}`,d=`U-${200+c%30}`,w=p[c%p.length],S=m[c%m.length],E=new Date(r-h(10,60)*6e4).toISOString(),A=h(60,1800),_=h(1,12),u=h(2,20),v=Array.from({length:u}).map((C,l)=>{const i=f[l%f.length],y=r-l*3e4,g={id:`${t}-EV-${l+1}`,ts:y,type:i};return i==="PageView"&&(g.path=["/","/products","/cart","/checkout"][l%4]),i==="AddToCart"&&(g.sku=`SKU-${100+l%50}`),i==="Purchase"&&(g.value=h(200,7e3)),g});return{sessionId:t,userId:d,source:w,device:S,startedAt:E,durationSec:A,pageCount:_,eventCount:u,events:v}}),{sources:s,devices:n}=o;return a.filter(e=>(!s||s.length===0||s.includes(e.source))&&(!n||n.length===0||n.includes(e.device)))}function k(o=["Visit","Product View","Add to Cart","Purchase"]){const a=o.map((n,e)=>Math.max(1,Math.round(1e3*Math.pow(.6,e)))),s=a[0]||1;return o.map((n,e)=>({step:n,count:a[e],rate:a[e]/s}))}function T(){return Array.from({length:8}).map((a,s)=>{const e=Array.from({length:6}).map((c,t)=>({weekOffset:t,rate:Math.max(0,+Math.pow(.7,t).toFixed(2))}));return{cohortWeek:`W${s+1}`,base:100,cells:e}})}export{m as D,P as E,p as S,f as a,$ as b,k as c,T as d,V as g};
