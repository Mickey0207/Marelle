import{r as n,j as s,A as p}from"./index-5be64975.js";import{S as N}from"./StandardTable-046e436b.js";import{c as j}from"./chartOfAccountsManager-49e72544.js";import"./chevron-down-e41c1b61.js";function T(){const[r,f]=n.useState([]);n.useEffect(()=>{f(j.listAccounts())},[]);const m=n.useMemo(()=>r.filter(e=>e.type==="資產"&&e.active!==!1),[r]),d=n.useMemo(()=>r.filter(e=>e.type==="負債"&&e.active!==!1),[r]),c=n.useMemo(()=>{const e={1101:3e5,1121:12e4,1141:8e4,2101:9e4},u=t=>new Intl.NumberFormat("zh-TW").format(Number(t||0)),o=t=>t?{code:t.code,name:t.name,amount:Number(e[t.code]??0),fmt:u}:null,i=Math.max(m.length,d.length),a=[];for(let t=0;t<i;t++){const l=o(m[t]),h=o(d[t]);a.push({asset:l,liability:h})}return a},[m,d]),b=n.useMemo(()=>[{key:"asset",label:"資產",sortable:!1,render:e=>e?s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("span",{className:"truncate",children:[s.jsx("span",{className:"font-mono text-sm mr-2",children:e.code}),e.name]}),s.jsxs("span",{className:"tabular-nums text-right whitespace-nowrap",children:["NT$",e.fmt(e.amount)]})]}):""},{key:"liability",label:"負債",sortable:!1,render:e=>e?s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("span",{className:"truncate",children:[s.jsx("span",{className:"font-mono text-sm mr-2",children:e.code}),e.name]}),s.jsxs("span",{className:"tabular-nums text-right whitespace-nowrap",children:["NT$",e.fmt(e.amount)]})]}):""}],[]),x=n.useMemo(()=>{const e=a=>a.reduce((t,l)=>t+((l==null?void 0:l.amount)||0),0),u=c.map(a=>a.asset).filter(Boolean),o=c.map(a=>a.liability).filter(Boolean),i=a=>new Intl.NumberFormat("zh-TW").format(Number(a||0));return{asset:i(e(u)),liability:i(e(o))}},[c]);return s.jsx("div",{className:"min-h-screen bg-[#fdf8f2]",children:s.jsxs("div",{className:p.contentContainerFluid,children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-chinese mb-6",children:"資產負債表"}),s.jsxs("div",{className:"glass rounded-2xl p-6",children:[s.jsx(N,{title:"資產 / 負債",data:c,columns:b,exportFileName:"資產負債表"}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white/60 rounded-lg border border-gray-100",children:[s.jsx("span",{className:"text-gray-700",children:"資產合計"}),s.jsxs("span",{className:"font-semibold tabular-nums",children:["NT$",x.asset]})]}),s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white/60 rounded-lg border border-gray-100",children:[s.jsx("span",{className:"text-gray-700",children:"負債合計"}),s.jsxs("span",{className:"font-semibold tabular-nums",children:["NT$",x.liability]})]})]})]})]})})}export{T as default};
