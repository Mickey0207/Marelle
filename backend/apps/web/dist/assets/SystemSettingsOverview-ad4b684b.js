import{r as c,j as e}from"./index-5be64975.js";import{S as ee}from"./SearchableSelect-06cd3eb3.js";import{C as te}from"./ChartBarIcon-8ae14525.js";import{C as se}from"./Cog6ToothIcon-88b00cb1.js";import{C as P}from"./ClockIcon-8dc756af.js";import{U as ae}from"./UserIcon-c9b201ef.js";import{E as J}from"./ExclamationTriangleIcon-5236f94b.js";import{C as ne}from"./CheckCircleIcon-3b5f52cb.js";import"./chevron-down-e41c1b61.js";function re({title:n,titleId:a,...r},l){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),n?c.createElement("title",{id:a},n):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const ie=c.forwardRef(re),le=ie;function ce({title:n,titleId:a,...r},l){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),n?c.createElement("title",{id:a},n):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const oe=c.forwardRef(ce),de=oe;function me({title:n,titleId:a,...r},l){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},r),n?c.createElement("title",{id:a},n):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const ue=c.forwardRef(me),ge=ue,k=()=>new Date().toISOString(),u={system_core:{"system.name":{value:"Marelle 管理系統",label:"系統名稱"},"system.timezone":{value:"Asia/Taipei",label:"時區"},"system.language":{value:"zh-TW",label:"語系"}},system_security:{"security.password_min_length":{value:8,label:"密碼最小長度"},"security.login_max_attempts":{value:5,label:"登入最大嘗試次數"},"security.session_timeout":{value:30,label:"工作階段逾時(分鐘)"}},notification_management:{"notification.email_enabled":{value:!0,label:"啟用 Email 通知"},"notification.sms_enabled":{value:!1,label:"啟用 SMS 通知"}},payment_management:{"payment.currency":{value:"TWD",label:"預設貨幣"},"payment.tax_rate":{value:5,label:"稅率(%)"}},shipping_management:{"shipping.free_shipping_threshold":{value:2e3,label:"免運費門檻"},"shipping.default_carrier":{value:"EZShip",label:"預設物流"},"shipping.enable_express":{value:!1,label:"啟用快捷"}}},_=[{settingId:"system_core.system.name",changedAt:k(),changedBy:"admin",oldValue:"Marelle",newValue:"Marelle 管理系統"}];function S(n,a){var r,l;return(l=(r=u==null?void 0:u[n])==null?void 0:r[a])==null?void 0:l.value}function F(n,a,r,l="admin"){var d;u[n]||(u[n]={});const h=(d=u[n][a])==null?void 0:d.value;return u[n][a]=u[n][a]||{value:void 0},u[n][a].value=r,_.unshift({settingId:`${n}.${a}`,changedAt:k(),changedBy:l,oldValue:h,newValue:r}),_.length>50&&(_.length=50),{success:!0}}function xe(n){return{...u[n]||{}}}function he(){const n=Object.keys(u),a=n.reduce((l,h)=>l+Object.keys(u[h]).length,0),r=n.map(l=>({category:l,count:Object.keys(u[l]).length}));return{totalSettings:a,categories:n.length,categoryBreakdown:r,recentChanges:[..._],generatedAt:k()}}function pe(){const n={};for(const a of Object.keys(u)){n[a]={};for(const r of Object.keys(u[a]))n[a][r]=u[a][r].value}return JSON.stringify({version:"mock-1.0",exportedAt:k(),settings:n},null,2)}function ye(n,a="admin"){try{const r=JSON.parse(n),l=r.settings||r;return Object.keys(l||{}).forEach(d=>{Object.keys(l[d]||{}).forEach(y=>{F(d,y,l[d][y],a)})}),{success:!0}}catch(r){return{success:!1,error:(r==null?void 0:r.message)||"Invalid JSON"}}}function fe(n){const a=String(n||"").toLowerCase();if(!a)return[];const r=[];for(const l of Object.keys(u))for(const h of Object.keys(u[l])){const d=u[l][h],p=String(d==null?void 0:d.value),y=String((d==null?void 0:d.label)||"");(h.toLowerCase().includes(a)||p.toLowerCase().includes(a)||y.toLowerCase().includes(a)||l.toLowerCase().includes(a))&&r.push({settingId:`${l}.${h}`,category:l,key:h,value:d==null?void 0:d.value,label:d==null?void 0:d.label})}return r}const g={getSystemSettings(){return{siteName:S("system_core","system.name")||"Marelle 管理系統",timezone:S("system_core","system.timezone")||"Asia/Taipei",language:S("system_core","system.language")||"zh-TW"}},getSettingsStatistics:he,getSettingsByCategory:xe,getSetting:S,updateSetting:F,exportSettings:pe,importSettings:ye,searchSettings:fe},o={admins:[{id:"1",email:"admin@example.com",name:"Admin User",role:"Admin",line_user_id:"Uxxxxxxxx",line_display_name:"小馬",line_picture_url:"https://picsum.photos/seed/line1/64"},{id:"2",email:"staff@example.com",name:"Staff User",role:"Staff",line_user_id:null,line_display_name:null,line_picture_url:null}],modules:[{id:"m1",name:"dashboard"},{id:"m2",name:"settings"},{id:"m3",name:"products"}],roles:[{id:"r1",name:"Admin"},{id:"r2",name:"Manager"},{id:"r3",name:"Staff"}],departments:[{id:"d1",name:"營運部"},{id:"d2",name:"行銷部"}],adminModules:{1:["dashboard","settings","products"],2:["dashboard"]},roleModules:{Admin:["dashboard","settings","products"],Manager:["dashboard","products"],Staff:["dashboard"]}},x=(n=200)=>new Promise(a=>setTimeout(a,n));async function be(){return await x(50),[...o.departments]}async function we(n){await x(50);const a={id:`d${Date.now()}`,name:n};return o.departments.push(a),a}async function je(n,a){await x(50);const r=o.departments.findIndex(l=>l.id===n);if(r===-1)throw new Error("Department not found");return o.departments[r]={...o.departments[r],name:a},o.departments[r]}async function ve(n){await x(50);const a=o.departments.findIndex(r=>r.id===n);return a!==-1&&o.departments.splice(a,1),!0}async function Ne(){return await x(50),[...o.roles]}async function Se(n){await x(50);const a={id:`r${Date.now()}`,name:n};return o.roles.push(a),a}async function _e(n,a){await x(50);const r=o.roles.findIndex(l=>l.id===n);if(r===-1)throw new Error("Role not found");return o.roles[r]={...o.roles[r],name:a},o.roles[r]}async function ke(n){await x(50);const a=o.roles.findIndex(r=>r.id===n);return a!==-1&&o.roles.splice(a,1),!0}async function Ce(){return await x(50),[...o.modules]}async function De(n){await x(50);const a={id:`m${Date.now()}`,name:n};return o.modules.push(a),a}async function Ie(n,a){await x(50);const r=o.modules.findIndex(l=>l.id===n);if(r===-1)throw new Error("Module not found");return o.modules[r]={...o.modules[r],name:a},o.modules[r]}async function Ee(n){await x(50);const a=o.modules.findIndex(r=>r.id===n);return a!==-1&&o.modules.splice(a,1),!0}const He=()=>{const[n,a]=c.useState({}),[r,l]=c.useState([]),[h,d]=c.useState({}),[p,y]=c.useState({}),[C,Oe]=c.useState(""),[Re,O]=c.useState([]),[R,b]=c.useState([]),[M,w]=c.useState([]),[A,j]=c.useState([]),[q,T]=c.useState(!1),[D,$]=c.useState(""),[I,L]=c.useState(""),[E,U]=c.useState(""),v=c.useCallback(()=>{const t=g.getSettingsStatistics();a(t),l(t.recentChanges);const s=Q();d(s);const i=Z();y(i)},[]);c.useEffect(()=>{v()},[v]),c.useEffect(()=>{(async()=>{try{T(!0);const[t,s,i]=await Promise.all([be(),Ne(),Ce()]);b(t||[]),w(s||[]),j(i||[])}catch(t){console.error("載入系統選項失敗",t)}finally{T(!1)}})()},[]),c.useEffect(()=>{if(C.trim()){const t=g.searchSettings(C);O(t)}else O([])},[C]);const Q=()=>{var i,m,f,W,z,H,V;const t=g.getSettingsByCategory("system_security"),s=g.getSettingsByCategory("notification_management");return{security:{status:"healthy",message:"安全設定正常",lastCheck:new Date().toISOString(),details:{passwordPolicy:((i=t["security.password_min_length"])==null?void 0:i.value)>=8,loginProtection:((m=t["security.login_max_attempts"])==null?void 0:m.value)<=5,sessionTimeout:((f=t["security.session_timeout"])==null?void 0:f.value)<=60}},notifications:{status:(W=s["notification.email_enabled"])!=null&&W.value?"active":"warning",message:(z=s["notification.email_enabled"])!=null&&z.value?"通知系統正常運作":"部分通知功能未啟用",lastCheck:new Date().toISOString(),details:{email:(H=s["notification.email_enabled"])==null?void 0:H.value,sms:(V=s["notification.sms_enabled"])==null?void 0:V.value}},performance:{status:"healthy",message:"系統效能良好",lastCheck:new Date().toISOString(),details:{responseTime:"< 200ms",uptime:"99.9%",memoryUsage:"65%"}}}},Z=()=>({"system.name":g.getSetting("system_core","system.name"),"security.password_min_length":g.getSetting("system_security","security.password_min_length"),"notification.email_enabled":g.getSetting("notification_management","notification.email_enabled"),"payment.currency":g.getSetting("payment_management","payment.currency"),"shipping.free_shipping_threshold":g.getSetting("shipping_management","shipping.free_shipping_threshold")}),N=(t,s,i)=>{g.updateSetting(t,s,i),v()},Y=()=>{const t=g.exportSettings(),s=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(s),m=document.createElement("a");m.href=i,m.download=`marelle-settings-${new Date().toISOString().split("T")[0]}.json`,m.click(),URL.revokeObjectURL(i)},G=t=>{const s=t.target.files[0];if(s){const i=new FileReader;i.onload=m=>{const f=g.importSettings(m.target.result);f.success?(alert("設定匯入成功！"),v()):alert(`匯入失敗：${f.error}`)},i.readAsText(s)}},B=t=>new Date(t).toLocaleString("zh-TW"),K=t=>{switch(t){case"healthy":case"active":return e.jsx(ne,{className:"h-5 w-5 text-green-500"});case"warning":return e.jsx(J,{className:"h-5 w-5 text-yellow-500"});case"error":return e.jsx(J,{className:"h-5 w-5 text-red-500"});default:return e.jsx(P,{className:"h-5 w-5 text-gray-500"})}},X=t=>{switch(t){case"healthy":case"active":return"text-green-600 bg-green-50 border-green-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"error":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"系統設定總覽"}),e.jsx("p",{className:"text-gray-600",children:"集中管理所有系統配置與設定項目"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:Y,className:"bg-white text-gray-700 border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors flex items-center font-medium",children:[e.jsx(de,{className:"h-5 w-5 mr-2"}),"匯出設定"]}),e.jsxs("label",{className:"bg-white text-gray-700 border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors flex items-center font-medium cursor-pointer",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),"匯入設定",e.jsx("input",{type:"file",accept:".json",onChange:G,className:"hidden"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(te,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"系統狀態監控"]}),e.jsx("div",{className:"space-y-4",children:Object.entries(h).map(([t,s])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[K(s.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:t}),e.jsx("p",{className:"text-sm text-gray-600",children:s.message})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${X(s.status)}`,children:s.status==="healthy"?"正常":s.status==="active"?"運作中":s.status==="warning"?"警告":"錯誤"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:B(s.lastCheck)})]})]},t))})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(le,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"快速設定"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"系統名稱"}),e.jsx("input",{type:"text",value:p["system.name"]||"",onChange:t=>N("system_core","system.name",t.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"密碼最小長度"}),e.jsx("input",{type:"number",value:p["security.password_min_length"]||"",onChange:t=>N("system_security","security.password_min_length",Number(t.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"預設貨幣"}),e.jsx(ee,{options:[{value:"TWD",label:"新台幣 (TWD)"},{value:"USD",label:"美元 (USD)"},{value:"EUR",label:"歐元 (EUR)"},{value:"JPY",label:"日圓 (JPY)"}],value:p["payment.currency"]||"TWD",onChange:t=>N("payment_management","payment.currency",t),placeholder:"選擇貨幣",className:"w-full"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"免運費門檻"}),e.jsx("input",{type:"number",value:p["shipping.free_shipping_threshold"]||"",onChange:t=>N("shipping_management","shipping.free_shipping_threshold",Number(t.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(se,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"系統選項（部門 / 角色 / 模組）"]}),q?e.jsx("p",{className:"text-sm text-gray-500",children:"載入中..."}):e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"部門"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"新增部門",value:D,onChange:t=>$(t.target.value)}),e.jsx("button",{className:"text-white bg-amber-600 hover:bg-amber-700 text-sm px-3 py-1 rounded",onClick:async()=>{if(D.trim())try{const t=await we(D.trim());b(s=>[{id:t.id,name:t.name},...s]),$("")}catch(t){alert((t==null?void 0:t.message)||"新增失敗")}},children:"新增"})]})]}),e.jsxs("ul",{className:"space-y-2",children:[R.map(t=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-50 rounded px-3 py-2",children:[e.jsx("span",{className:"text-sm text-gray-800",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-amber-700 hover:bg-amber-100 rounded px-2 py-1 text-sm",onClick:async()=>{const s=prompt("重新命名部門",t.name);if(s&&s!==t.name)try{await je(t.id,s),b(i=>i.map(m=>m.id===t.id?{...m,name:s}:m))}catch(i){alert((i==null?void 0:i.message)||"更新失敗")}},children:"重新命名"}),e.jsx("button",{className:"text-red-700 hover:bg-red-100 rounded px-2 py-1 text-sm",onClick:async()=>{if(confirm(`確定刪除部門「${t.name}」？`))try{await ve(t.id),b(s=>s.filter(i=>i.id!==t.id))}catch(s){alert((s==null?void 0:s.message)||"刪除失敗")}},children:"刪除"})]})]},t.id)),R.length===0&&e.jsx("li",{className:"text-sm text-gray-500",children:"尚無部門"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"角色"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"新增角色",value:I,onChange:t=>L(t.target.value)}),e.jsx("button",{className:"text-white bg-amber-600 hover:bg-amber-700 text-sm px-3 py-1 rounded",onClick:async()=>{if(I.trim())try{const t=await Se(I.trim());w(s=>[{id:t.id,name:t.name},...s]),L("")}catch(t){alert((t==null?void 0:t.message)||"新增失敗")}},children:"新增"})]})]}),e.jsxs("ul",{className:"space-y-2",children:[M.map(t=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-50 rounded px-3 py-2",children:[e.jsx("span",{className:"text-sm text-gray-800",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-amber-700 hover:bg-amber-100 rounded px-2 py-1 text-sm",onClick:async()=>{const s=prompt("重新命名角色",t.name);if(s&&s!==t.name)try{await _e(t.id,s),w(i=>i.map(m=>m.id===t.id?{...m,name:s}:m))}catch(i){alert((i==null?void 0:i.message)||"更新失敗")}},children:"重新命名"}),e.jsx("button",{className:"text-red-700 hover:bg-red-100 rounded px-2 py-1 text-sm",onClick:async()=>{if(confirm(`確定刪除角色「${t.name}」？`))try{await ke(t.id),w(s=>s.filter(i=>i.id!==t.id))}catch(s){alert((s==null?void 0:s.message)||"刪除失敗")}},children:"刪除"})]})]},t.id)),M.length===0&&e.jsx("li",{className:"text-sm text-gray-500",children:"尚無角色"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"模組"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"新增模組",value:E,onChange:t=>U(t.target.value)}),e.jsx("button",{className:"text-white bg-amber-600 hover:bg-amber-700 text-sm px-3 py-1 rounded",onClick:async()=>{if(E.trim())try{const t=await De(E.trim());j(s=>[{id:t.id,name:t.name},...s]),U("")}catch(t){alert((t==null?void 0:t.message)||"新增失敗")}},children:"新增"})]})]}),e.jsxs("ul",{className:"space-y-2",children:[A.map(t=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-50 rounded px-3 py-2",children:[e.jsx("span",{className:"text-sm text-gray-800",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-amber-700 hover:bg-amber-100 rounded px-2 py-1 text-sm",onClick:async()=>{const s=prompt("重新命名模組",t.name);if(s&&s!==t.name)try{await Ie(t.id,s),j(i=>i.map(m=>m.id===t.id?{...m,name:s}:m))}catch(i){alert((i==null?void 0:i.message)||"更新失敗")}},children:"重新命名"}),e.jsx("button",{className:"text-red-700 hover:bg-red-100 rounded px-2 py-1 text-sm",onClick:async()=>{if(confirm(`確定刪除模組「${t.name}」？`))try{await Ee(t.id),j(s=>s.filter(i=>i.id!==t.id))}catch(s){alert((s==null?void 0:s.message)||"刪除失敗")}},children:"刪除"})]})]},t.id)),A.length===0&&e.jsx("li",{className:"text-sm text-gray-500",children:"尚無模組"})]})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(P,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"最近變更"]}),e.jsxs("div",{className:"space-y-3",children:[r.slice(0,5).map((t,s)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.settingId}),e.jsx("span",{className:"text-xs text-gray-500",children:B(t.changedAt)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:t.changedBy})]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"變更："}),e.jsx("span",{className:"text-red-600 line-through mr-2",children:String(t.oldValue)}),e.jsx("span",{className:"text-green-600",children:String(t.newValue)})]})]},s)),r.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"暫無變更記錄"})]})]})})]})]})})};export{He as default};
