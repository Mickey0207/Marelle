const o=s=>s[Math.floor(Math.random()*s.length)],d=s=>String(s).padStart(2,"0"),i=(s,e)=>Math.floor(Math.random()*(e-s+1))+s,m=(s=0)=>{const e=new Date(Date.now()-s*864e5);return`${e.getFullYear()}-${d(e.getMonth()+1)}-${d(e.getDate())}`};let u=1;const f=(s={})=>({id:`ADDR-H-${u++}`,type:"home",contactName:"王小明",phone:`09${i(1e7,99999999)}`,postalCode:String(i(100,999)),city:o(["台北市","新北市","桃園市","台中市","台南市","高雄市"]),district:o(["中正區","大安區","信義區","板橋區","新店區","三重區"]),streetAddress:`${i(1,300)} 號 ${o(["1F","2F","3F","5F","7F"])}`,isDefault:!1,...s}),p=(s={})=>({id:`ADDR-C-${u++}`,type:"cvs",provider:o(["7-ELEVEN","全家 FamilyMart","萊爾富 Hi-Life","OK mart"]),storeId:String(i(1e5,999999)),storeName:o(["站前門市","市府門市","西門門市","南港門市","中壢門市"]),storeAddress:`${o(["台北市","新北市","桃園市"])}${o(["信義區","中正區","板橋區"])}${i(1,300)} 號`,isDefault:!1,...s}),l=Array.from({length:20}).map((s,e)=>{const t=`MBR-${100+e}`,r=i(1,25),n=i(0,5e3),a={id:t,memberNo:`M-${100+e}`,name:["王小明","李小美","陳大文","林靜怡","張雅婷"][e%5],email:`user${e}@example.com`,phone:`09${String(1e7+e).slice(0,8)}`,level:["一般","金卡","銀卡","VIP"][e%4],status:e%3===0?"inactive":"active",orders:r,totalOrders:r,totalSpent:i(1e3,12e4),points:n,gender:e%2===0?"男":"女",birthday:`${i(1978,2002)}-${d(i(1,12))}-${d(i(1,28))}`,registerDate:m(i(200,1200)),lastLoginDate:m(i(0,30)),tags:Array.from({length:i(1,3)}).map(()=>o(["高價值","常客","黑名單","社群來客","廣告轉化"]))},g=f({contactName:a.name,isDefault:!0}),h=p({isDefault:!1});return{...a,shippingAddresses:[g,h]}});function c(s){return l.find(e=>e.id===s)}const D={async getMembers(){return await new Promise(s=>setTimeout(s,80)),{success:!0,data:[...l]}},async getMemberById(s){await new Promise(t=>setTimeout(t,50));const e=c(s);return e?{success:!0,data:{...e}}:{success:!1,message:"not found"}},async updateMember(s,e){const t=c(s);if(!t)return{success:!1,message:"not found"};const r=["name","email","phone","gender","birthday","level","status","tags","points"];for(const n of r)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return await new Promise(n=>setTimeout(n,60)),{success:!0,data:{...t}}},async addShippingAddress(s,e){const t=c(s);if(!t)return{success:!1,message:"member not found"};const r=e==null?void 0:e.type;if(r!=="home"&&r!=="cvs")return{success:!1,message:"invalid type"};const n=r==="home"?f({...e}):p({...e});return n.id=n.id,n.type=r,n.isDefault&&(t.shippingAddresses||[]).forEach(a=>{a.type===r&&(a.isDefault=!1)}),t.shippingAddresses=[...t.shippingAddresses||[],n],await new Promise(a=>setTimeout(a,50)),{success:!0,data:n}},async setDefaultShippingAddress(s,e){const t=c(s);if(!t)return{success:!1};const r=(t.shippingAddresses||[]).find(a=>a.id===e);if(!r)return{success:!1};const n=r.type;return(t.shippingAddresses||[]).forEach(a=>{a.type===n&&(a.isDefault=a.id===e)}),await new Promise(a=>setTimeout(a,40)),{success:!0}},async deleteShippingAddress(s,e){const t=c(s);return t?(t.shippingAddresses=(t.shippingAddresses||[]).filter(r=>r.id!==e),await new Promise(r=>setTimeout(r,40)),{success:!0}):{success:!1}}};export{D as m};
