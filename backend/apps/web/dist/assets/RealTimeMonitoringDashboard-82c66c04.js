import{r as l,j as e}from"./index-09c3368c.js";import{m as o,A as R,d as D}from"./dashboardDataManager-71a8028d.js";import{A as _}from"./ArrowTrendingUpIcon-0abc8ae8.js";import{C as h}from"./CheckCircleIcon-377c1a08.js";import{E as b}from"./ExclamationTriangleIcon-8f54841e.js";import{X as w}from"./XCircleIcon-20cf1885.js";import{C as L}from"./Cog6ToothIcon-f8515c56.js";import{S as T}from"./ShoppingCartIcon-5bfc06d5.js";import{U as F}from"./UserGroupIcon-a52b579e.js";import{C as B}from"./ClockIcon-bab15198.js";import{S as O}from"./ShieldCheckIcon-3c374375.js";import{C as P}from"./CurrencyDollarIcon-a9a09c91.js";import{C as k}from"./ChartBarIcon-50296ea8.js";import{A as q}from"./ArrowTrendingDownIcon-6bf083ff.js";import{B as V}from"./BellIcon-118e5e67.js";import{F as $}from"./FireIcon-7870f329.js";import{E as W}from"./EyeIcon-bb65ea7b.js";import{L as N}from"./LightBulbIcon-066c9538.js";function Z({title:t,titleId:r,...s},i){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":r},s),t?l.createElement("title",{id:r},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const H=l.forwardRef(Z),U=H;function z({title:t,titleId:r,...s},i){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":r},s),t?l.createElement("title",{id:r},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const G=l.forwardRef(z),K=G;function X({title:t,titleId:r,...s},i){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":r},s),t?l.createElement("title",{id:r},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const J=l.forwardRef(X),Q=J,$e=()=>{const[t,r]=l.useState(null),[s,i]=l.useState([]),[c,n]=l.useState([]),[a,g]=l.useState(null),[x,C]=l.useState(!0),[y,le]=l.useState(30),[S,I]=l.useState(new Date);l.useEffect(()=>{if(u(),x){const d=setInterval(u,y*1e3);return()=>clearInterval(d)}},[x,y]);const u=()=>{const d=D.getOperationalMetrics();r(d),i(d.alert_system.critical_alerts),n(d.anomaly_monitoring.active_anomalies),I(new Date)},j=d=>{i(p=>p.map(m=>m.alert_id===d?{...m,acknowledged_by:1,acknowledged_at:new Date}:m))},v=d=>{i(p=>p.map(m=>m.alert_id===d?{...m,resolved_at:new Date}:m))};if(!t)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-amber-600"})});const{real_time_metrics:f,operational_efficiency:A,anomaly_monitoring:M,alert_system:E}=t;return e.jsxs("div",{children:[e.jsx(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"即時監控儀表板"}),e.jsx("p",{className:"text-gray-600",children:"實時系統狀態、警報和異常監控"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"自動更新"}),e.jsx("button",{onClick:()=>C(!x),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${x?"bg-amber-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${x?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["最後更新: ",S.toLocaleTimeString()]}),e.jsxs("button",{onClick:u,className:"flex items-center px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"刷新"]})]})]})}),e.jsx(Y,{systemHealth:M.system_health}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(ee,{metrics:f})}),e.jsx("div",{children:e.jsx(te,{alerts:s,onAcknowledge:j,onResolve:v,onViewDetails:g})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[e.jsx(se,{anomalies:c}),e.jsx(re,{efficiency:A})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(ae,{issues:E.trending_issues}),e.jsx(ie,{metrics:f,anomalies:c,alerts:s})]}),e.jsx(ne,{alert:a,isOpen:!!a,onClose:()=>g(null),onAcknowledge:j,onResolve:v})]})},Y=({systemHealth:t})=>{const s=(()=>{const{database_response_time:i,api_response_time:c,error_rate_percentage:n,queue_processing_status:a}=t;return i>200||c>500||parseFloat(n)>2?{status:"critical",color:"red",text:"嚴重"}:i>100||c>300||parseFloat(n)>1?{status:"warning",color:"amber",text:"警告"}:{status:"healthy",color:"green",text:"正常"}})();return e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"系統健康狀態"}),e.jsxs("div",{className:`flex items-center px-3 py-1 rounded-full text-sm font-medium ${s.color==="green"?"bg-green-100 text-green-800":s.color==="amber"?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:[s.color==="green"?e.jsx(h,{className:"h-4 w-4 mr-1"}):s.color==="amber"?e.jsx(b,{className:"h-4 w-4 mr-1"}):e.jsx(w,{className:"h-4 w-4 mr-1"}),s.text]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg mb-2 mx-auto",children:e.jsx(K,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[t.database_response_time,"ms"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"資料庫回應"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg mb-2 mx-auto",children:e.jsx(Q,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[t.api_response_time,"ms"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"API 回應"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-amber-100 rounded-lg mb-2 mx-auto",children:e.jsx(b,{className:"h-6 w-6 text-amber-600"})}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[t.error_rate_percentage,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"錯誤率"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-lg mb-2 mx-auto",children:e.jsx(L,{className:"h-6 w-6 text-purple-600"})}),e.jsx("div",{className:`text-lg font-bold ${t.queue_processing_status==="healthy"?"text-green-600":t.queue_processing_status==="warning"?"text-amber-600":"text-red-600"}`,children:t.queue_processing_status==="healthy"?"正常":t.queue_processing_status==="warning"?"警告":"嚴重"}),e.jsx("div",{className:"text-sm text-gray-600",children:"佇列狀態"})]})]})]})},ee=({metrics:t})=>{const r=[{title:"今日訂單",value:t.orders_today.total_orders,change:"+12.5%",trend:"up",icon:T,color:"blue",subtitle:`總額: NT$ ${t.orders_today.revenue_today.toLocaleString()}`},{title:"當前訪客",value:t.website_performance.current_visitors,change:"+8.2%",trend:"up",icon:F,color:"green",subtitle:`轉換率: ${t.website_performance.conversion_rate_today}%`},{title:"庫存警報",value:t.inventory_alerts.low_stock_items,change:"-5.1%",trend:"down",icon:b,color:"amber",subtitle:`缺貨: ${t.inventory_alerts.out_of_stock_items} 項`},{title:"客服工單",value:t.customer_service.open_tickets,change:"+3.7%",trend:"up",icon:B,color:"red",subtitle:`逾期: ${t.customer_service.overdue_tickets} 件`},{title:"系統正常時間",value:`${t.website_performance.uptime_percentage}%`,change:"+0.1%",trend:"up",icon:O,color:"green",subtitle:`載入時間: ${t.website_performance.page_load_time_avg}s`},{title:"今日營收",value:`NT$ ${Math.round(t.financial_summary.revenue_today/1e3)}K`,change:"+15.3%",trend:"up",icon:P,color:"blue",subtitle:`利潤: NT$ ${Math.round(t.financial_summary.profit_today/1e3)}K`}];return e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"即時營運指標"}),e.jsx(k,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:r.map((s,i)=>e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:i*.1},className:"bg-white/50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.color==="blue"?"bg-blue-100":s.color==="green"?"bg-green-100":s.color==="amber"?"bg-amber-100":"bg-red-100"}`,children:e.jsx(s.icon,{className:`h-4 w-4 ${s.color==="blue"?"text-blue-600":s.color==="green"?"text-green-600":s.color==="amber"?"text-amber-600":"text-red-600"}`})}),e.jsxs("div",{className:"flex items-center text-sm",children:[s.trend==="up"?e.jsx(_,{className:"h-3 w-3 text-green-500 mr-1"}):e.jsx(q,{className:"h-3 w-3 text-red-500 mr-1"}),e.jsx("span",{className:s.trend==="up"?"text-green-600":"text-red-600",children:s.change})]})]}),e.jsx("h4",{className:"text-xs font-medium text-gray-600 mb-1",children:s.title}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mb-1",children:s.value}),e.jsx("p",{className:"text-xs text-gray-500",children:s.subtitle})]},s.title))})]})},te=({alerts:t,onAcknowledge:r,onResolve:s,onViewDetails:i})=>{const c=t.filter(a=>!a.acknowledged_by),n=t.filter(a=>!a.resolved_at);return e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"關鍵警報"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-red-600",children:[c.length," 未確認"]})]})]}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[e.jsx(R,{children:n.map((a,g)=>e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:g*.05},className:`p-4 rounded-lg border ${a.priority==="critical"?"bg-red-50 border-red-200":a.priority==="high"?"bg-orange-50 border-orange-200":"bg-amber-50 border-amber-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx($,{className:`h-4 w-4 ${a.priority==="critical"?"text-red-500":a.priority==="high"?"text-orange-500":"text-amber-500"}`}),e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:a.alert_type}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a.priority==="critical"?"bg-red-100 text-red-800":a.priority==="high"?"bg-orange-100 text-orange-800":"bg-amber-100 text-amber-800"}`,children:a.priority})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:a.message}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleString("zh-TW")})]}),e.jsxs("div",{className:"flex flex-col space-y-1 ml-3",children:[e.jsx("button",{onClick:()=>i(a),className:"text-xs text-blue-600 hover:text-blue-800",children:"詳情"}),!a.acknowledged_by&&e.jsx("button",{onClick:()=>r(a.alert_id),className:"text-xs text-amber-600 hover:text-amber-800",children:"確認"}),e.jsx("button",{onClick:()=>s(a.alert_id),className:"text-xs text-green-600 hover:text-green-800",children:"解決"})]})]})},a.alert_id))}),n.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"目前沒有關鍵警報"})]})]})]})},se=({anomalies:t})=>e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"異常監控"}),e.jsx(W,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"space-y-4",children:[t.map((r,s)=>e.jsx(o.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.1},className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(b,{className:`h-4 w-4 ${r.severity==="critical"?"text-red-500":r.severity==="high"?"text-orange-500":r.severity==="medium"?"text-amber-500":"text-blue-500"}`}),e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:r.metric_name})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:r.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:["偵測時間: ",new Date(r.detected_at).toLocaleString("zh-TW")]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["建議: ",r.recommended_action]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r.severity==="critical"?"bg-red-100 text-red-800":r.severity==="high"?"bg-orange-100 text-orange-800":r.severity==="medium"?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"}`,children:r.severity})]})},r.anomaly_id)),t.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"系統運行正常，未發現異常"})]})]})]}),re=({efficiency:t})=>{const r=[{category:"處理效率",metrics:[{label:"每小時處理訂單",value:t.processing_efficiency.orders_processed_per_hour,unit:"單"},{label:"平均處理時間",value:t.processing_efficiency.avg_order_processing_time_minutes,unit:"分鐘"},{label:"自動化比率",value:t.processing_efficiency.automatic_processing_rate,unit:"%"}]},{category:"庫存效率",metrics:[{label:"庫存週轉率",value:t.inventory_efficiency.inventory_turnover_rate,unit:""},{label:"缺貨率",value:t.inventory_efficiency.stockout_rate_percentage,unit:"%"},{label:"庫存準確率",value:t.inventory_efficiency.inventory_accuracy_rate,unit:"%"}]},{category:"客服效率",metrics:[{label:"首次解決率",value:t.service_efficiency.first_contact_resolution_rate,unit:"%"},{label:"平均解決時間",value:t.service_efficiency.avg_ticket_resolution_time_hours,unit:"小時"},{label:"客戶滿意度",value:t.service_efficiency.customer_effort_score,unit:"分"}]}];return e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"營運效率"}),e.jsx(U,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"space-y-6",children:r.map(s=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:s.category}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:s.metrics.map((i,c)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:i.label}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[i.value,i.unit]})]},c))})]},s.category))})]})},ae=({issues:t})=>e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"趨勢問題"}),e.jsx(k,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"space-y-4",children:[t.map((r,s)=>e.jsxs(o.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.1},className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:r.issue_pattern}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r.risk_assessment==="high"?"bg-red-100 text-red-800":r.risk_assessment==="medium"?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"}`,children:r.risk_assessment}),e.jsx("span",{className:`text-xs ${r.trend_direction==="increasing"?"text-red-600":r.trend_direction==="decreasing"?"text-green-600":"text-gray-600"}`,children:r.trend_direction==="increasing"?"↗":r.trend_direction==="decreasing"?"↘":"→"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["發生次數: ",r.occurrence_count," 次"]}),e.jsxs("div",{className:"text-xs text-blue-600",children:["預防建議: ",r.prevention_recommendations.join(", ")]})]},s)),t.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"目前沒有發現趨勢問題"})]})]})]}),ie=({metrics:t,anomalies:r,alerts:s})=>{const c=(()=>{const n=[];return t.customer_service.open_tickets>20&&n.push({type:"performance",title:"客服工單積壓",description:"當前開放工單數量較高，建議增加客服人力或優化處理流程",priority:"high",action:"查看客服管理"}),t.inventory_alerts.low_stock_items>10&&n.push({type:"inventory",title:"庫存預警",description:"多項商品庫存不足，建議及時補貨以避免缺貨",priority:"medium",action:"檢視庫存狀態"}),parseFloat(t.website_performance.conversion_rate_today)<2&&n.push({type:"marketing",title:"轉換率偏低",description:"今日轉換率低於平均水平，建議檢查網站體驗或行銷策略",priority:"medium",action:"優化使用者體驗"}),r.length>3&&n.push({type:"system",title:"系統異常偵測",description:"系統偵測到多項異常，建議進行全面系統檢查",priority:"high",action:"進行系統診斷"}),s.length>2&&n.push({type:"alert",title:"警報處理",description:"有多個未解決的警報，建議優先處理高優先級警報",priority:"urgent",action:"處理關鍵警報"}),n})();return e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"智能建議"}),e.jsx(N,{className:"h-5 w-5 text-amber-500"})]}),e.jsxs("div",{className:"space-y-4",children:[c.map((n,a)=>e.jsx(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:a*.1},className:"p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(N,{className:"h-4 w-4 text-amber-500"}),e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:n.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${n.priority==="urgent"?"bg-red-100 text-red-800":n.priority==="high"?"bg-orange-100 text-orange-800":"bg-amber-100 text-amber-800"}`,children:n.priority})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:n.description}),e.jsxs("button",{className:"text-xs text-amber-600 hover:text-amber-800 font-medium",children:[n.action," →"]})]})})},a)),c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"系統運行良好，暫無特別建議"})]})]})]})},ne=({alert:t,isOpen:r,onClose:s,onAcknowledge:i,onResolve:c})=>!r||!t?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"警報詳情"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(w,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx($,{className:`h-6 w-6 ${t.priority==="critical"?"text-red-500":t.priority==="high"?"text-orange-500":"text-amber-500"}`}),e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:t.alert_type}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${t.priority==="critical"?"bg-red-100 text-red-800":t.priority==="high"?"bg-orange-100 text-orange-800":"bg-amber-100 text-amber-800"}`,children:t.priority})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"警報訊息"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"影響區域"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.affected_area})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"發生時間"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.created_at).toLocaleString("zh-TW")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"預估影響"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.estimated_impact})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"建議行動"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:t.suggested_actions.map((n,a)=>e.jsx("li",{className:"text-sm text-gray-700",children:n},a))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"關閉"}),!t.acknowledged_by&&e.jsx("button",{onClick:()=>{i(t.alert_id),s()},className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"確認警報"}),!t.resolved_at&&e.jsx("button",{onClick:()=>{c(t.alert_id),s()},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"標記解決"})]})]})]})});export{$e as default};
