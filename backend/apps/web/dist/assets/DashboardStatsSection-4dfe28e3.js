import{r as a,g as E,j as e,A as h}from"./index-5be64975.js";import{C as I}from"./CurrencyDollarIcon-0b43bcd8.js";import{C as w}from"./ClipboardDocumentListIcon-c19d60a8.js";import{C as y}from"./ChartBarIcon-8ae14525.js";import{B as T}from"./BuildingStorefrontIcon-4bf9a75e.js";import{U as M}from"./UserIcon-c9b201ef.js";import{T as O}from"./TruckIcon-5bf0fb42.js";function A({title:n,titleId:d,...i},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":d},i),n?a.createElement("title",{id:d},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const L=a.forwardRef(A),k=L,s={SALES:"sales",OPERATIONS:"operations",FINANCIAL:"financial",INVENTORY:"inventory",CUSTOMER:"customer",LOGISTICS:"logistics",SYSTEM:"system"},P=({categories:n=[],defaultExpandedCategories:d=[],showRefreshButton:i=!1,className:c=""})=>{const[x,v]=a.useState(new Set(d)),[u,S]=a.useState({}),[m,f]=a.useState(!1),o=a.useMemo(()=>({[s.SALES]:{title:"銷售統計",icon:I,stats:[{label:"今日銷售",value:"125,600",trend:"+12.5%",trendUp:!0},{label:"本月銷售",value:"456,800",trend:"+8.3%",trendUp:!0},{label:"訂單數量",value:"1,234",trend:"+15.7%",trendUp:!0},{label:"平均訂單值",value:"380",trend:"-2.1%",trendUp:!1}]},[s.OPERATIONS]:{title:"營運統計",icon:w,stats:[{label:"待處理訂單",value:"23",trend:"+5",trendUp:!1},{label:"已發貨訂單",value:"156",trend:"+12",trendUp:!0},{label:"退貨處理",value:"8",trend:"-3",trendUp:!0},{label:"客服工單",value:"45",trend:"+7",trendUp:!1}]},[s.FINANCIAL]:{title:"財務概況",icon:y,stats:[{label:"本月收入",value:"456,800",trend:"+8.3%",trendUp:!0},{label:"本月支出",value:"234,500",trend:"+12.1%",trendUp:!1},{label:"淨利潤",value:"222,300",trend:"+4.2%",trendUp:!0},{label:"毛利率",value:"48.7%",trend:"-1.2%",trendUp:!1}]},[s.INVENTORY]:{title:"庫存狀況",icon:T,stats:[{label:"總商品數",value:"1,567",trend:"+45",trendUp:!0},{label:"庫存不足",value:"23",trend:"+5",trendUp:!1},{label:"暢銷商品",value:"145",trend:"+12",trendUp:!0},{label:"滯銷商品",value:"67",trend:"-8",trendUp:!0}]},[s.CUSTOMER]:{title:"客戶數據",icon:M,stats:[{label:"總客戶數",value:"12,345",trend:"+234",trendUp:!0},{label:"活躍客戶",value:"8,901",trend:"+123",trendUp:!0},{label:"新註冊",value:"67",trend:"+12",trendUp:!0},{label:"客戶滿意度",value:"4.8",trend:"+0.2",trendUp:!0}]},[s.LOGISTICS]:{title:"物流配送",icon:O,stats:[{label:"待配送",value:"89",trend:"+12",trendUp:!1},{label:"配送中",value:"145",trend:"+23",trendUp:!0},{label:"已送達",value:"234",trend:"+45",trendUp:!0},{label:"配送異常",value:"3",trend:"-2",trendUp:!0}]},[s.SYSTEM]:{title:"系統狀況",icon:k,stats:[{label:"系統運行時間",value:"99.8%",trend:"+0.1%",trendUp:!0},{label:"今日訪問量",value:"23,456",trend:"+1,234",trendUp:!0},{label:"頁面載入時間",value:"1.2s",trend:"-0.1s",trendUp:!0},{label:"錯誤率",value:"0.02%",trend:"-0.01%",trendUp:!0}]}}),[]),N=t=>({[s.SALES]:"",[s.OPERATIONS]:"",[s.FINANCIAL]:"",[s.INVENTORY]:"",[s.CUSTOMER]:"",[s.LOGISTICS]:"",[s.SYSTEM]:""})[t]||"",p=a.useCallback(async()=>{f(!0);try{await new Promise(r=>setTimeout(r,1e3));const t={};n.forEach(r=>{o[r]&&(t[r]=o[r].stats)}),S(t)}catch(t){console.error("載入統計數據失敗:",t)}finally{f(!1)}},[n,o]);a.useEffect(()=>{p()},[n,p]);const g=t=>{const r=new Set(x);r.has(t)?r.delete(t):r.add(t),v(r)},j=()=>{p()};return a.useEffect(()=>{Object.keys(u).length>0&&E.fromTo(".stats-card",{opacity:0,y:20},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power2.out"})},[u]),n.length===0?null:e.jsxs("div",{className:`space-y-6 ${c}`,children:[i&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 font-chinese",children:"數據概覽"}),e.jsx("button",{onClick:j,disabled:m,className:`${h.button} bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b8743d] transition-colors disabled:opacity-50`,children:m?"載入中...":"刷新數據"})]}),n.map(t=>{const r=o[t];if(!r)return null;const b=x.has(t),U=r.icon;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-4 bg-white/60 backdrop-blur-md rounded-lg border border-white/20 hover:bg-white/80 transition-all duration-300",onClick:()=>g(t),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#cc824d]/10 rounded-lg flex items-center justify-center",children:e.jsx(U,{className:"w-6 h-6 text-[#cc824d]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:r.title}),e.jsx("p",{className:"text-sm text-gray-500",children:"點擊展開/收起"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:N(t)}),e.jsx("div",{className:`transform transition-transform duration-300 ${b?"rotate-180":""}`,children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),b&&e.jsx("div",{className:"grid grid-cols-4 gap-4",children:(u[t]||r.stats).map((l,C)=>e.jsxs("div",{className:`stats-card ${h.glassCard} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 font-chinese",children:l.label}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${l.trendUp?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l.trend})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:l.value}),e.jsxs("div",{className:"text-xs text-gray-500",children:["較上期 ",l.trendUp?"上升":"下降"]})]},C))})]},t)}),m&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#cc824d]"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"載入統計數據中..."})]})]})};export{P as D,s as S};
