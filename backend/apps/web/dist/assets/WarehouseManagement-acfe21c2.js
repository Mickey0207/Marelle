import{r as x,j as e,A as v}from"./index-5be64975.js";import{B as k}from"./BuildingStorefrontIcon-4bf9a75e.js";import{P as C}from"./PlusIcon-86b6a2f5.js";import{X as E}from"./XMarkIcon-404a829f.js";import{C as D}from"./CheckIcon-8874d163.js";import{P as S}from"./PencilIcon-0921d86f.js";import{T as I}from"./TrashIcon-c73d815d.js";const m=[{id:"w1",name:"台北一倉",address:"台北市中正區",capacity:1e3},{id:"w2",name:"新北二倉",address:"新北市板橋區",capacity:800}],p="__mock_warehouses__";function W(){try{const c=localStorage.getItem(p);if(!c)return m;const r=JSON.parse(c);return Array.isArray(r)?r:m}catch{return m}}function j(c){try{localStorage.setItem(p,JSON.stringify(c||[]))}catch{}}const f={id:"",name:"",code:"",isDefault:!1,address:"",contact:"",enabled:!0},O=()=>{const[c,r]=x.useState(()=>W()),[n,o]=x.useState(null),[a,l]=x.useState(f),h=()=>l(f),N=()=>{h(),o("NEW")},b=s=>{l({...s}),o(s.id)},u=()=>{o(null),h()},g=()=>{var i;if(!((i=a.name)!=null&&i.trim()))return alert("請輸入倉庫名稱");const s=n==="NEW"||!a.id?a.name.replace(/\s+/g,"-").toLowerCase():a.id,t=n==="NEW"?[...c,{...a,id:s}]:c.map(d=>d.id===n?{...a,id:s}:d);a.isDefault&&t.forEach(d=>{d.isDefault=d.id===s}),r(t),j(t),u()},y=s=>{if(!confirm("確定要刪除此倉庫？"))return;const t=c.filter(i=>i.id!==s);r(t),j(t)};return e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen",children:e.jsxs("div",{className:v.contentContainerFluid,children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(k,{className:"w-8 h-8 text-amber-500 mr-3"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-chinese",children:"倉庫管理"})]}),e.jsx("div",{className:"glass rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-600 font-chinese",children:"管理倉庫清單、新增/刪除、設定預設倉庫與聯絡資訊"}),e.jsxs("button",{onClick:N,className:"px-3 py-2 rounded bg-[#cc824d] text-white hover:bg-[#b3723f] flex items-center text-sm",children:[e.jsx(C,{className:"w-4 h-4 mr-1"})," 新增倉庫"]})]})}),n&&e.jsxs("div",{className:"glass rounded-2xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 font-chinese",children:n==="NEW"?"新增倉庫":"編輯倉庫"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1 font-chinese",children:"名稱"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:a.name,onChange:s=>l(t=>({...t,name:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1 font-chinese",children:"代碼"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:a.code,onChange:s=>l(t=>({...t,code:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1 font-chinese",children:"聯絡資訊"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:a.contact,onChange:s=>l(t=>({...t,contact:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1 font-chinese",children:"地址"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:a.address,onChange:s=>l(t=>({...t,address:s.target.value}))})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{className:"text-sm text-gray-600 font-chinese",children:"設為預設倉庫"}),e.jsx("input",{type:"checkbox",checked:a.isDefault,onChange:s=>l(t=>({...t,isDefault:s.target.checked}))})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{className:"text-sm text-gray-600 font-chinese",children:"啟用"}),e.jsx("input",{type:"checkbox",checked:a.enabled,onChange:s=>l(t=>({...t,enabled:s.target.checked}))})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsxs("button",{onClick:u,className:"px-3 py-2 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 flex items-center text-sm",children:[e.jsx(E,{className:"w-4 h-4 mr-1"})," 取消"]}),e.jsxs("button",{onClick:g,className:"px-3 py-2 rounded bg-[#cc824d] text-white hover:bg-[#b3723f] flex items-center text-sm",children:[e.jsx(D,{className:"w-4 h-4 mr-1"})," 儲存"]})]})]}),e.jsx("div",{className:"glass rounded-2xl p-6",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500",children:[e.jsx("th",{className:"py-2",children:"名稱"}),e.jsx("th",{className:"py-2",children:"代碼"}),e.jsx("th",{className:"py-2",children:"聯絡"}),e.jsx("th",{className:"py-2",children:"地址"}),e.jsx("th",{className:"py-2",children:"預設"}),e.jsx("th",{className:"py-2",children:"啟用"}),e.jsx("th",{className:"py-2 text-right",children:"操作"})]})}),e.jsx("tbody",{children:c.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:s.name}),e.jsx("td",{className:"py-2",children:s.code}),e.jsx("td",{className:"py-2",children:s.contact}),e.jsx("td",{className:"py-2",children:s.address}),e.jsx("td",{className:"py-2",children:s.isDefault?"✓":""}),e.jsx("td",{className:"py-2",children:s.enabled?"啟用":"停用"}),e.jsxs("td",{className:"py-2 text-right",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:bg-blue-100 rounded",onClick:()=>b(s),children:e.jsx(S,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-red-600 hover:bg-red-100 rounded ml-1",onClick:()=>y(s.id),children:e.jsx(I,{className:"w-4 h-4"})})]})]},s.id))})]})})]})})};export{O as default};
