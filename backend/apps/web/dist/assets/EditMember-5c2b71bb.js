import{j as e,e as f,u as N,r as c,A as i}from"./index-5be64975.js";import{m as v}from"./membersDataManager-4a5623cf.js";import{S as h}from"./SearchableSelect-06cd3eb3.js";import"./chevron-down-e41c1b61.js";function n({label:r,hint:d,error:u,children:p,htmlFor:o,required:m=!1,className:x=""}){return e.jsxs("div",{className:`space-y-1 ${x}`,children:[r&&e.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[r,m&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),p,d&&!u&&e.jsx("p",{className:"text-xs text-gray-500",children:d}),u&&e.jsx("p",{className:"text-xs text-red-600",children:u})]})}const y=[{value:"男",label:"男"},{value:"女",label:"女"},{value:"其他",label:"其他"}],S=[{value:"一般",label:"一般"},{value:"銀卡",label:"銀卡"},{value:"金卡",label:"金卡"},{value:"VIP",label:"VIP"}],C=[{value:"active",label:"活動"},{value:"inactive",label:"休眠"}];function k(){const{id:r}=f(),d=N(),[u,p]=c.useState(!0),[o,m]=c.useState(!1),[x,b]=c.useState(null),[t,l]=c.useState({});c.useEffect(()=>{let s=!0;return(async()=>{const a=await v.getMemberById(r);s&&(a.success&&(b(a.data),l({name:a.data.name||"",email:a.data.email||"",phone:a.data.phone||"",gender:a.data.gender||"男",birthday:a.data.birthday||"",level:a.data.level||"一般",status:a.data.status||"active",points:a.data.points??0,tags:a.data.tags||[]})),p(!1))})(),()=>{s=!1}},[r]);const g=c.useMemo(()=>["高價值","常客","黑名單","社群來客","廣告轉化"].map(s=>({value:s,label:s})),[]),j=async()=>{m(!0);const s={...t},a=await v.updateMember(r,s);m(!1),a.success&&d("/members")};return u?e.jsx("div",{className:"p-6",children:"載入中…"}):x?e.jsx("div",{className:"min-h-screen bg-[#fdf8f2]",children:e.jsxs("div",{className:i.contentContainerStandard,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 font-chinese",children:"編輯會員"}),e.jsxs("p",{className:"text-gray-500",children:["會員編號：",x.memberNo]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:i.secondaryButton,onClick:()=>d(-1),children:"返回"}),e.jsx("button",{className:i.primaryButton,onClick:j,disabled:o,children:o?"儲存中…":"儲存"})]})]}),e.jsx("div",{className:"glass rounded-2xl p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n,{label:"姓名",required:!0,children:e.jsx("input",{className:i.input,value:t.name,onChange:s=>l(a=>({...a,name:s.target.value}))})}),e.jsx(n,{label:"Email",required:!0,children:e.jsx("input",{className:i.input,type:"email",value:t.email,onChange:s=>l(a=>({...a,email:s.target.value}))})}),e.jsx(n,{label:"電話",required:!0,children:e.jsx("input",{className:i.input,value:t.phone,onChange:s=>l(a=>({...a,phone:s.target.value}))})}),e.jsx(n,{label:"性別",children:e.jsx(h,{options:y,value:t.gender,onChange:s=>l(a=>({...a,gender:s}))})}),e.jsx(n,{label:"生日",children:e.jsx("input",{className:i.input,type:"date",value:t.birthday,onChange:s=>l(a=>({...a,birthday:s.target.value}))})}),e.jsx(n,{label:"會員等級",children:e.jsx(h,{options:S,value:t.level,onChange:s=>l(a=>({...a,level:s}))})}),e.jsx(n,{label:"狀態",children:e.jsx(h,{options:C,value:t.status,onChange:s=>l(a=>({...a,status:s}))})}),e.jsx(n,{label:"積分",children:e.jsx("input",{className:i.input,type:"number",value:t.points,onChange:s=>l(a=>({...a,points:Number(s.target.value||0)}))})}),e.jsx(n,{label:"標籤",children:e.jsx(h,{multiple:!0,options:g,value:t.tags,onChange:s=>l(a=>({...a,tags:s})),placeholder:"新增或選擇標籤"})})]})})]})}):e.jsx("div",{className:"p-6",children:"找不到會員"})}export{k as default};
