import{r as t,j as e}from"./index-5be64975.js";import{a as j}from"./analyticsDataManager-b1921a61.js";import{A as N}from"./ArrowPathIcon-3cac90dc.js";import{C as W}from"./ClockIcon-8dc756af.js";import{E as B}from"./EyeIcon-db27fda4.js";import{C as S}from"./CurrencyDollarIcon-0b43bcd8.js";import{F as T}from"./FireIcon-9345fb44.js";import{C as V}from"./ChartBarIcon-8ae14525.js";import{A as f}from"./ArrowTrendingUpIcon-8eadc7b1.js";import{S as z}from"./ShoppingBagIcon-4ba987e2.js";import{E as A}from"./ExclamationTriangleIcon-5236f94b.js";import{U as K}from"./UsersIcon-99672bc6.js";import{S as H}from"./SparklesIcon-7f540cfc.js";import{L as O}from"./LightBulbIcon-5e0d298b.js";import{M as $}from"./MapPinIcon-12c3a05e.js";import{A as q}from"./ArrowTrendingDownIcon-e9481599.js";function G({title:r,titleId:o,...a},b){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:b,"aria-labelledby":o},a),r?t.createElement("title",{id:o},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const J=t.forwardRef(G),Q=J,be=()=>{var p,v,w,y,k,_,I,D,C;const[r,o]=t.useState({}),[a,b]=t.useState({}),[X,E]=t.useState({}),[Y,P]=t.useState({}),[F,g]=t.useState(!0),[n,L]=t.useState("30d"),[M,R]=t.useState(new Date),m=t.useCallback(()=>{const s=j.getRealTimeMetrics();b(s),R(new Date)},[]),u=t.useCallback(async()=>{try{g(!0);const s=j.getKPIDashboard(n);o(s);const l=j.getSalesTrends(n);E(l);const U=j.getAIInsights();P(U),m()}catch(s){console.error("載入分析數據失敗:",s)}finally{g(!1)}},[n,m]);t.useEffect(()=>{u();const s=setInterval(m,3e4);return()=>clearInterval(s)},[n,u,m]);const h=s=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(s),d=s=>new Intl.NumberFormat("zh-TW").format(s),x=s=>`${(s||0).toFixed(1)}%`,i=s=>s>0?e.jsx(f,{className:"h-4 w-4 text-green-500"}):s<0?e.jsx(q,{className:"h-4 w-4 text-red-500"}):e.jsx("div",{className:"h-4 w-4"}),c=s=>s>0?"text-green-600":s<0?"text-red-600":"text-gray-600";return F?e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{className:"h-6 w-6 animate-spin text-[#cc824d]"}),e.jsx("span",{className:"text-lg text-gray-600",children:"載入數據分析中..."})]})})}):e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"w-full px-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"數據分析總覽"}),e.jsx("p",{className:"text-gray-600",children:"360度全方位業務數據洞察與智能分析"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:n,onChange:s=>L(s.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"7d",children:"近 7 天"}),e.jsx("option",{value:"30d",children:"近 30 天"}),e.jsx("option",{value:"90d",children:"近 90 天"}),e.jsx("option",{value:"1y",children:"近 1 年"})]}),e.jsxs("button",{onClick:m,className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b8753f] transition-colors flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"刷新"]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(W,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"實時監控"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["最後更新: ",M.toLocaleTimeString("zh-TW")]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"當前訪客"}),e.jsx(B,{className:"h-5 w-5 text-blue-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d(a.current_visitors||0)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["活躍會話: ",d(a.active_sessions||0)]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"即時銷售"}),e.jsx(S,{className:"h-5 w-5 text-green-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:h(a.real_time_sales||0)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["轉換率: ",a.conversion_rate||0,"%"]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"設備分布"}),e.jsx(Q,{className:"h-5 w-5 text-purple-500"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"手機"}),e.jsx("span",{className:"font-semibold",children:x((p=a.device_breakdown)==null?void 0:p.mobile)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"桌機"}),e.jsx("span",{className:"font-semibold",children:x((v=a.device_breakdown)==null?void 0:v.desktop)})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"熱門頁面"}),e.jsx(T,{className:"h-5 w-5 text-orange-500"})]}),e.jsx("div",{className:"space-y-1",children:(a.top_pages||[]).slice(0,2).map((s,l)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"truncate",children:s.page}),e.jsx("span",{className:"font-semibold",children:d(s.visitors)})]},l))})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(V,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"關鍵績效指標 (KPIs)"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"財務績效"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"總營收"}),e.jsx(S,{className:"h-5 w-5 text-green-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:h(((w=r.financial_kpis)==null?void 0:w.total_revenue)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[i(5.2),e.jsx("span",{className:c(5.2),children:"+5.2% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"毛利潤"}),e.jsx(f,{className:"h-5 w-5 text-blue-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:h(((y=r.financial_kpis)==null?void 0:y.gross_profit)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[i(3.1),e.jsx("span",{className:c(3.1),children:"+3.1% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"平均訂單價值"}),e.jsx(z,{className:"h-5 w-5 text-purple-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:h(((k=r.financial_kpis)==null?void 0:k.average_order_value)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[i(-1.5),e.jsx("span",{className:c(-1.5),children:"-1.5% vs 上期"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"營運績效"}),e.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"轉換率"}),e.jsx(f,{className:"h-5 w-5 text-green-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:x(((_=r.operational_kpis)==null?void 0:_.conversion_rate)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[i(2.3),e.jsx("span",{className:c(2.3),children:"+2.3% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"購物車放棄率"}),e.jsx(A,{className:"h-5 w-5 text-orange-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:x(((I=r.operational_kpis)==null?void 0:I.cart_abandonment_rate)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[i(-3.8),e.jsx("span",{className:c(-3.8),children:"-3.8% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"客戶滿意度"}),e.jsx(K,{className:"h-5 w-5 text-blue-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:x(((D=r.operational_kpis)==null?void 0:D.customer_satisfaction)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[i(1.2),e.jsx("span",{className:c(1.2),children:"+1.2% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"庫存周轉率"}),e.jsx(N,{className:"h-5 w-5 text-purple-500"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:[(((C=r.operational_kpis)==null?void 0:C.inventory_turnover)||0).toFixed(1),"x"]}),e.jsxs("div",{className:"flex items-center text-sm",children:[i(.8),e.jsx("span",{className:c(.8),children:"+0.8% vs 上期"})]})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(H,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"AI 智能洞察"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(O,{className:"h-5 w-5 mr-2 text-yellow-500"}),"商業機會"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-yellow-400 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"護膚類商品需求上升"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"檢測到護膚類商品搜尋量增加 23%，建議增加相關產品推廣"}),e.jsx("div",{className:"text-xs text-yellow-600 mt-2",children:"置信度: 87%"})]})]})}),e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-green-400 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-800",children:"交叉銷售機會"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"購買保養品的客戶有 68% 機率同時購買工具類商品"}),e.jsx("div",{className:"text-xs text-green-600 mt-2",children:"置信度: 92%"})]})]})})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(A,{className:"h-5 w-5 mr-2 text-red-500"}),"風險警示"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-red-400 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-800",children:"庫存不足警告"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"5 件熱銷商品庫存將在 7 天內售完，需要及時補貨"}),e.jsx("div",{className:"text-xs text-red-600 mt-2",children:"風險等級: 高"})]})]})}),e.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-orange-400 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-orange-800",children:"客戶流失風險"}),e.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"23 位 VIP 客戶 30 天內未購物，存在流失風險"}),e.jsx("div",{className:"text-xs text-orange-600 mt-2",children:"風險等級: 中"})]})]})})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx($,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"訂單地理分布"]}),e.jsx("div",{className:"space-y-3",children:(a.geographic_distribution||[]).map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 bg-[#cc824d] rounded-full",style:{opacity:.3+s.percentage/100*.7}}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.region})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:d(s.visitors)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.percentage,"%"]})]})]},l))})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"今日熱銷商品"]}),e.jsx("div",{className:"space-y-3",children:(a.top_products||[]).slice(0,5).map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-[#cc824d] text-white text-xs font-bold rounded-full",children:l+1}),e.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:s.product_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[d(s.sales)," 件"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d(s.views)," 瀏覽"]})]})]},l))})]})]})]})})};export{be as default};
