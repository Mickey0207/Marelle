import{r as d,j as e}from"./index-5be64975.js";import{S as y}from"./StandardTable-046e436b.js";import{G as T}from"./GlassModal-8d9cbd14.js";import{T as g}from"./TabNavigation-b0ee78ba.js";import{I as N}from"./IconActionButton-2bcd0b2a.js";import{C as A}from"./CalendarDaysIcon-5f332d7c.js";import{E as S}from"./EyeIcon-db27fda4.js";import"./chevron-down-e41c1b61.js";import"./XMarkIcon-404a829f.js";const C=Date.now(),D=Array.from({length:16}).map((s,a)=>{const t=a%4!==0,c=Math.floor(a*53%3e3)+100,r=c+a%3*50,n=a%7+1,b=n*c,m=["M","D","Y"],i=m[a%m.length],u=["Credit","ATM_TAISHIN","CVS_FAMILY"],p=u[a%u.length],o=new Date(C-a*864e5),j=new Date(o.getTime()-36e5),x=t?new Date(o.getTime()-18e5):"",h=t?new Date(o.getTime()-9e5):"";return{id:`SUB-${a+1}`,MerchantTradeNo:`SMTN${4e5+a}`,TradeNo:`STN${5e5+a}`,RtnCode:t?1:0,RtnMsg:t?"交易成功":"交易失敗",PaymentType:p,SimulatePaid:a%6===0,MerchantID:"2000132",StoreID:"",PeriodType:i,Frequency:i==="D"?7:1,ExecTimes:12,PeriodAmount:c,TradeDate:j.toISOString(),PaymentDate:x?x.toISOString():"",ProcessDate:h?h.toISOString():"",Amount:c,FirstAuthAmount:r,TotalSuccessTimes:t?n:0,TotalSuccessAmount:t?b:0,AuthCode:t?`AC${1e3+a}`:"",Gwsr:t?9e5+a:"",CustomField1:"",CustomField2:"",CustomField3:"",CustomField4:"",CheckMacValue:`MOCKEDCHECKMACSUB${a}`}}),f={getList(){return[...D]}},M=s=>s==="D"?"天 (D)":s==="M"?"月 (M)":s==="Y"?"年 (Y)":s||"-",v=[{key:"MerchantTradeNo",label:"特店交易編號"},{key:"TradeNo",label:"綠界交易編號"},{key:"RtnMsg",label:"狀態訊息"},{key:"Amount",label:"本次授權金額",render:s=>e.jsxs("span",{children:["$",s]})},{key:"_actions",label:"操作",sortable:!1,render:(s,a)=>e.jsx(N,{Icon:S,label:"查看詳情",variant:"blue",onClick:()=>{var t;return(t=a.__onView)==null?void 0:t.call(a,a)}})}];function G(){const[s,a]=d.useState(null),[t,c]=d.useState("basic"),r=d.useMemo(()=>f.getList().map(n=>({...n,__onView:()=>{a(n),c("basic")}})),[]);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-serif font-bold text-[#2d1e0f]",children:"通知中心"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"綠界定期定額"})]}),e.jsx(y,{data:r,columns:v,title:"綠界定期定額付款結果",exportFileName:"ecpay-subscriptions",getRowId:n=>n.id,emptyIcon:A}),e.jsx(T,{isOpen:!!s,onClose:()=>a(null),title:"定期定額付款詳情",size:"max-w-5xl",contentMaxHeight:"max-h-[calc(85vh-80px)]",children:s&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"border-b",children:e.jsx(g,{tabs:[{key:"basic",label:"基本資料"},{key:"schedule",label:"週期設定"},{key:"timing",label:"時間"},{key:"amounts",label:"金額統計"},{key:"advanced",label:"進階欄位"}],mode:"controlled",activeKey:t,onTabChange:n=>c(n.key),layout:"left",className:"px-4"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[t==="basic"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(l,{label:"特店交易編號",children:s.MerchantTradeNo}),e.jsx(l,{label:"綠界交易編號",children:s.TradeNo}),e.jsx(l,{label:"狀態代碼",children:s.RtnCode}),e.jsx(l,{label:"狀態訊息",children:s.RtnMsg}),e.jsx(l,{label:"付款方式",children:s.PaymentType||"-"}),e.jsx(l,{label:"模擬付款",children:s.SimulatePaid?"是":"否"}),e.jsx(l,{label:"特店編號",children:s.MerchantID}),e.jsx(l,{label:"店舖代號",children:s.StoreID||"-"})]}),t==="schedule"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(l,{label:"週期種類",children:M(s.PeriodType)}),e.jsx(l,{label:"執行頻率",children:s.Frequency}),e.jsx(l,{label:"執行次數",children:s.ExecTimes}),e.jsx(l,{label:"每期授權金額",children:s.PeriodAmount!=null?`NT$${s.PeriodAmount}`:"-"})]}),t==="timing"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(l,{label:"訂單成立時間",children:s.TradeDate}),e.jsx(l,{label:"付款時間",children:s.PaymentDate}),e.jsx(l,{label:"處理時間",children:s.ProcessDate})]}),t==="amounts"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(l,{label:"本次授權金額",children:s.Amount!=null?`NT$${s.Amount}`:"-"}),e.jsx(l,{label:"首次授權金額",children:s.FirstAuthAmount!=null?`NT$${s.FirstAuthAmount}`:"-"}),e.jsx(l,{label:"已成功次數",children:s.TotalSuccessTimes!=null?s.TotalSuccessTimes:"-"}),e.jsx(l,{label:"成功金額累計",children:s.TotalSuccessAmount!=null?`NT$${s.TotalSuccessAmount}`:"-"})]}),t==="advanced"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(l,{label:"授權碼",children:s.AuthCode||"-"}),e.jsx(l,{label:"授權交易單號 (Gwsr)",children:s.Gwsr||"-"}),e.jsx(l,{label:"自訂欄位1",children:s.CustomField1||"-"}),e.jsx(l,{label:"自訂欄位2",children:s.CustomField2||"-"}),e.jsx(l,{label:"自訂欄位3",children:s.CustomField3||"-"}),e.jsx(l,{label:"自訂欄位4",children:s.CustomField4||"-"}),e.jsx("div",{className:"col-span-2",children:e.jsx(l,{label:"檢查碼",children:e.jsx("code",{className:"text-xs break-all",children:s.CheckMacValue})})})]})]})]})})]})}const l=({label:s,children:a})=>e.jsxs("div",{className:"grid grid-cols-3 gap-4 py-2",children:[e.jsx("div",{className:"text-sm text-gray-500 font-chinese col-span-1",children:s}),e.jsx("div",{className:"col-span-2 text-gray-900 text-sm break-words",children:a||"-"})]});export{G as default};
