import{r as n,j as e,A as o}from"./index-09c3368c.js";import{d as x}from"./dataManager-5e949847.js";import{a as d}from"./Charts-566637e5.js";const m=({rate:t})=>e.jsxs("div",{className:`w-12 h-8 flex items-center justify-center text-xs rounded ${t>=.4?"bg-green-500 text-white":t>=.2?"bg-green-200 text-green-800":"bg-gray-100 text-gray-700"}`,children:[Math.round(t*100),"%"]}),u=()=>{const t=n.useMemo(()=>x(),[]),[r,c]=n.useState("table"),i=n.useMemo(()=>{const s=[];for(const a of t)a.cells.forEach(l=>{s.push({cohort:String(a.cohortWeek),week:l.weekOffset,value:Math.round(l.rate*100)})});return s},[t]);return e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen",children:e.jsxs("div",{className:o.contentContainerFluid,children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-chinese mb-6",children:"留存"}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-sm text-gray-500 font-chinese",children:["共 ",t.length," 組 Cohort"]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{className:`px-3 py-1 rounded text-sm ${r==="table"?"bg-[#cc824d] text-white":"border text-gray-700"}`,onClick:()=>c("table"),children:"表格"}),e.jsx("button",{className:`px-3 py-1 rounded text-sm ${r==="chart"?"bg-[#cc824d] text-white":"border text-gray-700"}`,onClick:()=>c("chart"),children:"圖表"})]})]}),r==="table"?e.jsx("div",{className:"glass rounded-2xl p-4 overflow-x-auto",children:e.jsx("div",{className:"min-w-max",children:t.map(s=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("div",{className:"w-28 text-sm text-gray-600",children:["Cohort ",s.cohortWeek,"（",s.base,"人）"]}),e.jsx("div",{className:"flex gap-2",children:s.cells.map(a=>e.jsx(m,{rate:a.rate},a.weekOffset))})]},s.cohortWeek))})}):e.jsx("div",{className:"glass rounded-2xl p-4",children:e.jsx(d,{data:i,xField:"week",yField:"value"})})]})})};export{u as default};
