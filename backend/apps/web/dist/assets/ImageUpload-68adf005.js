import{r as s,j as t}from"./index-5be64975.js";import{X as N}from"./XMarkIcon-404a829f.js";function k({title:r,titleId:n,...o},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},o),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const A=s.forwardRef(k),D=A;function E({title:r,titleId:n,...o},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},o),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const P=s.forwardRef(E),R=P,F=({images:r=[],onChange:n,maxImages:o=10})=>{const[l,d]=s.useState(!1),p=s.useRef(null),u=e=>{const x=Array.from(e).filter(a=>a.type.startsWith("image/")?a.size>10*1024*1024?(alert(`${a.name} 文件過大，請選擇小於 10MB 的圖片`),!1):!0:(alert(`${a.name} 不是有效的圖片文件`),!1)),c=Math.max(0,o-r.length);if(c===0){alert(`最多只能上傳 ${o} 張圖片`);return}const v=x.slice(0,c);x.length>c&&alert(`已達上限，只加入前 ${c} 張圖片`);const b=v.map(a=>new Promise(j=>{const m=new FileReader;m.onload=w=>{j({id:Date.now()+Math.random(),file:a,url:w.target.result,name:a.name,size:a.size,type:a.type})},m.readAsDataURL(a)}));Promise.all(b).then(a=>{n([...r,...a])})},h=e=>{e.preventDefault(),e.stopPropagation(),e.type==="dragenter"||e.type==="dragover"?d(!0):e.type==="dragleave"&&d(!1)},g=e=>{e.preventDefault(),e.stopPropagation(),d(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&u(e.dataTransfer.files)},f=e=>{e.target.files&&e.target.files[0]&&u(e.target.files)},y=e=>{n(r.filter(i=>i.id!==e))};return t.jsxs("div",{className:"space-y-4",children:[r.length>0&&t.jsx("div",{className:"grid grid-cols-5 gap-4",children:r.map((e,i)=>t.jsxs("div",{className:"relative group bg-gray-100 rounded-lg overflow-hidden aspect-square",children:[t.jsx("img",{src:e.url,alt:e.name,className:"w-full h-full object-cover"}),i===0&&t.jsx("div",{className:"absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded",children:"主圖"}),t.jsx("button",{type:"button",onClick:()=>y(e.id),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(N,{className:"w-4 h-4"})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("div",{className:"truncate",children:e.name}),t.jsxs("div",{children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]},e.id))}),r.length<o&&t.jsxs("div",{className:`
            border-2 border-dashed rounded-lg p-8 text-center transition-colors
            ${l?"border-[#cc824d] bg-[#cc824d]/5":"border-gray-300 hover:border-gray-400"}
          `,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:g,children:[t.jsx(R,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"拖拽圖片到此處或點擊上傳"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"支援 PNG, JPG, GIF 格式，最大 10MB"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["還可以上傳 ",o-r.length," 張圖片"]}),t.jsxs("button",{type:"button",onClick:()=>{var e;return(e=p.current)==null?void 0:e.click()},className:"mt-4 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(D,{className:"w-4 h-4 mr-2"}),"選擇圖片"]}),t.jsx("input",{ref:p,type:"file",multiple:!0,accept:"image/*",onChange:f,className:"hidden"})]}),t.jsx("div",{className:"text-sm text-gray-500",children:t.jsxs("ul",{className:"space-y-1",children:[t.jsx("li",{children:"• 第一張圖片將作為主圖顯示"}),t.jsx("li",{children:"• 可以拖拽圖片調整順序"}),t.jsx("li",{children:"• 建議圖片比例為 1:1 (正方形)"}),t.jsx("li",{children:"• 最佳解析度：800x800 像素以上"})]})})]})};export{F as I,R as P};
