var U5=Object.defineProperty;var B5=(s,t,r)=>t in s?U5(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var Fi=(s,t,r)=>(B5(s,typeof t!="symbol"?t+"":t,r),r);function z5(s,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in s)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function W5(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var mj={exports:{}},rx={},uj={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=Symbol.for("react.element"),G5=Symbol.for("react.portal"),H5=Symbol.for("react.fragment"),q5=Symbol.for("react.strict_mode"),Y5=Symbol.for("react.profiler"),Z5=Symbol.for("react.provider"),Q5=Symbol.for("react.context"),X5=Symbol.for("react.forward_ref"),K5=Symbol.for("react.suspense"),J5=Symbol.for("react.memo"),e4=Symbol.for("react.lazy"),Mf=Symbol.iterator;function t4(s){return s===null||typeof s!="object"?null:(s=Mf&&s[Mf]||s["@@iterator"],typeof s=="function"?s:null)}var xj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hj=Object.assign,pj={};function Ho(s,t,r){this.props=s,this.context=t,this.refs=pj,this.updater=r||xj}Ho.prototype.isReactComponent={};Ho.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Ho.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function gj(){}gj.prototype=Ho.prototype;function Mp(s,t,r){this.props=s,this.context=t,this.refs=pj,this.updater=r||xj}var Op=Mp.prototype=new gj;Op.constructor=Mp;hj(Op,Ho.prototype);Op.isPureReactComponent=!0;var Of=Array.isArray,fj=Object.prototype.hasOwnProperty,Lp={current:null},yj={key:!0,ref:!0,__self:!0,__source:!0};function bj(s,t,r){var a,n={},i=null,l=null;if(t!=null)for(a in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)fj.call(t,a)&&!yj.hasOwnProperty(a)&&(n[a]=t[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(s&&s.defaultProps)for(a in o=s.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:Pd,type:s,key:i,ref:l,props:n,_owner:Lp.current}}function s4(s,t){return{$$typeof:Pd,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function Fp(s){return typeof s=="object"&&s!==null&&s.$$typeof===Pd}function r4(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(r){return t[r]})}var Lf=/\/+/g;function Fx(s,t){return typeof s=="object"&&s!==null&&s.key!=null?r4(""+s.key):t.toString(36)}function Mm(s,t,r,a,n){var i=typeof s;(i==="undefined"||i==="boolean")&&(s=null);var l=!1;if(s===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(s.$$typeof){case Pd:case G5:l=!0}}if(l)return l=s,n=n(l),s=a===""?"."+Fx(l,0):a,Of(n)?(r="",s!=null&&(r=s.replace(Lf,"$&/")+"/"),Mm(n,t,r,"",function(d){return d})):n!=null&&(Fp(n)&&(n=s4(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Lf,"$&/")+"/")+s)),t.push(n)),1;if(l=0,a=a===""?".":a+":",Of(s))for(var o=0;o<s.length;o++){i=s[o];var c=a+Fx(i,o);l+=Mm(i,t,r,c,n)}else if(c=t4(s),typeof c=="function")for(s=c.call(s),o=0;!(i=s.next()).done;)i=i.value,c=a+Fx(i,o++),l+=Mm(i,t,r,c,n);else if(i==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Jd(s,t,r){if(s==null)return s;var a=[],n=0;return Mm(s,a,"","",function(i){return t.call(r,i,n++)}),a}function a4(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(r){(s._status===0||s._status===-1)&&(s._status=1,s._result=r)},function(r){(s._status===0||s._status===-1)&&(s._status=2,s._result=r)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var Qs={current:null},Om={transition:null},n4={ReactCurrentDispatcher:Qs,ReactCurrentBatchConfig:Om,ReactCurrentOwner:Lp};function vj(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Jd,forEach:function(s,t,r){Jd(s,function(){t.apply(this,arguments)},r)},count:function(s){var t=0;return Jd(s,function(){t++}),t},toArray:function(s){return Jd(s,function(t){return t})||[]},only:function(s){if(!Fp(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};Ce.Component=Ho;Ce.Fragment=H5;Ce.Profiler=Y5;Ce.PureComponent=Mp;Ce.StrictMode=q5;Ce.Suspense=K5;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n4;Ce.act=vj;Ce.cloneElement=function(s,t,r){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=hj({},s.props),n=s.key,i=s.ref,l=s._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Lp.current),t.key!==void 0&&(n=""+t.key),s.type&&s.type.defaultProps)var o=s.type.defaultProps;for(c in t)fj.call(t,c)&&!yj.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:Pd,type:s.type,key:n,ref:i,props:a,_owner:l}};Ce.createContext=function(s){return s={$$typeof:Q5,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:Z5,_context:s},s.Consumer=s};Ce.createElement=bj;Ce.createFactory=function(s){var t=bj.bind(null,s);return t.type=s,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(s){return{$$typeof:X5,render:s}};Ce.isValidElement=Fp;Ce.lazy=function(s){return{$$typeof:e4,_payload:{_status:-1,_result:s},_init:a4}};Ce.memo=function(s,t){return{$$typeof:J5,type:s,compare:t===void 0?null:t}};Ce.startTransition=function(s){var t=Om.transition;Om.transition={};try{s()}finally{Om.transition=t}};Ce.unstable_act=vj;Ce.useCallback=function(s,t){return Qs.current.useCallback(s,t)};Ce.useContext=function(s){return Qs.current.useContext(s)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(s){return Qs.current.useDeferredValue(s)};Ce.useEffect=function(s,t){return Qs.current.useEffect(s,t)};Ce.useId=function(){return Qs.current.useId()};Ce.useImperativeHandle=function(s,t,r){return Qs.current.useImperativeHandle(s,t,r)};Ce.useInsertionEffect=function(s,t){return Qs.current.useInsertionEffect(s,t)};Ce.useLayoutEffect=function(s,t){return Qs.current.useLayoutEffect(s,t)};Ce.useMemo=function(s,t){return Qs.current.useMemo(s,t)};Ce.useReducer=function(s,t,r){return Qs.current.useReducer(s,t,r)};Ce.useRef=function(s){return Qs.current.useRef(s)};Ce.useState=function(s){return Qs.current.useState(s)};Ce.useSyncExternalStore=function(s,t,r){return Qs.current.useSyncExternalStore(s,t,r)};Ce.useTransition=function(){return Qs.current.useTransition()};Ce.version="18.3.1";uj.exports=Ce;var m=uj.exports;const Md=W5(m),i4=z5({__proto__:null,default:Md},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4=m,o4=Symbol.for("react.element"),c4=Symbol.for("react.fragment"),d4=Object.prototype.hasOwnProperty,m4=l4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u4={key:!0,ref:!0,__self:!0,__source:!0};function jj(s,t,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)d4.call(t,a)&&!u4.hasOwnProperty(a)&&(n[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:o4,type:s,key:i,ref:l,props:n,_owner:m4.current}}rx.Fragment=c4;rx.jsx=jj;rx.jsxs=jj;mj.exports=rx;var e=mj.exports,Zh={},Nj={exports:{}},Vr={},wj={exports:{}},_j={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(D,M){var A=D.length;D.push(M);e:for(;0<A;){var V=A-1>>>1,B=D[V];if(0<n(B,M))D[V]=M,D[A]=B,A=V;else break e}}function r(D){return D.length===0?null:D[0]}function a(D){if(D.length===0)return null;var M=D[0],A=D.pop();if(A!==M){D[0]=A;e:for(var V=0,B=D.length,z=B>>>1;V<z;){var F=2*(V+1)-1,W=D[F],Y=F+1,ne=D[Y];if(0>n(W,A))Y<B&&0>n(ne,W)?(D[V]=ne,D[Y]=A,V=Y):(D[V]=W,D[F]=A,V=F);else if(Y<B&&0>n(ne,A))D[V]=ne,D[Y]=A,V=Y;else break e}}return M}function n(D,M){var A=D.sortIndex-M.sortIndex;return A!==0?A:D.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();s.unstable_now=function(){return l.now()-o}}var c=[],d=[],x=1,p=null,f=3,y=!1,b=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(D){for(var M=r(d);M!==null;){if(M.callback===null)a(d);else if(M.startTime<=D)a(d),M.sortIndex=M.expirationTime,t(c,M);else break;M=r(d)}}function u(D){if(v=!1,N(D),!b)if(r(c)!==null)b=!0,I(h);else{var M=r(d);M!==null&&L(u,M.startTime-D)}}function h(D,M){b=!1,v&&(v=!1,_(T),T=-1),y=!0;var A=f;try{for(N(M),p=r(c);p!==null&&(!(p.expirationTime>M)||D&&!R());){var V=p.callback;if(typeof V=="function"){p.callback=null,f=p.priorityLevel;var B=V(p.expirationTime<=M);M=s.unstable_now(),typeof B=="function"?p.callback=B:p===r(c)&&a(c),N(M)}else a(c);p=r(c)}if(p!==null)var z=!0;else{var F=r(d);F!==null&&L(u,F.startTime-M),z=!1}return z}finally{p=null,f=A,y=!1}}var g=!1,j=null,T=-1,C=5,E=-1;function R(){return!(s.unstable_now()-E<C)}function k(){if(j!==null){var D=s.unstable_now();E=D;var M=!0;try{M=j(!0,D)}finally{M?O():(g=!1,j=null)}}else g=!1}var O;if(typeof w=="function")O=function(){w(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,$=P.port2;P.port1.onmessage=k,O=function(){$.postMessage(null)}}else O=function(){S(k,0)};function I(D){j=D,g||(g=!0,O())}function L(D,M){T=S(function(){D(s.unstable_now())},M)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(D){D.callback=null},s.unstable_continueExecution=function(){b||y||(b=!0,I(h))},s.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},s.unstable_getCurrentPriorityLevel=function(){return f},s.unstable_getFirstCallbackNode=function(){return r(c)},s.unstable_next=function(D){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var A=f;f=M;try{return D()}finally{f=A}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(D,M){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var A=f;f=D;try{return M()}finally{f=A}},s.unstable_scheduleCallback=function(D,M,A){var V=s.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?V+A:V):A=V,D){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=A+B,D={id:x++,callback:M,priorityLevel:D,startTime:A,expirationTime:B,sortIndex:-1},A>V?(D.sortIndex=A,t(d,D),r(c)===null&&D===r(d)&&(v?(_(T),T=-1):v=!0,L(u,A-V))):(D.sortIndex=B,t(c,D),b||y||(b=!0,I(h))),D},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(D){var M=f;return function(){var A=f;f=M;try{return D.apply(this,arguments)}finally{f=A}}}})(_j);wj.exports=_j;var x4=wj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h4=m,Or=x4;function Z(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sj=new Set,sd={};function Sl(s,t){So(s,t),So(s+"Capture",t)}function So(s,t){for(sd[s]=t,s=0;s<t.length;s++)Sj.add(t[s])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qh=Object.prototype.hasOwnProperty,p4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ff={},$f={};function g4(s){return Qh.call($f,s)?!0:Qh.call(Ff,s)?!1:p4.test(s)?$f[s]=!0:(Ff[s]=!0,!1)}function f4(s,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function y4(s,t,r,a){if(t===null||typeof t>"u"||f4(s,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xs(s,t,r,a,n,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=s,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){fs[s]=new Xs(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];fs[t]=new Xs(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){fs[s]=new Xs(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){fs[s]=new Xs(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){fs[s]=new Xs(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){fs[s]=new Xs(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){fs[s]=new Xs(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){fs[s]=new Xs(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){fs[s]=new Xs(s,5,!1,s.toLowerCase(),null,!1,!1)});var $p=/[\-:]([a-z])/g;function Vp(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace($p,Vp);fs[t]=new Xs(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace($p,Vp);fs[t]=new Xs(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace($p,Vp);fs[t]=new Xs(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){fs[s]=new Xs(s,1,!1,s.toLowerCase(),null,!1,!1)});fs.xlinkHref=new Xs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){fs[s]=new Xs(s,1,!1,s.toLowerCase(),null,!0,!0)});function Up(s,t,r,a){var n=fs.hasOwnProperty(t)?fs[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(y4(t,r,n,a)&&(r=null),a||n===null?g4(t)&&(r===null?s.removeAttribute(t):s.setAttribute(t,""+r)):n.mustUseProperty?s[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,a=n.attributeNamespace,r===null?s.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?s.setAttributeNS(a,t,r):s.setAttribute(t,r))))}var Sn=h4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,em=Symbol.for("react.element"),Ul=Symbol.for("react.portal"),Bl=Symbol.for("react.fragment"),Bp=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),kj=Symbol.for("react.provider"),Cj=Symbol.for("react.context"),zp=Symbol.for("react.forward_ref"),Kh=Symbol.for("react.suspense"),Jh=Symbol.for("react.suspense_list"),Wp=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),Ej=Symbol.for("react.offscreen"),Vf=Symbol.iterator;function nc(s){return s===null||typeof s!="object"?null:(s=Vf&&s[Vf]||s["@@iterator"],typeof s=="function"?s:null)}var yt=Object.assign,$x;function yc(s){if($x===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$x=t&&t[1]||""}return`
`+$x+s}var Vx=!1;function Ux(s,t){if(!s||Vx)return"";Vx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(s,[],t)}else{try{t.call()}catch(d){a=d}s.call(t.prototype)}else{try{throw Error()}catch(d){a=d}s()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return s.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",s.displayName)),c}while(1<=l&&0<=o);break}}}finally{Vx=!1,Error.prepareStackTrace=r}return(s=s?s.displayName||s.name:"")?yc(s):""}function b4(s){switch(s.tag){case 5:return yc(s.type);case 16:return yc("Lazy");case 13:return yc("Suspense");case 19:return yc("SuspenseList");case 0:case 2:case 15:return s=Ux(s.type,!1),s;case 11:return s=Ux(s.type.render,!1),s;case 1:return s=Ux(s.type,!0),s;default:return""}}function e0(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Bl:return"Fragment";case Ul:return"Portal";case Xh:return"Profiler";case Bp:return"StrictMode";case Kh:return"Suspense";case Jh:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Cj:return(s.displayName||"Context")+".Consumer";case kj:return(s._context.displayName||"Context")+".Provider";case zp:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Wp:return t=s.displayName||null,t!==null?t:e0(s.type)||"Memo";case Ln:t=s._payload,s=s._init;try{return e0(s(t))}catch{}}return null}function v4(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return e0(t);case 8:return t===Bp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pi(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Tj(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function j4(s){var t=Tj(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),a=""+s[t];if(!s.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(s,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function tm(s){s._valueTracker||(s._valueTracker=j4(s))}function Dj(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return s&&(a=Tj(s)?s.checked?"true":"false":s.value),s=a,s!==r?(t.setValue(s),!0):!1}function nu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function t0(s,t){var r=t.checked;return yt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??s._wrapperState.initialChecked})}function Uf(s,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=pi(t.value!=null?t.value:r),s._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Aj(s,t){t=t.checked,t!=null&&Up(s,"checked",t,!1)}function s0(s,t){Aj(s,t);var r=pi(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+r):s.value!==""+r&&(s.value=""+r);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?r0(s,t.type,r):t.hasOwnProperty("defaultValue")&&r0(s,t.type,pi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function Bf(s,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,r||t===s.value||(s.value=t),s.defaultValue=t}r=s.name,r!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,r!==""&&(s.name=r)}function r0(s,t,r){(t!=="number"||nu(s.ownerDocument)!==s)&&(r==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+r&&(s.defaultValue=""+r))}var bc=Array.isArray;function oo(s,t,r,a){if(s=s.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<s.length;r++)n=t.hasOwnProperty("$"+s[r].value),s[r].selected!==n&&(s[r].selected=n),n&&a&&(s[r].defaultSelected=!0)}else{for(r=""+pi(r),t=null,n=0;n<s.length;n++){if(s[n].value===r){s[n].selected=!0,a&&(s[n].defaultSelected=!0);return}t!==null||s[n].disabled||(t=s[n])}t!==null&&(t.selected=!0)}}function a0(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return yt({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function zf(s,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Z(92));if(bc(r)){if(1<r.length)throw Error(Z(93));r=r[0]}t=r}t==null&&(t=""),r=t}s._wrapperState={initialValue:pi(r)}}function Ij(s,t){var r=pi(t.value),a=pi(t.defaultValue);r!=null&&(r=""+r,r!==s.value&&(s.value=r),t.defaultValue==null&&s.defaultValue!==r&&(s.defaultValue=r)),a!=null&&(s.defaultValue=""+a)}function Wf(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function Rj(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function n0(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?Rj(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var sm,Pj=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,n){MSApp.execUnsafeLocalFunction(function(){return s(t,r,a,n)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(sm=sm||document.createElement("div"),sm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sm.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function rd(s,t){if(t){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=t;return}}s.textContent=t}var Dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N4=["Webkit","ms","Moz","O"];Object.keys(Dc).forEach(function(s){N4.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),Dc[t]=Dc[s]})});function Mj(s,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Dc.hasOwnProperty(s)&&Dc[s]?(""+t).trim():t+"px"}function Oj(s,t){s=s.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=Mj(r,t[r],a);r==="float"&&(r="cssFloat"),a?s.setProperty(r,n):s[r]=n}}var w4=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function i0(s,t){if(t){if(w4[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function l0(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o0=null;function Gp(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var c0=null,co=null,mo=null;function Gf(s){if(s=Fd(s)){if(typeof c0!="function")throw Error(Z(280));var t=s.stateNode;t&&(t=ox(t),c0(s.stateNode,s.type,t))}}function Lj(s){co?mo?mo.push(s):mo=[s]:co=s}function Fj(){if(co){var s=co,t=mo;if(mo=co=null,Gf(s),t)for(s=0;s<t.length;s++)Gf(t[s])}}function $j(s,t){return s(t)}function Vj(){}var Bx=!1;function Uj(s,t,r){if(Bx)return s(t,r);Bx=!0;try{return $j(s,t,r)}finally{Bx=!1,(co!==null||mo!==null)&&(Vj(),Fj())}}function ad(s,t){var r=s.stateNode;if(r===null)return null;var a=ox(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(Z(231,t,typeof r));return r}var d0=!1;if(pn)try{var ic={};Object.defineProperty(ic,"passive",{get:function(){d0=!0}}),window.addEventListener("test",ic,ic),window.removeEventListener("test",ic,ic)}catch{d0=!1}function _4(s,t,r,a,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(x){this.onError(x)}}var Ac=!1,iu=null,lu=!1,m0=null,S4={onError:function(s){Ac=!0,iu=s}};function k4(s,t,r,a,n,i,l,o,c){Ac=!1,iu=null,_4.apply(S4,arguments)}function C4(s,t,r,a,n,i,l,o,c){if(k4.apply(this,arguments),Ac){if(Ac){var d=iu;Ac=!1,iu=null}else throw Error(Z(198));lu||(lu=!0,m0=d)}}function kl(s){var t=s,r=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(r=t.return),s=t.return;while(s)}return t.tag===3?r:null}function Bj(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function Hf(s){if(kl(s)!==s)throw Error(Z(188))}function E4(s){var t=s.alternate;if(!t){if(t=kl(s),t===null)throw Error(Z(188));return t!==s?null:s}for(var r=s,a=t;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Hf(n),s;if(i===a)return Hf(n),t;i=i.sibling}throw Error(Z(188))}if(r.return!==a.return)r=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,a=i;break}if(o===a){l=!0,a=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=n;break}if(o===a){l=!0,a=i,r=n;break}o=o.sibling}if(!l)throw Error(Z(189))}}if(r.alternate!==a)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?s:t}function zj(s){return s=E4(s),s!==null?Wj(s):null}function Wj(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=Wj(s);if(t!==null)return t;s=s.sibling}return null}var Gj=Or.unstable_scheduleCallback,qf=Or.unstable_cancelCallback,T4=Or.unstable_shouldYield,D4=Or.unstable_requestPaint,It=Or.unstable_now,A4=Or.unstable_getCurrentPriorityLevel,Hp=Or.unstable_ImmediatePriority,Hj=Or.unstable_UserBlockingPriority,ou=Or.unstable_NormalPriority,I4=Or.unstable_LowPriority,qj=Or.unstable_IdlePriority,ax=null,$a=null;function R4(s){if($a&&typeof $a.onCommitFiberRoot=="function")try{$a.onCommitFiberRoot(ax,s,void 0,(s.current.flags&128)===128)}catch{}}var va=Math.clz32?Math.clz32:O4,P4=Math.log,M4=Math.LN2;function O4(s){return s>>>=0,s===0?32:31-(P4(s)/M4|0)|0}var rm=64,am=4194304;function vc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function cu(s,t){var r=s.pendingLanes;if(r===0)return 0;var a=0,n=s.suspendedLanes,i=s.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?a=vc(o):(i&=l,i!==0&&(a=vc(i)))}else l=r&~n,l!==0?a=vc(l):i!==0&&(a=vc(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(a&4&&(a|=r&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=a;0<t;)r=31-va(t),n=1<<r,a|=s[r],t&=~n;return a}function L4(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F4(s,t){for(var r=s.suspendedLanes,a=s.pingedLanes,n=s.expirationTimes,i=s.pendingLanes;0<i;){var l=31-va(i),o=1<<l,c=n[l];c===-1?(!(o&r)||o&a)&&(n[l]=L4(o,t)):c<=t&&(s.expiredLanes|=o),i&=~o}}function u0(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Yj(){var s=rm;return rm<<=1,!(rm&4194240)&&(rm=64),s}function zx(s){for(var t=[],r=0;31>r;r++)t.push(s);return t}function Od(s,t,r){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-va(t),s[t]=r}function $4(s,t){var r=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<r;){var n=31-va(r),i=1<<n;t[n]=0,a[n]=-1,s[n]=-1,r&=~i}}function qp(s,t){var r=s.entangledLanes|=t;for(s=s.entanglements;r;){var a=31-va(r),n=1<<a;n&t|s[a]&t&&(s[a]|=t),r&=~n}}var ze=0;function Zj(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Qj,Yp,Xj,Kj,Jj,x0=!1,nm=[],Kn=null,Jn=null,ei=null,nd=new Map,id=new Map,Bn=[],V4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yf(s,t){switch(s){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":nd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(t.pointerId)}}function lc(s,t,r,a,n,i){return s===null||s.nativeEvent!==i?(s={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},t!==null&&(t=Fd(t),t!==null&&Yp(t)),s):(s.eventSystemFlags|=a,t=s.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),s)}function U4(s,t,r,a,n){switch(t){case"focusin":return Kn=lc(Kn,s,t,r,a,n),!0;case"dragenter":return Jn=lc(Jn,s,t,r,a,n),!0;case"mouseover":return ei=lc(ei,s,t,r,a,n),!0;case"pointerover":var i=n.pointerId;return nd.set(i,lc(nd.get(i)||null,s,t,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,id.set(i,lc(id.get(i)||null,s,t,r,a,n)),!0}return!1}function eN(s){var t=Qi(s.target);if(t!==null){var r=kl(t);if(r!==null){if(t=r.tag,t===13){if(t=Bj(r),t!==null){s.blockedOn=t,Jj(s.priority,function(){Xj(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Lm(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var r=h0(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(r===null){r=s.nativeEvent;var a=new r.constructor(r.type,r);o0=a,r.target.dispatchEvent(a),o0=null}else return t=Fd(r),t!==null&&Yp(t),s.blockedOn=r,!1;t.shift()}return!0}function Zf(s,t,r){Lm(s)&&r.delete(t)}function B4(){x0=!1,Kn!==null&&Lm(Kn)&&(Kn=null),Jn!==null&&Lm(Jn)&&(Jn=null),ei!==null&&Lm(ei)&&(ei=null),nd.forEach(Zf),id.forEach(Zf)}function oc(s,t){s.blockedOn===t&&(s.blockedOn=null,x0||(x0=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,B4)))}function ld(s){function t(n){return oc(n,s)}if(0<nm.length){oc(nm[0],s);for(var r=1;r<nm.length;r++){var a=nm[r];a.blockedOn===s&&(a.blockedOn=null)}}for(Kn!==null&&oc(Kn,s),Jn!==null&&oc(Jn,s),ei!==null&&oc(ei,s),nd.forEach(t),id.forEach(t),r=0;r<Bn.length;r++)a=Bn[r],a.blockedOn===s&&(a.blockedOn=null);for(;0<Bn.length&&(r=Bn[0],r.blockedOn===null);)eN(r),r.blockedOn===null&&Bn.shift()}var uo=Sn.ReactCurrentBatchConfig,du=!0;function z4(s,t,r,a){var n=ze,i=uo.transition;uo.transition=null;try{ze=1,Zp(s,t,r,a)}finally{ze=n,uo.transition=i}}function W4(s,t,r,a){var n=ze,i=uo.transition;uo.transition=null;try{ze=4,Zp(s,t,r,a)}finally{ze=n,uo.transition=i}}function Zp(s,t,r,a){if(du){var n=h0(s,t,r,a);if(n===null)Jx(s,t,a,mu,r),Yf(s,a);else if(U4(n,s,t,r,a))a.stopPropagation();else if(Yf(s,a),t&4&&-1<V4.indexOf(s)){for(;n!==null;){var i=Fd(n);if(i!==null&&Qj(i),i=h0(s,t,r,a),i===null&&Jx(s,t,a,mu,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else Jx(s,t,a,null,r)}}var mu=null;function h0(s,t,r,a){if(mu=null,s=Gp(a),s=Qi(s),s!==null)if(t=kl(s),t===null)s=null;else if(r=t.tag,r===13){if(s=Bj(t),s!==null)return s;s=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return mu=s,null}function tN(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A4()){case Hp:return 1;case Hj:return 4;case ou:case I4:return 16;case qj:return 536870912;default:return 16}default:return 16}}var Wn=null,Qp=null,Fm=null;function sN(){if(Fm)return Fm;var s,t=Qp,r=t.length,a,n="value"in Wn?Wn.value:Wn.textContent,i=n.length;for(s=0;s<r&&t[s]===n[s];s++);var l=r-s;for(a=1;a<=l&&t[r-a]===n[i-a];a++);return Fm=n.slice(s,1<a?1-a:void 0)}function $m(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function im(){return!0}function Qf(){return!1}function Ur(s){function t(r,a,n,i,l){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in s)s.hasOwnProperty(o)&&(r=s[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?im:Qf,this.isPropagationStopped=Qf,this}return yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=im)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=im)},persist:function(){},isPersistent:im}),t}var qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xp=Ur(qo),Ld=yt({},qo,{view:0,detail:0}),G4=Ur(Ld),Wx,Gx,cc,nx=yt({},Ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kp,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==cc&&(cc&&s.type==="mousemove"?(Wx=s.screenX-cc.screenX,Gx=s.screenY-cc.screenY):Gx=Wx=0,cc=s),Wx)},movementY:function(s){return"movementY"in s?s.movementY:Gx}}),Xf=Ur(nx),H4=yt({},nx,{dataTransfer:0}),q4=Ur(H4),Y4=yt({},Ld,{relatedTarget:0}),Hx=Ur(Y4),Z4=yt({},qo,{animationName:0,elapsedTime:0,pseudoElement:0}),Q4=Ur(Z4),X4=yt({},qo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),K4=Ur(X4),J4=yt({},qo,{data:0}),Kf=Ur(J4),e3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r3(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=s3[s])?!!t[s]:!1}function Kp(){return r3}var a3=yt({},Ld,{key:function(s){if(s.key){var t=e3[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=$m(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?t3[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kp,charCode:function(s){return s.type==="keypress"?$m(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?$m(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),n3=Ur(a3),i3=yt({},nx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jf=Ur(i3),l3=yt({},Ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kp}),o3=Ur(l3),c3=yt({},qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),d3=Ur(c3),m3=yt({},nx,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),u3=Ur(m3),x3=[9,13,27,32],Jp=pn&&"CompositionEvent"in window,Ic=null;pn&&"documentMode"in document&&(Ic=document.documentMode);var h3=pn&&"TextEvent"in window&&!Ic,rN=pn&&(!Jp||Ic&&8<Ic&&11>=Ic),ey=String.fromCharCode(32),ty=!1;function aN(s,t){switch(s){case"keyup":return x3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nN(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var zl=!1;function p3(s,t){switch(s){case"compositionend":return nN(t);case"keypress":return t.which!==32?null:(ty=!0,ey);case"textInput":return s=t.data,s===ey&&ty?null:s;default:return null}}function g3(s,t){if(zl)return s==="compositionend"||!Jp&&aN(s,t)?(s=sN(),Fm=Qp=Wn=null,zl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rN&&t.locale!=="ko"?null:t.data;default:return null}}var f3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sy(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!f3[s.type]:t==="textarea"}function iN(s,t,r,a){Lj(a),t=uu(t,"onChange"),0<t.length&&(r=new Xp("onChange","change",null,r,a),s.push({event:r,listeners:t}))}var Rc=null,od=null;function y3(s){fN(s,0)}function ix(s){var t=Hl(s);if(Dj(t))return s}function b3(s,t){if(s==="change")return t}var lN=!1;if(pn){var qx;if(pn){var Yx="oninput"in document;if(!Yx){var ry=document.createElement("div");ry.setAttribute("oninput","return;"),Yx=typeof ry.oninput=="function"}qx=Yx}else qx=!1;lN=qx&&(!document.documentMode||9<document.documentMode)}function ay(){Rc&&(Rc.detachEvent("onpropertychange",oN),od=Rc=null)}function oN(s){if(s.propertyName==="value"&&ix(od)){var t=[];iN(t,od,s,Gp(s)),Uj(y3,t)}}function v3(s,t,r){s==="focusin"?(ay(),Rc=t,od=r,Rc.attachEvent("onpropertychange",oN)):s==="focusout"&&ay()}function j3(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ix(od)}function N3(s,t){if(s==="click")return ix(t)}function w3(s,t){if(s==="input"||s==="change")return ix(t)}function _3(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Na=typeof Object.is=="function"?Object.is:_3;function cd(s,t){if(Na(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var r=Object.keys(s),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!Qh.call(t,n)||!Na(s[n],t[n]))return!1}return!0}function ny(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function iy(s,t){var r=ny(s);s=0;for(var a;r;){if(r.nodeType===3){if(a=s+r.textContent.length,s<=t&&a>=t)return{node:r,offset:t-s};s=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ny(r)}}function cN(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?cN(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function dN(){for(var s=window,t=nu();t instanceof s.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)s=t.contentWindow;else break;t=nu(s.document)}return t}function eg(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function S3(s){var t=dN(),r=s.focusedElem,a=s.selectionRange;if(t!==r&&r&&r.ownerDocument&&cN(r.ownerDocument.documentElement,r)){if(a!==null&&eg(r)){if(t=a.start,s=a.end,s===void 0&&(s=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(s,r.value.length);else if(s=(t=r.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!s.extend&&i>a&&(n=a,a=i,i=n),n=iy(r,i);var l=iy(r,a);n&&l&&(s.rangeCount!==1||s.anchorNode!==n.node||s.anchorOffset!==n.offset||s.focusNode!==l.node||s.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),s.removeAllRanges(),i>a?(s.addRange(t),s.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),s.addRange(t)))}}for(t=[],s=r;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)s=t[r],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var k3=pn&&"documentMode"in document&&11>=document.documentMode,Wl=null,p0=null,Pc=null,g0=!1;function ly(s,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;g0||Wl==null||Wl!==nu(a)||(a=Wl,"selectionStart"in a&&eg(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Pc&&cd(Pc,a)||(Pc=a,a=uu(p0,"onSelect"),0<a.length&&(t=new Xp("onSelect","select",null,t,r),s.push({event:t,listeners:a}),t.target=Wl)))}function lm(s,t){var r={};return r[s.toLowerCase()]=t.toLowerCase(),r["Webkit"+s]="webkit"+t,r["Moz"+s]="moz"+t,r}var Gl={animationend:lm("Animation","AnimationEnd"),animationiteration:lm("Animation","AnimationIteration"),animationstart:lm("Animation","AnimationStart"),transitionend:lm("Transition","TransitionEnd")},Zx={},mN={};pn&&(mN=document.createElement("div").style,"AnimationEvent"in window||(delete Gl.animationend.animation,delete Gl.animationiteration.animation,delete Gl.animationstart.animation),"TransitionEvent"in window||delete Gl.transitionend.transition);function lx(s){if(Zx[s])return Zx[s];if(!Gl[s])return s;var t=Gl[s],r;for(r in t)if(t.hasOwnProperty(r)&&r in mN)return Zx[s]=t[r];return s}var uN=lx("animationend"),xN=lx("animationiteration"),hN=lx("animationstart"),pN=lx("transitionend"),gN=new Map,oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(s,t){gN.set(s,t),Sl(t,[s])}for(var Qx=0;Qx<oy.length;Qx++){var Xx=oy[Qx],C3=Xx.toLowerCase(),E3=Xx[0].toUpperCase()+Xx.slice(1);ki(C3,"on"+E3)}ki(uN,"onAnimationEnd");ki(xN,"onAnimationIteration");ki(hN,"onAnimationStart");ki("dblclick","onDoubleClick");ki("focusin","onFocus");ki("focusout","onBlur");ki(pN,"onTransitionEnd");So("onMouseEnter",["mouseout","mouseover"]);So("onMouseLeave",["mouseout","mouseover"]);So("onPointerEnter",["pointerout","pointerover"]);So("onPointerLeave",["pointerout","pointerover"]);Sl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T3=new Set("cancel close invalid load scroll toggle".split(" ").concat(jc));function cy(s,t,r){var a=s.type||"unknown-event";s.currentTarget=r,C4(a,t,void 0,s),s.currentTarget=null}function fN(s,t){t=(t&4)!==0;for(var r=0;r<s.length;r++){var a=s[r],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;cy(n,o,d),i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;cy(n,o,d),i=c}}}if(lu)throw s=m0,lu=!1,m0=null,s}function at(s,t){var r=t[j0];r===void 0&&(r=t[j0]=new Set);var a=s+"__bubble";r.has(a)||(yN(t,s,2,!1),r.add(a))}function Kx(s,t,r){var a=0;t&&(a|=4),yN(r,s,a,t)}var om="_reactListening"+Math.random().toString(36).slice(2);function dd(s){if(!s[om]){s[om]=!0,Sj.forEach(function(r){r!=="selectionchange"&&(T3.has(r)||Kx(r,!1,s),Kx(r,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[om]||(t[om]=!0,Kx("selectionchange",!1,t))}}function yN(s,t,r,a){switch(tN(t)){case 1:var n=z4;break;case 4:n=W4;break;default:n=Zp}r=n.bind(null,t,r,s),n=void 0,!d0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?s.addEventListener(t,r,{capture:!0,passive:n}):s.addEventListener(t,r,!0):n!==void 0?s.addEventListener(t,r,{passive:n}):s.addEventListener(t,r,!1)}function Jx(s,t,r,a,n){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Qi(o),l===null)return;if(c=l.tag,c===5||c===6){a=i=l;continue e}o=o.parentNode}}a=a.return}Uj(function(){var d=i,x=Gp(r),p=[];e:{var f=gN.get(s);if(f!==void 0){var y=Xp,b=s;switch(s){case"keypress":if($m(r)===0)break e;case"keydown":case"keyup":y=n3;break;case"focusin":b="focus",y=Hx;break;case"focusout":b="blur",y=Hx;break;case"beforeblur":case"afterblur":y=Hx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=q4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=o3;break;case uN:case xN:case hN:y=Q4;break;case pN:y=d3;break;case"scroll":y=G4;break;case"wheel":y=u3;break;case"copy":case"cut":case"paste":y=K4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Jf}var v=(t&4)!==0,S=!v&&s==="scroll",_=v?f!==null?f+"Capture":null:f;v=[];for(var w=d,N;w!==null;){N=w;var u=N.stateNode;if(N.tag===5&&u!==null&&(N=u,_!==null&&(u=ad(w,_),u!=null&&v.push(md(w,u,N)))),S)break;w=w.return}0<v.length&&(f=new y(f,b,null,r,x),p.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=s==="mouseover"||s==="pointerover",y=s==="mouseout"||s==="pointerout",f&&r!==o0&&(b=r.relatedTarget||r.fromElement)&&(Qi(b)||b[gn]))break e;if((y||f)&&(f=x.window===x?x:(f=x.ownerDocument)?f.defaultView||f.parentWindow:window,y?(b=r.relatedTarget||r.toElement,y=d,b=b?Qi(b):null,b!==null&&(S=kl(b),b!==S||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=d),y!==b)){if(v=Xf,u="onMouseLeave",_="onMouseEnter",w="mouse",(s==="pointerout"||s==="pointerover")&&(v=Jf,u="onPointerLeave",_="onPointerEnter",w="pointer"),S=y==null?f:Hl(y),N=b==null?f:Hl(b),f=new v(u,w+"leave",y,r,x),f.target=S,f.relatedTarget=N,u=null,Qi(x)===d&&(v=new v(_,w+"enter",b,r,x),v.target=N,v.relatedTarget=S,u=v),S=u,y&&b)t:{for(v=y,_=b,w=0,N=v;N;N=Rl(N))w++;for(N=0,u=_;u;u=Rl(u))N++;for(;0<w-N;)v=Rl(v),w--;for(;0<N-w;)_=Rl(_),N--;for(;w--;){if(v===_||_!==null&&v===_.alternate)break t;v=Rl(v),_=Rl(_)}v=null}else v=null;y!==null&&dy(p,f,y,v,!1),b!==null&&S!==null&&dy(p,S,b,v,!0)}}e:{if(f=d?Hl(d):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var h=b3;else if(sy(f))if(lN)h=w3;else{h=j3;var g=v3}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(h=N3);if(h&&(h=h(s,d))){iN(p,h,r,x);break e}g&&g(s,f,d),s==="focusout"&&(g=f._wrapperState)&&g.controlled&&f.type==="number"&&r0(f,"number",f.value)}switch(g=d?Hl(d):window,s){case"focusin":(sy(g)||g.contentEditable==="true")&&(Wl=g,p0=d,Pc=null);break;case"focusout":Pc=p0=Wl=null;break;case"mousedown":g0=!0;break;case"contextmenu":case"mouseup":case"dragend":g0=!1,ly(p,r,x);break;case"selectionchange":if(k3)break;case"keydown":case"keyup":ly(p,r,x)}var j;if(Jp)e:{switch(s){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else zl?aN(s,r)&&(T="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(rN&&r.locale!=="ko"&&(zl||T!=="onCompositionStart"?T==="onCompositionEnd"&&zl&&(j=sN()):(Wn=x,Qp="value"in Wn?Wn.value:Wn.textContent,zl=!0)),g=uu(d,T),0<g.length&&(T=new Kf(T,s,null,r,x),p.push({event:T,listeners:g}),j?T.data=j:(j=nN(r),j!==null&&(T.data=j)))),(j=h3?p3(s,r):g3(s,r))&&(d=uu(d,"onBeforeInput"),0<d.length&&(x=new Kf("onBeforeInput","beforeinput",null,r,x),p.push({event:x,listeners:d}),x.data=j))}fN(p,t)})}function md(s,t,r){return{instance:s,listener:t,currentTarget:r}}function uu(s,t){for(var r=t+"Capture",a=[];s!==null;){var n=s,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=ad(s,r),i!=null&&a.unshift(md(s,i,n)),i=ad(s,t),i!=null&&a.push(md(s,i,n))),s=s.return}return a}function Rl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function dy(s,t,r,a,n){for(var i=t._reactName,l=[];r!==null&&r!==a;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&d!==null&&(o=d,n?(c=ad(r,i),c!=null&&l.unshift(md(r,c,o))):n||(c=ad(r,i),c!=null&&l.push(md(r,c,o)))),r=r.return}l.length!==0&&s.push({event:t,listeners:l})}var D3=/\r\n?/g,A3=/\u0000|\uFFFD/g;function my(s){return(typeof s=="string"?s:""+s).replace(D3,`
`).replace(A3,"")}function cm(s,t,r){if(t=my(t),my(s)!==t&&r)throw Error(Z(425))}function xu(){}var f0=null,y0=null;function b0(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var v0=typeof setTimeout=="function"?setTimeout:void 0,I3=typeof clearTimeout=="function"?clearTimeout:void 0,uy=typeof Promise=="function"?Promise:void 0,R3=typeof queueMicrotask=="function"?queueMicrotask:typeof uy<"u"?function(s){return uy.resolve(null).then(s).catch(P3)}:v0;function P3(s){setTimeout(function(){throw s})}function eh(s,t){var r=t,a=0;do{var n=r.nextSibling;if(s.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){s.removeChild(n),ld(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);ld(t)}function ti(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function xy(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return s;t--}else r==="/$"&&t++}s=s.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),Pa="__reactFiber$"+Yo,ud="__reactProps$"+Yo,gn="__reactContainer$"+Yo,j0="__reactEvents$"+Yo,M3="__reactListeners$"+Yo,O3="__reactHandles$"+Yo;function Qi(s){var t=s[Pa];if(t)return t;for(var r=s.parentNode;r;){if(t=r[gn]||r[Pa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(s=xy(s);s!==null;){if(r=s[Pa])return r;s=xy(s)}return t}s=r,r=s.parentNode}return null}function Fd(s){return s=s[Pa]||s[gn],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Hl(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(Z(33))}function ox(s){return s[ud]||null}var N0=[],ql=-1;function Ci(s){return{current:s}}function nt(s){0>ql||(s.current=N0[ql],N0[ql]=null,ql--)}function st(s,t){ql++,N0[ql]=s.current,s.current=t}var gi={},Rs=Ci(gi),lr=Ci(!1),pl=gi;function ko(s,t){var r=s.type.contextTypes;if(!r)return gi;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=t[i];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=n),n}function or(s){return s=s.childContextTypes,s!=null}function hu(){nt(lr),nt(Rs)}function hy(s,t,r){if(Rs.current!==gi)throw Error(Z(168));st(Rs,t),st(lr,r)}function bN(s,t,r){var a=s.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(Z(108,v4(s)||"Unknown",n));return yt({},r,a)}function pu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||gi,pl=Rs.current,st(Rs,s),st(lr,lr.current),!0}function py(s,t,r){var a=s.stateNode;if(!a)throw Error(Z(169));r?(s=bN(s,t,pl),a.__reactInternalMemoizedMergedChildContext=s,nt(lr),nt(Rs),st(Rs,s)):nt(lr),st(lr,r)}var en=null,cx=!1,th=!1;function vN(s){en===null?en=[s]:en.push(s)}function L3(s){cx=!0,vN(s)}function Ei(){if(!th&&en!==null){th=!0;var s=0,t=ze;try{var r=en;for(ze=1;s<r.length;s++){var a=r[s];do a=a(!0);while(a!==null)}en=null,cx=!1}catch(n){throw en!==null&&(en=en.slice(s+1)),Gj(Hp,Ei),n}finally{ze=t,th=!1}}return null}var Yl=[],Zl=0,gu=null,fu=0,Hr=[],qr=0,gl=null,an=1,nn="";function Bi(s,t){Yl[Zl++]=fu,Yl[Zl++]=gu,gu=s,fu=t}function jN(s,t,r){Hr[qr++]=an,Hr[qr++]=nn,Hr[qr++]=gl,gl=s;var a=an;s=nn;var n=32-va(a)-1;a&=~(1<<n),r+=1;var i=32-va(t)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,an=1<<32-va(t)+n|r<<n|a,nn=i+s}else an=1<<i|r<<n|a,nn=s}function tg(s){s.return!==null&&(Bi(s,1),jN(s,1,0))}function sg(s){for(;s===gu;)gu=Yl[--Zl],Yl[Zl]=null,fu=Yl[--Zl],Yl[Zl]=null;for(;s===gl;)gl=Hr[--qr],Hr[qr]=null,nn=Hr[--qr],Hr[qr]=null,an=Hr[--qr],Hr[qr]=null}var Rr=null,Dr=null,ot=!1,fa=null;function NN(s,t){var r=Qr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=s,t=s.deletions,t===null?(s.deletions=[r],s.flags|=16):t.push(r)}function gy(s,t){switch(s.tag){case 5:var r=s.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,Rr=s,Dr=ti(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,Rr=s,Dr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=gl!==null?{id:an,overflow:nn}:null,s.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qr(18,null,null,0),r.stateNode=t,r.return=s,s.child=r,Rr=s,Dr=null,!0):!1;default:return!1}}function w0(s){return(s.mode&1)!==0&&(s.flags&128)===0}function _0(s){if(ot){var t=Dr;if(t){var r=t;if(!gy(s,t)){if(w0(s))throw Error(Z(418));t=ti(r.nextSibling);var a=Rr;t&&gy(s,t)?NN(a,r):(s.flags=s.flags&-4097|2,ot=!1,Rr=s)}}else{if(w0(s))throw Error(Z(418));s.flags=s.flags&-4097|2,ot=!1,Rr=s}}}function fy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Rr=s}function dm(s){if(s!==Rr)return!1;if(!ot)return fy(s),ot=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!b0(s.type,s.memoizedProps)),t&&(t=Dr)){if(w0(s))throw wN(),Error(Z(418));for(;t;)NN(s,t),t=ti(t.nextSibling)}if(fy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));e:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var r=s.data;if(r==="/$"){if(t===0){Dr=ti(s.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}s=s.nextSibling}Dr=null}}else Dr=Rr?ti(s.stateNode.nextSibling):null;return!0}function wN(){for(var s=Dr;s;)s=ti(s.nextSibling)}function Co(){Dr=Rr=null,ot=!1}function rg(s){fa===null?fa=[s]:fa.push(s)}var F3=Sn.ReactCurrentBatchConfig;function dc(s,t,r){if(s=r.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var a=r.stateNode}if(!a)throw Error(Z(147,s));var n=a,i=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof s!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,s))}return s}function mm(s,t){throw s=Object.prototype.toString.call(t),Error(Z(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function yy(s){var t=s._init;return t(s._payload)}function _N(s){function t(_,w){if(s){var N=_.deletions;N===null?(_.deletions=[w],_.flags|=16):N.push(w)}}function r(_,w){if(!s)return null;for(;w!==null;)t(_,w),w=w.sibling;return null}function a(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function n(_,w){return _=ni(_,w),_.index=0,_.sibling=null,_}function i(_,w,N){return _.index=N,s?(N=_.alternate,N!==null?(N=N.index,N<w?(_.flags|=2,w):N):(_.flags|=2,w)):(_.flags|=1048576,w)}function l(_){return s&&_.alternate===null&&(_.flags|=2),_}function o(_,w,N,u){return w===null||w.tag!==6?(w=oh(N,_.mode,u),w.return=_,w):(w=n(w,N),w.return=_,w)}function c(_,w,N,u){var h=N.type;return h===Bl?x(_,w,N.props.children,u,N.key):w!==null&&(w.elementType===h||typeof h=="object"&&h!==null&&h.$$typeof===Ln&&yy(h)===w.type)?(u=n(w,N.props),u.ref=dc(_,w,N),u.return=_,u):(u=Hm(N.type,N.key,N.props,null,_.mode,u),u.ref=dc(_,w,N),u.return=_,u)}function d(_,w,N,u){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=ch(N,_.mode,u),w.return=_,w):(w=n(w,N.children||[]),w.return=_,w)}function x(_,w,N,u,h){return w===null||w.tag!==7?(w=rl(N,_.mode,u,h),w.return=_,w):(w=n(w,N),w.return=_,w)}function p(_,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=oh(""+w,_.mode,N),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case em:return N=Hm(w.type,w.key,w.props,null,_.mode,N),N.ref=dc(_,null,w),N.return=_,N;case Ul:return w=ch(w,_.mode,N),w.return=_,w;case Ln:var u=w._init;return p(_,u(w._payload),N)}if(bc(w)||nc(w))return w=rl(w,_.mode,N,null),w.return=_,w;mm(_,w)}return null}function f(_,w,N,u){var h=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return h!==null?null:o(_,w,""+N,u);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case em:return N.key===h?c(_,w,N,u):null;case Ul:return N.key===h?d(_,w,N,u):null;case Ln:return h=N._init,f(_,w,h(N._payload),u)}if(bc(N)||nc(N))return h!==null?null:x(_,w,N,u,null);mm(_,N)}return null}function y(_,w,N,u,h){if(typeof u=="string"&&u!==""||typeof u=="number")return _=_.get(N)||null,o(w,_,""+u,h);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case em:return _=_.get(u.key===null?N:u.key)||null,c(w,_,u,h);case Ul:return _=_.get(u.key===null?N:u.key)||null,d(w,_,u,h);case Ln:var g=u._init;return y(_,w,N,g(u._payload),h)}if(bc(u)||nc(u))return _=_.get(N)||null,x(w,_,u,h,null);mm(w,u)}return null}function b(_,w,N,u){for(var h=null,g=null,j=w,T=w=0,C=null;j!==null&&T<N.length;T++){j.index>T?(C=j,j=null):C=j.sibling;var E=f(_,j,N[T],u);if(E===null){j===null&&(j=C);break}s&&j&&E.alternate===null&&t(_,j),w=i(E,w,T),g===null?h=E:g.sibling=E,g=E,j=C}if(T===N.length)return r(_,j),ot&&Bi(_,T),h;if(j===null){for(;T<N.length;T++)j=p(_,N[T],u),j!==null&&(w=i(j,w,T),g===null?h=j:g.sibling=j,g=j);return ot&&Bi(_,T),h}for(j=a(_,j);T<N.length;T++)C=y(j,_,T,N[T],u),C!==null&&(s&&C.alternate!==null&&j.delete(C.key===null?T:C.key),w=i(C,w,T),g===null?h=C:g.sibling=C,g=C);return s&&j.forEach(function(R){return t(_,R)}),ot&&Bi(_,T),h}function v(_,w,N,u){var h=nc(N);if(typeof h!="function")throw Error(Z(150));if(N=h.call(N),N==null)throw Error(Z(151));for(var g=h=null,j=w,T=w=0,C=null,E=N.next();j!==null&&!E.done;T++,E=N.next()){j.index>T?(C=j,j=null):C=j.sibling;var R=f(_,j,E.value,u);if(R===null){j===null&&(j=C);break}s&&j&&R.alternate===null&&t(_,j),w=i(R,w,T),g===null?h=R:g.sibling=R,g=R,j=C}if(E.done)return r(_,j),ot&&Bi(_,T),h;if(j===null){for(;!E.done;T++,E=N.next())E=p(_,E.value,u),E!==null&&(w=i(E,w,T),g===null?h=E:g.sibling=E,g=E);return ot&&Bi(_,T),h}for(j=a(_,j);!E.done;T++,E=N.next())E=y(j,_,T,E.value,u),E!==null&&(s&&E.alternate!==null&&j.delete(E.key===null?T:E.key),w=i(E,w,T),g===null?h=E:g.sibling=E,g=E);return s&&j.forEach(function(k){return t(_,k)}),ot&&Bi(_,T),h}function S(_,w,N,u){if(typeof N=="object"&&N!==null&&N.type===Bl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case em:e:{for(var h=N.key,g=w;g!==null;){if(g.key===h){if(h=N.type,h===Bl){if(g.tag===7){r(_,g.sibling),w=n(g,N.props.children),w.return=_,_=w;break e}}else if(g.elementType===h||typeof h=="object"&&h!==null&&h.$$typeof===Ln&&yy(h)===g.type){r(_,g.sibling),w=n(g,N.props),w.ref=dc(_,g,N),w.return=_,_=w;break e}r(_,g);break}else t(_,g);g=g.sibling}N.type===Bl?(w=rl(N.props.children,_.mode,u,N.key),w.return=_,_=w):(u=Hm(N.type,N.key,N.props,null,_.mode,u),u.ref=dc(_,w,N),u.return=_,_=u)}return l(_);case Ul:e:{for(g=N.key;w!==null;){if(w.key===g)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){r(_,w.sibling),w=n(w,N.children||[]),w.return=_,_=w;break e}else{r(_,w);break}else t(_,w);w=w.sibling}w=ch(N,_.mode,u),w.return=_,_=w}return l(_);case Ln:return g=N._init,S(_,w,g(N._payload),u)}if(bc(N))return b(_,w,N,u);if(nc(N))return v(_,w,N,u);mm(_,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(r(_,w.sibling),w=n(w,N),w.return=_,_=w):(r(_,w),w=oh(N,_.mode,u),w.return=_,_=w),l(_)):r(_,w)}return S}var Eo=_N(!0),SN=_N(!1),yu=Ci(null),bu=null,Ql=null,ag=null;function ng(){ag=Ql=bu=null}function ig(s){var t=yu.current;nt(yu),s._currentValue=t}function S0(s,t,r){for(;s!==null;){var a=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),s===r)break;s=s.return}}function xo(s,t){bu=s,ag=Ql=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(nr=!0),s.firstContext=null)}function sa(s){var t=s._currentValue;if(ag!==s)if(s={context:s,memoizedValue:t,next:null},Ql===null){if(bu===null)throw Error(Z(308));Ql=s,bu.dependencies={lanes:0,firstContext:s}}else Ql=Ql.next=s;return t}var Xi=null;function lg(s){Xi===null?Xi=[s]:Xi.push(s)}function kN(s,t,r,a){var n=t.interleaved;return n===null?(r.next=r,lg(t)):(r.next=n.next,n.next=r),t.interleaved=r,fn(s,a)}function fn(s,t){s.lanes|=t;var r=s.alternate;for(r!==null&&(r.lanes|=t),r=s,s=s.return;s!==null;)s.childLanes|=t,r=s.alternate,r!==null&&(r.childLanes|=t),r=s,s=s.return;return r.tag===3?r.stateNode:null}var Fn=!1;function og(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CN(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function dn(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function si(s,t,r){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,Ie&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,fn(s,r)}return n=a.interleaved,n===null?(t.next=t,lg(a)):(t.next=n.next,n.next=t),a.interleaved=t,fn(s,r)}function Vm(s,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,qp(s,r)}}function by(s,t){var r=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=t:i=i.next=t}else n=i=t;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=t:s.next=t,r.lastBaseUpdate=t}function vu(s,t,r,a){var n=s.updateQueue;Fn=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var x=s.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==l&&(o===null?x.firstBaseUpdate=d:o.next=d,x.lastBaseUpdate=c))}if(i!==null){var p=n.baseState;l=0,x=d=c=null,o=i;do{var f=o.lane,y=o.eventTime;if((a&f)===f){x!==null&&(x=x.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=s,v=o;switch(f=t,y=r,v.tag){case 1:if(b=v.payload,typeof b=="function"){p=b.call(y,p,f);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,f=typeof b=="function"?b.call(y,p,f):b,f==null)break e;p=yt({},p,f);break e;case 2:Fn=!0}}o.callback!==null&&o.lane!==0&&(s.flags|=64,f=n.effects,f===null?n.effects=[o]:f.push(o))}else y={eventTime:y,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(d=x=y,c=p):x=x.next=y,l|=f;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;f=o,o=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(1);if(x===null&&(c=p),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=x,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);yl|=l,s.lanes=l,s.memoizedState=p}}function vy(s,t,r){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var a=s[t],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(Z(191,n));n.call(a)}}}var $d={},Va=Ci($d),xd=Ci($d),hd=Ci($d);function Ki(s){if(s===$d)throw Error(Z(174));return s}function cg(s,t){switch(st(hd,t),st(xd,s),st(Va,$d),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:n0(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=n0(t,s)}nt(Va),st(Va,t)}function To(){nt(Va),nt(xd),nt(hd)}function EN(s){Ki(hd.current);var t=Ki(Va.current),r=n0(t,s.type);t!==r&&(st(xd,s),st(Va,r))}function dg(s){xd.current===s&&(nt(Va),nt(xd))}var xt=Ci(0);function ju(s){for(var t=s;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sh=[];function mg(){for(var s=0;s<sh.length;s++)sh[s]._workInProgressVersionPrimary=null;sh.length=0}var Um=Sn.ReactCurrentDispatcher,rh=Sn.ReactCurrentBatchConfig,fl=0,ft=null,Ht=null,ts=null,Nu=!1,Mc=!1,pd=0,$3=0;function Ns(){throw Error(Z(321))}function ug(s,t){if(t===null)return!1;for(var r=0;r<t.length&&r<s.length;r++)if(!Na(s[r],t[r]))return!1;return!0}function xg(s,t,r,a,n,i){if(fl=i,ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Um.current=s===null||s.memoizedState===null?z3:W3,s=r(a,n),Mc){i=0;do{if(Mc=!1,pd=0,25<=i)throw Error(Z(301));i+=1,ts=Ht=null,t.updateQueue=null,Um.current=G3,s=r(a,n)}while(Mc)}if(Um.current=wu,t=Ht!==null&&Ht.next!==null,fl=0,ts=Ht=ft=null,Nu=!1,t)throw Error(Z(300));return s}function hg(){var s=pd!==0;return pd=0,s}function Ta(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ts===null?ft.memoizedState=ts=s:ts=ts.next=s,ts}function ra(){if(Ht===null){var s=ft.alternate;s=s!==null?s.memoizedState:null}else s=Ht.next;var t=ts===null?ft.memoizedState:ts.next;if(t!==null)ts=t,Ht=s;else{if(s===null)throw Error(Z(310));Ht=s,s={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},ts===null?ft.memoizedState=ts=s:ts=ts.next=s}return ts}function gd(s,t){return typeof t=="function"?t(s):t}function ah(s){var t=ra(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=s;var a=Ht,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var x=d.lane;if((fl&x)===x)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:s(a,d.action);else{var p={lane:x,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=p,l=a):c=c.next=p,ft.lanes|=x,yl|=x}d=d.next}while(d!==null&&d!==i);c===null?l=a:c.next=o,Na(a,t.memoizedState)||(nr=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=c,r.lastRenderedState=a}if(s=r.interleaved,s!==null){n=s;do i=n.lane,ft.lanes|=i,yl|=i,n=n.next;while(n!==s)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nh(s){var t=ra(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=s;var a=r.dispatch,n=r.pending,i=t.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=s(i,l.action),l=l.next;while(l!==n);Na(i,t.memoizedState)||(nr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,a]}function TN(){}function DN(s,t){var r=ft,a=ra(),n=t(),i=!Na(a.memoizedState,n);if(i&&(a.memoizedState=n,nr=!0),a=a.queue,pg(RN.bind(null,r,a,s),[s]),a.getSnapshot!==t||i||ts!==null&&ts.memoizedState.tag&1){if(r.flags|=2048,fd(9,IN.bind(null,r,a,n,t),void 0,null),rs===null)throw Error(Z(349));fl&30||AN(r,t,n)}return n}function AN(s,t,r){s.flags|=16384,s={getSnapshot:t,value:r},t=ft.updateQueue,t===null?(t={lastEffect:null,stores:null},ft.updateQueue=t,t.stores=[s]):(r=t.stores,r===null?t.stores=[s]:r.push(s))}function IN(s,t,r,a){t.value=r,t.getSnapshot=a,PN(t)&&MN(s)}function RN(s,t,r){return r(function(){PN(t)&&MN(s)})}function PN(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!Na(s,r)}catch{return!0}}function MN(s){var t=fn(s,1);t!==null&&ja(t,s,1,-1)}function jy(s){var t=Ta();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gd,lastRenderedState:s},t.queue=s,s=s.dispatch=B3.bind(null,ft,s),[t.memoizedState,s]}function fd(s,t,r,a){return s={tag:s,create:t,destroy:r,deps:a,next:null},t=ft.updateQueue,t===null?(t={lastEffect:null,stores:null},ft.updateQueue=t,t.lastEffect=s.next=s):(r=t.lastEffect,r===null?t.lastEffect=s.next=s:(a=r.next,r.next=s,s.next=a,t.lastEffect=s)),s}function ON(){return ra().memoizedState}function Bm(s,t,r,a){var n=Ta();ft.flags|=s,n.memoizedState=fd(1|t,r,void 0,a===void 0?null:a)}function dx(s,t,r,a){var n=ra();a=a===void 0?null:a;var i=void 0;if(Ht!==null){var l=Ht.memoizedState;if(i=l.destroy,a!==null&&ug(a,l.deps)){n.memoizedState=fd(t,r,i,a);return}}ft.flags|=s,n.memoizedState=fd(1|t,r,i,a)}function Ny(s,t){return Bm(8390656,8,s,t)}function pg(s,t){return dx(2048,8,s,t)}function LN(s,t){return dx(4,2,s,t)}function FN(s,t){return dx(4,4,s,t)}function $N(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function VN(s,t,r){return r=r!=null?r.concat([s]):null,dx(4,4,$N.bind(null,t,s),r)}function gg(){}function UN(s,t){var r=ra();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&ug(t,a[1])?a[0]:(r.memoizedState=[s,t],s)}function BN(s,t){var r=ra();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&ug(t,a[1])?a[0]:(s=s(),r.memoizedState=[s,t],s)}function zN(s,t,r){return fl&21?(Na(r,t)||(r=Yj(),ft.lanes|=r,yl|=r,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,nr=!0),s.memoizedState=r)}function V3(s,t){var r=ze;ze=r!==0&&4>r?r:4,s(!0);var a=rh.transition;rh.transition={};try{s(!1),t()}finally{ze=r,rh.transition=a}}function WN(){return ra().memoizedState}function U3(s,t,r){var a=ai(s);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},GN(s))HN(t,r);else if(r=kN(s,t,r,a),r!==null){var n=Hs();ja(r,s,a,n),qN(r,t,a)}}function B3(s,t,r){var a=ai(s),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(GN(s))HN(t,n);else{var i=s.alternate;if(s.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,Na(o,l)){var c=t.interleaved;c===null?(n.next=n,lg(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=kN(s,t,n,a),r!==null&&(n=Hs(),ja(r,s,a,n),qN(r,t,a))}}function GN(s){var t=s.alternate;return s===ft||t!==null&&t===ft}function HN(s,t){Mc=Nu=!0;var r=s.pending;r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t}function qN(s,t,r){if(r&4194240){var a=t.lanes;a&=s.pendingLanes,r|=a,t.lanes=r,qp(s,r)}}var wu={readContext:sa,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useInsertionEffect:Ns,useLayoutEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useMutableSource:Ns,useSyncExternalStore:Ns,useId:Ns,unstable_isNewReconciler:!1},z3={readContext:sa,useCallback:function(s,t){return Ta().memoizedState=[s,t===void 0?null:t],s},useContext:sa,useEffect:Ny,useImperativeHandle:function(s,t,r){return r=r!=null?r.concat([s]):null,Bm(4194308,4,$N.bind(null,t,s),r)},useLayoutEffect:function(s,t){return Bm(4194308,4,s,t)},useInsertionEffect:function(s,t){return Bm(4,2,s,t)},useMemo:function(s,t){var r=Ta();return t=t===void 0?null:t,s=s(),r.memoizedState=[s,t],s},useReducer:function(s,t,r){var a=Ta();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},a.queue=s,s=s.dispatch=U3.bind(null,ft,s),[a.memoizedState,s]},useRef:function(s){var t=Ta();return s={current:s},t.memoizedState=s},useState:jy,useDebugValue:gg,useDeferredValue:function(s){return Ta().memoizedState=s},useTransition:function(){var s=jy(!1),t=s[0];return s=V3.bind(null,s[1]),Ta().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,r){var a=ft,n=Ta();if(ot){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=t(),rs===null)throw Error(Z(349));fl&30||AN(a,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,Ny(RN.bind(null,a,i,s),[s]),a.flags|=2048,fd(9,IN.bind(null,a,i,r,t),void 0,null),r},useId:function(){var s=Ta(),t=rs.identifierPrefix;if(ot){var r=nn,a=an;r=(a&~(1<<32-va(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=pd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$3++,t=":"+t+"r"+r.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},W3={readContext:sa,useCallback:UN,useContext:sa,useEffect:pg,useImperativeHandle:VN,useInsertionEffect:LN,useLayoutEffect:FN,useMemo:BN,useReducer:ah,useRef:ON,useState:function(){return ah(gd)},useDebugValue:gg,useDeferredValue:function(s){var t=ra();return zN(t,Ht.memoizedState,s)},useTransition:function(){var s=ah(gd)[0],t=ra().memoizedState;return[s,t]},useMutableSource:TN,useSyncExternalStore:DN,useId:WN,unstable_isNewReconciler:!1},G3={readContext:sa,useCallback:UN,useContext:sa,useEffect:pg,useImperativeHandle:VN,useInsertionEffect:LN,useLayoutEffect:FN,useMemo:BN,useReducer:nh,useRef:ON,useState:function(){return nh(gd)},useDebugValue:gg,useDeferredValue:function(s){var t=ra();return Ht===null?t.memoizedState=s:zN(t,Ht.memoizedState,s)},useTransition:function(){var s=nh(gd)[0],t=ra().memoizedState;return[s,t]},useMutableSource:TN,useSyncExternalStore:DN,useId:WN,unstable_isNewReconciler:!1};function pa(s,t){if(s&&s.defaultProps){t=yt({},t),s=s.defaultProps;for(var r in s)t[r]===void 0&&(t[r]=s[r]);return t}return t}function k0(s,t,r,a){t=s.memoizedState,r=r(a,t),r=r==null?t:yt({},t,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var mx={isMounted:function(s){return(s=s._reactInternals)?kl(s)===s:!1},enqueueSetState:function(s,t,r){s=s._reactInternals;var a=Hs(),n=ai(s),i=dn(a,n);i.payload=t,r!=null&&(i.callback=r),t=si(s,i,n),t!==null&&(ja(t,s,n,a),Vm(t,s,n))},enqueueReplaceState:function(s,t,r){s=s._reactInternals;var a=Hs(),n=ai(s),i=dn(a,n);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=si(s,i,n),t!==null&&(ja(t,s,n,a),Vm(t,s,n))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var r=Hs(),a=ai(s),n=dn(r,a);n.tag=2,t!=null&&(n.callback=t),t=si(s,n,a),t!==null&&(ja(t,s,a,r),Vm(t,s,a))}};function wy(s,t,r,a,n,i,l){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,i,l):t.prototype&&t.prototype.isPureReactComponent?!cd(r,a)||!cd(n,i):!0}function YN(s,t,r){var a=!1,n=gi,i=t.contextType;return typeof i=="object"&&i!==null?i=sa(i):(n=or(t)?pl:Rs.current,a=t.contextTypes,i=(a=a!=null)?ko(s,n):gi),t=new t(r,i),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mx,s.stateNode=t,t._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=n,s.__reactInternalMemoizedMaskedChildContext=i),t}function _y(s,t,r,a){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==s&&mx.enqueueReplaceState(t,t.state,null)}function C0(s,t,r,a){var n=s.stateNode;n.props=r,n.state=s.memoizedState,n.refs={},og(s);var i=t.contextType;typeof i=="object"&&i!==null?n.context=sa(i):(i=or(t)?pl:Rs.current,n.context=ko(s,i)),n.state=s.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(k0(s,t,i,r),n.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&mx.enqueueReplaceState(n,n.state,null),vu(s,r,n,a),n.state=s.memoizedState),typeof n.componentDidMount=="function"&&(s.flags|=4194308)}function Do(s,t){try{var r="",a=t;do r+=b4(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:s,source:t,stack:n,digest:null}}function ih(s,t,r){return{value:s,source:null,stack:r??null,digest:t??null}}function E0(s,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var H3=typeof WeakMap=="function"?WeakMap:Map;function ZN(s,t,r){r=dn(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Su||(Su=!0,F0=a),E0(s,t)},r}function QN(s,t,r){r=dn(-1,r),r.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;r.payload=function(){return a(n)},r.callback=function(){E0(s,t)}}var i=s.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){E0(s,t),typeof a!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Sy(s,t,r){var a=s.pingCache;if(a===null){a=s.pingCache=new H3;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(r)||(n.add(r),s=i6.bind(null,s,t,r),t.then(s,s))}function ky(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function Cy(s,t,r,a,n){return s.mode&1?(s.flags|=65536,s.lanes=n,s):(s===t?s.flags|=65536:(s.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=dn(-1,1),t.tag=2,si(r,t,1))),r.lanes|=1),s)}var q3=Sn.ReactCurrentOwner,nr=!1;function $s(s,t,r,a){t.child=s===null?SN(t,null,r,a):Eo(t,s.child,r,a)}function Ey(s,t,r,a,n){r=r.render;var i=t.ref;return xo(t,n),a=xg(s,t,r,a,i,n),r=hg(),s!==null&&!nr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~n,yn(s,t,n)):(ot&&r&&tg(t),t.flags|=1,$s(s,t,a,n),t.child)}function Ty(s,t,r,a,n){if(s===null){var i=r.type;return typeof i=="function"&&!_g(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,XN(s,t,i,a,n)):(s=Hm(r.type,null,a,t,t.mode,n),s.ref=t.ref,s.return=t,t.child=s)}if(i=s.child,!(s.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:cd,r(l,a)&&s.ref===t.ref)return yn(s,t,n)}return t.flags|=1,s=ni(i,a),s.ref=t.ref,s.return=t,t.child=s}function XN(s,t,r,a,n){if(s!==null){var i=s.memoizedProps;if(cd(i,a)&&s.ref===t.ref)if(nr=!1,t.pendingProps=a=i,(s.lanes&n)!==0)s.flags&131072&&(nr=!0);else return t.lanes=s.lanes,yn(s,t,n)}return T0(s,t,r,a,n)}function KN(s,t,r){var a=t.pendingProps,n=a.children,i=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Kl,vr),vr|=r;else{if(!(r&1073741824))return s=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,st(Kl,vr),vr|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,st(Kl,vr),vr|=a}else i!==null?(a=i.baseLanes|r,t.memoizedState=null):a=r,st(Kl,vr),vr|=a;return $s(s,t,n,r),t.child}function JN(s,t){var r=t.ref;(s===null&&r!==null||s!==null&&s.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function T0(s,t,r,a,n){var i=or(r)?pl:Rs.current;return i=ko(t,i),xo(t,n),r=xg(s,t,r,a,i,n),a=hg(),s!==null&&!nr?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~n,yn(s,t,n)):(ot&&a&&tg(t),t.flags|=1,$s(s,t,r,n),t.child)}function Dy(s,t,r,a,n){if(or(r)){var i=!0;pu(t)}else i=!1;if(xo(t,n),t.stateNode===null)zm(s,t),YN(t,r,a),C0(t,r,a,n),a=!0;else if(s===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=sa(d):(d=or(r)?pl:Rs.current,d=ko(t,d));var x=r.getDerivedStateFromProps,p=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||c!==d)&&_y(t,l,a,d),Fn=!1;var f=t.memoizedState;l.state=f,vu(t,a,l,n),c=t.memoizedState,o!==a||f!==c||lr.current||Fn?(typeof x=="function"&&(k0(t,r,x,a),c=t.memoizedState),(o=Fn||wy(t,r,o,a,f,c,d))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),l.props=a,l.state=c,l.context=d,a=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,CN(s,t),o=t.memoizedProps,d=t.type===t.elementType?o:pa(t.type,o),l.props=d,p=t.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=sa(c):(c=or(r)?pl:Rs.current,c=ko(t,c));var y=r.getDerivedStateFromProps;(x=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||f!==c)&&_y(t,l,a,c),Fn=!1,f=t.memoizedState,l.state=f,vu(t,a,l,n);var b=t.memoizedState;o!==p||f!==b||lr.current||Fn?(typeof y=="function"&&(k0(t,r,y,a),b=t.memoizedState),(d=Fn||wy(t,r,d,a,f,b,c)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,b,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,b,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===s.memoizedProps&&f===s.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===s.memoizedProps&&f===s.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=b),l.props=a,l.state=b,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||o===s.memoizedProps&&f===s.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===s.memoizedProps&&f===s.memoizedState||(t.flags|=1024),a=!1)}return D0(s,t,r,a,i,n)}function D0(s,t,r,a,n,i){JN(s,t);var l=(t.flags&128)!==0;if(!a&&!l)return n&&py(t,r,!1),yn(s,t,i);a=t.stateNode,q3.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,s!==null&&l?(t.child=Eo(t,s.child,null,i),t.child=Eo(t,null,o,i)):$s(s,t,o,i),t.memoizedState=a.state,n&&py(t,r,!0),t.child}function e2(s){var t=s.stateNode;t.pendingContext?hy(s,t.pendingContext,t.pendingContext!==t.context):t.context&&hy(s,t.context,!1),cg(s,t.containerInfo)}function Ay(s,t,r,a,n){return Co(),rg(n),t.flags|=256,$s(s,t,r,a),t.child}var A0={dehydrated:null,treeContext:null,retryLane:0};function I0(s){return{baseLanes:s,cachePool:null,transitions:null}}function t2(s,t,r){var a=t.pendingProps,n=xt.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=s!==null&&s.memoizedState===null?!1:(n&2)!==0),o?(i=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(n|=1),st(xt,n&1),s===null)return _0(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,s=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=hx(l,a,0,null),s=rl(s,a,r,null),i.return=t,s.return=t,i.sibling=s,t.child=i,t.child.memoizedState=I0(r),t.memoizedState=A0,s):fg(t,l));if(n=s.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return Y3(s,t,l,a,o,n,r);if(i){i=a.fallback,l=t.mode,n=s.child,o=n.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=ni(n,c),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=ni(o,i):(i=rl(i,l,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=s.child.memoizedState,l=l===null?I0(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=s.childLanes&~r,t.memoizedState=A0,a}return i=s.child,s=i.sibling,a=ni(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,s!==null&&(r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)),t.child=a,t.memoizedState=null,a}function fg(s,t){return t=hx({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function um(s,t,r,a){return a!==null&&rg(a),Eo(t,s.child,null,r),s=fg(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function Y3(s,t,r,a,n,i,l){if(r)return t.flags&256?(t.flags&=-257,a=ih(Error(Z(422))),um(s,t,l,a)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=hx({mode:"visible",children:a.children},n,0,null),i=rl(i,n,l,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&Eo(t,s.child,null,l),t.child.memoizedState=I0(l),t.memoizedState=A0,i);if(!(t.mode&1))return um(s,t,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(Z(419)),a=ih(i,a,void 0),um(s,t,l,a)}if(o=(l&s.childLanes)!==0,nr||o){if(a=rs,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,fn(s,n),ja(a,s,n,-1))}return wg(),a=ih(Error(Z(421))),um(s,t,l,a)}return n.data==="$?"?(t.flags|=128,t.child=s.child,t=l6.bind(null,s),n._reactRetry=t,null):(s=i.treeContext,Dr=ti(n.nextSibling),Rr=t,ot=!0,fa=null,s!==null&&(Hr[qr++]=an,Hr[qr++]=nn,Hr[qr++]=gl,an=s.id,nn=s.overflow,gl=t),t=fg(t,a.children),t.flags|=4096,t)}function Iy(s,t,r){s.lanes|=t;var a=s.alternate;a!==null&&(a.lanes|=t),S0(s.return,t,r)}function lh(s,t,r,a,n){var i=s.memoizedState;i===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function s2(s,t,r){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if($s(s,t,a.children,r),a=xt.current,a&2)a=a&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Iy(s,r,t);else if(s.tag===19)Iy(s,r,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(st(xt,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)s=r.alternate,s!==null&&ju(s)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),lh(t,!1,n,r,i);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(s=n.alternate,s!==null&&ju(s)===null){t.child=n;break}s=n.sibling,n.sibling=r,r=n,n=s}lh(t,!0,r,null,i);break;case"together":lh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zm(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function yn(s,t,r){if(s!==null&&(t.dependencies=s.dependencies),yl|=t.lanes,!(r&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(Z(153));if(t.child!==null){for(s=t.child,r=ni(s,s.pendingProps),t.child=r,r.return=t;s.sibling!==null;)s=s.sibling,r=r.sibling=ni(s,s.pendingProps),r.return=t;r.sibling=null}return t.child}function Z3(s,t,r){switch(t.tag){case 3:e2(t),Co();break;case 5:EN(t);break;case 1:or(t.type)&&pu(t);break;case 4:cg(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;st(yu,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(st(xt,xt.current&1),t.flags|=128,null):r&t.child.childLanes?t2(s,t,r):(st(xt,xt.current&1),s=yn(s,t,r),s!==null?s.sibling:null);st(xt,xt.current&1);break;case 19:if(a=(r&t.childLanes)!==0,s.flags&128){if(a)return s2(s,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),st(xt,xt.current),a)break;return null;case 22:case 23:return t.lanes=0,KN(s,t,r)}return yn(s,t,r)}var r2,R0,a2,n2;r2=function(s,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};R0=function(){};a2=function(s,t,r,a){var n=s.memoizedProps;if(n!==a){s=t.stateNode,Ki(Va.current);var i=null;switch(r){case"input":n=t0(s,n),a=t0(s,a),i=[];break;case"select":n=yt({},n,{value:void 0}),a=yt({},a,{value:void 0}),i=[];break;case"textarea":n=a0(s,n),a=a0(s,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=xu)}i0(r,a);var l;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(sd.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(sd.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&at("scroll",s),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};n2=function(s,t,r,a){r!==a&&(t.flags|=4)};function mc(s,t){if(!ot)switch(s.tailMode){case"hidden":t=s.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function ws(s){var t=s.alternate!==null&&s.alternate.child===s.child,r=0,a=0;if(t)for(var n=s.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=s,n=n.sibling;else for(n=s.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=s,n=n.sibling;return s.subtreeFlags|=a,s.childLanes=r,t}function Q3(s,t,r){var a=t.pendingProps;switch(sg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ws(t),null;case 1:return or(t.type)&&hu(),ws(t),null;case 3:return a=t.stateNode,To(),nt(lr),nt(Rs),mg(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(dm(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,fa!==null&&(U0(fa),fa=null))),R0(s,t),ws(t),null;case 5:dg(t);var n=Ki(hd.current);if(r=t.type,s!==null&&t.stateNode!=null)a2(s,t,r,a,n),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Z(166));return ws(t),null}if(s=Ki(Va.current),dm(t)){a=t.stateNode,r=t.type;var i=t.memoizedProps;switch(a[Pa]=t,a[ud]=i,s=(t.mode&1)!==0,r){case"dialog":at("cancel",a),at("close",a);break;case"iframe":case"object":case"embed":at("load",a);break;case"video":case"audio":for(n=0;n<jc.length;n++)at(jc[n],a);break;case"source":at("error",a);break;case"img":case"image":case"link":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"input":Uf(a,i),at("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},at("invalid",a);break;case"textarea":zf(a,i),at("invalid",a)}i0(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&cm(a.textContent,o,s),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&cm(a.textContent,o,s),n=["children",""+o]):sd.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&at("scroll",a)}switch(r){case"input":tm(a),Bf(a,i,!0);break;case"textarea":tm(a),Wf(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=xu)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Rj(r)),s==="http://www.w3.org/1999/xhtml"?r==="script"?(s=l.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=l.createElement(r,{is:a.is}):(s=l.createElement(r),r==="select"&&(l=s,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):s=l.createElementNS(s,r),s[Pa]=t,s[ud]=a,r2(s,t,!1,!1),t.stateNode=s;e:{switch(l=l0(r,a),r){case"dialog":at("cancel",s),at("close",s),n=a;break;case"iframe":case"object":case"embed":at("load",s),n=a;break;case"video":case"audio":for(n=0;n<jc.length;n++)at(jc[n],s);n=a;break;case"source":at("error",s),n=a;break;case"img":case"image":case"link":at("error",s),at("load",s),n=a;break;case"details":at("toggle",s),n=a;break;case"input":Uf(s,a),n=t0(s,a),at("invalid",s);break;case"option":n=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},n=yt({},a,{value:void 0}),at("invalid",s);break;case"textarea":zf(s,a),n=a0(s,a),at("invalid",s);break;default:n=a}i0(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Oj(s,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Pj(s,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&rd(s,c):typeof c=="number"&&rd(s,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(sd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&at("scroll",s):c!=null&&Up(s,i,c,l))}switch(r){case"input":tm(s),Bf(s,a,!1);break;case"textarea":tm(s),Wf(s);break;case"option":a.value!=null&&s.setAttribute("value",""+pi(a.value));break;case"select":s.multiple=!!a.multiple,i=a.value,i!=null?oo(s,!!a.multiple,i,!1):a.defaultValue!=null&&oo(s,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(s.onclick=xu)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ws(t),null;case 6:if(s&&t.stateNode!=null)n2(s,t,s.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Z(166));if(r=Ki(hd.current),Ki(Va.current),dm(t)){if(a=t.stateNode,r=t.memoizedProps,a[Pa]=t,(i=a.nodeValue!==r)&&(s=Rr,s!==null))switch(s.tag){case 3:cm(a.nodeValue,r,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&cm(a.nodeValue,r,(s.mode&1)!==0)}i&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Pa]=t,t.stateNode=a}return ws(t),null;case 13:if(nt(xt),a=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ot&&Dr!==null&&t.mode&1&&!(t.flags&128))wN(),Co(),t.flags|=98560,i=!1;else if(i=dm(t),a!==null&&a.dehydrated!==null){if(s===null){if(!i)throw Error(Z(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[Pa]=t}else Co(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ws(t),i=!1}else fa!==null&&(U0(fa),fa=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(s===null||xt.current&1?Zt===0&&(Zt=3):wg())),t.updateQueue!==null&&(t.flags|=4),ws(t),null);case 4:return To(),R0(s,t),s===null&&dd(t.stateNode.containerInfo),ws(t),null;case 10:return ig(t.type._context),ws(t),null;case 17:return or(t.type)&&hu(),ws(t),null;case 19:if(nt(xt),i=t.memoizedState,i===null)return ws(t),null;if(a=(t.flags&128)!==0,l=i.rendering,l===null)if(a)mc(i,!1);else{if(Zt!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(l=ju(s),l!==null){for(t.flags|=128,mc(i,!1),a=l.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)i=r,s=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r=r.sibling;return st(xt,xt.current&1|2),t.child}s=s.sibling}i.tail!==null&&It()>Ao&&(t.flags|=128,a=!0,mc(i,!1),t.lanes=4194304)}else{if(!a)if(s=ju(l),s!==null){if(t.flags|=128,a=!0,r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),mc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ot)return ws(t),null}else 2*It()-i.renderingStartTime>Ao&&r!==1073741824&&(t.flags|=128,a=!0,mc(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=It(),t.sibling=null,r=xt.current,st(xt,a?r&1|2:r&1),t):(ws(t),null);case 22:case 23:return Ng(),a=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?vr&1073741824&&(ws(t),t.subtreeFlags&6&&(t.flags|=8192)):ws(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function X3(s,t){switch(sg(t),t.tag){case 1:return or(t.type)&&hu(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return To(),nt(lr),nt(Rs),mg(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return dg(t),null;case 13:if(nt(xt),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));Co()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return nt(xt),null;case 4:return To(),null;case 10:return ig(t.type._context),null;case 22:case 23:return Ng(),null;case 24:return null;default:return null}}var xm=!1,Cs=!1,K3=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Xl(s,t){var r=s.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Nt(s,t,a)}else r.current=null}function P0(s,t,r){try{r()}catch(a){Nt(s,t,a)}}var Ry=!1;function J3(s,t){if(f0=du,s=dN(),eg(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,x=0,p=s,f=null;t:for(;;){for(var y;p!==r||n!==0&&p.nodeType!==3||(o=l+n),p!==i||a!==0&&p.nodeType!==3||(c=l+a),p.nodeType===3&&(l+=p.nodeValue.length),(y=p.firstChild)!==null;)f=p,p=y;for(;;){if(p===s)break t;if(f===r&&++d===n&&(o=l),f===i&&++x===a&&(c=l),(y=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=y}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(y0={focusedElem:s,selectionRange:r},du=!1,ee=t;ee!==null;)if(t=ee,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,ee=s;else for(;ee!==null;){t=ee;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,S=b.memoizedState,_=t.stateNode,w=_.getSnapshotBeforeUpdate(t.elementType===t.type?v:pa(t.type,v),S);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(u){Nt(t,t.return,u)}if(s=t.sibling,s!==null){s.return=t.return,ee=s;break}ee=t.return}return b=Ry,Ry=!1,b}function Oc(s,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&s)===s){var i=n.destroy;n.destroy=void 0,i!==void 0&&P0(t,r,i)}n=n.next}while(n!==a)}}function ux(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&s)===s){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function M0(s){var t=s.ref;if(t!==null){var r=s.stateNode;switch(s.tag){case 5:s=r;break;default:s=r}typeof t=="function"?t(s):t.current=s}}function i2(s){var t=s.alternate;t!==null&&(s.alternate=null,i2(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[Pa],delete t[ud],delete t[j0],delete t[M3],delete t[O3])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function l2(s){return s.tag===5||s.tag===3||s.tag===4}function Py(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||l2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function O0(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(s,t):r.insertBefore(s,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(s,r)):(t=r,t.appendChild(s)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=xu));else if(a!==4&&(s=s.child,s!==null))for(O0(s,t,r),s=s.sibling;s!==null;)O0(s,t,r),s=s.sibling}function L0(s,t,r){var a=s.tag;if(a===5||a===6)s=s.stateNode,t?r.insertBefore(s,t):r.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(L0(s,t,r),s=s.sibling;s!==null;)L0(s,t,r),s=s.sibling}var cs=null,ga=!1;function In(s,t,r){for(r=r.child;r!==null;)o2(s,t,r),r=r.sibling}function o2(s,t,r){if($a&&typeof $a.onCommitFiberUnmount=="function")try{$a.onCommitFiberUnmount(ax,r)}catch{}switch(r.tag){case 5:Cs||Xl(r,t);case 6:var a=cs,n=ga;cs=null,In(s,t,r),cs=a,ga=n,cs!==null&&(ga?(s=cs,r=r.stateNode,s.nodeType===8?s.parentNode.removeChild(r):s.removeChild(r)):cs.removeChild(r.stateNode));break;case 18:cs!==null&&(ga?(s=cs,r=r.stateNode,s.nodeType===8?eh(s.parentNode,r):s.nodeType===1&&eh(s,r),ld(s)):eh(cs,r.stateNode));break;case 4:a=cs,n=ga,cs=r.stateNode.containerInfo,ga=!0,In(s,t,r),cs=a,ga=n;break;case 0:case 11:case 14:case 15:if(!Cs&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&P0(r,t,l),n=n.next}while(n!==a)}In(s,t,r);break;case 1:if(!Cs&&(Xl(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){Nt(r,t,o)}In(s,t,r);break;case 21:In(s,t,r);break;case 22:r.mode&1?(Cs=(a=Cs)||r.memoizedState!==null,In(s,t,r),Cs=a):In(s,t,r);break;default:In(s,t,r)}}function My(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var r=s.stateNode;r===null&&(r=s.stateNode=new K3),t.forEach(function(a){var n=o6.bind(null,s,a);r.has(a)||(r.add(a),a.then(n,n))})}}function ma(s,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=s,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:cs=o.stateNode,ga=!1;break e;case 3:cs=o.stateNode.containerInfo,ga=!0;break e;case 4:cs=o.stateNode.containerInfo,ga=!0;break e}o=o.return}if(cs===null)throw Error(Z(160));o2(i,l,n),cs=null,ga=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Nt(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)c2(t,s),t=t.sibling}function c2(s,t){var r=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ma(t,s),Ea(s),a&4){try{Oc(3,s,s.return),ux(3,s)}catch(v){Nt(s,s.return,v)}try{Oc(5,s,s.return)}catch(v){Nt(s,s.return,v)}}break;case 1:ma(t,s),Ea(s),a&512&&r!==null&&Xl(r,r.return);break;case 5:if(ma(t,s),Ea(s),a&512&&r!==null&&Xl(r,r.return),s.flags&32){var n=s.stateNode;try{rd(n,"")}catch(v){Nt(s,s.return,v)}}if(a&4&&(n=s.stateNode,n!=null)){var i=s.memoizedProps,l=r!==null?r.memoizedProps:i,o=s.type,c=s.updateQueue;if(s.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Aj(n,i),l0(o,l);var d=l0(o,i);for(l=0;l<c.length;l+=2){var x=c[l],p=c[l+1];x==="style"?Oj(n,p):x==="dangerouslySetInnerHTML"?Pj(n,p):x==="children"?rd(n,p):Up(n,x,p,d)}switch(o){case"input":s0(n,i);break;case"textarea":Ij(n,i);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?oo(n,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?oo(n,!!i.multiple,i.defaultValue,!0):oo(n,!!i.multiple,i.multiple?[]:"",!1))}n[ud]=i}catch(v){Nt(s,s.return,v)}}break;case 6:if(ma(t,s),Ea(s),a&4){if(s.stateNode===null)throw Error(Z(162));n=s.stateNode,i=s.memoizedProps;try{n.nodeValue=i}catch(v){Nt(s,s.return,v)}}break;case 3:if(ma(t,s),Ea(s),a&4&&r!==null&&r.memoizedState.isDehydrated)try{ld(t.containerInfo)}catch(v){Nt(s,s.return,v)}break;case 4:ma(t,s),Ea(s);break;case 13:ma(t,s),Ea(s),n=s.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(vg=It())),a&4&&My(s);break;case 22:if(x=r!==null&&r.memoizedState!==null,s.mode&1?(Cs=(d=Cs)||x,ma(t,s),Cs=d):ma(t,s),Ea(s),a&8192){if(d=s.memoizedState!==null,(s.stateNode.isHidden=d)&&!x&&s.mode&1)for(ee=s,x=s.child;x!==null;){for(p=ee=x;ee!==null;){switch(f=ee,y=f.child,f.tag){case 0:case 11:case 14:case 15:Oc(4,f,f.return);break;case 1:Xl(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){a=f,r=f.return;try{t=a,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(v){Nt(a,r,v)}}break;case 5:Xl(f,f.return);break;case 22:if(f.memoizedState!==null){Ly(p);continue}}y!==null?(y.return=f,ee=y):Ly(p)}x=x.sibling}e:for(x=null,p=s;;){if(p.tag===5){if(x===null){x=p;try{n=p.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Mj("display",l))}catch(v){Nt(s,s.return,v)}}}else if(p.tag===6){if(x===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(v){Nt(s,s.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===s)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break e;for(;p.sibling===null;){if(p.return===null||p.return===s)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ma(t,s),Ea(s),a&4&&My(s);break;case 21:break;default:ma(t,s),Ea(s)}}function Ea(s){var t=s.flags;if(t&2){try{e:{for(var r=s.return;r!==null;){if(l2(r)){var a=r;break e}r=r.return}throw Error(Z(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(rd(n,""),a.flags&=-33);var i=Py(s);L0(s,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=Py(s);O0(s,o,l);break;default:throw Error(Z(161))}}catch(c){Nt(s,s.return,c)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function e6(s,t,r){ee=s,d2(s)}function d2(s,t,r){for(var a=(s.mode&1)!==0;ee!==null;){var n=ee,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||xm;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Cs;o=xm;var d=Cs;if(xm=l,(Cs=c)&&!d)for(ee=n;ee!==null;)l=ee,c=l.child,l.tag===22&&l.memoizedState!==null?Fy(n):c!==null?(c.return=l,ee=c):Fy(n);for(;i!==null;)ee=i,d2(i),i=i.sibling;ee=n,xm=o,Cs=d}Oy(s)}else n.subtreeFlags&8772&&i!==null?(i.return=n,ee=i):Oy(s)}}function Oy(s){for(;ee!==null;){var t=ee;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Cs||ux(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Cs)if(r===null)a.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:pa(t.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&vy(t,i,a);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}vy(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var x=d.memoizedState;if(x!==null){var p=x.dehydrated;p!==null&&ld(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Cs||t.flags&512&&M0(t)}catch(f){Nt(t,t.return,f)}}if(t===s){ee=null;break}if(r=t.sibling,r!==null){r.return=t.return,ee=r;break}ee=t.return}}function Ly(s){for(;ee!==null;){var t=ee;if(t===s){ee=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ee=r;break}ee=t.return}}function Fy(s){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ux(4,t)}catch(c){Nt(t,r,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(c){Nt(t,n,c)}}var i=t.return;try{M0(t)}catch(c){Nt(t,i,c)}break;case 5:var l=t.return;try{M0(t)}catch(c){Nt(t,l,c)}}}catch(c){Nt(t,t.return,c)}if(t===s){ee=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ee=o;break}ee=t.return}}var t6=Math.ceil,_u=Sn.ReactCurrentDispatcher,yg=Sn.ReactCurrentOwner,ea=Sn.ReactCurrentBatchConfig,Ie=0,rs=null,Ut=null,xs=0,vr=0,Kl=Ci(0),Zt=0,yd=null,yl=0,xx=0,bg=0,Lc=null,sr=null,vg=0,Ao=1/0,Ka=null,Su=!1,F0=null,ri=null,hm=!1,Gn=null,ku=0,Fc=0,$0=null,Wm=-1,Gm=0;function Hs(){return Ie&6?It():Wm!==-1?Wm:Wm=It()}function ai(s){return s.mode&1?Ie&2&&xs!==0?xs&-xs:F3.transition!==null?(Gm===0&&(Gm=Yj()),Gm):(s=ze,s!==0||(s=window.event,s=s===void 0?16:tN(s.type)),s):1}function ja(s,t,r,a){if(50<Fc)throw Fc=0,$0=null,Error(Z(185));Od(s,r,a),(!(Ie&2)||s!==rs)&&(s===rs&&(!(Ie&2)&&(xx|=r),Zt===4&&zn(s,xs)),cr(s,a),r===1&&Ie===0&&!(t.mode&1)&&(Ao=It()+500,cx&&Ei()))}function cr(s,t){var r=s.callbackNode;F4(s,t);var a=cu(s,s===rs?xs:0);if(a===0)r!==null&&qf(r),s.callbackNode=null,s.callbackPriority=0;else if(t=a&-a,s.callbackPriority!==t){if(r!=null&&qf(r),t===1)s.tag===0?L3($y.bind(null,s)):vN($y.bind(null,s)),R3(function(){!(Ie&6)&&Ei()}),r=null;else{switch(Zj(a)){case 1:r=Hp;break;case 4:r=Hj;break;case 16:r=ou;break;case 536870912:r=qj;break;default:r=ou}r=y2(r,m2.bind(null,s))}s.callbackPriority=t,s.callbackNode=r}}function m2(s,t){if(Wm=-1,Gm=0,Ie&6)throw Error(Z(327));var r=s.callbackNode;if(ho()&&s.callbackNode!==r)return null;var a=cu(s,s===rs?xs:0);if(a===0)return null;if(a&30||a&s.expiredLanes||t)t=Cu(s,a);else{t=a;var n=Ie;Ie|=2;var i=x2();(rs!==s||xs!==t)&&(Ka=null,Ao=It()+500,sl(s,t));do try{a6();break}catch(o){u2(s,o)}while(1);ng(),_u.current=i,Ie=n,Ut!==null?t=0:(rs=null,xs=0,t=Zt)}if(t!==0){if(t===2&&(n=u0(s),n!==0&&(a=n,t=V0(s,n))),t===1)throw r=yd,sl(s,0),zn(s,a),cr(s,It()),r;if(t===6)zn(s,a);else{if(n=s.current.alternate,!(a&30)&&!s6(n)&&(t=Cu(s,a),t===2&&(i=u0(s),i!==0&&(a=i,t=V0(s,i))),t===1))throw r=yd,sl(s,0),zn(s,a),cr(s,It()),r;switch(s.finishedWork=n,s.finishedLanes=a,t){case 0:case 1:throw Error(Z(345));case 2:zi(s,sr,Ka);break;case 3:if(zn(s,a),(a&130023424)===a&&(t=vg+500-It(),10<t)){if(cu(s,0)!==0)break;if(n=s.suspendedLanes,(n&a)!==a){Hs(),s.pingedLanes|=s.suspendedLanes&n;break}s.timeoutHandle=v0(zi.bind(null,s,sr,Ka),t);break}zi(s,sr,Ka);break;case 4:if(zn(s,a),(a&4194240)===a)break;for(t=s.eventTimes,n=-1;0<a;){var l=31-va(a);i=1<<l,l=t[l],l>n&&(n=l),a&=~i}if(a=n,a=It()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*t6(a/1960))-a,10<a){s.timeoutHandle=v0(zi.bind(null,s,sr,Ka),a);break}zi(s,sr,Ka);break;case 5:zi(s,sr,Ka);break;default:throw Error(Z(329))}}}return cr(s,It()),s.callbackNode===r?m2.bind(null,s):null}function V0(s,t){var r=Lc;return s.current.memoizedState.isDehydrated&&(sl(s,t).flags|=256),s=Cu(s,t),s!==2&&(t=sr,sr=r,t!==null&&U0(t)),s}function U0(s){sr===null?sr=s:sr.push.apply(sr,s)}function s6(s){for(var t=s;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!Na(i(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zn(s,t){for(t&=~bg,t&=~xx,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var r=31-va(t),a=1<<r;s[r]=-1,t&=~a}}function $y(s){if(Ie&6)throw Error(Z(327));ho();var t=cu(s,0);if(!(t&1))return cr(s,It()),null;var r=Cu(s,t);if(s.tag!==0&&r===2){var a=u0(s);a!==0&&(t=a,r=V0(s,a))}if(r===1)throw r=yd,sl(s,0),zn(s,t),cr(s,It()),r;if(r===6)throw Error(Z(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,zi(s,sr,Ka),cr(s,It()),null}function jg(s,t){var r=Ie;Ie|=1;try{return s(t)}finally{Ie=r,Ie===0&&(Ao=It()+500,cx&&Ei())}}function bl(s){Gn!==null&&Gn.tag===0&&!(Ie&6)&&ho();var t=Ie;Ie|=1;var r=ea.transition,a=ze;try{if(ea.transition=null,ze=1,s)return s()}finally{ze=a,ea.transition=r,Ie=t,!(Ie&6)&&Ei()}}function Ng(){vr=Kl.current,nt(Kl)}function sl(s,t){s.finishedWork=null,s.finishedLanes=0;var r=s.timeoutHandle;if(r!==-1&&(s.timeoutHandle=-1,I3(r)),Ut!==null)for(r=Ut.return;r!==null;){var a=r;switch(sg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&hu();break;case 3:To(),nt(lr),nt(Rs),mg();break;case 5:dg(a);break;case 4:To();break;case 13:nt(xt);break;case 19:nt(xt);break;case 10:ig(a.type._context);break;case 22:case 23:Ng()}r=r.return}if(rs=s,Ut=s=ni(s.current,null),xs=vr=t,Zt=0,yd=null,bg=xx=yl=0,sr=Lc=null,Xi!==null){for(t=0;t<Xi.length;t++)if(r=Xi[t],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}r.pending=a}Xi=null}return s}function u2(s,t){do{var r=Ut;try{if(ng(),Um.current=wu,Nu){for(var a=ft.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Nu=!1}if(fl=0,ts=Ht=ft=null,Mc=!1,pd=0,yg.current=null,r===null||r.return===null){Zt=1,yd=t,Ut=null;break}e:{var i=s,l=r.return,o=r,c=t;if(t=xs,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,x=o,p=x.tag;if(!(x.mode&1)&&(p===0||p===11||p===15)){var f=x.alternate;f?(x.updateQueue=f.updateQueue,x.memoizedState=f.memoizedState,x.lanes=f.lanes):(x.updateQueue=null,x.memoizedState=null)}var y=ky(l);if(y!==null){y.flags&=-257,Cy(y,l,o,i,t),y.mode&1&&Sy(i,d,t),t=y,c=d;var b=t.updateQueue;if(b===null){var v=new Set;v.add(c),t.updateQueue=v}else b.add(c);break e}else{if(!(t&1)){Sy(i,d,t),wg();break e}c=Error(Z(426))}}else if(ot&&o.mode&1){var S=ky(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Cy(S,l,o,i,t),rg(Do(c,o));break e}}i=c=Do(c,o),Zt!==4&&(Zt=2),Lc===null?Lc=[i]:Lc.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var _=ZN(i,c,t);by(i,_);break e;case 1:o=c;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ri===null||!ri.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var u=QN(i,o,t);by(i,u);break e}}i=i.return}while(i!==null)}p2(r)}catch(h){t=h,Ut===r&&r!==null&&(Ut=r=r.return);continue}break}while(1)}function x2(){var s=_u.current;return _u.current=wu,s===null?wu:s}function wg(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),rs===null||!(yl&268435455)&&!(xx&268435455)||zn(rs,xs)}function Cu(s,t){var r=Ie;Ie|=2;var a=x2();(rs!==s||xs!==t)&&(Ka=null,sl(s,t));do try{r6();break}catch(n){u2(s,n)}while(1);if(ng(),Ie=r,_u.current=a,Ut!==null)throw Error(Z(261));return rs=null,xs=0,Zt}function r6(){for(;Ut!==null;)h2(Ut)}function a6(){for(;Ut!==null&&!T4();)h2(Ut)}function h2(s){var t=f2(s.alternate,s,vr);s.memoizedProps=s.pendingProps,t===null?p2(s):Ut=t,yg.current=null}function p2(s){var t=s;do{var r=t.alternate;if(s=t.return,t.flags&32768){if(r=X3(r,t),r!==null){r.flags&=32767,Ut=r;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Zt=6,Ut=null;return}}else if(r=Q3(r,t,vr),r!==null){Ut=r;return}if(t=t.sibling,t!==null){Ut=t;return}Ut=t=s}while(t!==null);Zt===0&&(Zt=5)}function zi(s,t,r){var a=ze,n=ea.transition;try{ea.transition=null,ze=1,n6(s,t,r,a)}finally{ea.transition=n,ze=a}return null}function n6(s,t,r,a){do ho();while(Gn!==null);if(Ie&6)throw Error(Z(327));r=s.finishedWork;var n=s.finishedLanes;if(r===null)return null;if(s.finishedWork=null,s.finishedLanes=0,r===s.current)throw Error(Z(177));s.callbackNode=null,s.callbackPriority=0;var i=r.lanes|r.childLanes;if($4(s,i),s===rs&&(Ut=rs=null,xs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||hm||(hm=!0,y2(ou,function(){return ho(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ea.transition,ea.transition=null;var l=ze;ze=1;var o=Ie;Ie|=4,yg.current=null,J3(s,r),c2(r,s),S3(y0),du=!!f0,y0=f0=null,s.current=r,e6(r),D4(),Ie=o,ze=l,ea.transition=i}else s.current=r;if(hm&&(hm=!1,Gn=s,ku=n),i=s.pendingLanes,i===0&&(ri=null),R4(r.stateNode),cr(s,It()),t!==null)for(a=s.onRecoverableError,r=0;r<t.length;r++)n=t[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(Su)throw Su=!1,s=F0,F0=null,s;return ku&1&&s.tag!==0&&ho(),i=s.pendingLanes,i&1?s===$0?Fc++:(Fc=0,$0=s):Fc=0,Ei(),null}function ho(){if(Gn!==null){var s=Zj(ku),t=ea.transition,r=ze;try{if(ea.transition=null,ze=16>s?16:s,Gn===null)var a=!1;else{if(s=Gn,Gn=null,ku=0,Ie&6)throw Error(Z(331));var n=Ie;for(Ie|=4,ee=s.current;ee!==null;){var i=ee,l=i.child;if(ee.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(ee=d;ee!==null;){var x=ee;switch(x.tag){case 0:case 11:case 15:Oc(8,x,i)}var p=x.child;if(p!==null)p.return=x,ee=p;else for(;ee!==null;){x=ee;var f=x.sibling,y=x.return;if(i2(x),x===d){ee=null;break}if(f!==null){f.return=y,ee=f;break}ee=y}}}var b=i.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}ee=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ee=l;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oc(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ee=_;break e}ee=i.return}}var w=s.current;for(ee=w;ee!==null;){l=ee;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,ee=N;else e:for(l=w;ee!==null;){if(o=ee,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ux(9,o)}}catch(h){Nt(o,o.return,h)}if(o===l){ee=null;break e}var u=o.sibling;if(u!==null){u.return=o.return,ee=u;break e}ee=o.return}}if(Ie=n,Ei(),$a&&typeof $a.onPostCommitFiberRoot=="function")try{$a.onPostCommitFiberRoot(ax,s)}catch{}a=!0}return a}finally{ze=r,ea.transition=t}}return!1}function Vy(s,t,r){t=Do(r,t),t=ZN(s,t,1),s=si(s,t,1),t=Hs(),s!==null&&(Od(s,1,t),cr(s,t))}function Nt(s,t,r){if(s.tag===3)Vy(s,s,r);else for(;t!==null;){if(t.tag===3){Vy(t,s,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ri===null||!ri.has(a))){s=Do(r,s),s=QN(t,s,1),t=si(t,s,1),s=Hs(),t!==null&&(Od(t,1,s),cr(t,s));break}}t=t.return}}function i6(s,t,r){var a=s.pingCache;a!==null&&a.delete(t),t=Hs(),s.pingedLanes|=s.suspendedLanes&r,rs===s&&(xs&r)===r&&(Zt===4||Zt===3&&(xs&130023424)===xs&&500>It()-vg?sl(s,0):bg|=r),cr(s,t)}function g2(s,t){t===0&&(s.mode&1?(t=am,am<<=1,!(am&130023424)&&(am=4194304)):t=1);var r=Hs();s=fn(s,t),s!==null&&(Od(s,t,r),cr(s,r))}function l6(s){var t=s.memoizedState,r=0;t!==null&&(r=t.retryLane),g2(s,r)}function o6(s,t){var r=0;switch(s.tag){case 13:var a=s.stateNode,n=s.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(Z(314))}a!==null&&a.delete(t),g2(s,r)}var f2;f2=function(s,t,r){if(s!==null)if(s.memoizedProps!==t.pendingProps||lr.current)nr=!0;else{if(!(s.lanes&r)&&!(t.flags&128))return nr=!1,Z3(s,t,r);nr=!!(s.flags&131072)}else nr=!1,ot&&t.flags&1048576&&jN(t,fu,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;zm(s,t),s=t.pendingProps;var n=ko(t,Rs.current);xo(t,r),n=xg(null,t,a,s,n,r);var i=hg();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,or(a)?(i=!0,pu(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,og(t),n.updater=mx,t.stateNode=n,n._reactInternals=t,C0(t,a,s,r),t=D0(null,t,a,!0,i,r)):(t.tag=0,ot&&i&&tg(t),$s(null,t,n,r),t=t.child),t;case 16:a=t.elementType;e:{switch(zm(s,t),s=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=d6(a),s=pa(a,s),n){case 0:t=T0(null,t,a,s,r);break e;case 1:t=Dy(null,t,a,s,r);break e;case 11:t=Ey(null,t,a,s,r);break e;case 14:t=Ty(null,t,a,pa(a.type,s),r);break e}throw Error(Z(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:pa(a,n),T0(s,t,a,n,r);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:pa(a,n),Dy(s,t,a,n,r);case 3:e:{if(e2(t),s===null)throw Error(Z(387));a=t.pendingProps,i=t.memoizedState,n=i.element,CN(s,t),vu(t,a,null,r);var l=t.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=Do(Error(Z(423)),t),t=Ay(s,t,a,r,n);break e}else if(a!==n){n=Do(Error(Z(424)),t),t=Ay(s,t,a,r,n);break e}else for(Dr=ti(t.stateNode.containerInfo.firstChild),Rr=t,ot=!0,fa=null,r=SN(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Co(),a===n){t=yn(s,t,r);break e}$s(s,t,a,r)}t=t.child}return t;case 5:return EN(t),s===null&&_0(t),a=t.type,n=t.pendingProps,i=s!==null?s.memoizedProps:null,l=n.children,b0(a,n)?l=null:i!==null&&b0(a,i)&&(t.flags|=32),JN(s,t),$s(s,t,l,r),t.child;case 6:return s===null&&_0(t),null;case 13:return t2(s,t,r);case 4:return cg(t,t.stateNode.containerInfo),a=t.pendingProps,s===null?t.child=Eo(t,null,a,r):$s(s,t,a,r),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:pa(a,n),Ey(s,t,a,n,r);case 7:return $s(s,t,t.pendingProps,r),t.child;case 8:return $s(s,t,t.pendingProps.children,r),t.child;case 12:return $s(s,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,st(yu,a._currentValue),a._currentValue=l,i!==null)if(Na(i.value,l)){if(i.children===n.children&&!lr.current){t=yn(s,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=dn(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var x=d.pending;x===null?c.next=c:(c.next=x.next,x.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),S0(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Z(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),S0(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}$s(s,t,n.children,r),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,xo(t,r),n=sa(n),a=a(n),t.flags|=1,$s(s,t,a,r),t.child;case 14:return a=t.type,n=pa(a,t.pendingProps),n=pa(a.type,n),Ty(s,t,a,n,r);case 15:return XN(s,t,t.type,t.pendingProps,r);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:pa(a,n),zm(s,t),t.tag=1,or(a)?(s=!0,pu(t)):s=!1,xo(t,r),YN(t,a,n),C0(t,a,n,r),D0(null,t,a,!0,s,r);case 19:return s2(s,t,r);case 22:return KN(s,t,r)}throw Error(Z(156,t.tag))};function y2(s,t){return Gj(s,t)}function c6(s,t,r,a){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(s,t,r,a){return new c6(s,t,r,a)}function _g(s){return s=s.prototype,!(!s||!s.isReactComponent)}function d6(s){if(typeof s=="function")return _g(s)?1:0;if(s!=null){if(s=s.$$typeof,s===zp)return 11;if(s===Wp)return 14}return 2}function ni(s,t){var r=s.alternate;return r===null?(r=Qr(s.tag,t,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=t,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&14680064,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,t=s.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r}function Hm(s,t,r,a,n,i){var l=2;if(a=s,typeof s=="function")_g(s)&&(l=1);else if(typeof s=="string")l=5;else e:switch(s){case Bl:return rl(r.children,n,i,t);case Bp:l=8,n|=8;break;case Xh:return s=Qr(12,r,t,n|2),s.elementType=Xh,s.lanes=i,s;case Kh:return s=Qr(13,r,t,n),s.elementType=Kh,s.lanes=i,s;case Jh:return s=Qr(19,r,t,n),s.elementType=Jh,s.lanes=i,s;case Ej:return hx(r,n,i,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case kj:l=10;break e;case Cj:l=9;break e;case zp:l=11;break e;case Wp:l=14;break e;case Ln:l=16,a=null;break e}throw Error(Z(130,s==null?s:typeof s,""))}return t=Qr(l,r,t,n),t.elementType=s,t.type=a,t.lanes=i,t}function rl(s,t,r,a){return s=Qr(7,s,a,t),s.lanes=r,s}function hx(s,t,r,a){return s=Qr(22,s,a,t),s.elementType=Ej,s.lanes=r,s.stateNode={isHidden:!1},s}function oh(s,t,r){return s=Qr(6,s,null,t),s.lanes=r,s}function ch(s,t,r){return t=Qr(4,s.children!==null?s.children:[],s.key,t),t.lanes=r,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function m6(s,t,r,a,n){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zx(0),this.expirationTimes=zx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zx(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Sg(s,t,r,a,n,i,l,o,c){return s=new m6(s,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Qr(3,null,null,t),s.current=i,i.stateNode=s,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},og(i),s}function u6(s,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ul,key:a==null?null:""+a,children:s,containerInfo:t,implementation:r}}function b2(s){if(!s)return gi;s=s._reactInternals;e:{if(kl(s)!==s||s.tag!==1)throw Error(Z(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(s.tag===1){var r=s.type;if(or(r))return bN(s,r,t)}return t}function v2(s,t,r,a,n,i,l,o,c){return s=Sg(r,a,!0,s,n,i,l,o,c),s.context=b2(null),r=s.current,a=Hs(),n=ai(r),i=dn(a,n),i.callback=t??null,si(r,i,n),s.current.lanes=n,Od(s,n,a),cr(s,a),s}function px(s,t,r,a){var n=t.current,i=Hs(),l=ai(n);return r=b2(r),t.context===null?t.context=r:t.pendingContext=r,t=dn(i,l),t.payload={element:s},a=a===void 0?null:a,a!==null&&(t.callback=a),s=si(n,t,l),s!==null&&(ja(s,n,l,i),Vm(s,n,l)),l}function Eu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Uy(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<t?r:t}}function kg(s,t){Uy(s,t),(s=s.alternate)&&Uy(s,t)}function x6(){return null}var j2=typeof reportError=="function"?reportError:function(s){console.error(s)};function Cg(s){this._internalRoot=s}gx.prototype.render=Cg.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(Z(409));px(s,t,null,null)};gx.prototype.unmount=Cg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;bl(function(){px(null,s,null,null)}),t[gn]=null}};function gx(s){this._internalRoot=s}gx.prototype.unstable_scheduleHydration=function(s){if(s){var t=Kj();s={blockedOn:null,target:s,priority:t};for(var r=0;r<Bn.length&&t!==0&&t<Bn[r].priority;r++);Bn.splice(r,0,s),r===0&&eN(s)}};function Eg(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function fx(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function By(){}function h6(s,t,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=Eu(l);i.call(d)}}var l=v2(t,a,s,0,null,!1,!1,"",By);return s._reactRootContainer=l,s[gn]=l.current,dd(s.nodeType===8?s.parentNode:s),bl(),l}for(;n=s.lastChild;)s.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var d=Eu(c);o.call(d)}}var c=Sg(s,0,!1,null,null,!1,!1,"",By);return s._reactRootContainer=c,s[gn]=c.current,dd(s.nodeType===8?s.parentNode:s),bl(function(){px(t,c,r,a)}),c}function yx(s,t,r,a,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=Eu(l);o.call(c)}}px(t,l,s,n)}else l=h6(r,t,s,n,a);return Eu(l)}Qj=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var r=vc(t.pendingLanes);r!==0&&(qp(t,r|1),cr(t,It()),!(Ie&6)&&(Ao=It()+500,Ei()))}break;case 13:bl(function(){var a=fn(s,1);if(a!==null){var n=Hs();ja(a,s,1,n)}}),kg(s,1)}};Yp=function(s){if(s.tag===13){var t=fn(s,134217728);if(t!==null){var r=Hs();ja(t,s,134217728,r)}kg(s,134217728)}};Xj=function(s){if(s.tag===13){var t=ai(s),r=fn(s,t);if(r!==null){var a=Hs();ja(r,s,t,a)}kg(s,t)}};Kj=function(){return ze};Jj=function(s,t){var r=ze;try{return ze=s,t()}finally{ze=r}};c0=function(s,t,r){switch(t){case"input":if(s0(s,r),t=r.name,r.type==="radio"&&t!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==s&&a.form===s.form){var n=ox(a);if(!n)throw Error(Z(90));Dj(a),s0(a,n)}}}break;case"textarea":Ij(s,r);break;case"select":t=r.value,t!=null&&oo(s,!!r.multiple,t,!1)}};$j=jg;Vj=bl;var p6={usingClientEntryPoint:!1,Events:[Fd,Hl,ox,Lj,Fj,jg]},uc={findFiberByHostInstance:Qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g6={bundleType:uc.bundleType,version:uc.version,rendererPackageName:uc.rendererPackageName,rendererConfig:uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=zj(s),s===null?null:s.stateNode},findFiberByHostInstance:uc.findFiberByHostInstance||x6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{ax=pm.inject(g6),$a=pm}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p6;Vr.createPortal=function(s,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eg(t))throw Error(Z(200));return u6(s,t,null,r)};Vr.createRoot=function(s,t){if(!Eg(s))throw Error(Z(299));var r=!1,a="",n=j2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Sg(s,1,!1,null,null,r,!1,a,n),s[gn]=t.current,dd(s.nodeType===8?s.parentNode:s),new Cg(t)};Vr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(Z(188)):(s=Object.keys(s).join(","),Error(Z(268,s)));return s=zj(t),s=s===null?null:s.stateNode,s};Vr.flushSync=function(s){return bl(s)};Vr.hydrate=function(s,t,r){if(!fx(t))throw Error(Z(200));return yx(null,s,t,!0,r)};Vr.hydrateRoot=function(s,t,r){if(!Eg(s))throw Error(Z(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",l=j2;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=v2(t,null,s,1,r??null,n,!1,i,l),s[gn]=t.current,dd(s),a)for(s=0;s<a.length;s++)r=a[s],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new gx(t)};Vr.render=function(s,t,r){if(!fx(t))throw Error(Z(200));return yx(null,s,t,!1,r)};Vr.unmountComponentAtNode=function(s){if(!fx(s))throw Error(Z(40));return s._reactRootContainer?(bl(function(){yx(null,null,s,!1,function(){s._reactRootContainer=null,s[gn]=null})}),!0):!1};Vr.unstable_batchedUpdates=jg;Vr.unstable_renderSubtreeIntoContainer=function(s,t,r,a){if(!fx(r))throw Error(Z(200));if(s==null||s._reactInternals===void 0)throw Error(Z(38));return yx(s,t,r,!1,a)};Vr.version="18.3.1-next-f1338f8080-20240426";function N2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N2)}catch(s){console.error(s)}}N2(),Nj.exports=Vr;var Zo=Nj.exports,zy=Zo;Zh.createRoot=zy.createRoot,Zh.hydrateRoot=zy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bd(){return bd=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},bd.apply(this,arguments)}var Hn;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Hn||(Hn={}));const Wy="popstate";function f6(s){s===void 0&&(s={});function t(a,n){let{pathname:i,search:l,hash:o}=a.location;return B0("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:Tu(n)}return b6(t,r,null,s)}function Pt(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function w2(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function y6(){return Math.random().toString(36).substr(2,8)}function Gy(s,t){return{usr:s.state,key:s.key,idx:t}}function B0(s,t,r,a){return r===void 0&&(r=null),bd({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?Qo(t):t,{state:r,key:t&&t.key||a||y6()})}function Tu(s){let{pathname:t="/",search:r="",hash:a=""}=s;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Qo(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substr(r),s=s.substr(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substr(a),s=s.substr(0,a)),s&&(t.pathname=s)}return t}function b6(s,t,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,l=n.history,o=Hn.Pop,c=null,d=x();d==null&&(d=0,l.replaceState(bd({},l.state,{idx:d}),""));function x(){return(l.state||{idx:null}).idx}function p(){o=Hn.Pop;let S=x(),_=S==null?null:S-d;d=S,c&&c({action:o,location:v.location,delta:_})}function f(S,_){o=Hn.Push;let w=B0(v.location,S,_);r&&r(w,S),d=x()+1;let N=Gy(w,d),u=v.createHref(w);try{l.pushState(N,"",u)}catch(h){if(h instanceof DOMException&&h.name==="DataCloneError")throw h;n.location.assign(u)}i&&c&&c({action:o,location:v.location,delta:1})}function y(S,_){o=Hn.Replace;let w=B0(v.location,S,_);r&&r(w,S),d=x();let N=Gy(w,d),u=v.createHref(w);l.replaceState(N,"",u),i&&c&&c({action:o,location:v.location,delta:0})}function b(S){let _=n.location.origin!=="null"?n.location.origin:n.location.href,w=typeof S=="string"?S:Tu(S);return w=w.replace(/ $/,"%20"),Pt(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let v={get action(){return o},get location(){return s(n,l)},listen(S){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Wy,p),c=S,()=>{n.removeEventListener(Wy,p),c=null}},createHref(S){return t(n,S)},createURL:b,encodeLocation(S){let _=b(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:y,go(S){return l.go(S)}};return v}var Hy;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Hy||(Hy={}));function v6(s,t,r){return r===void 0&&(r="/"),j6(s,t,r,!1)}function j6(s,t,r,a){let n=typeof t=="string"?Qo(t):t,i=Tg(n.pathname||"/",r);if(i==null)return null;let l=_2(s);N6(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=R6(i);o=A6(l[c],d,a)}return o}function _2(s,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Pt(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=ii([a,c.relativePath]),x=r.concat(c);i.children&&i.children.length>0&&(Pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),_2(i.children,t,x,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:T6(d,i.index),routesMeta:x})};return s.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))n(i,l);else for(let c of S2(i.path))n(i,l,c)}),t}function S2(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let l=S2(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>s.startsWith("/")&&c===""?"/":c)}function N6(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:D6(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const w6=/^:[\w-]+$/,_6=3,S6=2,k6=1,C6=10,E6=-2,qy=s=>s==="*";function T6(s,t){let r=s.split("/"),a=r.length;return r.some(qy)&&(a+=E6),t&&(a+=S6),r.filter(n=>!qy(n)).reduce((n,i)=>n+(w6.test(i)?_6:i===""?k6:C6),a)}function D6(s,t){return s.length===t.length&&s.slice(0,-1).every((a,n)=>a===t[n])?s[s.length-1]-t[t.length-1]:0}function A6(s,t,r){r===void 0&&(r=!1);let{routesMeta:a}=s,n={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,x=i==="/"?t:t.slice(i.length)||"/",p=Yy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},x),f=c.route;if(!p&&d&&r&&!a[a.length-1].route.index&&(p=Yy({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},x)),!p)return null;Object.assign(n,p.params),l.push({params:n,pathname:ii([i,p.pathname]),pathnameBase:L6(ii([i,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(i=ii([i,p.pathnameBase]))}return l}function Yy(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=I6(s.path,s.caseSensitive,s.end),n=t.match(r);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((d,x,p)=>{let{paramName:f,isOptional:y}=x;if(f==="*"){let v=o[p]||"";l=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const b=o[p];return y&&!b?d[f]=void 0:d[f]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:s}}function I6(s,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),w2(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function R6(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return w2(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function Tg(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function P6(s,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:n=""}=typeof s=="string"?Qo(s):s;return{pathname:r?r.startsWith("/")?r:M6(r,t):t,search:F6(a),hash:$6(n)}}function M6(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function dh(s,t,r,a){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function O6(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Dg(s,t){let r=O6(s);return t?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Ag(s,t,r,a){a===void 0&&(a=!1);let n;typeof s=="string"?n=Qo(s):(n=bd({},s),Pt(!n.pathname||!n.pathname.includes("?"),dh("?","pathname","search",n)),Pt(!n.pathname||!n.pathname.includes("#"),dh("#","pathname","hash",n)),Pt(!n.search||!n.search.includes("#"),dh("#","search","hash",n)));let i=s===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=r;else{let p=t.length-1;if(!a&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),p-=1;n.pathname=f.join("/")}o=p>=0?t[p]:"/"}let c=P6(n,o),d=l&&l!=="/"&&l.endsWith("/"),x=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||x)&&(c.pathname+="/"),c}const ii=s=>s.join("/").replace(/\/\/+/g,"/"),L6=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),F6=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,$6=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function V6(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const k2=["post","put","patch","delete"];new Set(k2);const U6=["get",...k2];new Set(U6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vd(){return vd=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},vd.apply(this,arguments)}const Ig=m.createContext(null),B6=m.createContext(null),Ti=m.createContext(null),bx=m.createContext(null),kn=m.createContext({outlet:null,matches:[],isDataRoute:!1}),C2=m.createContext(null);function z6(s,t){let{relative:r}=t===void 0?{}:t;Xo()||Pt(!1);let{basename:a,navigator:n}=m.useContext(Ti),{hash:i,pathname:l,search:o}=T2(s,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:ii([a,l])),n.createHref({pathname:c,search:o,hash:i})}function Xo(){return m.useContext(bx)!=null}function Ga(){return Xo()||Pt(!1),m.useContext(bx).location}function E2(s){m.useContext(Ti).static||m.useLayoutEffect(s)}function ns(){let{isDataRoute:s}=m.useContext(kn);return s?s_():W6()}function W6(){Xo()||Pt(!1);let s=m.useContext(Ig),{basename:t,future:r,navigator:a}=m.useContext(Ti),{matches:n}=m.useContext(kn),{pathname:i}=Ga(),l=JSON.stringify(Dg(n,r.v7_relativeSplatPath)),o=m.useRef(!1);return E2(()=>{o.current=!0}),m.useCallback(function(d,x){if(x===void 0&&(x={}),!o.current)return;if(typeof d=="number"){a.go(d);return}let p=Ag(d,JSON.parse(l),i,x.relative==="path");s==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ii([t,p.pathname])),(x.replace?a.replace:a.push)(p,x.state,x)},[t,a,l,i,s])}function Di(){let{matches:s}=m.useContext(kn),t=s[s.length-1];return t?t.params:{}}function T2(s,t){let{relative:r}=t===void 0?{}:t,{future:a}=m.useContext(Ti),{matches:n}=m.useContext(kn),{pathname:i}=Ga(),l=JSON.stringify(Dg(n,a.v7_relativeSplatPath));return m.useMemo(()=>Ag(s,JSON.parse(l),i,r==="path"),[s,l,i,r])}function G6(s,t){return H6(s,t)}function H6(s,t,r,a){Xo()||Pt(!1);let{navigator:n}=m.useContext(Ti),{matches:i}=m.useContext(kn),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Ga(),x;if(t){var p;let S=typeof t=="string"?Qo(t):t;c==="/"||(p=S.pathname)!=null&&p.startsWith(c)||Pt(!1),x=S}else x=d;let f=x.pathname||"/",y=f;if(c!=="/"){let S=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=v6(s,{pathname:y}),v=X6(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:ii([c,n.encodeLocation?n.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:ii([c,n.encodeLocation?n.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,r,a);return t&&v?m.createElement(bx.Provider,{value:{location:vd({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Hn.Pop}},v):v}function q6(){let s=t_(),t=V6(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:n},r):null,i)}const Y6=m.createElement(q6,null);class Z6 extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?m.createElement(kn.Provider,{value:this.props.routeContext},m.createElement(C2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Q6(s){let{routeContext:t,match:r,children:a}=s,n=m.useContext(Ig);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(kn.Provider,{value:t},a)}function X6(s,t,r,a){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),s==null){var i;if(!r)return null;if(r.errors)s=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let l=s,o=(n=r)==null?void 0:n.errors;if(o!=null){let x=l.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);x>=0||Pt(!1),l=l.slice(0,Math.min(l.length,x+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let x=0;x<l.length;x++){let p=l[x];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=x),p.route.id){let{loaderData:f,errors:y}=r,b=p.route.loader&&f[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((x,p,f)=>{let y,b=!1,v=null,S=null;r&&(y=o&&p.route.id?o[p.route.id]:void 0,v=p.route.errorElement||Y6,c&&(d<0&&f===0?(r_("route-fallback",!1),b=!0,S=null):d===f&&(b=!0,S=p.route.hydrateFallbackElement||null)));let _=t.concat(l.slice(0,f+1)),w=()=>{let N;return y?N=v:b?N=S:p.route.Component?N=m.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=x,m.createElement(Q6,{match:p,routeContext:{outlet:x,matches:_,isDataRoute:r!=null},children:N})};return r&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?m.createElement(Z6,{location:r.location,revalidation:r.revalidation,component:v,error:y,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var D2=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(D2||{}),Du=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(Du||{});function K6(s){let t=m.useContext(Ig);return t||Pt(!1),t}function J6(s){let t=m.useContext(B6);return t||Pt(!1),t}function e_(s){let t=m.useContext(kn);return t||Pt(!1),t}function A2(s){let t=e_(),r=t.matches[t.matches.length-1];return r.route.id||Pt(!1),r.route.id}function t_(){var s;let t=m.useContext(C2),r=J6(Du.UseRouteError),a=A2(Du.UseRouteError);return t!==void 0?t:(s=r.errors)==null?void 0:s[a]}function s_(){let{router:s}=K6(D2.UseNavigateStable),t=A2(Du.UseNavigateStable),r=m.useRef(!1);return E2(()=>{r.current=!0}),m.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?s.navigate(n):s.navigate(n,vd({fromRouteId:t},i)))},[s,t])}const Zy={};function r_(s,t,r){!t&&!Zy[s]&&(Zy[s]=!0)}function a_(s,t){s==null||s.v7_startTransition,(s==null?void 0:s.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function n_(s){let{to:t,replace:r,state:a,relative:n}=s;Xo()||Pt(!1);let{future:i,static:l}=m.useContext(Ti),{matches:o}=m.useContext(kn),{pathname:c}=Ga(),d=ns(),x=Ag(t,Dg(o,i.v7_relativeSplatPath),c,n==="path"),p=JSON.stringify(x);return m.useEffect(()=>d(JSON.parse(p),{replace:r,state:a,relative:n}),[d,p,n,r,a]),null}function q(s){Pt(!1)}function i_(s){let{basename:t="/",children:r=null,location:a,navigationType:n=Hn.Pop,navigator:i,static:l=!1,future:o}=s;Xo()&&Pt(!1);let c=t.replace(/^\/*/,"/"),d=m.useMemo(()=>({basename:c,navigator:i,static:l,future:vd({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof a=="string"&&(a=Qo(a));let{pathname:x="/",search:p="",hash:f="",state:y=null,key:b="default"}=a,v=m.useMemo(()=>{let S=Tg(x,c);return S==null?null:{location:{pathname:S,search:p,hash:f,state:y,key:b},navigationType:n}},[c,x,p,f,y,b,n]);return v==null?null:m.createElement(Ti.Provider,{value:d},m.createElement(bx.Provider,{children:r,value:v}))}function aa(s){let{children:t,location:r}=s;return G6(z0(t),r)}new Promise(()=>{});function z0(s,t){t===void 0&&(t=[]);let r=[];return m.Children.forEach(s,(a,n)=>{if(!m.isValidElement(a))return;let i=[...t,n];if(a.type===m.Fragment){r.push.apply(r,z0(a.props.children,i));return}a.type!==q&&Pt(!1),!a.props.index||!a.props.children||Pt(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=z0(a.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W0(){return W0=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},W0.apply(this,arguments)}function l_(s,t){if(s==null)return{};var r={},a=Object.keys(s),n,i;for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&(r[n]=s[n]);return r}function o_(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function c_(s,t){return s.button===0&&(!t||t==="_self")&&!o_(s)}const d_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m_="6";try{window.__reactRouterVersion=m_}catch{}const u_="startTransition",Qy=i4[u_];function x_(s){let{basename:t,children:r,future:a,window:n}=s,i=m.useRef();i.current==null&&(i.current=f6({window:n,v5Compat:!0}));let l=i.current,[o,c]=m.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},x=m.useCallback(p=>{d&&Qy?Qy(()=>c(p)):c(p)},[c,d]);return m.useLayoutEffect(()=>l.listen(x),[l,x]),m.useEffect(()=>a_(a),[a]),m.createElement(i_,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:a})}const h_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",p_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,re=m.forwardRef(function(t,r){let{onClick:a,relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:x,viewTransition:p}=t,f=l_(t,d_),{basename:y}=m.useContext(Ti),b,v=!1;if(typeof d=="string"&&p_.test(d)&&(b=d,h_))try{let N=new URL(window.location.href),u=d.startsWith("//")?new URL(N.protocol+d):new URL(d),h=Tg(u.pathname,y);u.origin===N.origin&&h!=null?d=h+u.search+u.hash:v=!0}catch{}let S=z6(d,{relative:n}),_=g_(d,{replace:l,state:o,target:c,preventScrollReset:x,relative:n,viewTransition:p});function w(N){a&&a(N),N.defaultPrevented||_(N)}return m.createElement("a",W0({},f,{href:b||S,onClick:v||i?a:w,ref:r,target:c}))});var Xy;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Xy||(Xy={}));var Ky;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Ky||(Ky={}));function g_(s,t){let{target:r,replace:a,state:n,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=ns(),d=Ga(),x=T2(s,{relative:l});return m.useCallback(p=>{if(c_(p,r)){p.preventDefault();let f=a!==void 0?a:Tu(d)===Tu(x);c(s,{replace:f,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,x,a,n,r,s,i,l,o])}function Ja(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function I2(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Pr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Io={duration:.5,overwrite:!1,delay:0},Rg,hs,ct,Xr=1e8,Xe=1/Xr,G0=Math.PI*2,f_=G0/4,y_=0,R2=Math.sqrt,b_=Math.cos,v_=Math.sin,as=function(t){return typeof t=="string"},kt=function(t){return typeof t=="function"},bn=function(t){return typeof t=="number"},Pg=function(t){return typeof t>"u"},Wa=function(t){return typeof t=="object"},dr=function(t){return t!==!1},Mg=function(){return typeof window<"u"},gm=function(t){return kt(t)||as(t)},P2=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Is=Array.isArray,H0=/(?:-?\.?\d|\.)+/gi,M2=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Jl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,mh=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,O2=/[+-]=-?[.\d]+/,L2=/[^,'"\[\]\s]+/gi,j_=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ht,Aa,q0,Og,Lr={},Au={},F2,$2=function(t){return(Au=Ro(t,Lr))&&hr},Lg=function(t,r){return console.warn("Invalid property",t,"set to",r,"Missing plugin? gsap.registerPlugin()")},jd=function(t,r){return!r&&console.warn(t)},V2=function(t,r){return t&&(Lr[t]=r)&&Au&&(Au[t]=r)||Lr},Nd=function(){return 0},N_={suppressEvents:!0,isStart:!0,kill:!1},qm={suppressEvents:!0,kill:!1},w_={suppressEvents:!0},Fg={},li=[],Y0={},U2,Nr={},uh={},Jy=30,Ym=[],$g="",Vg=function(t){var r=t[0],a,n;if(Wa(r)||kt(r)||(t=[t]),!(a=(r._gsap||{}).harness)){for(n=Ym.length;n--&&!Ym[n].targetTest(r););a=Ym[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new m1(t[n],a)))||t.splice(n,1);return t},al=function(t){return t._gsap||Vg(Kr(t))[0]._gsap},B2=function(t,r,a){return(a=t[r])&&kt(a)?t[r]():Pg(a)&&t.getAttribute&&t.getAttribute(r)||a},mr=function(t,r){return(t=t.split(",")).forEach(r)||t},Dt=function(t){return Math.round(t*1e5)/1e5||0},Vt=function(t){return Math.round(t*1e7)/1e7||0},po=function(t,r){var a=r.charAt(0),n=parseFloat(r.substr(2));return t=parseFloat(t),a==="+"?t+n:a==="-"?t-n:a==="*"?t*n:t/n},__=function(t,r){for(var a=r.length,n=0;t.indexOf(r[n])<0&&++n<a;);return n<a},Iu=function(){var t=li.length,r=li.slice(0),a,n;for(Y0={},li.length=0,a=0;a<t;a++)n=r[a],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Ug=function(t){return!!(t._initted||t._startAt||t.add)},z2=function(t,r,a,n){li.length&&!hs&&Iu(),t.render(r,a,n||!!(hs&&r<0&&Ug(t))),li.length&&!hs&&Iu()},W2=function(t){var r=parseFloat(t);return(r||r===0)&&(t+"").match(L2).length<2?r:as(t)?t.trim():t},G2=function(t){return t},Fr=function(t,r){for(var a in r)a in t||(t[a]=r[a]);return t},S_=function(t){return function(r,a){for(var n in a)n in r||n==="duration"&&t||n==="ease"||(r[n]=a[n])}},Ro=function(t,r){for(var a in r)t[a]=r[a];return t},eb=function s(t,r){for(var a in r)a!=="__proto__"&&a!=="constructor"&&a!=="prototype"&&(t[a]=Wa(r[a])?s(t[a]||(t[a]={}),r[a]):r[a]);return t},Ru=function(t,r){var a={},n;for(n in t)n in r||(a[n]=t[n]);return a},$c=function(t){var r=t.parent||ht,a=t.keyframes?S_(Is(t.keyframes)):Fr;if(dr(t.inherit))for(;r;)a(t,r.vars.defaults),r=r.parent||r._dp;return t},k_=function(t,r){for(var a=t.length,n=a===r.length;n&&a--&&t[a]===r[a];);return a<0},H2=function(t,r,a,n,i){a===void 0&&(a="_first"),n===void 0&&(n="_last");var l=t[n],o;if(i)for(o=r[i];l&&l[i]>o;)l=l._prev;return l?(r._next=l._next,l._next=r):(r._next=t[a],t[a]=r),r._next?r._next._prev=r:t[n]=r,r._prev=l,r.parent=r._dp=t,r},vx=function(t,r,a,n){a===void 0&&(a="_first"),n===void 0&&(n="_last");var i=r._prev,l=r._next;i?i._next=l:t[a]===r&&(t[a]=l),l?l._prev=i:t[n]===r&&(t[n]=i),r._next=r._prev=r.parent=null},fi=function(t,r){t.parent&&(!r||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},nl=function(t,r){if(t&&(!r||r._end>t._dur||r._start<0))for(var a=t;a;)a._dirty=1,a=a.parent;return t},C_=function(t){for(var r=t.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return t},Z0=function(t,r,a,n){return t._startAt&&(hs?t._startAt.revert(qm):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(r,!0,n))},E_=function s(t){return!t||t._ts&&s(t.parent)},tb=function(t){return t._repeat?Po(t._tTime,t=t.duration()+t._rDelay)*t:0},Po=function(t,r){var a=Math.floor(t=Vt(t/r));return t&&a===t?a-1:a},Pu=function(t,r){return(t-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},jx=function(t){return t._end=Vt(t._start+(t._tDur/Math.abs(t._ts||t._rts||Xe)||0))},Nx=function(t,r){var a=t._dp;return a&&a.smoothChildTiming&&t._ts&&(t._start=Vt(a._time-(t._ts>0?r/t._ts:((t._dirty?t.totalDuration():t._tDur)-r)/-t._ts)),jx(t),a._dirty||nl(a,t)),t},q2=function(t,r){var a;if((r._time||!r._dur&&r._initted||r._start<t._time&&(r._dur||!r.add))&&(a=Pu(t.rawTime(),r),(!r._dur||Vd(0,r.totalDuration(),a)-r._tTime>Xe)&&r.render(a,!0)),nl(t,r)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(a=t;a._dp;)a.rawTime()>=0&&a.totalTime(a._tTime),a=a._dp;t._zTime=-Xe}},Ma=function(t,r,a,n){return r.parent&&fi(r),r._start=Vt((bn(a)?a:a||t!==ht?Wr(t,a,r):t._time)+r._delay),r._end=Vt(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),H2(t,r,"_first","_last",t._sort?"_start":0),Q0(r)||(t._recent=r),n||q2(t,r),t._ts<0&&Nx(t,t._tTime),t},Y2=function(t,r){return(Lr.ScrollTrigger||Lg("scrollTrigger",r))&&Lr.ScrollTrigger.create(r,t)},Z2=function(t,r,a,n,i){if(zg(t,r,i),!t._initted)return 1;if(!a&&t._pt&&!hs&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&U2!==Cr.frame)return li.push(t),t._lazy=[i,n],1},T_=function s(t){var r=t.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||s(r))},Q0=function(t){var r=t.data;return r==="isFromStart"||r==="isStart"},D_=function(t,r,a,n){var i=t.ratio,l=r<0||!r&&(!t._start&&T_(t)&&!(!t._initted&&Q0(t))||(t._ts<0||t._dp._ts<0)&&!Q0(t))?0:1,o=t._rDelay,c=0,d,x,p;if(o&&t._repeat&&(c=Vd(0,t._tDur,r),x=Po(c,o),t._yoyo&&x&1&&(l=1-l),x!==Po(t._tTime,o)&&(i=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==i||hs||n||t._zTime===Xe||!r&&t._zTime){if(!t._initted&&Z2(t,r,n,a,c))return;for(p=t._zTime,t._zTime=r||(a?Xe:0),a||(a=r&&!p),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=c,d=t._pt;d;)d.r(l,d.d),d=d._next;r<0&&Z0(t,r,a,!0),t._onUpdate&&!a&&Ar(t,"onUpdate"),c&&t._repeat&&!a&&t.parent&&Ar(t,"onRepeat"),(r>=t._tDur||r<0)&&t.ratio===l&&(l&&fi(t,1),!a&&!hs&&(Ar(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=r)},A_=function(t,r,a){var n;if(a>r)for(n=t._first;n&&n._start<=a;){if(n.data==="isPause"&&n._start>r)return n;n=n._next}else for(n=t._last;n&&n._start>=a;){if(n.data==="isPause"&&n._start<r)return n;n=n._prev}},Mo=function(t,r,a,n){var i=t._repeat,l=Vt(r)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=l/t._dur),t._dur=l,t._tDur=i?i<0?1e10:Vt(l*(i+1)+t._rDelay*i):l,o>0&&!n&&Nx(t,t._tTime=t._tDur*o),t.parent&&jx(t),a||nl(t.parent,t),t},sb=function(t){return t instanceof Ws?nl(t):Mo(t,t._dur)},I_={_start:0,endTime:Nd,totalDuration:Nd},Wr=function s(t,r,a){var n=t.labels,i=t._recent||I_,l=t.duration()>=Xr?i.endTime(!1):t._dur,o,c,d;return as(r)&&(isNaN(r)||r in n)?(c=r.charAt(0),d=r.substr(-1)==="%",o=r.indexOf("="),c==="<"||c===">"?(o>=0&&(r=r.replace(/=/,"")),(c==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(r.substr(1))||0)*(d?(o<0?i:a).totalDuration()/100:1)):o<0?(r in n||(n[r]=l),n[r]):(c=parseFloat(r.charAt(o-1)+r.substr(o+1)),d&&a&&(c=c/100*(Is(a)?a[0]:a).totalDuration()),o>1?s(t,r.substr(0,o-1),a)+c:l+c)):r==null?l:+r},Vc=function(t,r,a){var n=bn(r[1]),i=(n?2:1)+(t<2?0:1),l=r[i],o,c;if(n&&(l.duration=r[1]),l.parent=a,t){for(o=l,c=a;c&&!("immediateRender"in o);)o=c.vars.defaults||{},c=dr(c.vars.inherit)&&c.parent;l.immediateRender=dr(o.immediateRender),t<2?l.runBackwards=1:l.startAt=r[i-1]}return new $t(r[0],l,r[i+1])},Ai=function(t,r){return t||t===0?r(t):r},Vd=function(t,r,a){return a<t?t:a>r?r:a},Es=function(t,r){return!as(t)||!(r=j_.exec(t))?"":r[1]},R_=function(t,r,a){return Ai(a,function(n){return Vd(t,r,n)})},X0=[].slice,Q2=function(t,r){return t&&Wa(t)&&"length"in t&&(!r&&!t.length||t.length-1 in t&&Wa(t[0]))&&!t.nodeType&&t!==Aa},P_=function(t,r,a){return a===void 0&&(a=[]),t.forEach(function(n){var i;return as(n)&&!r||Q2(n,1)?(i=a).push.apply(i,Kr(n)):a.push(n)})||a},Kr=function(t,r,a){return ct&&!r&&ct.selector?ct.selector(t):as(t)&&!a&&(q0||!Oo())?X0.call((r||Og).querySelectorAll(t),0):Is(t)?P_(t,a):Q2(t)?X0.call(t,0):t?[t]:[]},K0=function(t){return t=Kr(t)[0]||jd("Invalid scope")||{},function(r){var a=t.current||t.nativeElement||t;return Kr(r,a.querySelectorAll?a:a===t?jd("Invalid scope")||Og.createElement("div"):t)}},X2=function(t){return t.sort(function(){return .5-Math.random()})},K2=function(t){if(kt(t))return t;var r=Wa(t)?t:{each:t},a=il(r.ease),n=r.from||0,i=parseFloat(r.base)||0,l={},o=n>0&&n<1,c=isNaN(n)||o,d=r.axis,x=n,p=n;return as(n)?x=p={center:.5,edges:.5,end:1}[n]||0:!o&&c&&(x=n[0],p=n[1]),function(f,y,b){var v=(b||r).length,S=l[v],_,w,N,u,h,g,j,T,C;if(!S){if(C=r.grid==="auto"?0:(r.grid||[1,Xr])[1],!C){for(j=-Xr;j<(j=b[C++].getBoundingClientRect().left)&&C<v;);C<v&&C--}for(S=l[v]=[],_=c?Math.min(C,v)*x-.5:n%C,w=C===Xr?0:c?v*p/C-.5:n/C|0,j=0,T=Xr,g=0;g<v;g++)N=g%C-_,u=w-(g/C|0),S[g]=h=d?Math.abs(d==="y"?u:N):R2(N*N+u*u),h>j&&(j=h),h<T&&(T=h);n==="random"&&X2(S),S.max=j-T,S.min=T,S.v=v=(parseFloat(r.amount)||parseFloat(r.each)*(C>v?v-1:d?d==="y"?v/C:C:Math.max(C,v/C))||0)*(n==="edges"?-1:1),S.b=v<0?i-v:i,S.u=Es(r.amount||r.each)||0,a=a&&v<0?o1(a):a}return v=(S[f]-S.min)/S.max||0,Vt(S.b+(a?a(v):v)*S.v)+S.u}},J0=function(t){var r=Math.pow(10,((t+"").split(".")[1]||"").length);return function(a){var n=Vt(Math.round(parseFloat(a)/t)*t*r);return(n-n%1)/r+(bn(a)?0:Es(a))}},J2=function(t,r){var a=Is(t),n,i;return!a&&Wa(t)&&(n=a=t.radius||Xr,t.values?(t=Kr(t.values),(i=!bn(t[0]))&&(n*=n)):t=J0(t.increment)),Ai(r,a?kt(t)?function(l){return i=t(l),Math.abs(i-l)<=n?i:l}:function(l){for(var o=parseFloat(i?l.x:l),c=parseFloat(i?l.y:0),d=Xr,x=0,p=t.length,f,y;p--;)i?(f=t[p].x-o,y=t[p].y-c,f=f*f+y*y):f=Math.abs(t[p]-o),f<d&&(d=f,x=p);return x=!n||d<=n?t[x]:l,i||x===l||bn(l)?x:x+Es(l)}:J0(t))},e1=function(t,r,a,n){return Ai(Is(t)?!r:a===!0?!!(a=0):!n,function(){return Is(t)?t[~~(Math.random()*t.length)]:(a=a||1e-5)&&(n=a<1?Math.pow(10,(a+"").length-2):1)&&Math.floor(Math.round((t-a/2+Math.random()*(r-t+a*.99))/a)*a*n)/n})},M_=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return function(n){return r.reduce(function(i,l){return l(i)},n)}},O_=function(t,r){return function(a){return t(parseFloat(a))+(r||Es(a))}},L_=function(t,r,a){return s1(t,r,0,1,a)},t1=function(t,r,a){return Ai(a,function(n){return t[~~r(n)]})},F_=function s(t,r,a){var n=r-t;return Is(t)?t1(t,s(0,t.length),r):Ai(a,function(i){return(n+(i-t)%n)%n+t})},$_=function s(t,r,a){var n=r-t,i=n*2;return Is(t)?t1(t,s(0,t.length-1),r):Ai(a,function(l){return l=(i+(l-t)%i)%i||0,t+(l>n?i-l:l)})},wd=function(t){for(var r=0,a="",n,i,l,o;~(n=t.indexOf("random(",r));)l=t.indexOf(")",n),o=t.charAt(n+7)==="[",i=t.substr(n+7,l-n-7).match(o?L2:H0),a+=t.substr(r,n-r)+e1(o?i:+i[0],o?0:+i[1],+i[2]||1e-5),r=l+1;return a+t.substr(r,t.length-r)},s1=function(t,r,a,n,i){var l=r-t,o=n-a;return Ai(i,function(c){return a+((c-t)/l*o||0)})},V_=function s(t,r,a,n){var i=isNaN(t+r)?0:function(y){return(1-y)*t+y*r};if(!i){var l=as(t),o={},c,d,x,p,f;if(a===!0&&(n=1)&&(a=null),l)t={p:t},r={p:r};else if(Is(t)&&!Is(r)){for(x=[],p=t.length,f=p-2,d=1;d<p;d++)x.push(s(t[d-1],t[d]));p--,i=function(b){b*=p;var v=Math.min(f,~~b);return x[v](b-v)},a=r}else n||(t=Ro(Is(t)?[]:{},t));if(!x){for(c in r)Bg.call(o,t,c,"get",r[c]);i=function(b){return Hg(b,o)||(l?t.p:t)}}}return Ai(a,i)},rb=function(t,r,a){var n=t.labels,i=Xr,l,o,c;for(l in n)o=n[l]-r,o<0==!!a&&o&&i>(o=Math.abs(o))&&(c=l,i=o);return c},Ar=function(t,r,a){var n=t.vars,i=n[r],l=ct,o=t._ctx,c,d,x;if(i)return c=n[r+"Params"],d=n.callbackScope||t,a&&li.length&&Iu(),o&&(ct=o),x=c?i.apply(d,c):i.call(d),ct=l,x},Nc=function(t){return fi(t),t.scrollTrigger&&t.scrollTrigger.kill(!!hs),t.progress()<1&&Ar(t,"onInterrupt"),t},eo,r1=[],a1=function(t){if(t)if(t=!t.name&&t.default||t,Mg()||t.headless){var r=t.name,a=kt(t),n=r&&!a&&t.init?function(){this._props=[]}:t,i={init:Nd,render:Hg,add:Bg,kill:sS,modifier:tS,rawVars:0},l={targetTest:0,get:0,getSetter:Gg,aliases:{},register:0};if(Oo(),t!==n){if(Nr[r])return;Fr(n,Fr(Ru(t,i),l)),Ro(n.prototype,Ro(i,Ru(t,l))),Nr[n.prop=r]=n,t.targetTest&&(Ym.push(n),Fg[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}V2(r,n),t.register&&t.register(hr,n,ur)}else r1.push(t)},Qe=255,wc={aqua:[0,Qe,Qe],lime:[0,Qe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Qe],navy:[0,0,128],white:[Qe,Qe,Qe],olive:[128,128,0],yellow:[Qe,Qe,0],orange:[Qe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Qe,0,0],pink:[Qe,192,203],cyan:[0,Qe,Qe],transparent:[Qe,Qe,Qe,0]},xh=function(t,r,a){return t+=t<0?1:t>1?-1:0,(t*6<1?r+(a-r)*t*6:t<.5?a:t*3<2?r+(a-r)*(2/3-t)*6:r)*Qe+.5|0},n1=function(t,r,a){var n=t?bn(t)?[t>>16,t>>8&Qe,t&Qe]:0:wc.black,i,l,o,c,d,x,p,f,y,b;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),wc[t])n=wc[t];else if(t.charAt(0)==="#"){if(t.length<6&&(i=t.charAt(1),l=t.charAt(2),o=t.charAt(3),t="#"+i+i+l+l+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&Qe,n&Qe,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&Qe,t&Qe]}else if(t.substr(0,3)==="hsl"){if(n=b=t.match(H0),!r)c=+n[0]%360/360,d=+n[1]/100,x=+n[2]/100,l=x<=.5?x*(d+1):x+d-x*d,i=x*2-l,n.length>3&&(n[3]*=1),n[0]=xh(c+1/3,i,l),n[1]=xh(c,i,l),n[2]=xh(c-1/3,i,l);else if(~t.indexOf("="))return n=t.match(M2),a&&n.length<4&&(n[3]=1),n}else n=t.match(H0)||wc.transparent;n=n.map(Number)}return r&&!b&&(i=n[0]/Qe,l=n[1]/Qe,o=n[2]/Qe,p=Math.max(i,l,o),f=Math.min(i,l,o),x=(p+f)/2,p===f?c=d=0:(y=p-f,d=x>.5?y/(2-p-f):y/(p+f),c=p===i?(l-o)/y+(l<o?6:0):p===l?(o-i)/y+2:(i-l)/y+4,c*=60),n[0]=~~(c+.5),n[1]=~~(d*100+.5),n[2]=~~(x*100+.5)),a&&n.length<4&&(n[3]=1),n},i1=function(t){var r=[],a=[],n=-1;return t.split(oi).forEach(function(i){var l=i.match(Jl)||[];r.push.apply(r,l),a.push(n+=l.length+1)}),r.c=a,r},ab=function(t,r,a){var n="",i=(t+n).match(oi),l=r?"hsla(":"rgba(",o=0,c,d,x,p;if(!i)return t;if(i=i.map(function(f){return(f=n1(f,r,1))&&l+(r?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),a&&(x=i1(t),c=a.c,c.join(n)!==x.c.join(n)))for(d=t.replace(oi,"1").split(Jl),p=d.length-1;o<p;o++)n+=d[o]+(~c.indexOf(o)?i.shift()||l+"0,0,0,0)":(x.length?x:i.length?i:a).shift());if(!d)for(d=t.split(oi),p=d.length-1;o<p;o++)n+=d[o]+i[o];return n+d[p]},oi=function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in wc)s+="|"+t+"\\b";return new RegExp(s+")","gi")}(),U_=/hsl[a]?\(/,l1=function(t){var r=t.join(" "),a;if(oi.lastIndex=0,oi.test(r))return a=U_.test(r),t[1]=ab(t[1],a),t[0]=ab(t[0],a,i1(t[1])),!0},_d,Cr=function(){var s=Date.now,t=500,r=33,a=s(),n=a,i=1e3/240,l=i,o=[],c,d,x,p,f,y,b=function v(S){var _=s()-n,w=S===!0,N,u,h,g;if((_>t||_<0)&&(a+=_-r),n+=_,h=n-a,N=h-l,(N>0||w)&&(g=++p.frame,f=h-p.time*1e3,p.time=h=h/1e3,l+=N+(N>=i?4:i-N),u=1),w||(c=d(v)),u)for(y=0;y<o.length;y++)o[y](h,f,g,S)};return p={time:0,frame:0,tick:function(){b(!0)},deltaRatio:function(S){return f/(1e3/(S||60))},wake:function(){F2&&(!q0&&Mg()&&(Aa=q0=window,Og=Aa.document||{},Lr.gsap=hr,(Aa.gsapVersions||(Aa.gsapVersions=[])).push(hr.version),$2(Au||Aa.GreenSockGlobals||!Aa.gsap&&Aa||{}),r1.forEach(a1)),x=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&p.sleep(),d=x||function(S){return setTimeout(S,l-p.time*1e3+1|0)},_d=1,b(2))},sleep:function(){(x?cancelAnimationFrame:clearTimeout)(c),_d=0,d=Nd},lagSmoothing:function(S,_){t=S||1/0,r=Math.min(_||33,t)},fps:function(S){i=1e3/(S||240),l=p.time*1e3+i},add:function(S,_,w){var N=_?function(u,h,g,j){S(u,h,g,j),p.remove(N)}:S;return p.remove(S),o[w?"unshift":"push"](N),Oo(),N},remove:function(S,_){~(_=o.indexOf(S))&&o.splice(_,1)&&y>=_&&y--},_listeners:o},p}(),Oo=function(){return!_d&&Cr.wake()},De={},B_=/^[\d.\-M][\d.\-,\s]/,z_=/["']/g,W_=function(t){for(var r={},a=t.substr(1,t.length-3).split(":"),n=a[0],i=1,l=a.length,o,c,d;i<l;i++)c=a[i],o=i!==l-1?c.lastIndexOf(","):c.length,d=c.substr(0,o),r[n]=isNaN(d)?d.replace(z_,"").trim():+d,n=c.substr(o+1).trim();return r},G_=function(t){var r=t.indexOf("(")+1,a=t.indexOf(")"),n=t.indexOf("(",r);return t.substring(r,~n&&n<a?t.indexOf(")",a+1):a)},H_=function(t){var r=(t+"").split("("),a=De[r[0]];return a&&r.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[W_(r[1])]:G_(t).split(",").map(W2)):De._CE&&B_.test(t)?De._CE("",t):a},o1=function(t){return function(r){return 1-t(1-r)}},c1=function s(t,r){for(var a=t._first,n;a;)a instanceof Ws?s(a,r):a.vars.yoyoEase&&(!a._yoyo||!a._repeat)&&a._yoyo!==r&&(a.timeline?s(a.timeline,r):(n=a._ease,a._ease=a._yEase,a._yEase=n,a._yoyo=r)),a=a._next},il=function(t,r){return t&&(kt(t)?t:De[t]||H_(t))||r},Cl=function(t,r,a,n){a===void 0&&(a=function(c){return 1-r(1-c)}),n===void 0&&(n=function(c){return c<.5?r(c*2)/2:1-r((1-c)*2)/2});var i={easeIn:r,easeOut:a,easeInOut:n},l;return mr(t,function(o){De[o]=Lr[o]=i,De[l=o.toLowerCase()]=a;for(var c in i)De[l+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=De[o+"."+c]=i[c]}),i},d1=function(t){return function(r){return r<.5?(1-t(1-r*2))/2:.5+t((r-.5)*2)/2}},hh=function s(t,r,a){var n=r>=1?r:1,i=(a||(t?.3:.45))/(r<1?r:1),l=i/G0*(Math.asin(1/n)||0),o=function(x){return x===1?1:n*Math.pow(2,-10*x)*v_((x-l)*i)+1},c=t==="out"?o:t==="in"?function(d){return 1-o(1-d)}:d1(o);return i=G0/i,c.config=function(d,x){return s(t,d,x)},c},ph=function s(t,r){r===void 0&&(r=1.70158);var a=function(l){return l?--l*l*((r+1)*l+r)+1:0},n=t==="out"?a:t==="in"?function(i){return 1-a(1-i)}:d1(a);return n.config=function(i){return s(t,i)},n};mr("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,t){var r=t<5?t+1:t;Cl(s+",Power"+(r-1),t?function(a){return Math.pow(a,r)}:function(a){return a},function(a){return 1-Math.pow(1-a,r)},function(a){return a<.5?Math.pow(a*2,r)/2:1-Math.pow((1-a)*2,r)/2})});De.Linear.easeNone=De.none=De.Linear.easeIn;Cl("Elastic",hh("in"),hh("out"),hh());(function(s,t){var r=1/t,a=2*r,n=2.5*r,i=function(o){return o<r?s*o*o:o<a?s*Math.pow(o-1.5/t,2)+.75:o<n?s*(o-=2.25/t)*o+.9375:s*Math.pow(o-2.625/t,2)+.984375};Cl("Bounce",function(l){return 1-i(1-l)},i)})(7.5625,2.75);Cl("Expo",function(s){return Math.pow(2,10*(s-1))*s+s*s*s*s*s*s*(1-s)});Cl("Circ",function(s){return-(R2(1-s*s)-1)});Cl("Sine",function(s){return s===1?1:-b_(s*f_)+1});Cl("Back",ph("in"),ph("out"),ph());De.SteppedEase=De.steps=Lr.SteppedEase={config:function(t,r){t===void 0&&(t=1);var a=1/t,n=t+(r?0:1),i=r?1:0,l=1-Xe;return function(o){return((n*Vd(0,l,o)|0)+i)*a}}};Io.ease=De["quad.out"];mr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return $g+=s+","+s+"Params,"});var m1=function(t,r){this.id=y_++,t._gsap=this,this.target=t,this.harness=r,this.get=r?r.get:B2,this.set=r?r.getSetter:Gg},Sd=function(){function s(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,Mo(this,+r.duration,1,1),this.data=r.data,ct&&(this._ctx=ct,ct.data.push(this)),_d||Cr.wake()}var t=s.prototype;return t.delay=function(a){return a||a===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+a-this._delay),this._delay=a,this):this._delay},t.duration=function(a){return arguments.length?this.totalDuration(this._repeat>0?a+(a+this._rDelay)*this._repeat:a):this.totalDuration()&&this._dur},t.totalDuration=function(a){return arguments.length?(this._dirty=0,Mo(this,this._repeat<0?a:(a-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(a,n){if(Oo(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Nx(this,a),!i._dp||i.parent||q2(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&a<this._tDur||this._ts<0&&a>0||!this._tDur&&!a)&&Ma(this._dp,this,this._start-this._delay)}return(this._tTime!==a||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Xe||!a&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=a),z2(this,a,n)),this},t.time=function(a,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),a+tb(this))%(this._dur+this._rDelay)||(a?this._dur:0),n):this._time},t.totalProgress=function(a,n){return arguments.length?this.totalTime(this.totalDuration()*a,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(a,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-a:a)+tb(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(a,n){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(a-1)*i,n):this._repeat?Po(this._tTime,i)+1:1},t.timeScale=function(a,n){if(!arguments.length)return this._rts===-Xe?0:this._rts;if(this._rts===a)return this;var i=this.parent&&this._ts?Pu(this.parent._time,this):this._tTime;return this._rts=+a||0,this._ts=this._ps||a===-Xe?0:this._rts,this.totalTime(Vd(-Math.abs(this._delay),this.totalDuration(),i),n!==!1),jx(this),C_(this)},t.paused=function(a){return arguments.length?(this._ps!==a&&(this._ps=a,a?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Oo(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Xe&&(this._tTime-=Xe)))),this):this._ps},t.startTime=function(a){if(arguments.length){this._start=a;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&Ma(n,this,a-this._delay),this}return this._start},t.endTime=function(a){return this._start+(dr(a)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(a){var n=this.parent||this._dp;return n?a&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Pu(n.rawTime(a),this):this._tTime:this._tTime},t.revert=function(a){a===void 0&&(a=w_);var n=hs;return hs=a,Ug(this)&&(this.timeline&&this.timeline.revert(a),this.totalTime(-.01,a.suppressEvents)),this.data!=="nested"&&a.kill!==!1&&this.kill(),hs=n,this},t.globalTime=function(a){for(var n=this,i=arguments.length?a:n.rawTime();n;)i=n._start+i/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(a):i},t.repeat=function(a){return arguments.length?(this._repeat=a===1/0?-2:a,sb(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(a){if(arguments.length){var n=this._time;return this._rDelay=a,sb(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},t.seek=function(a,n){return this.totalTime(Wr(this,a),dr(n))},t.restart=function(a,n){return this.play().totalTime(a?-this._delay:0,dr(n)),this._dur||(this._zTime=-Xe),this},t.play=function(a,n){return a!=null&&this.seek(a,n),this.reversed(!1).paused(!1)},t.reverse=function(a,n){return a!=null&&this.seek(a||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(a,n){return a!=null&&this.seek(a,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(a){return arguments.length?(!!a!==this.reversed()&&this.timeScale(-this._rts||(a?-Xe:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Xe,this},t.isActive=function(){var a=this.parent||this._dp,n=this._start,i;return!!(!a||this._ts&&this._initted&&a.isActive()&&(i=a.rawTime(!0))>=n&&i<this.endTime(!0)-Xe)},t.eventCallback=function(a,n,i){var l=this.vars;return arguments.length>1?(n?(l[a]=n,i&&(l[a+"Params"]=i),a==="onUpdate"&&(this._onUpdate=n)):delete l[a],this):l[a]},t.then=function(a){var n=this;return new Promise(function(i){var l=kt(a)?a:G2,o=function(){var d=n.then;n.then=null,kt(l)&&(l=l(n))&&(l.then||l===n)&&(n.then=d),i(l),n.then=d};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?o():n._prom=o})},t.kill=function(){Nc(this)},s}();Fr(Sd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Xe,_prom:0,_ps:!1,_rts:1});var Ws=function(s){I2(t,s);function t(a,n){var i;return a===void 0&&(a={}),i=s.call(this,a)||this,i.labels={},i.smoothChildTiming=!!a.smoothChildTiming,i.autoRemoveChildren=!!a.autoRemoveChildren,i._sort=dr(a.sortChildren),ht&&Ma(a.parent||ht,Ja(i),n),a.reversed&&i.reverse(),a.paused&&i.paused(!0),a.scrollTrigger&&Y2(Ja(i),a.scrollTrigger),i}var r=t.prototype;return r.to=function(n,i,l){return Vc(0,arguments,this),this},r.from=function(n,i,l){return Vc(1,arguments,this),this},r.fromTo=function(n,i,l,o){return Vc(2,arguments,this),this},r.set=function(n,i,l){return i.duration=0,i.parent=this,$c(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new $t(n,i,Wr(this,l),1),this},r.call=function(n,i,l){return Ma(this,$t.delayedCall(0,n,i),l)},r.staggerTo=function(n,i,l,o,c,d,x){return l.duration=i,l.stagger=l.stagger||o,l.onComplete=d,l.onCompleteParams=x,l.parent=this,new $t(n,l,Wr(this,c)),this},r.staggerFrom=function(n,i,l,o,c,d,x){return l.runBackwards=1,$c(l).immediateRender=dr(l.immediateRender),this.staggerTo(n,i,l,o,c,d,x)},r.staggerFromTo=function(n,i,l,o,c,d,x,p){return o.startAt=l,$c(o).immediateRender=dr(o.immediateRender),this.staggerTo(n,i,o,c,d,x,p)},r.render=function(n,i,l){var o=this._time,c=this._dirty?this.totalDuration():this._tDur,d=this._dur,x=n<=0?0:Vt(n),p=this._zTime<0!=n<0&&(this._initted||!d),f,y,b,v,S,_,w,N,u,h,g,j;if(this!==ht&&x>c&&n>=0&&(x=c),x!==this._tTime||l||p){if(o!==this._time&&d&&(x+=this._time-o,n+=this._time-o),f=x,u=this._start,N=this._ts,_=!N,p&&(d||(o=this._zTime),(n||!i)&&(this._zTime=n)),this._repeat){if(g=this._yoyo,S=d+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(S*100+n,i,l);if(f=Vt(x%S),x===c?(v=this._repeat,f=d):(h=Vt(x/S),v=~~h,v&&v===h&&(f=d,v--),f>d&&(f=d)),h=Po(this._tTime,S),!o&&this._tTime&&h!==v&&this._tTime-h*S-this._dur<=0&&(h=v),g&&v&1&&(f=d-f,j=1),v!==h&&!this._lock){var T=g&&h&1,C=T===(g&&v&1);if(v<h&&(T=!T),o=T?0:x%d?d:x,this._lock=1,this.render(o||(j?0:Vt(v*S)),i,!d)._lock=0,this._tTime=x,!i&&this.parent&&Ar(this,"onRepeat"),this.vars.repeatRefresh&&!j&&(this.invalidate()._lock=1),o&&o!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(d=this._dur,c=this._tDur,C&&(this._lock=2,o=T?d:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!j&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;c1(this,j)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=A_(this,Vt(o),Vt(f)),w&&(x-=f-(f=w._start))),this._tTime=x,this._time=f,this._act=!N,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,o=0),!o&&x&&!i&&!h&&(Ar(this,"onStart"),this._tTime!==x))return this;if(f>=o&&n>=0)for(y=this._first;y;){if(b=y._next,(y._act||f>=y._start)&&y._ts&&w!==y){if(y.parent!==this)return this.render(n,i,l);if(y.render(y._ts>0?(f-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(f-y._start)*y._ts,i,l),f!==this._time||!this._ts&&!_){w=0,b&&(x+=this._zTime=-Xe);break}}y=b}else{y=this._last;for(var E=n<0?n:f;y;){if(b=y._prev,(y._act||E<=y._end)&&y._ts&&w!==y){if(y.parent!==this)return this.render(n,i,l);if(y.render(y._ts>0?(E-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(E-y._start)*y._ts,i,l||hs&&Ug(y)),f!==this._time||!this._ts&&!_){w=0,b&&(x+=this._zTime=E?-Xe:Xe);break}}y=b}}if(w&&!i&&(this.pause(),w.render(f>=o?0:-Xe)._zTime=f>=o?1:-1,this._ts))return this._start=u,jx(this),this.render(n,i,l);this._onUpdate&&!i&&Ar(this,"onUpdate",!0),(x===c&&this._tTime>=this.totalDuration()||!x&&o)&&(u===this._start||Math.abs(N)!==Math.abs(this._ts))&&(this._lock||((n||!d)&&(x===c&&this._ts>0||!x&&this._ts<0)&&fi(this,1),!i&&!(n<0&&!o)&&(x||o||!c)&&(Ar(this,x===c&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(x<c&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(n,i){var l=this;if(bn(i)||(i=Wr(this,i,n)),!(n instanceof Sd)){if(Is(n))return n.forEach(function(o){return l.add(o,i)}),this;if(as(n))return this.addLabel(n,i);if(kt(n))n=$t.delayedCall(0,n);else return this}return this!==n?Ma(this,n,i):this},r.getChildren=function(n,i,l,o){n===void 0&&(n=!0),i===void 0&&(i=!0),l===void 0&&(l=!0),o===void 0&&(o=-Xr);for(var c=[],d=this._first;d;)d._start>=o&&(d instanceof $t?i&&c.push(d):(l&&c.push(d),n&&c.push.apply(c,d.getChildren(!0,i,l)))),d=d._next;return c},r.getById=function(n){for(var i=this.getChildren(1,1,1),l=i.length;l--;)if(i[l].vars.id===n)return i[l]},r.remove=function(n){return as(n)?this.removeLabel(n):kt(n)?this.killTweensOf(n):(n.parent===this&&vx(this,n),n===this._recent&&(this._recent=this._last),nl(this))},r.totalTime=function(n,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Vt(Cr.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),s.prototype.totalTime.call(this,n,i),this._forcing=0,this):this._tTime},r.addLabel=function(n,i){return this.labels[n]=Wr(this,i),this},r.removeLabel=function(n){return delete this.labels[n],this},r.addPause=function(n,i,l){var o=$t.delayedCall(0,i||Nd,l);return o.data="isPause",this._hasPause=1,Ma(this,o,Wr(this,n))},r.removePause=function(n){var i=this._first;for(n=Wr(this,n);i;)i._start===n&&i.data==="isPause"&&fi(i),i=i._next},r.killTweensOf=function(n,i,l){for(var o=this.getTweensOf(n,l),c=o.length;c--;)qn!==o[c]&&o[c].kill(n,i);return this},r.getTweensOf=function(n,i){for(var l=[],o=Kr(n),c=this._first,d=bn(i),x;c;)c instanceof $t?__(c._targets,o)&&(d?(!qn||c._initted&&c._ts)&&c.globalTime(0)<=i&&c.globalTime(c.totalDuration())>i:!i||c.isActive())&&l.push(c):(x=c.getTweensOf(o,i)).length&&l.push.apply(l,x),c=c._next;return l},r.tweenTo=function(n,i){i=i||{};var l=this,o=Wr(l,n),c=i,d=c.startAt,x=c.onStart,p=c.onStartParams,f=c.immediateRender,y,b=$t.to(l,Fr({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:i.duration||Math.abs((o-(d&&"time"in d?d.time:l._time))/l.timeScale())||Xe,onStart:function(){if(l.pause(),!y){var S=i.duration||Math.abs((o-(d&&"time"in d?d.time:l._time))/l.timeScale());b._dur!==S&&Mo(b,S,0,1).render(b._time,!0,!0),y=1}x&&x.apply(b,p||[])}},i));return f?b.render(0):b},r.tweenFromTo=function(n,i,l){return this.tweenTo(i,Fr({startAt:{time:Wr(this,n)}},l))},r.recent=function(){return this._recent},r.nextLabel=function(n){return n===void 0&&(n=this._time),rb(this,Wr(this,n))},r.previousLabel=function(n){return n===void 0&&(n=this._time),rb(this,Wr(this,n),1)},r.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Xe)},r.shiftChildren=function(n,i,l){l===void 0&&(l=0);for(var o=this._first,c=this.labels,d;o;)o._start>=l&&(o._start+=n,o._end+=n),o=o._next;if(i)for(d in c)c[d]>=l&&(c[d]+=n);return nl(this)},r.invalidate=function(n){var i=this._first;for(this._lock=0;i;)i.invalidate(n),i=i._next;return s.prototype.invalidate.call(this,n)},r.clear=function(n){n===void 0&&(n=!0);for(var i=this._first,l;i;)l=i._next,this.remove(i),i=l;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),nl(this)},r.totalDuration=function(n){var i=0,l=this,o=l._last,c=Xr,d,x,p;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-n:n));if(l._dirty){for(p=l.parent;o;)d=o._prev,o._dirty&&o.totalDuration(),x=o._start,x>c&&l._sort&&o._ts&&!l._lock?(l._lock=1,Ma(l,o,x-o._delay,1)._lock=0):c=x,x<0&&o._ts&&(i-=x,(!p&&!l._dp||p&&p.smoothChildTiming)&&(l._start+=x/l._ts,l._time-=x,l._tTime-=x),l.shiftChildren(-x,!1,-1/0),c=0),o._end>i&&o._ts&&(i=o._end),o=d;Mo(l,l===ht&&l._time>i?l._time:i,1,1),l._dirty=0}return l._tDur},t.updateRoot=function(n){if(ht._ts&&(z2(ht,Pu(n,ht)),U2=Cr.frame),Cr.frame>=Jy){Jy+=Pr.autoSleep||120;var i=ht._first;if((!i||!i._ts)&&Pr.autoSleep&&Cr._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Cr.sleep()}}},t}(Sd);Fr(Ws.prototype,{_lock:0,_hasPause:0,_forcing:0});var q_=function(t,r,a,n,i,l,o){var c=new ur(this._pt,t,r,0,1,f1,null,i),d=0,x=0,p,f,y,b,v,S,_,w;for(c.b=a,c.e=n,a+="",n+="",(_=~n.indexOf("random("))&&(n=wd(n)),l&&(w=[a,n],l(w,t,r),a=w[0],n=w[1]),f=a.match(mh)||[];p=mh.exec(n);)b=p[0],v=n.substring(d,p.index),y?y=(y+1)%5:v.substr(-5)==="rgba("&&(y=1),b!==f[x++]&&(S=parseFloat(f[x-1])||0,c._pt={_next:c._pt,p:v||x===1?v:",",s:S,c:b.charAt(1)==="="?po(S,b)-S:parseFloat(b)-S,m:y&&y<4?Math.round:0},d=mh.lastIndex);return c.c=d<n.length?n.substring(d,n.length):"",c.fp=o,(O2.test(n)||_)&&(c.e=0),this._pt=c,c},Bg=function(t,r,a,n,i,l,o,c,d,x){kt(n)&&(n=n(i||0,t,l));var p=t[r],f=a!=="get"?a:kt(p)?d?t[r.indexOf("set")||!kt(t["get"+r.substr(3)])?r:"get"+r.substr(3)](d):t[r]():p,y=kt(p)?d?K_:p1:Wg,b;if(as(n)&&(~n.indexOf("random(")&&(n=wd(n)),n.charAt(1)==="="&&(b=po(f,n)+(Es(f)||0),(b||b===0)&&(n=b))),!x||f!==n||ep)return!isNaN(f*n)&&n!==""?(b=new ur(this._pt,t,r,+f||0,n-(f||0),typeof p=="boolean"?eS:g1,0,y),d&&(b.fp=d),o&&b.modifier(o,this,t),this._pt=b):(!p&&!(r in t)&&Lg(r,n),q_.call(this,t,r,f,n,y,c||Pr.stringFilter,d))},Y_=function(t,r,a,n,i){if(kt(t)&&(t=Uc(t,i,r,a,n)),!Wa(t)||t.style&&t.nodeType||Is(t)||P2(t))return as(t)?Uc(t,i,r,a,n):t;var l={},o;for(o in t)l[o]=Uc(t[o],i,r,a,n);return l},u1=function(t,r,a,n,i,l){var o,c,d,x;if(Nr[t]&&(o=new Nr[t]).init(i,o.rawVars?r[t]:Y_(r[t],n,i,l,a),a,n,l)!==!1&&(a._pt=c=new ur(a._pt,i,t,0,1,o.render,o,0,o.priority),a!==eo))for(d=a._ptLookup[a._targets.indexOf(i)],x=o._props.length;x--;)d[o._props[x]]=c;return o},qn,ep,zg=function s(t,r,a){var n=t.vars,i=n.ease,l=n.startAt,o=n.immediateRender,c=n.lazy,d=n.onUpdate,x=n.runBackwards,p=n.yoyoEase,f=n.keyframes,y=n.autoRevert,b=t._dur,v=t._startAt,S=t._targets,_=t.parent,w=_&&_.data==="nested"?_.vars.targets:S,N=t._overwrite==="auto"&&!Rg,u=t.timeline,h,g,j,T,C,E,R,k,O,P,$,I,L;if(u&&(!f||!i)&&(i="none"),t._ease=il(i,Io.ease),t._yEase=p?o1(il(p===!0?i:p,Io.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!u&&!!n.runBackwards,!u||f&&!n.stagger){if(k=S[0]?al(S[0]).harness:0,I=k&&n[k.prop],h=Ru(n,Fg),v&&(v._zTime<0&&v.progress(1),r<0&&x&&o&&!y?v.render(-1,!0):v.revert(x&&b?qm:N_),v._lazy=0),l){if(fi(t._startAt=$t.set(S,Fr({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!v&&dr(c),startAt:null,delay:0,onUpdate:d&&function(){return Ar(t,"onUpdate")},stagger:0},l))),t._startAt._dp=0,t._startAt._sat=t,r<0&&(hs||!o&&!y)&&t._startAt.revert(qm),o&&b&&r<=0&&a<=0){r&&(t._zTime=r);return}}else if(x&&b&&!v){if(r&&(o=!1),j=Fr({overwrite:!1,data:"isFromStart",lazy:o&&!v&&dr(c),immediateRender:o,stagger:0,parent:_},h),I&&(j[k.prop]=I),fi(t._startAt=$t.set(S,j)),t._startAt._dp=0,t._startAt._sat=t,r<0&&(hs?t._startAt.revert(qm):t._startAt.render(-1,!0)),t._zTime=r,!o)s(t._startAt,Xe,Xe);else if(!r)return}for(t._pt=t._ptCache=0,c=b&&dr(c)||c&&!b,g=0;g<S.length;g++){if(C=S[g],R=C._gsap||Vg(S)[g]._gsap,t._ptLookup[g]=P={},Y0[R.id]&&li.length&&Iu(),$=w===S?g:w.indexOf(C),k&&(O=new k).init(C,I||h,t,$,w)!==!1&&(t._pt=T=new ur(t._pt,C,O.name,0,1,O.render,O,0,O.priority),O._props.forEach(function(D){P[D]=T}),O.priority&&(E=1)),!k||I)for(j in h)Nr[j]&&(O=u1(j,h,t,$,C,w))?O.priority&&(E=1):P[j]=T=Bg.call(t,C,j,"get",h[j],$,w,0,n.stringFilter);t._op&&t._op[g]&&t.kill(C,t._op[g]),N&&t._pt&&(qn=t,ht.killTweensOf(C,P,t.globalTime(r)),L=!t.parent,qn=0),t._pt&&c&&(Y0[R.id]=1)}E&&y1(t),t._onInit&&t._onInit(t)}t._onUpdate=d,t._initted=(!t._op||t._pt)&&!L,f&&r<=0&&u.render(Xr,!0,!0)},Z_=function(t,r,a,n,i,l,o,c){var d=(t._pt&&t._ptCache||(t._ptCache={}))[r],x,p,f,y;if(!d)for(d=t._ptCache[r]=[],f=t._ptLookup,y=t._targets.length;y--;){if(x=f[y][r],x&&x.d&&x.d._pt)for(x=x.d._pt;x&&x.p!==r&&x.fp!==r;)x=x._next;if(!x)return ep=1,t.vars[r]="+=0",zg(t,o),ep=0,c?jd(r+" not eligible for reset"):1;d.push(x)}for(y=d.length;y--;)p=d[y],x=p._pt||p,x.s=(n||n===0)&&!i?n:x.s+(n||0)+l*x.c,x.c=a-x.s,p.e&&(p.e=Dt(a)+Es(p.e)),p.b&&(p.b=x.s+Es(p.b))},Q_=function(t,r){var a=t[0]?al(t[0]).harness:0,n=a&&a.aliases,i,l,o,c;if(!n)return r;i=Ro({},r);for(l in n)if(l in i)for(c=n[l].split(","),o=c.length;o--;)i[c[o]]=i[l];return i},X_=function(t,r,a,n){var i=r.ease||n||"power1.inOut",l,o;if(Is(r))o=a[t]||(a[t]=[]),r.forEach(function(c,d){return o.push({t:d/(r.length-1)*100,v:c,e:i})});else for(l in r)o=a[l]||(a[l]=[]),l==="ease"||o.push({t:parseFloat(t),v:r[l],e:i})},Uc=function(t,r,a,n,i){return kt(t)?t.call(r,a,n,i):as(t)&&~t.indexOf("random(")?wd(t):t},x1=$g+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",h1={};mr(x1+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return h1[s]=1});var $t=function(s){I2(t,s);function t(a,n,i,l){var o;typeof n=="number"&&(i.duration=n,n=i,i=null),o=s.call(this,l?n:$c(n))||this;var c=o.vars,d=c.duration,x=c.delay,p=c.immediateRender,f=c.stagger,y=c.overwrite,b=c.keyframes,v=c.defaults,S=c.scrollTrigger,_=c.yoyoEase,w=n.parent||ht,N=(Is(a)||P2(a)?bn(a[0]):"length"in n)?[a]:Kr(a),u,h,g,j,T,C,E,R;if(o._targets=N.length?Vg(N):jd("GSAP target "+a+" not found. https://gsap.com",!Pr.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=y,b||f||gm(d)||gm(x)){if(n=o.vars,u=o.timeline=new Ws({data:"nested",defaults:v||{},targets:w&&w.data==="nested"?w.vars.targets:N}),u.kill(),u.parent=u._dp=Ja(o),u._start=0,f||gm(d)||gm(x)){if(j=N.length,E=f&&K2(f),Wa(f))for(T in f)~x1.indexOf(T)&&(R||(R={}),R[T]=f[T]);for(h=0;h<j;h++)g=Ru(n,h1),g.stagger=0,_&&(g.yoyoEase=_),R&&Ro(g,R),C=N[h],g.duration=+Uc(d,Ja(o),h,C,N),g.delay=(+Uc(x,Ja(o),h,C,N)||0)-o._delay,!f&&j===1&&g.delay&&(o._delay=x=g.delay,o._start+=x,g.delay=0),u.to(C,g,E?E(h,C,N):0),u._ease=De.none;u.duration()?d=x=0:o.timeline=0}else if(b){$c(Fr(u.vars.defaults,{ease:"none"})),u._ease=il(b.ease||n.ease||"none");var k=0,O,P,$;if(Is(b))b.forEach(function(I){return u.to(N,I,">")}),u.duration();else{g={};for(T in b)T==="ease"||T==="easeEach"||X_(T,b[T],g,b.easeEach);for(T in g)for(O=g[T].sort(function(I,L){return I.t-L.t}),k=0,h=0;h<O.length;h++)P=O[h],$={ease:P.e,duration:(P.t-(h?O[h-1].t:0))/100*d},$[T]=P.v,u.to(N,$,k),k+=$.duration;u.duration()<d&&u.to({},{duration:d-u.duration()})}}d||o.duration(d=u.duration())}else o.timeline=0;return y===!0&&!Rg&&(qn=Ja(o),ht.killTweensOf(N),qn=0),Ma(w,Ja(o),i),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(p||!d&&!b&&o._start===Vt(w._time)&&dr(p)&&E_(Ja(o))&&w.data!=="nested")&&(o._tTime=-Xe,o.render(Math.max(0,-x)||0)),S&&Y2(Ja(o),S),o}var r=t.prototype;return r.render=function(n,i,l){var o=this._time,c=this._tDur,d=this._dur,x=n<0,p=n>c-Xe&&!x?c:n<Xe?0:n,f,y,b,v,S,_,w,N,u;if(!d)D_(this,n,i,l);else if(p!==this._tTime||!n||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==x||this._lazy){if(f=p,N=this.timeline,this._repeat){if(v=d+this._rDelay,this._repeat<-1&&x)return this.totalTime(v*100+n,i,l);if(f=Vt(p%v),p===c?(b=this._repeat,f=d):(S=Vt(p/v),b=~~S,b&&b===S?(f=d,b--):f>d&&(f=d)),_=this._yoyo&&b&1,_&&(u=this._yEase,f=d-f),S=Po(this._tTime,v),f===o&&!l&&this._initted&&b===S)return this._tTime=p,this;b!==S&&(N&&this._yEase&&c1(N,_),this.vars.repeatRefresh&&!_&&!this._lock&&f!==v&&this._initted&&(this._lock=l=1,this.render(Vt(v*b),!0).invalidate()._lock=0))}if(!this._initted){if(Z2(this,x?n:f,l,i,p))return this._tTime=0,this;if(o!==this._time&&!(l&&this.vars.repeatRefresh&&b!==S))return this;if(d!==this._dur)return this.render(n,i,l)}if(this._tTime=p,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(u||this._ease)(f/d),this._from&&(this.ratio=w=1-w),!o&&p&&!i&&!S&&(Ar(this,"onStart"),this._tTime!==p))return this;for(y=this._pt;y;)y.r(w,y.d),y=y._next;N&&N.render(n<0?n:N._dur*N._ease(f/this._dur),i,l)||this._startAt&&(this._zTime=n),this._onUpdate&&!i&&(x&&Z0(this,n,i,l),Ar(this,"onUpdate")),this._repeat&&b!==S&&this.vars.onRepeat&&!i&&this.parent&&Ar(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(x&&!this._onUpdate&&Z0(this,n,!0,!0),(n||!d)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&fi(this,1),!i&&!(x&&!o)&&(p||o||_)&&(Ar(this,p===c?"onComplete":"onReverseComplete",!0),this._prom&&!(p<c&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),s.prototype.invalidate.call(this,n)},r.resetTo=function(n,i,l,o,c){_d||Cr.wake(),this._ts||this.play();var d=Math.min(this._dur,(this._dp._time-this._start)*this._ts),x;return this._initted||zg(this,d),x=this._ease(d/this._dur),Z_(this,n,i,l,o,x,d,c)?this.resetTo(n,i,l,o,1):(Nx(this,0),this.parent||H2(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(n,i){if(i===void 0&&(i="all"),!n&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Nc(this):this.scrollTrigger&&this.scrollTrigger.kill(!!hs),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(n,i,qn&&qn.vars.overwrite!==!0)._first||Nc(this),this.parent&&l!==this.timeline.totalDuration()&&Mo(this,this._dur*this.timeline._tDur/l,0,1),this}var o=this._targets,c=n?Kr(n):o,d=this._ptLookup,x=this._pt,p,f,y,b,v,S,_;if((!i||i==="all")&&k_(o,c))return i==="all"&&(this._pt=0),Nc(this);for(p=this._op=this._op||[],i!=="all"&&(as(i)&&(v={},mr(i,function(w){return v[w]=1}),i=v),i=Q_(o,i)),_=o.length;_--;)if(~c.indexOf(o[_])){f=d[_],i==="all"?(p[_]=i,b=f,y={}):(y=p[_]=p[_]||{},b=i);for(v in b)S=f&&f[v],S&&((!("kill"in S.d)||S.d.kill(v)===!0)&&vx(this,S,"_pt"),delete f[v]),y!=="all"&&(y[v]=1)}return this._initted&&!this._pt&&x&&Nc(this),this},t.to=function(n,i){return new t(n,i,arguments[2])},t.from=function(n,i){return Vc(1,arguments)},t.delayedCall=function(n,i,l,o){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:i,onReverseComplete:i,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:o})},t.fromTo=function(n,i,l){return Vc(2,arguments)},t.set=function(n,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(n,i)},t.killTweensOf=function(n,i,l){return ht.killTweensOf(n,i,l)},t}(Sd);Fr($t.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});mr("staggerTo,staggerFrom,staggerFromTo",function(s){$t[s]=function(){var t=new Ws,r=X0.call(arguments,0);return r.splice(s==="staggerFromTo"?5:4,0,0),t[s].apply(t,r)}});var Wg=function(t,r,a){return t[r]=a},p1=function(t,r,a){return t[r](a)},K_=function(t,r,a,n){return t[r](n.fp,a)},J_=function(t,r,a){return t.setAttribute(r,a)},Gg=function(t,r){return kt(t[r])?p1:Pg(t[r])&&t.setAttribute?J_:Wg},g1=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e6)/1e6,r)},eS=function(t,r){return r.set(r.t,r.p,!!(r.s+r.c*t),r)},f1=function(t,r){var a=r._pt,n="";if(!t&&r.b)n=r.b;else if(t===1&&r.e)n=r.e;else{for(;a;)n=a.p+(a.m?a.m(a.s+a.c*t):Math.round((a.s+a.c*t)*1e4)/1e4)+n,a=a._next;n+=r.c}r.set(r.t,r.p,n,r)},Hg=function(t,r){for(var a=r._pt;a;)a.r(t,a.d),a=a._next},tS=function(t,r,a,n){for(var i=this._pt,l;i;)l=i._next,i.p===n&&i.modifier(t,r,a),i=l},sS=function(t){for(var r=this._pt,a,n;r;)n=r._next,r.p===t&&!r.op||r.op===t?vx(this,r,"_pt"):r.dep||(a=1),r=n;return!a},rS=function(t,r,a,n){n.mSet(t,r,n.m.call(n.tween,a,n.mt),n)},y1=function(t){for(var r=t._pt,a,n,i,l;r;){for(a=r._next,n=i;n&&n.pr>r.pr;)n=n._next;(r._prev=n?n._prev:l)?r._prev._next=r:i=r,(r._next=n)?n._prev=r:l=r,r=a}t._pt=i},ur=function(){function s(r,a,n,i,l,o,c,d,x){this.t=a,this.s=i,this.c=l,this.p=n,this.r=o||g1,this.d=c||this,this.set=d||Wg,this.pr=x||0,this._next=r,r&&(r._prev=this)}var t=s.prototype;return t.modifier=function(a,n,i){this.mSet=this.mSet||this.set,this.set=rS,this.m=a,this.mt=i,this.tween=n},s}();mr($g+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return Fg[s]=1});Lr.TweenMax=Lr.TweenLite=$t;Lr.TimelineLite=Lr.TimelineMax=Ws;ht=new Ws({sortChildren:!1,defaults:Io,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Pr.stringFilter=l1;var ll=[],Zm={},aS=[],nb=0,nS=0,gh=function(t){return(Zm[t]||aS).map(function(r){return r()})},tp=function(){var t=Date.now(),r=[];t-nb>2&&(gh("matchMediaInit"),ll.forEach(function(a){var n=a.queries,i=a.conditions,l,o,c,d;for(o in n)l=Aa.matchMedia(n[o]).matches,l&&(c=1),l!==i[o]&&(i[o]=l,d=1);d&&(a.revert(),c&&r.push(a))}),gh("matchMediaRevert"),r.forEach(function(a){return a.onMatch(a,function(n){return a.add(null,n)})}),nb=t,gh("matchMedia"))},b1=function(){function s(r,a){this.selector=a&&K0(a),this.data=[],this._r=[],this.isReverted=!1,this.id=nS++,r&&this.add(r)}var t=s.prototype;return t.add=function(a,n,i){kt(a)&&(i=n,n=a,a=kt);var l=this,o=function(){var d=ct,x=l.selector,p;return d&&d!==l&&d.data.push(l),i&&(l.selector=K0(i)),ct=l,p=n.apply(l,arguments),kt(p)&&l._r.push(p),ct=d,l.selector=x,l.isReverted=!1,p};return l.last=o,a===kt?o(l,function(c){return l.add(null,c)}):a?l[a]=o:o},t.ignore=function(a){var n=ct;ct=null,a(this),ct=n},t.getTweens=function(){var a=[];return this.data.forEach(function(n){return n instanceof s?a.push.apply(a,n.getTweens()):n instanceof $t&&!(n.parent&&n.parent.data==="nested")&&a.push(n)}),a},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(a,n){var i=this;if(a?function(){for(var o=i.getTweens(),c=i.data.length,d;c--;)d=i.data[c],d.data==="isFlip"&&(d.revert(),d.getChildren(!0,!0,!1).forEach(function(x){return o.splice(o.indexOf(x),1)}));for(o.map(function(x){return{g:x._dur||x._delay||x._sat&&!x._sat.vars.immediateRender?x.globalTime(0):-1/0,t:x}}).sort(function(x,p){return p.g-x.g||-1/0}).forEach(function(x){return x.t.revert(a)}),c=i.data.length;c--;)d=i.data[c],d instanceof Ws?d.data!=="nested"&&(d.scrollTrigger&&d.scrollTrigger.revert(),d.kill()):!(d instanceof $t)&&d.revert&&d.revert(a);i._r.forEach(function(x){return x(a,i)}),i.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),n)for(var l=ll.length;l--;)ll[l].id===this.id&&ll.splice(l,1)},t.revert=function(a){this.kill(a||{})},s}(),iS=function(){function s(r){this.contexts=[],this.scope=r,ct&&ct.data.push(this)}var t=s.prototype;return t.add=function(a,n,i){Wa(a)||(a={matches:a});var l=new b1(0,i||this.scope),o=l.conditions={},c,d,x;ct&&!l.selector&&(l.selector=ct.selector),this.contexts.push(l),n=l.add("onMatch",n),l.queries=a;for(d in a)d==="all"?x=1:(c=Aa.matchMedia(a[d]),c&&(ll.indexOf(l)<0&&ll.push(l),(o[d]=c.matches)&&(x=1),c.addListener?c.addListener(tp):c.addEventListener("change",tp)));return x&&n(l,function(p){return l.add(null,p)}),this},t.revert=function(a){this.kill(a||{})},t.kill=function(a){this.contexts.forEach(function(n){return n.kill(a,!0)})},s}(),Mu={registerPlugin:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];r.forEach(function(n){return a1(n)})},timeline:function(t){return new Ws(t)},getTweensOf:function(t,r){return ht.getTweensOf(t,r)},getProperty:function(t,r,a,n){as(t)&&(t=Kr(t)[0]);var i=al(t||{}).get,l=a?G2:W2;return a==="native"&&(a=""),t&&(r?l((Nr[r]&&Nr[r].get||i)(t,r,a,n)):function(o,c,d){return l((Nr[o]&&Nr[o].get||i)(t,o,c,d))})},quickSetter:function(t,r,a){if(t=Kr(t),t.length>1){var n=t.map(function(x){return hr.quickSetter(x,r,a)}),i=n.length;return function(x){for(var p=i;p--;)n[p](x)}}t=t[0]||{};var l=Nr[r],o=al(t),c=o.harness&&(o.harness.aliases||{})[r]||r,d=l?function(x){var p=new l;eo._pt=0,p.init(t,a?x+a:x,eo,0,[t]),p.render(1,p),eo._pt&&Hg(1,eo)}:o.set(t,c);return l?d:function(x){return d(t,c,a?x+a:x,o,1)}},quickTo:function(t,r,a){var n,i=hr.to(t,Fr((n={},n[r]="+=0.1",n.paused=!0,n.stagger=0,n),a||{})),l=function(c,d,x){return i.resetTo(r,c,d,x)};return l.tween=i,l},isTweening:function(t){return ht.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=il(t.ease,Io.ease)),eb(Io,t||{})},config:function(t){return eb(Pr,t||{})},registerEffect:function(t){var r=t.name,a=t.effect,n=t.plugins,i=t.defaults,l=t.extendTimeline;(n||"").split(",").forEach(function(o){return o&&!Nr[o]&&!Lr[o]&&jd(r+" effect requires "+o+" plugin.")}),uh[r]=function(o,c,d){return a(Kr(o),Fr(c||{},i),d)},l&&(Ws.prototype[r]=function(o,c,d){return this.add(uh[r](o,Wa(c)?c:(d=c)&&{},this),d)})},registerEase:function(t,r){De[t]=il(r)},parseEase:function(t,r){return arguments.length?il(t,r):De},getById:function(t){return ht.getById(t)},exportRoot:function(t,r){t===void 0&&(t={});var a=new Ws(t),n,i;for(a.smoothChildTiming=dr(t.smoothChildTiming),ht.remove(a),a._dp=0,a._time=a._tTime=ht._time,n=ht._first;n;)i=n._next,(r||!(!n._dur&&n instanceof $t&&n.vars.onComplete===n._targets[0]))&&Ma(a,n,n._start-n._delay),n=i;return Ma(ht,a,0),a},context:function(t,r){return t?new b1(t,r):ct},matchMedia:function(t){return new iS(t)},matchMediaRefresh:function(){return ll.forEach(function(t){var r=t.conditions,a,n;for(n in r)r[n]&&(r[n]=!1,a=1);a&&t.revert()})||tp()},addEventListener:function(t,r){var a=Zm[t]||(Zm[t]=[]);~a.indexOf(r)||a.push(r)},removeEventListener:function(t,r){var a=Zm[t],n=a&&a.indexOf(r);n>=0&&a.splice(n,1)},utils:{wrap:F_,wrapYoyo:$_,distribute:K2,random:e1,snap:J2,normalize:L_,getUnit:Es,clamp:R_,splitColor:n1,toArray:Kr,selector:K0,mapRange:s1,pipe:M_,unitize:O_,interpolate:V_,shuffle:X2},install:$2,effects:uh,ticker:Cr,updateRoot:Ws.updateRoot,plugins:Nr,globalTimeline:ht,core:{PropTween:ur,globals:V2,Tween:$t,Timeline:Ws,Animation:Sd,getCache:al,_removeLinkedListItem:vx,reverting:function(){return hs},context:function(t){return t&&ct&&(ct.data.push(t),t._ctx=ct),ct},suppressOverwrites:function(t){return Rg=t}}};mr("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return Mu[s]=$t[s]});Cr.add(Ws.updateRoot);eo=Mu.to({},{duration:0});var lS=function(t,r){for(var a=t._pt;a&&a.p!==r&&a.op!==r&&a.fp!==r;)a=a._next;return a},oS=function(t,r){var a=t._targets,n,i,l;for(n in r)for(i=a.length;i--;)l=t._ptLookup[i][n],l&&(l=l.d)&&(l._pt&&(l=lS(l,n)),l&&l.modifier&&l.modifier(r[n],t,a[i],n))},fh=function(t,r){return{name:t,headless:1,rawVars:1,init:function(n,i,l){l._onInit=function(o){var c,d;if(as(i)&&(c={},mr(i,function(x){return c[x]=1}),i=c),r){c={};for(d in i)c[d]=r(i[d]);i=c}oS(o,i)}}}},hr=Mu.registerPlugin({name:"attr",init:function(t,r,a,n,i){var l,o,c;this.tween=a;for(l in r)c=t.getAttribute(l)||"",o=this.add(t,"setAttribute",(c||0)+"",r[l],n,i,0,0,l),o.op=l,o.b=c,this._props.push(l)},render:function(t,r){for(var a=r._pt;a;)hs?a.set(a.t,a.p,a.b,a):a.r(t,a.d),a=a._next}},{name:"endArray",headless:1,init:function(t,r){for(var a=r.length;a--;)this.add(t,a,t[a]||0,r[a],0,0,0,0,0,1)}},fh("roundProps",J0),fh("modifiers"),fh("snap",J2))||Mu;$t.version=Ws.version=hr.version="3.13.0";F2=1;Mg()&&Oo();De.Power0;De.Power1;De.Power2;De.Power3;De.Power4;De.Linear;De.Quad;De.Cubic;De.Quart;De.Quint;De.Strong;De.Elastic;De.Back;De.SteppedEase;De.Bounce;De.Sine;De.Expo;De.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ib,Yn,go,qg,Ji,lb,Yg,cS=function(){return typeof window<"u"},vn={},Wi=180/Math.PI,fo=Math.PI/180,Pl=Math.atan2,ob=1e8,Zg=/([A-Z])/g,dS=/(left|right|width|margin|padding|x)/i,mS=/[\s,\(]\S/,Oa={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},sp=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},uS=function(t,r){return r.set(r.t,r.p,t===1?r.e:Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},xS=function(t,r){return r.set(r.t,r.p,t?Math.round((r.s+r.c*t)*1e4)/1e4+r.u:r.b,r)},hS=function(t,r){var a=r.s+r.c*t;r.set(r.t,r.p,~~(a+(a<0?-.5:.5))+r.u,r)},v1=function(t,r){return r.set(r.t,r.p,t?r.e:r.b,r)},j1=function(t,r){return r.set(r.t,r.p,t!==1?r.b:r.e,r)},pS=function(t,r,a){return t.style[r]=a},gS=function(t,r,a){return t.style.setProperty(r,a)},fS=function(t,r,a){return t._gsap[r]=a},yS=function(t,r,a){return t._gsap.scaleX=t._gsap.scaleY=a},bS=function(t,r,a,n,i){var l=t._gsap;l.scaleX=l.scaleY=a,l.renderTransform(i,l)},vS=function(t,r,a,n,i){var l=t._gsap;l[r]=a,l.renderTransform(i,l)},pt="transform",xr=pt+"Origin",jS=function s(t,r){var a=this,n=this.target,i=n.style,l=n._gsap;if(t in vn&&i){if(this.tfm=this.tfm||{},t!=="transform")t=Oa[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return a.tfm[o]=tn(n,o)}):this.tfm[t]=l.x?l[t]:tn(n,t),t===xr&&(this.tfm.zOrigin=l.zOrigin);else return Oa.transform.split(",").forEach(function(o){return s.call(a,o,r)});if(this.props.indexOf(pt)>=0)return;l.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(xr,r,"")),t=pt}(i||r)&&this.props.push(t,r,i[t])},N1=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},NS=function(){var t=this.props,r=this.target,a=r.style,n=r._gsap,i,l;for(i=0;i<t.length;i+=3)t[i+1]?t[i+1]===2?r[t[i]](t[i+2]):r[t[i]]=t[i+2]:t[i+2]?a[t[i]]=t[i+2]:a.removeProperty(t[i].substr(0,2)==="--"?t[i]:t[i].replace(Zg,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)n[l]=this.tfm[l];n.svg&&(n.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),i=Yg(),(!i||!i.isStart)&&!a[pt]&&(N1(a),n.zOrigin&&a[xr]&&(a[xr]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},w1=function(t,r){var a={target:t,props:[],revert:NS,save:jS};return t._gsap||hr.core.getCache(t),r&&t.style&&t.nodeType&&r.split(",").forEach(function(n){return a.save(n)}),a},_1,rp=function(t,r){var a=Yn.createElementNS?Yn.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Yn.createElement(t);return a&&a.style?a:Yn.createElement(t)},Jr=function s(t,r,a){var n=getComputedStyle(t);return n[r]||n.getPropertyValue(r.replace(Zg,"-$1").toLowerCase())||n.getPropertyValue(r)||!a&&s(t,Lo(r)||r,1)||""},cb="O,Moz,ms,Ms,Webkit".split(","),Lo=function(t,r,a){var n=r||Ji,i=n.style,l=5;if(t in i&&!a)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);l--&&!(cb[l]+t in i););return l<0?null:(l===3?"ms":l>=0?cb[l]:"")+t},ap=function(){cS()&&window.document&&(ib=window,Yn=ib.document,go=Yn.documentElement,Ji=rp("div")||{style:{}},rp("div"),pt=Lo(pt),xr=pt+"Origin",Ji.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_1=!!Lo("perspective"),Yg=hr.core.reverting,qg=1)},db=function(t){var r=t.ownerSVGElement,a=rp("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0),i;n.style.display="block",a.appendChild(n),go.appendChild(a);try{i=n.getBBox()}catch{}return a.removeChild(n),go.removeChild(a),i},mb=function(t,r){for(var a=r.length;a--;)if(t.hasAttribute(r[a]))return t.getAttribute(r[a])},S1=function(t){var r,a;try{r=t.getBBox()}catch{r=db(t),a=1}return r&&(r.width||r.height)||a||(r=db(t)),r&&!r.width&&!r.x&&!r.y?{x:+mb(t,["x","cx","x1"])||0,y:+mb(t,["y","cy","y1"])||0,width:0,height:0}:r},k1=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&S1(t))},vl=function(t,r){if(r){var a=t.style,n;r in vn&&r!==xr&&(r=pt),a.removeProperty?(n=r.substr(0,2),(n==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),a.removeProperty(n==="--"?r:r.replace(Zg,"-$1").toLowerCase())):a.removeAttribute(r)}},Zn=function(t,r,a,n,i,l){var o=new ur(t._pt,r,a,0,1,l?j1:v1);return t._pt=o,o.b=n,o.e=i,t._props.push(a),o},ub={deg:1,rad:1,turn:1},wS={grid:1,flex:1},yi=function s(t,r,a,n){var i=parseFloat(a)||0,l=(a+"").trim().substr((i+"").length)||"px",o=Ji.style,c=dS.test(r),d=t.tagName.toLowerCase()==="svg",x=(d?"client":"offset")+(c?"Width":"Height"),p=100,f=n==="px",y=n==="%",b,v,S,_;if(n===l||!i||ub[n]||ub[l])return i;if(l!=="px"&&!f&&(i=s(t,r,a,"px")),_=t.getCTM&&k1(t),(y||l==="%")&&(vn[r]||~r.indexOf("adius")))return b=_?t.getBBox()[c?"width":"height"]:t[x],Dt(y?i/b*p:i/100*b);if(o[c?"width":"height"]=p+(f?l:n),v=n!=="rem"&&~r.indexOf("adius")||n==="em"&&t.appendChild&&!d?t:t.parentNode,_&&(v=(t.ownerSVGElement||{}).parentNode),(!v||v===Yn||!v.appendChild)&&(v=Yn.body),S=v._gsap,S&&y&&S.width&&c&&S.time===Cr.time&&!S.uncache)return Dt(i/S.width*p);if(y&&(r==="height"||r==="width")){var w=t.style[r];t.style[r]=p+n,b=t[x],w?t.style[r]=w:vl(t,r)}else(y||l==="%")&&!wS[Jr(v,"display")]&&(o.position=Jr(t,"position")),v===t&&(o.position="static"),v.appendChild(Ji),b=Ji[x],v.removeChild(Ji),o.position="absolute";return c&&y&&(S=al(v),S.time=Cr.time,S.width=v[x]),Dt(f?b*i/p:b&&i?p/b*i:0)},tn=function(t,r,a,n){var i;return qg||ap(),r in Oa&&r!=="transform"&&(r=Oa[r],~r.indexOf(",")&&(r=r.split(",")[0])),vn[r]&&r!=="transform"?(i=Cd(t,n),i=r!=="transformOrigin"?i[r]:i.svg?i.origin:Lu(Jr(t,xr))+" "+i.zOrigin+"px"):(i=t.style[r],(!i||i==="auto"||n||~(i+"").indexOf("calc("))&&(i=Ou[r]&&Ou[r](t,r,a)||Jr(t,r)||B2(t,r)||(r==="opacity"?1:0))),a&&!~(i+"").trim().indexOf(" ")?yi(t,r,i,a)+a:i},_S=function(t,r,a,n){if(!a||a==="none"){var i=Lo(r,t,1),l=i&&Jr(t,i,1);l&&l!==a?(r=i,a=l):r==="borderColor"&&(a=Jr(t,"borderTopColor"))}var o=new ur(this._pt,t.style,r,0,1,f1),c=0,d=0,x,p,f,y,b,v,S,_,w,N,u,h;if(o.b=a,o.e=n,a+="",n+="",n.substring(0,6)==="var(--"&&(n=Jr(t,n.substring(4,n.indexOf(")")))),n==="auto"&&(v=t.style[r],t.style[r]=n,n=Jr(t,r)||n,v?t.style[r]=v:vl(t,r)),x=[a,n],l1(x),a=x[0],n=x[1],f=a.match(Jl)||[],h=n.match(Jl)||[],h.length){for(;p=Jl.exec(n);)S=p[0],w=n.substring(c,p.index),b?b=(b+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(b=1),S!==(v=f[d++]||"")&&(y=parseFloat(v)||0,u=v.substr((y+"").length),S.charAt(1)==="="&&(S=po(y,S)+u),_=parseFloat(S),N=S.substr((_+"").length),c=Jl.lastIndex-N.length,N||(N=N||Pr.units[r]||u,c===n.length&&(n+=N,o.e+=N)),u!==N&&(y=yi(t,r,v,N)||0),o._pt={_next:o._pt,p:w||d===1?w:",",s:y,c:_-y,m:b&&b<4||r==="zIndex"?Math.round:0});o.c=c<n.length?n.substring(c,n.length):""}else o.r=r==="display"&&n==="none"?j1:v1;return O2.test(n)&&(o.e=0),this._pt=o,o},xb={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},SS=function(t){var r=t.split(" "),a=r[0],n=r[1]||"50%";return(a==="top"||a==="bottom"||n==="left"||n==="right")&&(t=a,a=n,n=t),r[0]=xb[a]||a,r[1]=xb[n]||n,r.join(" ")},kS=function(t,r){if(r.tween&&r.tween._time===r.tween._dur){var a=r.t,n=a.style,i=r.u,l=a._gsap,o,c,d;if(i==="all"||i===!0)n.cssText="",c=1;else for(i=i.split(","),d=i.length;--d>-1;)o=i[d],vn[o]&&(c=1,o=o==="transformOrigin"?xr:pt),vl(a,o);c&&(vl(a,pt),l&&(l.svg&&a.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",Cd(a,1),l.uncache=1,N1(n)))}},Ou={clearProps:function(t,r,a,n,i){if(i.data!=="isFromStart"){var l=t._pt=new ur(t._pt,r,a,0,0,kS);return l.u=n,l.pr=-10,l.tween=i,t._props.push(a),1}}},kd=[1,0,0,1,0,0],C1={},E1=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},hb=function(t){var r=Jr(t,pt);return E1(r)?kd:r.substr(7).match(M2).map(Dt)},Qg=function(t,r){var a=t._gsap||al(t),n=t.style,i=hb(t),l,o,c,d;return a.svg&&t.getAttribute("transform")?(c=t.transform.baseVal.consolidate().matrix,i=[c.a,c.b,c.c,c.d,c.e,c.f],i.join(",")==="1,0,0,1,0,0"?kd:i):(i===kd&&!t.offsetParent&&t!==go&&!a.svg&&(c=n.display,n.display="block",l=t.parentNode,(!l||!t.offsetParent&&!t.getBoundingClientRect().width)&&(d=1,o=t.nextElementSibling,go.appendChild(t)),i=hb(t),c?n.display=c:vl(t,"display"),d&&(o?l.insertBefore(t,o):l?l.appendChild(t):go.removeChild(t))),r&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},np=function(t,r,a,n,i,l){var o=t._gsap,c=i||Qg(t,!0),d=o.xOrigin||0,x=o.yOrigin||0,p=o.xOffset||0,f=o.yOffset||0,y=c[0],b=c[1],v=c[2],S=c[3],_=c[4],w=c[5],N=r.split(" "),u=parseFloat(N[0])||0,h=parseFloat(N[1])||0,g,j,T,C;a?c!==kd&&(j=y*S-b*v)&&(T=u*(S/j)+h*(-v/j)+(v*w-S*_)/j,C=u*(-b/j)+h*(y/j)-(y*w-b*_)/j,u=T,h=C):(g=S1(t),u=g.x+(~N[0].indexOf("%")?u/100*g.width:u),h=g.y+(~(N[1]||N[0]).indexOf("%")?h/100*g.height:h)),n||n!==!1&&o.smooth?(_=u-d,w=h-x,o.xOffset=p+(_*y+w*v)-_,o.yOffset=f+(_*b+w*S)-w):o.xOffset=o.yOffset=0,o.xOrigin=u,o.yOrigin=h,o.smooth=!!n,o.origin=r,o.originIsAbsolute=!!a,t.style[xr]="0px 0px",l&&(Zn(l,o,"xOrigin",d,u),Zn(l,o,"yOrigin",x,h),Zn(l,o,"xOffset",p,o.xOffset),Zn(l,o,"yOffset",f,o.yOffset)),t.setAttribute("data-svg-origin",u+" "+h)},Cd=function(t,r){var a=t._gsap||new m1(t);if("x"in a&&!r&&!a.uncache)return a;var n=t.style,i=a.scaleX<0,l="px",o="deg",c=getComputedStyle(t),d=Jr(t,xr)||"0",x,p,f,y,b,v,S,_,w,N,u,h,g,j,T,C,E,R,k,O,P,$,I,L,D,M,A,V,B,z,F,W;return x=p=f=v=S=_=w=N=u=0,y=b=1,a.svg=!!(t.getCTM&&k1(t)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(n[pt]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[pt]!=="none"?c[pt]:"")),n.scale=n.rotate=n.translate="none"),j=Qg(t,a.svg),a.svg&&(a.uncache?(D=t.getBBox(),d=a.xOrigin-D.x+"px "+(a.yOrigin-D.y)+"px",L=""):L=!r&&t.getAttribute("data-svg-origin"),np(t,L||d,!!L||a.originIsAbsolute,a.smooth!==!1,j)),h=a.xOrigin||0,g=a.yOrigin||0,j!==kd&&(R=j[0],k=j[1],O=j[2],P=j[3],x=$=j[4],p=I=j[5],j.length===6?(y=Math.sqrt(R*R+k*k),b=Math.sqrt(P*P+O*O),v=R||k?Pl(k,R)*Wi:0,w=O||P?Pl(O,P)*Wi+v:0,w&&(b*=Math.abs(Math.cos(w*fo))),a.svg&&(x-=h-(h*R+g*O),p-=g-(h*k+g*P))):(W=j[6],z=j[7],A=j[8],V=j[9],B=j[10],F=j[11],x=j[12],p=j[13],f=j[14],T=Pl(W,B),S=T*Wi,T&&(C=Math.cos(-T),E=Math.sin(-T),L=$*C+A*E,D=I*C+V*E,M=W*C+B*E,A=$*-E+A*C,V=I*-E+V*C,B=W*-E+B*C,F=z*-E+F*C,$=L,I=D,W=M),T=Pl(-O,B),_=T*Wi,T&&(C=Math.cos(-T),E=Math.sin(-T),L=R*C-A*E,D=k*C-V*E,M=O*C-B*E,F=P*E+F*C,R=L,k=D,O=M),T=Pl(k,R),v=T*Wi,T&&(C=Math.cos(T),E=Math.sin(T),L=R*C+k*E,D=$*C+I*E,k=k*C-R*E,I=I*C-$*E,R=L,$=D),S&&Math.abs(S)+Math.abs(v)>359.9&&(S=v=0,_=180-_),y=Dt(Math.sqrt(R*R+k*k+O*O)),b=Dt(Math.sqrt(I*I+W*W)),T=Pl($,I),w=Math.abs(T)>2e-4?T*Wi:0,u=F?1/(F<0?-F:F):0),a.svg&&(L=t.getAttribute("transform"),a.forceCSS=t.setAttribute("transform","")||!E1(Jr(t,pt)),L&&t.setAttribute("transform",L))),Math.abs(w)>90&&Math.abs(w)<270&&(i?(y*=-1,w+=v<=0?180:-180,v+=v<=0?180:-180):(b*=-1,w+=w<=0?180:-180)),r=r||a.uncache,a.x=x-((a.xPercent=x&&(!r&&a.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-x)?-50:0)))?t.offsetWidth*a.xPercent/100:0)+l,a.y=p-((a.yPercent=p&&(!r&&a.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-p)?-50:0)))?t.offsetHeight*a.yPercent/100:0)+l,a.z=f+l,a.scaleX=Dt(y),a.scaleY=Dt(b),a.rotation=Dt(v)+o,a.rotationX=Dt(S)+o,a.rotationY=Dt(_)+o,a.skewX=w+o,a.skewY=N+o,a.transformPerspective=u+l,(a.zOrigin=parseFloat(d.split(" ")[2])||!r&&a.zOrigin||0)&&(n[xr]=Lu(d)),a.xOffset=a.yOffset=0,a.force3D=Pr.force3D,a.renderTransform=a.svg?ES:_1?T1:CS,a.uncache=0,a},Lu=function(t){return(t=t.split(" "))[0]+" "+t[1]},yh=function(t,r,a){var n=Es(r);return Dt(parseFloat(r)+parseFloat(yi(t,"x",a+"px",n)))+n},CS=function(t,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,T1(t,r)},$i="0deg",xc="0px",Vi=") ",T1=function(t,r){var a=r||this,n=a.xPercent,i=a.yPercent,l=a.x,o=a.y,c=a.z,d=a.rotation,x=a.rotationY,p=a.rotationX,f=a.skewX,y=a.skewY,b=a.scaleX,v=a.scaleY,S=a.transformPerspective,_=a.force3D,w=a.target,N=a.zOrigin,u="",h=_==="auto"&&t&&t!==1||_===!0;if(N&&(p!==$i||x!==$i)){var g=parseFloat(x)*fo,j=Math.sin(g),T=Math.cos(g),C;g=parseFloat(p)*fo,C=Math.cos(g),l=yh(w,l,j*C*-N),o=yh(w,o,-Math.sin(g)*-N),c=yh(w,c,T*C*-N+N)}S!==xc&&(u+="perspective("+S+Vi),(n||i)&&(u+="translate("+n+"%, "+i+"%) "),(h||l!==xc||o!==xc||c!==xc)&&(u+=c!==xc||h?"translate3d("+l+", "+o+", "+c+") ":"translate("+l+", "+o+Vi),d!==$i&&(u+="rotate("+d+Vi),x!==$i&&(u+="rotateY("+x+Vi),p!==$i&&(u+="rotateX("+p+Vi),(f!==$i||y!==$i)&&(u+="skew("+f+", "+y+Vi),(b!==1||v!==1)&&(u+="scale("+b+", "+v+Vi),w.style[pt]=u||"translate(0, 0)"},ES=function(t,r){var a=r||this,n=a.xPercent,i=a.yPercent,l=a.x,o=a.y,c=a.rotation,d=a.skewX,x=a.skewY,p=a.scaleX,f=a.scaleY,y=a.target,b=a.xOrigin,v=a.yOrigin,S=a.xOffset,_=a.yOffset,w=a.forceCSS,N=parseFloat(l),u=parseFloat(o),h,g,j,T,C;c=parseFloat(c),d=parseFloat(d),x=parseFloat(x),x&&(x=parseFloat(x),d+=x,c+=x),c||d?(c*=fo,d*=fo,h=Math.cos(c)*p,g=Math.sin(c)*p,j=Math.sin(c-d)*-f,T=Math.cos(c-d)*f,d&&(x*=fo,C=Math.tan(d-x),C=Math.sqrt(1+C*C),j*=C,T*=C,x&&(C=Math.tan(x),C=Math.sqrt(1+C*C),h*=C,g*=C)),h=Dt(h),g=Dt(g),j=Dt(j),T=Dt(T)):(h=p,T=f,g=j=0),(N&&!~(l+"").indexOf("px")||u&&!~(o+"").indexOf("px"))&&(N=yi(y,"x",l,"px"),u=yi(y,"y",o,"px")),(b||v||S||_)&&(N=Dt(N+b-(b*h+v*j)+S),u=Dt(u+v-(b*g+v*T)+_)),(n||i)&&(C=y.getBBox(),N=Dt(N+n/100*C.width),u=Dt(u+i/100*C.height)),C="matrix("+h+","+g+","+j+","+T+","+N+","+u+")",y.setAttribute("transform",C),w&&(y.style[pt]=C)},TS=function(t,r,a,n,i){var l=360,o=as(i),c=parseFloat(i)*(o&&~i.indexOf("rad")?Wi:1),d=c-n,x=n+d+"deg",p,f;return o&&(p=i.split("_")[1],p==="short"&&(d%=l,d!==d%(l/2)&&(d+=d<0?l:-l)),p==="cw"&&d<0?d=(d+l*ob)%l-~~(d/l)*l:p==="ccw"&&d>0&&(d=(d-l*ob)%l-~~(d/l)*l)),t._pt=f=new ur(t._pt,r,a,n,d,uS),f.e=x,f.u="deg",t._props.push(a),f},pb=function(t,r){for(var a in r)t[a]=r[a];return t},DS=function(t,r,a){var n=pb({},a._gsap),i="perspective,force3D,transformOrigin,svgOrigin",l=a.style,o,c,d,x,p,f,y,b;n.svg?(d=a.getAttribute("transform"),a.setAttribute("transform",""),l[pt]=r,o=Cd(a,1),vl(a,pt),a.setAttribute("transform",d)):(d=getComputedStyle(a)[pt],l[pt]=r,o=Cd(a,1),l[pt]=d);for(c in vn)d=n[c],x=o[c],d!==x&&i.indexOf(c)<0&&(y=Es(d),b=Es(x),p=y!==b?yi(a,c,d,b):parseFloat(d),f=parseFloat(x),t._pt=new ur(t._pt,o,c,p,f-p,sp),t._pt.u=b||0,t._props.push(c));pb(o,n)};mr("padding,margin,Width,Radius",function(s,t){var r="Top",a="Right",n="Bottom",i="Left",l=(t<3?[r,a,n,i]:[r+i,r+a,n+a,n+i]).map(function(o){return t<2?s+o:"border"+o+s});Ou[t>1?"border"+s:s]=function(o,c,d,x,p){var f,y;if(arguments.length<4)return f=l.map(function(b){return tn(o,b,d)}),y=f.join(" "),y.split(f[0]).length===5?f[0]:y;f=(x+"").split(" "),y={},l.forEach(function(b,v){return y[b]=f[v]=f[v]||f[(v-1)/2|0]}),o.init(c,y,p)}});var D1={name:"css",register:ap,targetTest:function(t){return t.style&&t.nodeType},init:function(t,r,a,n,i){var l=this._props,o=t.style,c=a.vars.startAt,d,x,p,f,y,b,v,S,_,w,N,u,h,g,j,T;qg||ap(),this.styles=this.styles||w1(t),T=this.styles.props,this.tween=a;for(v in r)if(v!=="autoRound"&&(x=r[v],!(Nr[v]&&u1(v,r,a,n,t,i)))){if(y=typeof x,b=Ou[v],y==="function"&&(x=x.call(a,n,t,i),y=typeof x),y==="string"&&~x.indexOf("random(")&&(x=wd(x)),b)b(this,t,v,x,a)&&(j=1);else if(v.substr(0,2)==="--")d=(getComputedStyle(t).getPropertyValue(v)+"").trim(),x+="",oi.lastIndex=0,oi.test(d)||(S=Es(d),_=Es(x)),_?S!==_&&(d=yi(t,v,d,_)+_):S&&(x+=S),this.add(o,"setProperty",d,x,n,i,0,0,v),l.push(v),T.push(v,0,o[v]);else if(y!=="undefined"){if(c&&v in c?(d=typeof c[v]=="function"?c[v].call(a,n,t,i):c[v],as(d)&&~d.indexOf("random(")&&(d=wd(d)),Es(d+"")||d==="auto"||(d+=Pr.units[v]||Es(tn(t,v))||""),(d+"").charAt(1)==="="&&(d=tn(t,v))):d=tn(t,v),f=parseFloat(d),w=y==="string"&&x.charAt(1)==="="&&x.substr(0,2),w&&(x=x.substr(2)),p=parseFloat(x),v in Oa&&(v==="autoAlpha"&&(f===1&&tn(t,"visibility")==="hidden"&&p&&(f=0),T.push("visibility",0,o.visibility),Zn(this,o,"visibility",f?"inherit":"hidden",p?"inherit":"hidden",!p)),v!=="scale"&&v!=="transform"&&(v=Oa[v],~v.indexOf(",")&&(v=v.split(",")[0]))),N=v in vn,N){if(this.styles.save(v),y==="string"&&x.substring(0,6)==="var(--"&&(x=Jr(t,x.substring(4,x.indexOf(")"))),p=parseFloat(x)),u||(h=t._gsap,h.renderTransform&&!r.parseTransform||Cd(t,r.parseTransform),g=r.smoothOrigin!==!1&&h.smooth,u=this._pt=new ur(this._pt,o,pt,0,1,h.renderTransform,h,0,-1),u.dep=1),v==="scale")this._pt=new ur(this._pt,h,"scaleY",h.scaleY,(w?po(h.scaleY,w+p):p)-h.scaleY||0,sp),this._pt.u=0,l.push("scaleY",v),v+="X";else if(v==="transformOrigin"){T.push(xr,0,o[xr]),x=SS(x),h.svg?np(t,x,0,g,0,this):(_=parseFloat(x.split(" ")[2])||0,_!==h.zOrigin&&Zn(this,h,"zOrigin",h.zOrigin,_),Zn(this,o,v,Lu(d),Lu(x)));continue}else if(v==="svgOrigin"){np(t,x,1,g,0,this);continue}else if(v in C1){TS(this,h,v,f,w?po(f,w+x):x);continue}else if(v==="smoothOrigin"){Zn(this,h,"smooth",h.smooth,x);continue}else if(v==="force3D"){h[v]=x;continue}else if(v==="transform"){DS(this,x,t);continue}}else v in o||(v=Lo(v)||v);if(N||(p||p===0)&&(f||f===0)&&!mS.test(x)&&v in o)S=(d+"").substr((f+"").length),p||(p=0),_=Es(x)||(v in Pr.units?Pr.units[v]:S),S!==_&&(f=yi(t,v,d,_)),this._pt=new ur(this._pt,N?h:o,v,f,(w?po(f,w+p):p)-f,!N&&(_==="px"||v==="zIndex")&&r.autoRound!==!1?hS:sp),this._pt.u=_||0,S!==_&&_!=="%"&&(this._pt.b=d,this._pt.r=xS);else if(v in o)_S.call(this,t,v,d,w?w+x:x);else if(v in t)this.add(t,v,d||t[v],w?w+x:x,n,i);else if(v!=="parseTransform"){Lg(v,x);continue}N||(v in o?T.push(v,0,o[v]):typeof t[v]=="function"?T.push(v,2,t[v]()):T.push(v,1,d||t[v])),l.push(v)}}j&&y1(this)},render:function(t,r){if(r.tween._time||!Yg())for(var a=r._pt;a;)a.r(t,a.d),a=a._next;else r.styles.revert()},get:tn,aliases:Oa,getSetter:function(t,r,a){var n=Oa[r];return n&&n.indexOf(",")<0&&(r=n),r in vn&&r!==xr&&(t._gsap.x||tn(t,"x"))?a&&lb===a?r==="scale"?yS:fS:(lb=a||{})&&(r==="scale"?bS:vS):t.style&&!Pg(t.style[r])?pS:~r.indexOf("-")?gS:Gg(t,r)},core:{_removeProperty:vl,_getMatrix:Qg}};hr.utils.checkPrefix=Lo;hr.core.getStyleSaver=w1;(function(s,t,r,a){var n=mr(s+","+t+","+r,function(i){vn[i]=1});mr(t,function(i){Pr.units[i]="deg",C1[i]=1}),Oa[n[13]]=s+","+t,mr(a,function(i){var l=i.split(":");Oa[l[1]]=n[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");mr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){Pr.units[s]="px"});hr.registerPlugin(D1);var it=hr.registerPlugin(D1)||hr;it.core.Tween;function gb(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function AS(s,t,r){return t&&gb(s.prototype,t),r&&gb(s,r),s}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var us,Qm,Er,Qn,Xn,yo,A1,Gi,Bc,I1,ln,xa,R1,P1=function(){return us||typeof window<"u"&&(us=window.gsap)&&us.registerPlugin&&us},M1=1,to=[],we=[],Ua=[],zc=Date.now,ip=function(t,r){return r},IS=function(){var t=Bc.core,r=t.bridge||{},a=t._scrollers,n=t._proxies;a.push.apply(a,we),n.push.apply(n,Ua),we=a,Ua=n,ip=function(l,o){return r[l](o)}},ci=function(t,r){return~Ua.indexOf(t)&&Ua[Ua.indexOf(t)+1][r]},Wc=function(t){return!!~I1.indexOf(t)},Ms=function(t,r,a,n,i){return t.addEventListener(r,a,{passive:n!==!1,capture:!!i})},Ps=function(t,r,a,n){return t.removeEventListener(r,a,!!n)},fm="scrollLeft",ym="scrollTop",lp=function(){return ln&&ln.isPressed||we.cache++},Fu=function(t,r){var a=function n(i){if(i||i===0){M1&&(Er.history.scrollRestoration="manual");var l=ln&&ln.isPressed;i=n.v=Math.round(i)||(ln&&ln.iOS?1:0),t(i),n.cacheID=we.cache,l&&ip("ss",i)}else(r||we.cache!==n.cacheID||ip("ref"))&&(n.cacheID=we.cache,n.v=t());return n.v+n.offset};return a.offset=0,t&&a},Gs={s:fm,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Fu(function(s){return arguments.length?Er.scrollTo(s,qt.sc()):Er.pageXOffset||Qn[fm]||Xn[fm]||yo[fm]||0})},qt={s:ym,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Gs,sc:Fu(function(s){return arguments.length?Er.scrollTo(Gs.sc(),s):Er.pageYOffset||Qn[ym]||Xn[ym]||yo[ym]||0})},Js=function(t,r){return(r&&r._ctx&&r._ctx.selector||us.utils.toArray)(t)[0]||(typeof t=="string"&&us.config().nullTargetWarn!==!1?console.warn("Element not found:",t):null)},RS=function(t,r){for(var a=r.length;a--;)if(r[a]===t||r[a].contains(t))return!0;return!1},bi=function(t,r){var a=r.s,n=r.sc;Wc(t)&&(t=Qn.scrollingElement||Xn);var i=we.indexOf(t),l=n===qt.sc?1:2;!~i&&(i=we.push(t)-1),we[i+l]||Ms(t,"scroll",lp);var o=we[i+l],c=o||(we[i+l]=Fu(ci(t,a),!0)||(Wc(t)?n:Fu(function(d){return arguments.length?t[a]=d:t[a]})));return c.target=t,o||(c.smooth=us.getProperty(t,"scrollBehavior")==="smooth"),c},op=function(t,r,a){var n=t,i=t,l=zc(),o=l,c=r||50,d=Math.max(500,c*3),x=function(b,v){var S=zc();v||S-l>c?(i=n,n=b,o=l,l=S):a?n+=b:n=i+(b-i)/(S-o)*(l-o)},p=function(){i=n=a?0:n,o=l=0},f=function(b){var v=o,S=i,_=zc();return(b||b===0)&&b!==n&&x(b),l===o||_-o>d?0:(n+(a?S:-S))/((a?_:l)-v)*1e3};return{update:x,reset:p,getVelocity:f}},hc=function(t,r){return r&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},fb=function(t){var r=Math.max.apply(Math,t),a=Math.min.apply(Math,t);return Math.abs(r)>=Math.abs(a)?r:a},O1=function(){Bc=us.core.globals().ScrollTrigger,Bc&&Bc.core&&IS()},L1=function(t){return us=t||P1(),!Qm&&us&&typeof document<"u"&&document.body&&(Er=window,Qn=document,Xn=Qn.documentElement,yo=Qn.body,I1=[Er,Qn,Xn,yo],us.utils.clamp,R1=us.core.context||function(){},Gi="onpointerenter"in yo?"pointer":"mouse",A1=Rt.isTouch=Er.matchMedia&&Er.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Er||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,xa=Rt.eventTypes=("ontouchstart"in Xn?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Xn?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return M1=0},500),O1(),Qm=1),Qm};Gs.op=qt;we.cache=0;var Rt=function(){function s(r){this.init(r)}var t=s.prototype;return t.init=function(a){Qm||L1(us)||console.warn("Please gsap.registerPlugin(Observer)"),Bc||O1();var n=a.tolerance,i=a.dragMinimum,l=a.type,o=a.target,c=a.lineHeight,d=a.debounce,x=a.preventDefault,p=a.onStop,f=a.onStopDelay,y=a.ignore,b=a.wheelSpeed,v=a.event,S=a.onDragStart,_=a.onDragEnd,w=a.onDrag,N=a.onPress,u=a.onRelease,h=a.onRight,g=a.onLeft,j=a.onUp,T=a.onDown,C=a.onChangeX,E=a.onChangeY,R=a.onChange,k=a.onToggleX,O=a.onToggleY,P=a.onHover,$=a.onHoverEnd,I=a.onMove,L=a.ignoreCheck,D=a.isNormalizer,M=a.onGestureStart,A=a.onGestureEnd,V=a.onWheel,B=a.onEnable,z=a.onDisable,F=a.onClick,W=a.scrollSpeed,Y=a.capture,ne=a.allowClicks,ve=a.lockAxis,U=a.onLockAxis;this.target=o=Js(o)||Xn,this.vars=a,y&&(y=us.utils.toArray(y)),n=n||1e-9,i=i||0,b=b||1,W=W||1,l=l||"wheel,touch,pointer",d=d!==!1,c||(c=parseFloat(Er.getComputedStyle(yo).lineHeight)||22);var ie,ce,qe,ye,Ye,is,ys,G=this,gr=0,Ha=0,Cn=a.passive||!x&&a.passive!==!1,vt=bi(o,Gs),qa=bi(o,qt),En=vt(),Ri=qa(),Qt=~l.indexOf("touch")&&!~l.indexOf("pointer")&&xa[0]==="pointerdown",Tn=Wc(o),Ct=o.ownerDocument||Qn,ia=[0,0,0],Br=[0,0,0],Ya=0,tc=function(){return Ya=zc()},Mt=function(de,Pe){return(G.event=de)&&y&&RS(de.target,y)||Pe&&Qt&&de.pointerType!=="touch"||L&&L(de,Pe)},Qd=function(){G._vx.reset(),G._vy.reset(),ce.pause(),p&&p(G)},Za=function(){var de=G.deltaX=fb(ia),Pe=G.deltaY=fb(Br),J=Math.abs(de)>=n,he=Math.abs(Pe)>=n;R&&(J||he)&&R(G,de,Pe,ia,Br),J&&(h&&G.deltaX>0&&h(G),g&&G.deltaX<0&&g(G),C&&C(G),k&&G.deltaX<0!=gr<0&&k(G),gr=G.deltaX,ia[0]=ia[1]=ia[2]=0),he&&(T&&G.deltaY>0&&T(G),j&&G.deltaY<0&&j(G),E&&E(G),O&&G.deltaY<0!=Ha<0&&O(G),Ha=G.deltaY,Br[0]=Br[1]=Br[2]=0),(ye||qe)&&(I&&I(G),qe&&(S&&qe===1&&S(G),w&&w(G),qe=0),ye=!1),is&&!(is=!1)&&U&&U(G),Ye&&(V(G),Ye=!1),ie=0},Dl=function(de,Pe,J){ia[J]+=de,Br[J]+=Pe,G._vx.update(de),G._vy.update(Pe),d?ie||(ie=requestAnimationFrame(Za)):Za()},Al=function(de,Pe){ve&&!ys&&(G.axis=ys=Math.abs(de)>Math.abs(Pe)?"x":"y",is=!0),ys!=="y"&&(ia[2]+=de,G._vx.update(de,!0)),ys!=="x"&&(Br[2]+=Pe,G._vy.update(Pe,!0)),d?ie||(ie=requestAnimationFrame(Za)):Za()},Dn=function(de){if(!Mt(de,1)){de=hc(de,x);var Pe=de.clientX,J=de.clientY,he=Pe-G.x,le=J-G.y,pe=G.isDragging;G.x=Pe,G.y=J,(pe||(he||le)&&(Math.abs(G.startX-Pe)>=i||Math.abs(G.startY-J)>=i))&&(qe=pe?2:1,pe||(G.isDragging=!0),Al(he,le))}},Pi=G.onPress=function(fe){Mt(fe,1)||fe&&fe.button||(G.axis=ys=null,ce.pause(),G.isPressed=!0,fe=hc(fe),gr=Ha=0,G.startX=G.x=fe.clientX,G.startY=G.y=fe.clientY,G._vx.reset(),G._vy.reset(),Ms(D?o:Ct,xa[1],Dn,Cn,!0),G.deltaX=G.deltaY=0,N&&N(G))},Se=G.onRelease=function(fe){if(!Mt(fe,1)){Ps(D?o:Ct,xa[1],Dn,!0);var de=!isNaN(G.y-G.startY),Pe=G.isDragging,J=Pe&&(Math.abs(G.x-G.startX)>3||Math.abs(G.y-G.startY)>3),he=hc(fe);!J&&de&&(G._vx.reset(),G._vy.reset(),x&&ne&&us.delayedCall(.08,function(){if(zc()-Ya>300&&!fe.defaultPrevented){if(fe.target.click)fe.target.click();else if(Ct.createEvent){var le=Ct.createEvent("MouseEvents");le.initMouseEvent("click",!0,!0,Er,1,he.screenX,he.screenY,he.clientX,he.clientY,!1,!1,!1,!1,0,null),fe.target.dispatchEvent(le)}}})),G.isDragging=G.isGesturing=G.isPressed=!1,p&&Pe&&!D&&ce.restart(!0),qe&&Za(),_&&Pe&&_(G),u&&u(G,J)}},Mi=function(de){return de.touches&&de.touches.length>1&&(G.isGesturing=!0)&&M(de,G.isDragging)},la=function(){return(G.isGesturing=!1)||A(G)},oa=function(de){if(!Mt(de)){var Pe=vt(),J=qa();Dl((Pe-En)*W,(J-Ri)*W,1),En=Pe,Ri=J,p&&ce.restart(!0)}},ca=function(de){if(!Mt(de)){de=hc(de,x),V&&(Ye=!0);var Pe=(de.deltaMode===1?c:de.deltaMode===2?Er.innerHeight:1)*b;Dl(de.deltaX*Pe,de.deltaY*Pe,0),p&&!D&&ce.restart(!0)}},Oi=function(de){if(!Mt(de)){var Pe=de.clientX,J=de.clientY,he=Pe-G.x,le=J-G.y;G.x=Pe,G.y=J,ye=!0,p&&ce.restart(!0),(he||le)&&Al(he,le)}},Il=function(de){G.event=de,P(G)},Qa=function(de){G.event=de,$(G)},sc=function(de){return Mt(de)||hc(de,x)&&F(G)};ce=G._dc=us.delayedCall(f||.25,Qd).pause(),G.deltaX=G.deltaY=0,G._vx=op(0,50,!0),G._vy=op(0,50,!0),G.scrollX=vt,G.scrollY=qa,G.isDragging=G.isGesturing=G.isPressed=!1,R1(this),G.enable=function(fe){return G.isEnabled||(Ms(Tn?Ct:o,"scroll",lp),l.indexOf("scroll")>=0&&Ms(Tn?Ct:o,"scroll",oa,Cn,Y),l.indexOf("wheel")>=0&&Ms(o,"wheel",ca,Cn,Y),(l.indexOf("touch")>=0&&A1||l.indexOf("pointer")>=0)&&(Ms(o,xa[0],Pi,Cn,Y),Ms(Ct,xa[2],Se),Ms(Ct,xa[3],Se),ne&&Ms(o,"click",tc,!0,!0),F&&Ms(o,"click",sc),M&&Ms(Ct,"gesturestart",Mi),A&&Ms(Ct,"gestureend",la),P&&Ms(o,Gi+"enter",Il),$&&Ms(o,Gi+"leave",Qa),I&&Ms(o,Gi+"move",Oi)),G.isEnabled=!0,G.isDragging=G.isGesturing=G.isPressed=ye=qe=!1,G._vx.reset(),G._vy.reset(),En=vt(),Ri=qa(),fe&&fe.type&&Pi(fe),B&&B(G)),G},G.disable=function(){G.isEnabled&&(to.filter(function(fe){return fe!==G&&Wc(fe.target)}).length||Ps(Tn?Ct:o,"scroll",lp),G.isPressed&&(G._vx.reset(),G._vy.reset(),Ps(D?o:Ct,xa[1],Dn,!0)),Ps(Tn?Ct:o,"scroll",oa,Y),Ps(o,"wheel",ca,Y),Ps(o,xa[0],Pi,Y),Ps(Ct,xa[2],Se),Ps(Ct,xa[3],Se),Ps(o,"click",tc,!0),Ps(o,"click",sc),Ps(Ct,"gesturestart",Mi),Ps(Ct,"gestureend",la),Ps(o,Gi+"enter",Il),Ps(o,Gi+"leave",Qa),Ps(o,Gi+"move",Oi),G.isEnabled=G.isPressed=G.isDragging=!1,z&&z(G))},G.kill=G.revert=function(){G.disable();var fe=to.indexOf(G);fe>=0&&to.splice(fe,1),ln===G&&(ln=0)},to.push(G),D&&Wc(o)&&(ln=G),G.enable(v)},AS(s,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),s}();Rt.version="3.13.0";Rt.create=function(s){return new Rt(s)};Rt.register=L1;Rt.getAll=function(){return to.slice()};Rt.getById=function(s){return to.filter(function(t){return t.vars.id===s})[0]};P1()&&us.registerPlugin(Rt);/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var se,Fl,Ne,et,Sr,Fe,Xg,$u,Ed,Gc,_c,bm,_s,wx,cp,Vs,yb,bb,$l,F1,bh,$1,Ls,dp,V1,U1,Mn,mp,Kg,bo,Jg,Vu,up,vh,vm=1,ks=Date.now,jh=ks(),ta=0,Sc=0,vb=function(t,r,a){var n=jr(t)&&(t.substr(0,6)==="clamp("||t.indexOf("max")>-1);return a["_"+r+"Clamp"]=n,n?t.substr(6,t.length-7):t},jb=function(t,r){return r&&(!jr(t)||t.substr(0,6)!=="clamp(")?"clamp("+t+")":t},PS=function s(){return Sc&&requestAnimationFrame(s)},Nb=function(){return wx=1},wb=function(){return wx=0},Ia=function(t){return t},kc=function(t){return Math.round(t*1e5)/1e5||0},B1=function(){return typeof window<"u"},z1=function(){return se||B1()&&(se=window.gsap)&&se.registerPlugin&&se},jl=function(t){return!!~Xg.indexOf(t)},W1=function(t){return(t==="Height"?Jg:Ne["inner"+t])||Sr["client"+t]||Fe["client"+t]},G1=function(t){return ci(t,"getBoundingClientRect")||(jl(t)?function(){return tu.width=Ne.innerWidth,tu.height=Jg,tu}:function(){return rn(t)})},MS=function(t,r,a){var n=a.d,i=a.d2,l=a.a;return(l=ci(t,"getBoundingClientRect"))?function(){return l()[n]}:function(){return(r?W1(i):t["client"+i])||0}},OS=function(t,r){return!r||~Ua.indexOf(t)?G1(t):function(){return tu}},La=function(t,r){var a=r.s,n=r.d2,i=r.d,l=r.a;return Math.max(0,(a="scroll"+n)&&(l=ci(t,a))?l()-G1(t)()[i]:jl(t)?(Sr[a]||Fe[a])-W1(n):t[a]-t["offset"+n])},jm=function(t,r){for(var a=0;a<$l.length;a+=3)(!r||~r.indexOf($l[a+1]))&&t($l[a],$l[a+1],$l[a+2])},jr=function(t){return typeof t=="string"},Ts=function(t){return typeof t=="function"},Cc=function(t){return typeof t=="number"},Hi=function(t){return typeof t=="object"},pc=function(t,r,a){return t&&t.progress(r?0:1)&&a&&t.pause()},Nh=function(t,r){if(t.enabled){var a=t._ctx?t._ctx.add(function(){return r(t)}):r(t);a&&a.totalTime&&(t.callbackAnimation=a)}},Ml=Math.abs,H1="left",q1="top",ef="right",tf="bottom",ol="width",cl="height",Hc="Right",qc="Left",Yc="Top",Zc="Bottom",Lt="padding",Yr="margin",Fo="Width",sf="Height",Wt="px",Zr=function(t){return Ne.getComputedStyle(t)},LS=function(t){var r=Zr(t).position;t.style.position=r==="absolute"||r==="fixed"?r:"relative"},_b=function(t,r){for(var a in r)a in t||(t[a]=r[a]);return t},rn=function(t,r){var a=r&&Zr(t)[cp]!=="matrix(1, 0, 0, 1, 0, 0)"&&se.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=t.getBoundingClientRect();return a&&a.progress(0).kill(),n},Uu=function(t,r){var a=r.d2;return t["offset"+a]||t["client"+a]||0},Y1=function(t){var r=[],a=t.labels,n=t.duration(),i;for(i in a)r.push(a[i]/n);return r},FS=function(t){return function(r){return se.utils.snap(Y1(t),r)}},rf=function(t){var r=se.utils.snap(t),a=Array.isArray(t)&&t.slice(0).sort(function(n,i){return n-i});return a?function(n,i,l){l===void 0&&(l=.001);var o;if(!i)return r(n);if(i>0){for(n-=l,o=0;o<a.length;o++)if(a[o]>=n)return a[o];return a[o-1]}else for(o=a.length,n+=l;o--;)if(a[o]<=n)return a[o];return a[0]}:function(n,i,l){l===void 0&&(l=.001);var o=r(n);return!i||Math.abs(o-n)<l||o-n<0==i<0?o:r(i<0?n-t:n+t)}},$S=function(t){return function(r,a){return rf(Y1(t))(r,a.direction)}},Nm=function(t,r,a,n){return a.split(",").forEach(function(i){return t(r,i,n)})},es=function(t,r,a,n,i){return t.addEventListener(r,a,{passive:!n,capture:!!i})},Jt=function(t,r,a,n){return t.removeEventListener(r,a,!!n)},wm=function(t,r,a){a=a&&a.wheelHandler,a&&(t(r,"wheel",a),t(r,"touchmove",a))},Sb={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},_m={toggleActions:"play",anticipatePin:0},Bu={top:0,left:0,center:.5,bottom:1,right:1},Xm=function(t,r){if(jr(t)){var a=t.indexOf("="),n=~a?+(t.charAt(a-1)+1)*parseFloat(t.substr(a+1)):0;~a&&(t.indexOf("%")>a&&(n*=r/100),t=t.substr(0,a-1)),t=n+(t in Bu?Bu[t]*r:~t.indexOf("%")?parseFloat(t)*r/100:parseFloat(t)||0)}return t},Sm=function(t,r,a,n,i,l,o,c){var d=i.startColor,x=i.endColor,p=i.fontSize,f=i.indent,y=i.fontWeight,b=et.createElement("div"),v=jl(a)||ci(a,"pinType")==="fixed",S=t.indexOf("scroller")!==-1,_=v?Fe:a,w=t.indexOf("start")!==-1,N=w?d:x,u="border-color:"+N+";font-size:"+p+";color:"+N+";font-weight:"+y+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return u+="position:"+((S||c)&&v?"fixed;":"absolute;"),(S||c||!v)&&(u+=(n===qt?ef:tf)+":"+(l+parseFloat(f))+"px;"),o&&(u+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),b._isStart=w,b.setAttribute("class","gsap-marker-"+t+(r?" marker-"+r:"")),b.style.cssText=u,b.innerText=r||r===0?t+"-"+r:t,_.children[0]?_.insertBefore(b,_.children[0]):_.appendChild(b),b._offset=b["offset"+n.op.d2],Km(b,0,n,w),b},Km=function(t,r,a,n){var i={display:"block"},l=a[n?"os2":"p2"],o=a[n?"p2":"os2"];t._isFlipped=n,i[a.a+"Percent"]=n?-100:0,i[a.a]=n?"1px":0,i["border"+l+Fo]=1,i["border"+o+Fo]=0,i[a.p]=r+"px",se.set(t,i)},je=[],xp={},Td,kb=function(){return ks()-ta>34&&(Td||(Td=requestAnimationFrame(mn)))},Ol=function(){(!Ls||!Ls.isPressed||Ls.startX>Fe.clientWidth)&&(we.cache++,Ls?Td||(Td=requestAnimationFrame(mn)):mn(),ta||wl("scrollStart"),ta=ks())},wh=function(){U1=Ne.innerWidth,V1=Ne.innerHeight},Ec=function(t){we.cache++,(t===!0||!_s&&!$1&&!et.fullscreenElement&&!et.webkitFullscreenElement&&(!dp||U1!==Ne.innerWidth||Math.abs(Ne.innerHeight-V1)>Ne.innerHeight*.25))&&$u.restart(!0)},Nl={},VS=[],Z1=function s(){return Jt(ke,"scrollEnd",s)||el(!0)},wl=function(t){return Nl[t]&&Nl[t].map(function(r){return r()})||VS},br=[],Q1=function(t){for(var r=0;r<br.length;r+=5)(!t||br[r+4]&&br[r+4].query===t)&&(br[r].style.cssText=br[r+1],br[r].getBBox&&br[r].setAttribute("transform",br[r+2]||""),br[r+3].uncache=1)},af=function(t,r){var a;for(Vs=0;Vs<je.length;Vs++)a=je[Vs],a&&(!r||a._ctx===r)&&(t?a.kill(1):a.revert(!0,!0));Vu=!0,r&&Q1(r),r||wl("revert")},X1=function(t,r){we.cache++,(r||!Us)&&we.forEach(function(a){return Ts(a)&&a.cacheID++&&(a.rec=0)}),jr(t)&&(Ne.history.scrollRestoration=Kg=t)},Us,dl=0,Cb,US=function(){if(Cb!==dl){var t=Cb=dl;requestAnimationFrame(function(){return t===dl&&el(!0)})}},K1=function(){Fe.appendChild(bo),Jg=!Ls&&bo.offsetHeight||Ne.innerHeight,Fe.removeChild(bo)},Eb=function(t){return Ed(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(r){return r.style.display=t?"none":"block"})},el=function(t,r){if(Sr=et.documentElement,Fe=et.body,Xg=[Ne,et,Sr,Fe],ta&&!t&&!Vu){es(ke,"scrollEnd",Z1);return}K1(),Us=ke.isRefreshing=!0,we.forEach(function(n){return Ts(n)&&++n.cacheID&&(n.rec=n())});var a=wl("refreshInit");F1&&ke.sort(),r||af(),we.forEach(function(n){Ts(n)&&(n.smooth&&(n.target.style.scrollBehavior="auto"),n(0))}),je.slice(0).forEach(function(n){return n.refresh()}),Vu=!1,je.forEach(function(n){if(n._subPinOffset&&n.pin){var i=n.vars.horizontal?"offsetWidth":"offsetHeight",l=n.pin[i];n.revert(!0,1),n.adjustPinSpacing(n.pin[i]-l),n.refresh()}}),up=1,Eb(!0),je.forEach(function(n){var i=La(n.scroller,n._dir),l=n.vars.end==="max"||n._endClamp&&n.end>i,o=n._startClamp&&n.start>=i;(l||o)&&n.setPositions(o?i-1:n.start,l?Math.max(o?i:n.start+1,i):n.end,!0)}),Eb(!1),up=0,a.forEach(function(n){return n&&n.render&&n.render(-1)}),we.forEach(function(n){Ts(n)&&(n.smooth&&requestAnimationFrame(function(){return n.target.style.scrollBehavior="smooth"}),n.rec&&n(n.rec))}),X1(Kg,1),$u.pause(),dl++,Us=2,mn(2),je.forEach(function(n){return Ts(n.vars.onRefresh)&&n.vars.onRefresh(n)}),Us=ke.isRefreshing=!1,wl("refresh")},hp=0,Jm=1,Qc,mn=function(t){if(t===2||!Us&&!Vu){ke.isUpdating=!0,Qc&&Qc.update(0);var r=je.length,a=ks(),n=a-jh>=50,i=r&&je[0].scroll();if(Jm=hp>i?-1:1,Us||(hp=i),n&&(ta&&!wx&&a-ta>200&&(ta=0,wl("scrollEnd")),_c=jh,jh=a),Jm<0){for(Vs=r;Vs-- >0;)je[Vs]&&je[Vs].update(0,n);Jm=1}else for(Vs=0;Vs<r;Vs++)je[Vs]&&je[Vs].update(0,n);ke.isUpdating=!1}Td=0},pp=[H1,q1,tf,ef,Yr+Zc,Yr+Hc,Yr+Yc,Yr+qc,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],eu=pp.concat([ol,cl,"boxSizing","max"+Fo,"max"+sf,"position",Yr,Lt,Lt+Yc,Lt+Hc,Lt+Zc,Lt+qc]),BS=function(t,r,a){vo(a);var n=t._gsap;if(n.spacerIsNative)vo(n.spacerState);else if(t._gsap.swappedIn){var i=r.parentNode;i&&(i.insertBefore(t,r),i.removeChild(r))}t._gsap.swappedIn=!1},_h=function(t,r,a,n){if(!t._gsap.swappedIn){for(var i=pp.length,l=r.style,o=t.style,c;i--;)c=pp[i],l[c]=a[c];l.position=a.position==="absolute"?"absolute":"relative",a.display==="inline"&&(l.display="inline-block"),o[tf]=o[ef]="auto",l.flexBasis=a.flexBasis||"auto",l.overflow="visible",l.boxSizing="border-box",l[ol]=Uu(t,Gs)+Wt,l[cl]=Uu(t,qt)+Wt,l[Lt]=o[Yr]=o[q1]=o[H1]="0",vo(n),o[ol]=o["max"+Fo]=a[ol],o[cl]=o["max"+sf]=a[cl],o[Lt]=a[Lt],t.parentNode!==r&&(t.parentNode.insertBefore(r,t),r.appendChild(t)),t._gsap.swappedIn=!0}},zS=/([A-Z])/g,vo=function(t){if(t){var r=t.t.style,a=t.length,n=0,i,l;for((t.t._gsap||se.core.getCache(t.t)).uncache=1;n<a;n+=2)l=t[n+1],i=t[n],l?r[i]=l:r[i]&&r.removeProperty(i.replace(zS,"-$1").toLowerCase())}},km=function(t){for(var r=eu.length,a=t.style,n=[],i=0;i<r;i++)n.push(eu[i],a[eu[i]]);return n.t=t,n},WS=function(t,r,a){for(var n=[],i=t.length,l=a?8:0,o;l<i;l+=2)o=t[l],n.push(o,o in r?r[o]:t[l+1]);return n.t=t.t,n},tu={left:0,top:0},Tb=function(t,r,a,n,i,l,o,c,d,x,p,f,y,b){Ts(t)&&(t=t(c)),jr(t)&&t.substr(0,3)==="max"&&(t=f+(t.charAt(4)==="="?Xm("0"+t.substr(3),a):0));var v=y?y.time():0,S,_,w;if(y&&y.seek(0),isNaN(t)||(t=+t),Cc(t))y&&(t=se.utils.mapRange(y.scrollTrigger.start,y.scrollTrigger.end,0,f,t)),o&&Km(o,a,n,!0);else{Ts(r)&&(r=r(c));var N=(t||"0").split(" "),u,h,g,j;w=Js(r,c)||Fe,u=rn(w)||{},(!u||!u.left&&!u.top)&&Zr(w).display==="none"&&(j=w.style.display,w.style.display="block",u=rn(w),j?w.style.display=j:w.style.removeProperty("display")),h=Xm(N[0],u[n.d]),g=Xm(N[1]||"0",a),t=u[n.p]-d[n.p]-x+h+i-g,o&&Km(o,g,n,a-g<20||o._isStart&&g>20),a-=a-g}if(b&&(c[b]=t||-.001,t<0&&(t=0)),l){var T=t+a,C=l._isStart;S="scroll"+n.d2,Km(l,T,n,C&&T>20||!C&&(p?Math.max(Fe[S],Sr[S]):l.parentNode[S])<=T+1),p&&(d=rn(o),p&&(l.style[n.op.p]=d[n.op.p]-n.op.m-l._offset+Wt))}return y&&w&&(S=rn(w),y.seek(f),_=rn(w),y._caScrollDist=S[n.p]-_[n.p],t=t/y._caScrollDist*f),y&&y.seek(v),y?t:Math.round(t)},GS=/(webkit|moz|length|cssText|inset)/i,Db=function(t,r,a,n){if(t.parentNode!==r){var i=t.style,l,o;if(r===Fe){t._stOrig=i.cssText,o=Zr(t);for(l in o)!+l&&!GS.test(l)&&o[l]&&typeof i[l]=="string"&&l!=="0"&&(i[l]=o[l]);i.top=a,i.left=n}else i.cssText=t._stOrig;se.core.getCache(t).uncache=1,r.appendChild(t)}},J1=function(t,r,a){var n=r,i=n;return function(l){var o=Math.round(t());return o!==n&&o!==i&&Math.abs(o-n)>3&&Math.abs(o-i)>3&&(l=o,a&&a()),i=n,n=Math.round(l),n}},Cm=function(t,r,a){var n={};n[r.p]="+="+a,se.set(t,n)},Ab=function(t,r){var a=bi(t,r),n="_scroll"+r.p2,i=function l(o,c,d,x,p){var f=l.tween,y=c.onComplete,b={};d=d||a();var v=J1(a,d,function(){f.kill(),l.tween=0});return p=x&&p||0,x=x||o-d,f&&f.kill(),c[n]=o,c.inherit=!1,c.modifiers=b,b[n]=function(){return v(d+x*f.ratio+p*f.ratio*f.ratio)},c.onUpdate=function(){we.cache++,l.tween&&mn()},c.onComplete=function(){l.tween=0,y&&y.call(f)},f=l.tween=se.to(t,c),f};return t[n]=a,a.wheelHandler=function(){return i.tween&&i.tween.kill()&&(i.tween=0)},es(t,"wheel",a.wheelHandler),ke.isTouch&&es(t,"touchmove",a.wheelHandler),i},ke=function(){function s(r,a){Fl||s.register(se)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),mp(this),this.init(r,a)}var t=s.prototype;return t.init=function(a,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Sc){this.update=this.refresh=this.kill=Ia;return}a=_b(jr(a)||Cc(a)||a.nodeType?{trigger:a}:a,_m);var i=a,l=i.onUpdate,o=i.toggleClass,c=i.id,d=i.onToggle,x=i.onRefresh,p=i.scrub,f=i.trigger,y=i.pin,b=i.pinSpacing,v=i.invalidateOnRefresh,S=i.anticipatePin,_=i.onScrubComplete,w=i.onSnapComplete,N=i.once,u=i.snap,h=i.pinReparent,g=i.pinSpacer,j=i.containerAnimation,T=i.fastScrollEnd,C=i.preventOverlaps,E=a.horizontal||a.containerAnimation&&a.horizontal!==!1?Gs:qt,R=!p&&p!==0,k=Js(a.scroller||Ne),O=se.core.getCache(k),P=jl(k),$=("pinType"in a?a.pinType:ci(k,"pinType")||P&&"fixed")==="fixed",I=[a.onEnter,a.onLeave,a.onEnterBack,a.onLeaveBack],L=R&&a.toggleActions.split(" "),D="markers"in a?a.markers:_m.markers,M=P?0:parseFloat(Zr(k)["border"+E.p2+Fo])||0,A=this,V=a.onRefreshInit&&function(){return a.onRefreshInit(A)},B=MS(k,P,E),z=OS(k,P),F=0,W=0,Y=0,ne=bi(k,E),ve,U,ie,ce,qe,ye,Ye,is,ys,G,gr,Ha,Cn,vt,qa,En,Ri,Qt,Tn,Ct,ia,Br,Ya,tc,Mt,Qd,Za,Dl,Al,Dn,Pi,Se,Mi,la,oa,ca,Oi,Il,Qa;if(A._startClamp=A._endClamp=!1,A._dir=E,S*=45,A.scroller=k,A.scroll=j?j.time.bind(j):ne,ce=ne(),A.vars=a,n=n||a.animation,"refreshPriority"in a&&(F1=1,a.refreshPriority===-9999&&(Qc=A)),O.tweenScroll=O.tweenScroll||{top:Ab(k,qt),left:Ab(k,Gs)},A.tweenTo=ve=O.tweenScroll[E.p],A.scrubDuration=function(J){Mi=Cc(J)&&J,Mi?Se?Se.duration(J):Se=se.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Mi,paused:!0,onComplete:function(){return _&&_(A)}}):(Se&&Se.progress(1).kill(),Se=0)},n&&(n.vars.lazy=!1,n._initted&&!A.isReverted||n.vars.immediateRender!==!1&&a.immediateRender!==!1&&n.duration()&&n.render(0,!0,!0),A.animation=n.pause(),n.scrollTrigger=A,A.scrubDuration(p),Dn=0,c||(c=n.vars.id)),u&&((!Hi(u)||u.push)&&(u={snapTo:u}),"scrollBehavior"in Fe.style&&se.set(P?[Fe,Sr]:k,{scrollBehavior:"auto"}),we.forEach(function(J){return Ts(J)&&J.target===(P?et.scrollingElement||Sr:k)&&(J.smooth=!1)}),ie=Ts(u.snapTo)?u.snapTo:u.snapTo==="labels"?FS(n):u.snapTo==="labelsDirectional"?$S(n):u.directional!==!1?function(J,he){return rf(u.snapTo)(J,ks()-W<500?0:he.direction)}:se.utils.snap(u.snapTo),la=u.duration||{min:.1,max:2},la=Hi(la)?Gc(la.min,la.max):Gc(la,la),oa=se.delayedCall(u.delay||Mi/2||.1,function(){var J=ne(),he=ks()-W<500,le=ve.tween;if((he||Math.abs(A.getVelocity())<10)&&!le&&!wx&&F!==J){var pe=(J-ye)/vt,Xt=n&&!R?n.totalProgress():pe,Te=he?0:(Xt-Pi)/(ks()-_c)*1e3||0,Et=se.utils.clamp(-pe,1-pe,Ml(Te/2)*Te/.185),bs=pe+(u.inertia===!1?0:Et),jt,lt,Ze=u,da=Ze.onStart,mt=Ze.onInterrupt,fr=Ze.onComplete;if(jt=ie(bs,A),Cc(jt)||(jt=bs),lt=Math.max(0,Math.round(ye+jt*vt)),J<=Ye&&J>=ye&&lt!==J){if(le&&!le._initted&&le.data<=Ml(lt-J))return;u.inertia===!1&&(Et=jt-pe),ve(lt,{duration:la(Ml(Math.max(Ml(bs-Xt),Ml(jt-Xt))*.185/Te/.05||0)),ease:u.ease||"power3",data:Ml(lt-J),onInterrupt:function(){return oa.restart(!0)&&mt&&mt(A)},onComplete:function(){A.update(),F=ne(),n&&!R&&(Se?Se.resetTo("totalProgress",jt,n._tTime/n._tDur):n.progress(jt)),Dn=Pi=n&&!R?n.totalProgress():A.progress,w&&w(A),fr&&fr(A)}},J,Et*vt,lt-J-Et*vt),da&&da(A,ve.tween)}}else A.isActive&&F!==J&&oa.restart(!0)}).pause()),c&&(xp[c]=A),f=A.trigger=Js(f||y!==!0&&y),Qa=f&&f._gsap&&f._gsap.stRevert,Qa&&(Qa=Qa(A)),y=y===!0?f:Js(y),jr(o)&&(o={targets:f,className:o}),y&&(b===!1||b===Yr||(b=!b&&y.parentNode&&y.parentNode.style&&Zr(y.parentNode).display==="flex"?!1:Lt),A.pin=y,U=se.core.getCache(y),U.spacer?qa=U.pinState:(g&&(g=Js(g),g&&!g.nodeType&&(g=g.current||g.nativeElement),U.spacerIsNative=!!g,g&&(U.spacerState=km(g))),U.spacer=Qt=g||et.createElement("div"),Qt.classList.add("pin-spacer"),c&&Qt.classList.add("pin-spacer-"+c),U.pinState=qa=km(y)),a.force3D!==!1&&se.set(y,{force3D:!0}),A.spacer=Qt=U.spacer,Al=Zr(y),tc=Al[b+E.os2],Ct=se.getProperty(y),ia=se.quickSetter(y,E.a,Wt),_h(y,Qt,Al),Ri=km(y)),D){Ha=Hi(D)?_b(D,Sb):Sb,G=Sm("scroller-start",c,k,E,Ha,0),gr=Sm("scroller-end",c,k,E,Ha,0,G),Tn=G["offset"+E.op.d2];var sc=Js(ci(k,"content")||k);is=this.markerStart=Sm("start",c,sc,E,Ha,Tn,0,j),ys=this.markerEnd=Sm("end",c,sc,E,Ha,Tn,0,j),j&&(Il=se.quickSetter([is,ys],E.a,Wt)),!$&&!(Ua.length&&ci(k,"fixedMarkers")===!0)&&(LS(P?Fe:k),se.set([G,gr],{force3D:!0}),Qd=se.quickSetter(G,E.a,Wt),Dl=se.quickSetter(gr,E.a,Wt))}if(j){var fe=j.vars.onUpdate,de=j.vars.onUpdateParams;j.eventCallback("onUpdate",function(){A.update(0,0,1),fe&&fe.apply(j,de||[])})}if(A.previous=function(){return je[je.indexOf(A)-1]},A.next=function(){return je[je.indexOf(A)+1]},A.revert=function(J,he){if(!he)return A.kill(!0);var le=J!==!1||!A.enabled,pe=_s;le!==A.isReverted&&(le&&(ca=Math.max(ne(),A.scroll.rec||0),Y=A.progress,Oi=n&&n.progress()),is&&[is,ys,G,gr].forEach(function(Xt){return Xt.style.display=le?"none":"block"}),le&&(_s=A,A.update(le)),y&&(!h||!A.isActive)&&(le?BS(y,Qt,qa):_h(y,Qt,Zr(y),Mt)),le||A.update(le),_s=pe,A.isReverted=le)},A.refresh=function(J,he,le,pe){if(!((_s||!A.enabled)&&!he)){if(y&&J&&ta){es(s,"scrollEnd",Z1);return}!Us&&V&&V(A),_s=A,ve.tween&&!le&&(ve.tween.kill(),ve.tween=0),Se&&Se.pause(),v&&n&&(n.revert({kill:!1}).invalidate(),n.getChildren&&n.getChildren(!0,!0,!1).forEach(function(An){return An.vars.immediateRender&&An.render(0,!0,!0)})),A.isReverted||A.revert(!0,!0),A._subPinOffset=!1;var Xt=B(),Te=z(),Et=j?j.duration():La(k,E),bs=vt<=.01||!vt,jt=0,lt=pe||0,Ze=Hi(le)?le.end:a.end,da=a.endTrigger||f,mt=Hi(le)?le.start:a.start||(a.start===0||!f?0:y?"0 0":"0 100%"),fr=A.pinnedContainer=a.pinnedContainer&&Js(a.pinnedContainer,A),Sa=f&&Math.max(0,je.indexOf(A))||0,ls=Sa,os,vs,Li,Xd,js,zt,ka,Lx,Pf,rc,Ca,ac,Kd;for(D&&Hi(le)&&(ac=se.getProperty(G,E.p),Kd=se.getProperty(gr,E.p));ls-- >0;)zt=je[ls],zt.end||zt.refresh(0,1)||(_s=A),ka=zt.pin,ka&&(ka===f||ka===y||ka===fr)&&!zt.isReverted&&(rc||(rc=[]),rc.unshift(zt),zt.revert(!0,!0)),zt!==je[ls]&&(Sa--,ls--);for(Ts(mt)&&(mt=mt(A)),mt=vb(mt,"start",A),ye=Tb(mt,f,Xt,E,ne(),is,G,A,Te,M,$,Et,j,A._startClamp&&"_startClamp")||(y?-.001:0),Ts(Ze)&&(Ze=Ze(A)),jr(Ze)&&!Ze.indexOf("+=")&&(~Ze.indexOf(" ")?Ze=(jr(mt)?mt.split(" ")[0]:"")+Ze:(jt=Xm(Ze.substr(2),Xt),Ze=jr(mt)?mt:(j?se.utils.mapRange(0,j.duration(),j.scrollTrigger.start,j.scrollTrigger.end,ye):ye)+jt,da=f)),Ze=vb(Ze,"end",A),Ye=Math.max(ye,Tb(Ze||(da?"100% 0":Et),da,Xt,E,ne()+jt,ys,gr,A,Te,M,$,Et,j,A._endClamp&&"_endClamp"))||-.001,jt=0,ls=Sa;ls--;)zt=je[ls],ka=zt.pin,ka&&zt.start-zt._pinPush<=ye&&!j&&zt.end>0&&(os=zt.end-(A._startClamp?Math.max(0,zt.start):zt.start),(ka===f&&zt.start-zt._pinPush<ye||ka===fr)&&isNaN(mt)&&(jt+=os*(1-zt.progress)),ka===y&&(lt+=os));if(ye+=jt,Ye+=jt,A._startClamp&&(A._startClamp+=jt),A._endClamp&&!Us&&(A._endClamp=Ye||-.001,Ye=Math.min(Ye,La(k,E))),vt=Ye-ye||(ye-=.01)&&.001,bs&&(Y=se.utils.clamp(0,1,se.utils.normalize(ye,Ye,ca))),A._pinPush=lt,is&&jt&&(os={},os[E.a]="+="+jt,fr&&(os[E.p]="-="+ne()),se.set([is,ys],os)),y&&!(up&&A.end>=La(k,E)))os=Zr(y),Xd=E===qt,Li=ne(),Br=parseFloat(Ct(E.a))+lt,!Et&&Ye>1&&(Ca=(P?et.scrollingElement||Sr:k).style,Ca={style:Ca,value:Ca["overflow"+E.a.toUpperCase()]},P&&Zr(Fe)["overflow"+E.a.toUpperCase()]!=="scroll"&&(Ca.style["overflow"+E.a.toUpperCase()]="scroll")),_h(y,Qt,os),Ri=km(y),vs=rn(y,!0),Lx=$&&bi(k,Xd?Gs:qt)(),b?(Mt=[b+E.os2,vt+lt+Wt],Mt.t=Qt,ls=b===Lt?Uu(y,E)+vt+lt:0,ls&&(Mt.push(E.d,ls+Wt),Qt.style.flexBasis!=="auto"&&(Qt.style.flexBasis=ls+Wt)),vo(Mt),fr&&je.forEach(function(An){An.pin===fr&&An.vars.pinSpacing!==!1&&(An._subPinOffset=!0)}),$&&ne(ca)):(ls=Uu(y,E),ls&&Qt.style.flexBasis!=="auto"&&(Qt.style.flexBasis=ls+Wt)),$&&(js={top:vs.top+(Xd?Li-ye:Lx)+Wt,left:vs.left+(Xd?Lx:Li-ye)+Wt,boxSizing:"border-box",position:"fixed"},js[ol]=js["max"+Fo]=Math.ceil(vs.width)+Wt,js[cl]=js["max"+sf]=Math.ceil(vs.height)+Wt,js[Yr]=js[Yr+Yc]=js[Yr+Hc]=js[Yr+Zc]=js[Yr+qc]="0",js[Lt]=os[Lt],js[Lt+Yc]=os[Lt+Yc],js[Lt+Hc]=os[Lt+Hc],js[Lt+Zc]=os[Lt+Zc],js[Lt+qc]=os[Lt+qc],En=WS(qa,js,h),Us&&ne(0)),n?(Pf=n._initted,bh(1),n.render(n.duration(),!0,!0),Ya=Ct(E.a)-Br+vt+lt,Za=Math.abs(vt-Ya)>1,$&&Za&&En.splice(En.length-2,2),n.render(0,!0,!0),Pf||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),bh(0)):Ya=vt,Ca&&(Ca.value?Ca.style["overflow"+E.a.toUpperCase()]=Ca.value:Ca.style.removeProperty("overflow-"+E.a));else if(f&&ne()&&!j)for(vs=f.parentNode;vs&&vs!==Fe;)vs._pinOffset&&(ye-=vs._pinOffset,Ye-=vs._pinOffset),vs=vs.parentNode;rc&&rc.forEach(function(An){return An.revert(!1,!0)}),A.start=ye,A.end=Ye,ce=qe=Us?ca:ne(),!j&&!Us&&(ce<ca&&ne(ca),A.scroll.rec=0),A.revert(!1,!0),W=ks(),oa&&(F=-1,oa.restart(!0)),_s=0,n&&R&&(n._initted||Oi)&&n.progress()!==Oi&&n.progress(Oi||0,!0).render(n.time(),!0,!0),(bs||Y!==A.progress||j||v||n&&!n._initted)&&(n&&!R&&(n._initted||Y||n.vars.immediateRender!==!1)&&n.totalProgress(j&&ye<-.001&&!Y?se.utils.normalize(ye,Ye,0):Y,!0),A.progress=bs||(ce-ye)/vt===Y?0:Y),y&&b&&(Qt._pinOffset=Math.round(A.progress*Ya)),Se&&Se.invalidate(),isNaN(ac)||(ac-=se.getProperty(G,E.p),Kd-=se.getProperty(gr,E.p),Cm(G,E,ac),Cm(is,E,ac-(pe||0)),Cm(gr,E,Kd),Cm(ys,E,Kd-(pe||0))),bs&&!Us&&A.update(),x&&!Us&&!Cn&&(Cn=!0,x(A),Cn=!1)}},A.getVelocity=function(){return(ne()-qe)/(ks()-_c)*1e3||0},A.endAnimation=function(){pc(A.callbackAnimation),n&&(Se?Se.progress(1):n.paused()?R||pc(n,A.direction<0,1):pc(n,n.reversed()))},A.labelToScroll=function(J){return n&&n.labels&&(ye||A.refresh()||ye)+n.labels[J]/n.duration()*vt||0},A.getTrailing=function(J){var he=je.indexOf(A),le=A.direction>0?je.slice(0,he).reverse():je.slice(he+1);return(jr(J)?le.filter(function(pe){return pe.vars.preventOverlaps===J}):le).filter(function(pe){return A.direction>0?pe.end<=ye:pe.start>=Ye})},A.update=function(J,he,le){if(!(j&&!le&&!J)){var pe=Us===!0?ca:A.scroll(),Xt=J?0:(pe-ye)/vt,Te=Xt<0?0:Xt>1?1:Xt||0,Et=A.progress,bs,jt,lt,Ze,da,mt,fr,Sa;if(he&&(qe=ce,ce=j?ne():pe,u&&(Pi=Dn,Dn=n&&!R?n.totalProgress():Te)),S&&y&&!_s&&!vm&&ta&&(!Te&&ye<pe+(pe-qe)/(ks()-_c)*S?Te=1e-4:Te===1&&Ye>pe+(pe-qe)/(ks()-_c)*S&&(Te=.9999)),Te!==Et&&A.enabled){if(bs=A.isActive=!!Te&&Te<1,jt=!!Et&&Et<1,mt=bs!==jt,da=mt||!!Te!=!!Et,A.direction=Te>Et?1:-1,A.progress=Te,da&&!_s&&(lt=Te&&!Et?0:Te===1?1:Et===1?2:3,R&&(Ze=!mt&&L[lt+1]!=="none"&&L[lt+1]||L[lt],Sa=n&&(Ze==="complete"||Ze==="reset"||Ze in n))),C&&(mt||Sa)&&(Sa||p||!n)&&(Ts(C)?C(A):A.getTrailing(C).forEach(function(Li){return Li.endAnimation()})),R||(Se&&!_s&&!vm?(Se._dp._time-Se._start!==Se._time&&Se.render(Se._dp._time-Se._start),Se.resetTo?Se.resetTo("totalProgress",Te,n._tTime/n._tDur):(Se.vars.totalProgress=Te,Se.invalidate().restart())):n&&n.totalProgress(Te,!!(_s&&(W||J)))),y){if(J&&b&&(Qt.style[b+E.os2]=tc),!$)ia(kc(Br+Ya*Te));else if(da){if(fr=!J&&Te>Et&&Ye+1>pe&&pe+1>=La(k,E),h)if(!J&&(bs||fr)){var ls=rn(y,!0),os=pe-ye;Db(y,Fe,ls.top+(E===qt?os:0)+Wt,ls.left+(E===qt?0:os)+Wt)}else Db(y,Qt);vo(bs||fr?En:Ri),Za&&Te<1&&bs||ia(Br+(Te===1&&!fr?Ya:0))}}u&&!ve.tween&&!_s&&!vm&&oa.restart(!0),o&&(mt||N&&Te&&(Te<1||!vh))&&Ed(o.targets).forEach(function(Li){return Li.classList[bs||N?"add":"remove"](o.className)}),l&&!R&&!J&&l(A),da&&!_s?(R&&(Sa&&(Ze==="complete"?n.pause().totalProgress(1):Ze==="reset"?n.restart(!0).pause():Ze==="restart"?n.restart(!0):n[Ze]()),l&&l(A)),(mt||!vh)&&(d&&mt&&Nh(A,d),I[lt]&&Nh(A,I[lt]),N&&(Te===1?A.kill(!1,1):I[lt]=0),mt||(lt=Te===1?1:3,I[lt]&&Nh(A,I[lt]))),T&&!bs&&Math.abs(A.getVelocity())>(Cc(T)?T:2500)&&(pc(A.callbackAnimation),Se?Se.progress(1):pc(n,Ze==="reverse"?1:!Te,1))):R&&l&&!_s&&l(A)}if(Dl){var vs=j?pe/j.duration()*(j._caScrollDist||0):pe;Qd(vs+(G._isFlipped?1:0)),Dl(vs)}Il&&Il(-pe/j.duration()*(j._caScrollDist||0))}},A.enable=function(J,he){A.enabled||(A.enabled=!0,es(k,"resize",Ec),P||es(k,"scroll",Ol),V&&es(s,"refreshInit",V),J!==!1&&(A.progress=Y=0,ce=qe=F=ne()),he!==!1&&A.refresh())},A.getTween=function(J){return J&&ve?ve.tween:Se},A.setPositions=function(J,he,le,pe){if(j){var Xt=j.scrollTrigger,Te=j.duration(),Et=Xt.end-Xt.start;J=Xt.start+Et*J/Te,he=Xt.start+Et*he/Te}A.refresh(!1,!1,{start:jb(J,le&&!!A._startClamp),end:jb(he,le&&!!A._endClamp)},pe),A.update()},A.adjustPinSpacing=function(J){if(Mt&&J){var he=Mt.indexOf(E.d)+1;Mt[he]=parseFloat(Mt[he])+J+Wt,Mt[1]=parseFloat(Mt[1])+J+Wt,vo(Mt)}},A.disable=function(J,he){if(A.enabled&&(J!==!1&&A.revert(!0,!0),A.enabled=A.isActive=!1,he||Se&&Se.pause(),ca=0,U&&(U.uncache=1),V&&Jt(s,"refreshInit",V),oa&&(oa.pause(),ve.tween&&ve.tween.kill()&&(ve.tween=0)),!P)){for(var le=je.length;le--;)if(je[le].scroller===k&&je[le]!==A)return;Jt(k,"resize",Ec),P||Jt(k,"scroll",Ol)}},A.kill=function(J,he){A.disable(J,he),Se&&!he&&Se.kill(),c&&delete xp[c];var le=je.indexOf(A);le>=0&&je.splice(le,1),le===Vs&&Jm>0&&Vs--,le=0,je.forEach(function(pe){return pe.scroller===A.scroller&&(le=1)}),le||Us||(A.scroll.rec=0),n&&(n.scrollTrigger=null,J&&n.revert({kill:!1}),he||n.kill()),is&&[is,ys,G,gr].forEach(function(pe){return pe.parentNode&&pe.parentNode.removeChild(pe)}),Qc===A&&(Qc=0),y&&(U&&(U.uncache=1),le=0,je.forEach(function(pe){return pe.pin===y&&le++}),le||(U.spacer=0)),a.onKill&&a.onKill(A)},je.push(A),A.enable(!1,!1),Qa&&Qa(A),n&&n.add&&!vt){var Pe=A.update;A.update=function(){A.update=Pe,we.cache++,ye||Ye||A.refresh()},se.delayedCall(.01,A.update),vt=.01,ye=Ye=0}else A.refresh();y&&US()},s.register=function(a){return Fl||(se=a||z1(),B1()&&window.document&&s.enable(),Fl=Sc),Fl},s.defaults=function(a){if(a)for(var n in a)_m[n]=a[n];return _m},s.disable=function(a,n){Sc=0,je.forEach(function(l){return l[n?"kill":"disable"](a)}),Jt(Ne,"wheel",Ol),Jt(et,"scroll",Ol),clearInterval(bm),Jt(et,"touchcancel",Ia),Jt(Fe,"touchstart",Ia),Nm(Jt,et,"pointerdown,touchstart,mousedown",Nb),Nm(Jt,et,"pointerup,touchend,mouseup",wb),$u.kill(),jm(Jt);for(var i=0;i<we.length;i+=3)wm(Jt,we[i],we[i+1]),wm(Jt,we[i],we[i+2])},s.enable=function(){if(Ne=window,et=document,Sr=et.documentElement,Fe=et.body,se&&(Ed=se.utils.toArray,Gc=se.utils.clamp,mp=se.core.context||Ia,bh=se.core.suppressOverwrites||Ia,Kg=Ne.history.scrollRestoration||"auto",hp=Ne.pageYOffset||0,se.core.globals("ScrollTrigger",s),Fe)){Sc=1,bo=document.createElement("div"),bo.style.height="100vh",bo.style.position="absolute",K1(),PS(),Rt.register(se),s.isTouch=Rt.isTouch,Mn=Rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),dp=Rt.isTouch===1,es(Ne,"wheel",Ol),Xg=[Ne,et,Sr,Fe],se.matchMedia?(s.matchMedia=function(d){var x=se.matchMedia(),p;for(p in d)x.add(p,d[p]);return x},se.addEventListener("matchMediaInit",function(){return af()}),se.addEventListener("matchMediaRevert",function(){return Q1()}),se.addEventListener("matchMedia",function(){el(0,1),wl("matchMedia")}),se.matchMedia().add("(orientation: portrait)",function(){return wh(),wh})):console.warn("Requires GSAP 3.11.0 or later"),wh(),es(et,"scroll",Ol);var a=Fe.hasAttribute("style"),n=Fe.style,i=n.borderTopStyle,l=se.core.Animation.prototype,o,c;for(l.revert||Object.defineProperty(l,"revert",{value:function(){return this.time(-.01,!0)}}),n.borderTopStyle="solid",o=rn(Fe),qt.m=Math.round(o.top+qt.sc())||0,Gs.m=Math.round(o.left+Gs.sc())||0,i?n.borderTopStyle=i:n.removeProperty("border-top-style"),a||(Fe.setAttribute("style",""),Fe.removeAttribute("style")),bm=setInterval(kb,250),se.delayedCall(.5,function(){return vm=0}),es(et,"touchcancel",Ia),es(Fe,"touchstart",Ia),Nm(es,et,"pointerdown,touchstart,mousedown",Nb),Nm(es,et,"pointerup,touchend,mouseup",wb),cp=se.utils.checkPrefix("transform"),eu.push(cp),Fl=ks(),$u=se.delayedCall(.2,el).pause(),$l=[et,"visibilitychange",function(){var d=Ne.innerWidth,x=Ne.innerHeight;et.hidden?(yb=d,bb=x):(yb!==d||bb!==x)&&Ec()},et,"DOMContentLoaded",el,Ne,"load",el,Ne,"resize",Ec],jm(es),je.forEach(function(d){return d.enable(0,1)}),c=0;c<we.length;c+=3)wm(Jt,we[c],we[c+1]),wm(Jt,we[c],we[c+2])}},s.config=function(a){"limitCallbacks"in a&&(vh=!!a.limitCallbacks);var n=a.syncInterval;n&&clearInterval(bm)||(bm=n)&&setInterval(kb,n),"ignoreMobileResize"in a&&(dp=s.isTouch===1&&a.ignoreMobileResize),"autoRefreshEvents"in a&&(jm(Jt)||jm(es,a.autoRefreshEvents||"none"),$1=(a.autoRefreshEvents+"").indexOf("resize")===-1)},s.scrollerProxy=function(a,n){var i=Js(a),l=we.indexOf(i),o=jl(i);~l&&we.splice(l,o?6:2),n&&(o?Ua.unshift(Ne,n,Fe,n,Sr,n):Ua.unshift(i,n))},s.clearMatchMedia=function(a){je.forEach(function(n){return n._ctx&&n._ctx.query===a&&n._ctx.kill(!0,!0)})},s.isInViewport=function(a,n,i){var l=(jr(a)?Js(a):a).getBoundingClientRect(),o=l[i?ol:cl]*n||0;return i?l.right-o>0&&l.left+o<Ne.innerWidth:l.bottom-o>0&&l.top+o<Ne.innerHeight},s.positionInViewport=function(a,n,i){jr(a)&&(a=Js(a));var l=a.getBoundingClientRect(),o=l[i?ol:cl],c=n==null?o/2:n in Bu?Bu[n]*o:~n.indexOf("%")?parseFloat(n)*o/100:parseFloat(n)||0;return i?(l.left+c)/Ne.innerWidth:(l.top+c)/Ne.innerHeight},s.killAll=function(a){if(je.slice(0).forEach(function(i){return i.vars.id!=="ScrollSmoother"&&i.kill()}),a!==!0){var n=Nl.killAll||[];Nl={},n.forEach(function(i){return i()})}},s}();ke.version="3.13.0";ke.saveStyles=function(s){return s?Ed(s).forEach(function(t){if(t&&t.style){var r=br.indexOf(t);r>=0&&br.splice(r,5),br.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),se.core.getCache(t),mp())}}):br};ke.revert=function(s,t){return af(!s,t)};ke.create=function(s,t){return new ke(s,t)};ke.refresh=function(s){return s?Ec(!0):(Fl||ke.register())&&el(!0)};ke.update=function(s){return++we.cache&&mn(s===!0?2:0)};ke.clearScrollMemory=X1;ke.maxScroll=function(s,t){return La(s,t?Gs:qt)};ke.getScrollFunc=function(s,t){return bi(Js(s),t?Gs:qt)};ke.getById=function(s){return xp[s]};ke.getAll=function(){return je.filter(function(s){return s.vars.id!=="ScrollSmoother"})};ke.isScrolling=function(){return!!ta};ke.snapDirectional=rf;ke.addEventListener=function(s,t){var r=Nl[s]||(Nl[s]=[]);~r.indexOf(t)||r.push(t)};ke.removeEventListener=function(s,t){var r=Nl[s],a=r&&r.indexOf(t);a>=0&&r.splice(a,1)};ke.batch=function(s,t){var r=[],a={},n=t.interval||.016,i=t.batchMax||1e9,l=function(d,x){var p=[],f=[],y=se.delayedCall(n,function(){x(p,f),p=[],f=[]}).pause();return function(b){p.length||y.restart(!0),p.push(b.trigger),f.push(b),i<=p.length&&y.progress(1)}},o;for(o in t)a[o]=o.substr(0,2)==="on"&&Ts(t[o])&&o!=="onRefreshInit"?l(o,t[o]):t[o];return Ts(i)&&(i=i(),es(ke,"refresh",function(){return i=t.batchMax()})),Ed(s).forEach(function(c){var d={};for(o in a)d[o]=a[o];d.trigger=c,r.push(ke.create(d))}),r};var Ib=function(t,r,a,n){return r>n?t(n):r<0&&t(0),a>n?(n-r)/(a-r):a<0?r/(r-a):1},Sh=function s(t,r){r===!0?t.style.removeProperty("touch-action"):t.style.touchAction=r===!0?"auto":r?"pan-"+r+(Rt.isTouch?" pinch-zoom":""):"none",t===Sr&&s(Fe,r)},Em={auto:1,scroll:1},HS=function(t){var r=t.event,a=t.target,n=t.axis,i=(r.changedTouches?r.changedTouches[0]:r).target,l=i._gsap||se.core.getCache(i),o=ks(),c;if(!l._isScrollT||o-l._isScrollT>2e3){for(;i&&i!==Fe&&(i.scrollHeight<=i.clientHeight&&i.scrollWidth<=i.clientWidth||!(Em[(c=Zr(i)).overflowY]||Em[c.overflowX]));)i=i.parentNode;l._isScroll=i&&i!==a&&!jl(i)&&(Em[(c=Zr(i)).overflowY]||Em[c.overflowX]),l._isScrollT=o}(l._isScroll||n==="x")&&(r.stopPropagation(),r._gsapAllow=!0)},ew=function(t,r,a,n){return Rt.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:r,onWheel:n=n&&HS,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return a&&es(et,Rt.eventTypes[0],Pb,!1,!0)},onDisable:function(){return Jt(et,Rt.eventTypes[0],Pb,!0)}})},qS=/(input|label|select|textarea)/i,Rb,Pb=function(t){var r=qS.test(t.target.tagName);(r||Rb)&&(t._gsapAllow=!0,Rb=r)},YS=function(t){Hi(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var r=t,a=r.normalizeScrollX,n=r.momentum,i=r.allowNestedScroll,l=r.onRelease,o,c,d=Js(t.target)||Sr,x=se.core.globals().ScrollSmoother,p=x&&x.get(),f=Mn&&(t.content&&Js(t.content)||p&&t.content!==!1&&!p.smooth()&&p.content()),y=bi(d,qt),b=bi(d,Gs),v=1,S=(Rt.isTouch&&Ne.visualViewport?Ne.visualViewport.scale*Ne.visualViewport.width:Ne.outerWidth)/Ne.innerWidth,_=0,w=Ts(n)?function(){return n(o)}:function(){return n||2.8},N,u,h=ew(d,t.type,!0,i),g=function(){return u=!1},j=Ia,T=Ia,C=function(){c=La(d,qt),T=Gc(Mn?1:0,c),a&&(j=Gc(0,La(d,Gs))),N=dl},E=function(){f._gsap.y=kc(parseFloat(f._gsap.y)+y.offset)+"px",f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(f._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},R=function(){if(u){requestAnimationFrame(g);var D=kc(o.deltaY/2),M=T(y.v-D);if(f&&M!==y.v+y.offset){y.offset=M-y.v;var A=kc((parseFloat(f&&f._gsap.y)||0)-y.offset);f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+A+", 0, 1)",f._gsap.y=A+"px",y.cacheID=we.cache,mn()}return!0}y.offset&&E(),u=!0},k,O,P,$,I=function(){C(),k.isActive()&&k.vars.scrollY>c&&(y()>c?k.progress(1)&&y(c):k.resetTo("scrollY",c))};return f&&se.set(f,{y:"+=0"}),t.ignoreCheck=function(L){return Mn&&L.type==="touchmove"&&R()||v>1.05&&L.type!=="touchstart"||o.isGesturing||L.touches&&L.touches.length>1},t.onPress=function(){u=!1;var L=v;v=kc((Ne.visualViewport&&Ne.visualViewport.scale||1)/S),k.pause(),L!==v&&Sh(d,v>1.01?!0:a?!1:"x"),O=b(),P=y(),C(),N=dl},t.onRelease=t.onGestureStart=function(L,D){if(y.offset&&E(),!D)$.restart(!0);else{we.cache++;var M=w(),A,V;a&&(A=b(),V=A+M*.05*-L.velocityX/.227,M*=Ib(b,A,V,La(d,Gs)),k.vars.scrollX=j(V)),A=y(),V=A+M*.05*-L.velocityY/.227,M*=Ib(y,A,V,La(d,qt)),k.vars.scrollY=T(V),k.invalidate().duration(M).play(.01),(Mn&&k.vars.scrollY>=c||A>=c-1)&&se.to({},{onUpdate:I,duration:M})}l&&l(L)},t.onWheel=function(){k._ts&&k.pause(),ks()-_>1e3&&(N=0,_=ks())},t.onChange=function(L,D,M,A,V){if(dl!==N&&C(),D&&a&&b(j(A[2]===D?O+(L.startX-L.x):b()+D-A[1])),M){y.offset&&E();var B=V[2]===M,z=B?P+L.startY-L.y:y()+M-V[1],F=T(z);B&&z!==F&&(P+=F-z),y(F)}(M||D)&&mn()},t.onEnable=function(){Sh(d,a?!1:"x"),ke.addEventListener("refresh",I),es(Ne,"resize",I),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=b.smooth=!1),h.enable()},t.onDisable=function(){Sh(d,!0),Jt(Ne,"resize",I),ke.removeEventListener("refresh",I),h.kill()},t.lockAxis=t.lockAxis!==!1,o=new Rt(t),o.iOS=Mn,Mn&&!y()&&y(1),Mn&&se.ticker.add(Ia),$=o._dc,k=se.to(o,{ease:"power4",paused:!0,inherit:!1,scrollX:a?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:J1(y,y(),function(){return k.pause()})},onUpdate:mn,onComplete:$.vars.onComplete}),o};ke.sort=function(s){if(Ts(s))return je.sort(s);var t=Ne.pageYOffset||0;return ke.getAll().forEach(function(r){return r._sortY=r.trigger?t+r.trigger.getBoundingClientRect().top:r.start+Ne.innerHeight}),je.sort(s||function(r,a){return(r.vars.refreshPriority||0)*-1e6+(r.vars.containerAnimation?1e6:r._sortY)-((a.vars.containerAnimation?1e6:a._sortY)+(a.vars.refreshPriority||0)*-1e6)})};ke.observe=function(s){return new Rt(s)};ke.normalizeScroll=function(s){if(typeof s>"u")return Ls;if(s===!0&&Ls)return Ls.enable();if(s===!1){Ls&&Ls.kill(),Ls=s;return}var t=s instanceof Rt?s:YS(s);return Ls&&Ls.target===t.target&&Ls.kill(),jl(t.target)&&(Ls=t),t};ke.core={_getVelocityProp:op,_inputObserver:ew,_scrollers:we,_proxies:Ua,bridge:{ss:function(){ta||wl("scrollStart"),ta=ks()},ref:function(){return _s}}};z1()&&se.registerPlugin(ke);function ZS({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const QS=m.forwardRef(ZS),zu=QS;function XS({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const KS=m.forwardRef(XS),JS=KS;function ek({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const tk=m.forwardRef(ek),vi=tk;function sk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const rk=m.forwardRef(sk),_x=rk;function ak({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const nk=m.forwardRef(ak),Ko=nk;function ik({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const lk=m.forwardRef(ik),ps=lk;function ok({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const ck=m.forwardRef(ok),Mb=ck;function dk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const mk=m.forwardRef(dk),wa=mk;function uk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const xk=m.forwardRef(uk),Re=xk;function hk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const pk=m.forwardRef(hk),Sx=pk;function gk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 1 0-2.636 6.364M16.5 12V8.25"}))}const fk=m.forwardRef(gk),yk=fk;function bk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const vk=m.forwardRef(bk),tw=vk;function jk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Nk=m.forwardRef(jk),sw=Nk;function wk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const _k=m.forwardRef(wk),Sk=_k;function kk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Ck=m.forwardRef(kk),jn=Ck;function Ek({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const Tk=m.forwardRef(Ek),Ob=Tk;function Dk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"}))}const Ak=m.forwardRef(Dk),gp=Ak;function Ik({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const Rk=m.forwardRef(Ik),ml=Rk;function Pk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const Mk=m.forwardRef(Pk),su=Mk;function Ok({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"}))}const Lk=m.forwardRef(Ok),Nn=Lk;function Fk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const $k=m.forwardRef(Fk),ji=$k;function Vk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Uk=m.forwardRef(Vk),Ir=Uk;function Bk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const zk=m.forwardRef(Bk),oe=zk;function Wk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"}))}const Gk=m.forwardRef(Wk),_l=Gk;function Hk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const qk=m.forwardRef(Hk),Yk=qk;function Zk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Qk=m.forwardRef(Zk),ae=Qk;function Xk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Kk=m.forwardRef(Xk),$o=Kk;function Jk({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const eC=m.forwardRef(Jk),Ds=eC;function tC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const sC=m.forwardRef(tC),rC=sC;function aC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const nC=m.forwardRef(aC),di=nC;function iC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const lC=m.forwardRef(iC),ha=lC;function oC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const cC=m.forwardRef(oC),Lb=cC;function dC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const mC=m.forwardRef(dC),Vl=mC;function uC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const xC=m.forwardRef(uC),hC=xC;function pC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const gC=m.forwardRef(pC),be=gC;function fC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const yC=m.forwardRef(fC),kr=yC;function bC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const vC=m.forwardRef(bC),ar=vC;function jC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const NC=m.forwardRef(jC),wC=NC;function _C({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const SC=m.forwardRef(_C),rw=SC;function kC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const CC=m.forwardRef(kC),Ni=CC;function EC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const TC=m.forwardRef(EC),un=TC;function DC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const AC=m.forwardRef(DC),We=AC;function IC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"}))}const RC=m.forwardRef(IC),Wu=RC;function PC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const MC=m.forwardRef(PC),ul=MC;function OC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5h3m-6.75 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-15a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 4.5v15a2.25 2.25 0 0 0 2.25 2.25Z"}))}const LC=m.forwardRef(OC),FC=LC;function $C({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const VC=m.forwardRef($C),aw=VC;function UC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const BC=m.forwardRef(UC),zC=BC;function WC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const GC=m.forwardRef(WC),Fb=GC;function HC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const qC=m.forwardRef(HC),$b=qC;function YC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const ZC=m.forwardRef(YC),Bt=ZC;function QC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const XC=m.forwardRef(QC),KC=XC;function JC({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const e8=m.forwardRef(JC),xl=e8;function t8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const s8=m.forwardRef(t8),te=s8;function r8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const a8=m.forwardRef(r8),Gu=a8;function n8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const i8=m.forwardRef(n8),Ee=i8;function l8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const o8=m.forwardRef(l8),Hu=o8;function c8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const d8=m.forwardRef(c8),nw=d8;function m8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const u8=m.forwardRef(m8),gs=u8;function x8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const h8=m.forwardRef(x8),Be=h8;function p8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const g8=m.forwardRef(p8),Jo=g8;function f8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const y8=m.forwardRef(f8),iw=y8;function b8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const v8=m.forwardRef(b8),lw=v8;function j8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const N8=m.forwardRef(j8),Vo=N8;function w8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const _8=m.forwardRef(w8),S8=_8;function k8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"}))}const C8=m.forwardRef(k8),E8=C8;function T8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const D8=m.forwardRef(T8),hl=D8;function A8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const I8=m.forwardRef(A8),nf=I8;function R8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"}))}const P8=m.forwardRef(R8),M8=P8;function O8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const L8=m.forwardRef(O8),mi=L8;function F8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const $8=m.forwardRef(F8),V8=$8;function U8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const B8=m.forwardRef(U8),fp=B8;function z8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const W8=m.forwardRef(z8),G8=W8;function H8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const q8=m.forwardRef(H8),lf=q8;function Y8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const Z8=m.forwardRef(Y8),Mr=Z8;function Q8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const X8=m.forwardRef(Q8),Vb=X8;function K8({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const J8=m.forwardRef(K8),eE=J8;function tE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const sE=m.forwardRef(tE),rE=sE;function aE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"}))}const nE=m.forwardRef(aE),Ba=nE;function iE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const lE=m.forwardRef(iE),_e=lE;function oE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.99 14.993 6-6m6 3.001c0 1.268-.63 2.39-1.593 3.069a3.746 3.746 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043 3.745 3.745 0 0 1-3.068 1.593c-1.268 0-2.39-.63-3.068-1.593a3.745 3.745 0 0 1-3.296-1.043 3.746 3.746 0 0 1-1.043-3.297 3.746 3.746 0 0 1-1.593-3.068c0-1.268.63-2.39 1.593-3.068a3.746 3.746 0 0 1 1.043-3.297 3.745 3.745 0 0 1 3.296-1.042 3.745 3.745 0 0 1 3.068-1.594c1.268 0 2.39.63 3.068 1.593a3.745 3.745 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.297 3.746 3.746 0 0 1 1.593 3.068ZM9.74 9.743h.008v.007H9.74v-.007Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm4.125 4.5h.008v.008h-.008v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const cE=m.forwardRef(oE),dE=cE;function mE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const uE=m.forwardRef(mE),Uo=uE;function xE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const hE=m.forwardRef(xE),jo=hE;function pE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const gE=m.forwardRef(pE),rr=gE;function fE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const yE=m.forwardRef(fE),ge=yE;function bE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const vE=m.forwardRef(bE),qu=vE;function jE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}const NE=m.forwardRef(jE),wE=NE;function _E({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))}const SE=m.forwardRef(_E),Ub=SE;function kE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const CE=m.forwardRef(kE),kx=CE;function EE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const TE=m.forwardRef(EE),ow=TE;function DE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const AE=m.forwardRef(DE),qs=AE;function IE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))}const RE=m.forwardRef(IE),Bb=RE;function PE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const ME=m.forwardRef(PE),ss=ME;function OE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const LE=m.forwardRef(OE),wn=LE;function FE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const $E=m.forwardRef(FE),VE=$E;function UE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const BE=m.forwardRef(UE),Ys=BE;function zE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"}))}const WE=m.forwardRef(zE),yp=WE;function GE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const HE=m.forwardRef(GE),wi=HE;function qE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const YE=m.forwardRef(qE),of=YE;function ZE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const QE=m.forwardRef(ZE),_a=QE;function XE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const KE=m.forwardRef(XE),ui=KE;function JE({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const eT=m.forwardRef(JE),$e=eT;function tT({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const sT=m.forwardRef(tT),rT=sT;function aT({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const nT=m.forwardRef(aT),tt=nT;function iT({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const lT=m.forwardRef(iT),dt=lT;function oT({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const cT=m.forwardRef(oT),na=cT;function dT({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const mT=m.forwardRef(dT),wr=mT;function uT({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const xT=m.forwardRef(uT),Zs=xT;function hT({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const pT=m.forwardRef(hT),bt=pT,Ud=()=>{const[s,t]=m.useState(()=>{const c=localStorage.getItem("marelle-cart");return c?JSON.parse(c):[]});m.useEffect(()=>{localStorage.setItem("marelle-cart",JSON.stringify(s))},[s]);const r=(c,d=1)=>{t(x=>x.find(f=>f.id===c.id)?x.map(f=>f.id===c.id?{...f,quantity:f.quantity+d}:f):[...x,{...c,quantity:d}])},a=c=>{t(d=>d.filter(x=>x.id!==c))},n=(c,d)=>{if(d<=0){a(c);return}t(x=>x.map(p=>p.id===c?{...p,quantity:d}:p))},i=()=>{t([])},l=s.reduce((c,d)=>c+d.price*d.quantity,0),o=s.reduce((c,d)=>c+d.quantity,0);return{cartItems:s,addToCart:r,removeFromCart:a,updateQuantity:n,clearCart:i,cartTotal:l,cartItemsCount:o}},Bd=()=>{const[s,t]=m.useState(!1),[r,a]=m.useState(!1),n=Ga(),{cartItemsCount:i}=Ud();m.useEffect(()=>{const c=()=>{a(window.scrollY>20)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const l=[{name:"油漆",href:"/products?cat=paint",mega:!0,groups:[{title:"類型",items:[{name:"單色",href:"#"},{name:"套組",href:"#"},{name:"保護漆",href:"#"},{name:"試色罐",href:"#"},{name:"工具組",href:"#"}]},{title:"色系",items:[{name:"灰白色系",href:"#"},{name:"大地色系",href:"#"},{name:"綠色系",href:"#"},{name:"藍色系",href:"#"},{name:"奶茶色系",href:"#"}]}]},{name:"家具茶",href:"/products?cat=furniture"},{name:"地毯",href:"/products?cat=rug"},{name:"窗簾",href:"/products?cat=curtain"},{name:"居家商品",href:"/products"},{name:"改造指南",href:"/guide"},{name:"生活風格",href:"/style"}],o=c=>n.pathname===c;return e.jsxs("nav",{className:`nav-lofi fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${r?"shadow-sm border-b":""}`,style:{background:"#fdf8f2"},children:[e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 h-16 flex items-center",children:[e.jsx("div",{className:"flex items-center mr-8",children:e.jsxs(re,{to:"/",className:"flex items-center space-x-3 group",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center transform group-hover:scale-105 transition-transform duration-200 bg-primary-btn shadow-sm",children:e.jsx("span",{className:"text-btn-white font-bold text-lg",children:"M"})}),e.jsx("span",{className:"font-bold text-xl font-chinese group-hover:opacity-80 transition-opacity duration-200 text-lofi tracking-wide",children:"Marelle"})]})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-6 h-full flex-1 justify-center",children:l.map(c=>e.jsxs("div",{className:"relative h-full flex items-center group",children:[e.jsxs(re,{to:c.href,className:`font-medium font-chinese text-sm tracking-wide transition-colors relative px-1 text-lofi ${o(c.href)?"text-primary-btn":"hover:text-primary-btn"}`,children:[e.jsxs("span",{className:"flex items-center",children:[c.name,c.mega&&e.jsx(Ds,{className:"w-4 h-4 ml-1"})]}),e.jsx("span",{className:`absolute left-0 -bottom-2 h-0.5 bg-primary-btn transition-all duration-300 ${o(c.href)?"w-full":"w-0 group-hover:w-full"}`})]}),c.mega&&e.jsx("div",{className:"absolute top-full left-0 pt-4 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition-all duration-200",children:e.jsx("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200 rounded-xl shadow-lg p-6 grid grid-cols-2 gap-8 w-[520px]",children:c.groups.map(d=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold mb-3 tracking-wider text-primary-btn",children:d.title}),e.jsx("ul",{className:"space-y-2",children:d.items.map(x=>e.jsx("li",{children:e.jsx(re,{to:x.href,className:"block text-sm text-lofi hover:text-primary-btn transition-colors",children:x.name})},x.name))})]},d.title))})})]},c.name))}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx("button",{className:"p-2 rounded-lg transition-colors duration-200 text-lofi btn-ghost hidden md:inline-flex",children:e.jsx(lf,{className:"w-5 h-5"})}),e.jsx(re,{to:"/login",className:"p-2 rounded-lg transition-colors duration-200 text-lofi btn-ghost hidden md:inline-flex","aria-label":"會員登入",children:e.jsx(na,{className:"w-5 h-5"})}),e.jsxs(re,{to:"/cart",className:"relative p-2 rounded-lg transition-colors duration-200 text-lofi btn-ghost",children:[e.jsx(ss,{className:"w-5 h-5"}),i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium bg-primary-btn text-btn-white",children:i})]}),e.jsx("button",{onClick:()=>t(!s),className:"md:hidden p-2 text-lofi btn-ghost",children:s?e.jsx(bt,{className:"w-5 h-5"}):e.jsx(sw,{className:"w-5 h-5"})})]})]}),s&&e.jsx("div",{className:"md:hidden bg-lofi backdrop-blur-sm border-t",children:e.jsxs("div",{className:"px-4 py-4 space-y-2",children:[l.map(c=>e.jsx(re,{to:c.href,onClick:()=>t(!1),className:`block px-4 py-3 rounded-lg font-medium transition-colors duration-200 font-chinese text-lofi ${o(c.href)?"bg-primary-btn text-btn-white":"hover:bg-primary-btn/10 hover:text-primary-btn"}`,children:c.name},c.name)),secondaryNav.map(c=>e.jsx(re,{to:c.href,onClick:()=>t(!1),className:"block px-4 py-3 rounded-lg font-medium text-lofi hover:bg-primary-btn/10 hover:text-primary-btn transition-colors duration-200",children:c.name},c.name)),e.jsx(re,{to:"/admin/login",onClick:()=>t(!1),className:"block px-4 py-3 rounded-lg font-medium text-lofi hover:bg-primary-btn/10 hover:text-primary-btn transition-colors duration-200 border-t mt-2 pt-4 font-chinese",children:"管理後台"})]})})]})},gT=()=>{const s=new Date().getFullYear(),t=[{title:"商品分類",links:[{name:"服飾配件",href:"/products?category=accessories"},{name:"居家生活",href:"/products?category=home"},{name:"香氛用品",href:"/products?category=fragrance"},{name:"茶品飲品",href:"/products?category=tea"}]},{title:"客戶服務",links:[{name:"常見問題",href:"/faq"},{name:"退換貨政策",href:"/returns"},{name:"運送說明",href:"/shipping"},{name:"尺寸指南",href:"/size-guide"}]},{title:"關於 Marelle",links:[{name:"品牌故事",href:"/about"},{name:"聯絡我們",href:"/contact"},{name:"門市據點",href:"/stores"},{name:"招聘資訊",href:"/careers"}]}];return e.jsx("footer",{className:"border-t mt-auto bg-lofi",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(re,{to:"/",className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-primary-btn",children:e.jsx("span",{className:"text-btn-white font-bold text-lg",children:"M"})}),e.jsx("span",{className:"font-bold text-xl font-chinese text-lofi",children:"Marelle"})]}),e.jsx("p",{className:"text-sm mb-4 font-chinese leading-relaxed text-lofi",children:"致力於為您帶來溫暖質樸的生活美學， 每一件商品都經過精心挑選， 體現Lo-Fi的生活態度與美好。"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("a",{href:"#",className:"transition-colors duration-200 text-lofi hover:text-primary-btn opacity-60 hover:opacity-100",children:[e.jsx("span",{className:"sr-only",children:"Facebook"}),e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M20 10C20 4.477 15.523 0 10 0S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z",clipRule:"evenodd"})})]}),e.jsxs("a",{href:"#",className:"transition-colors duration-200 text-lofi hover:text-primary-btn opacity-60 hover:opacity-100",children:[e.jsx("span",{className:"sr-only",children:"Instagram"}),e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})})]}),e.jsxs("a",{href:"#",className:"transition-colors duration-200 text-lofi hover:text-primary-btn opacity-60 hover:opacity-100",children:[e.jsx("span",{className:"sr-only",children:"LINE"}),e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755z"})})]})]})]}),t.map(r=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4 font-chinese text-primary-btn",children:r.title}),e.jsx("ul",{className:"space-y-2",children:r.links.map(a=>e.jsx("li",{children:e.jsx(re,{to:a.href,className:"text-sm font-chinese transition-colors duration-200",style:{color:"#666666"},onMouseEnter:n=>n.target.style.color="#CC824D",onMouseLeave:n=>n.target.style.color="#666666",children:a.name})},a.name))})]},r.title))]}),e.jsx("div",{className:"mt-12 pt-8",style:{borderTop:"1px solid rgba(102, 102, 102, 0.1)"},children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("h3",{className:"font-semibold mb-2 font-chinese",style:{color:"#CC824D"},children:"訂閱電子報"}),e.jsx("p",{className:"text-sm font-chinese",style:{color:"#666666"},children:"獲得最新商品資訊與優惠通知"})]}),e.jsxs("div",{className:"flex w-full md:w-auto",children:[e.jsx("input",{type:"email",placeholder:"請輸入您的電子郵件",className:"flex-1 md:w-64 px-4 py-3 rounded-l-lg font-chinese transition-all duration-200",style:{backgroundColor:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(102, 102, 102, 0.2)",color:"#666666"},onFocus:r=>{r.target.style.backgroundColor="rgba(255, 255, 255, 1)",r.target.style.borderColor="#CC824D"},onBlur:r=>{r.target.style.backgroundColor="rgba(255, 255, 255, 0.7)",r.target.style.borderColor="rgba(102, 102, 102, 0.2)"}}),e.jsx("button",{className:"px-6 py-3 rounded-r-lg font-medium font-chinese transition-colors duration-200",style:{backgroundColor:"#CC824D",color:"#FFFFFF"},onMouseEnter:r=>r.target.style.backgroundColor="#b86c37",onMouseLeave:r=>r.target.style.backgroundColor="#CC824D",children:"訂閱"})]})]})}),e.jsxs("div",{className:"mt-8 pt-8 flex flex-col md:flex-row justify-between items-center",style:{borderTop:"1px solid rgba(102, 102, 102, 0.1)"},children:[e.jsxs("p",{className:"text-sm font-chinese",style:{color:"#666666"},children:["© ",s," Marelle. 版權所有。"]}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx(re,{to:"/privacy",className:"text-sm transition-colors duration-200 font-chinese",style:{color:"#666666"},onMouseEnter:r=>r.target.style.color="#CC824D",onMouseLeave:r=>r.target.style.color="#666666",children:"隱私政策"}),e.jsx(re,{to:"/terms",className:"text-sm transition-colors duration-200 font-chinese",style:{color:"#666666"},onMouseEnter:r=>r.target.style.color="#CC824D",onMouseLeave:r=>r.target.style.color="#666666",children:"服務條款"})]})]})]})})},tr=[{id:1,name:"優雅絲巾",price:1280,originalPrice:1680,image:"https://images.unsplash.com/photo-1601924994987-69e26d50dc26?w=400&h=400&fit=crop",category:"配件",description:"採用100%真絲材質，手工印染的優雅絲巾，為您的造型增添精緻感。",inStock:!0,featured:!0,rating:4.8,reviews:156},{id:2,name:"手工陶瓷花瓶",price:2880,originalPrice:3200,image:"https://images.unsplash.com/photo-1485955900006-10f4d324d411?w=400&h=400&fit=crop",category:"家居",description:"職人手工製作的陶瓷花瓶，結合現代簡約與傳統工藝的完美平衡。",inStock:!0,featured:!0,rating:4.9,reviews:89},{id:3,name:"天然蜂蠟蠟燭",price:680,originalPrice:880,image:"https://images.unsplash.com/photo-1602874801006-8e0ac25604e9?w=400&h=400&fit=crop",category:"香氛",description:"純天然蜂蠟製作，淡雅花香，燃燒時間長達40小時。",inStock:!0,featured:!1,rating:4.7,reviews:234},{id:4,name:"羊毛混紡毛衣",price:3200,originalPrice:4200,image:"https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400&h=400&fit=crop",category:"服飾",description:"精選羊毛混紡材質，柔軟舒適，適合秋冬季節穿著。",inStock:!0,featured:!0,rating:4.6,reviews:112},{id:5,name:"有機綠茶組合",price:1680,originalPrice:2080,image:"https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=400&h=400&fit=crop",category:"茶品",description:"來自高山的有機綠茶，清香回甘，包含三種不同風味。",inStock:!0,featured:!1,rating:4.8,reviews:78},{id:6,name:"竹纖維浴巾",price:880,originalPrice:1180,image:"https://images.unsplash.com/photo-1620912330775-011bb5d31d4e?w=400&h=400&fit=crop",category:"生活用品",description:"天然竹纖維材質，吸水性佳，抗菌防蟎，親膚舒適。",inStock:!1,featured:!1,rating:4.5,reviews:167}],fT=[{id:"all",name:"全部商品",count:tr.length},{id:"accessories",name:"配件",count:tr.filter(s=>s.category==="配件").length},{id:"home",name:"家居",count:tr.filter(s=>s.category==="家居").length},{id:"fragrance",name:"香氛",count:tr.filter(s=>s.category==="香氛").length},{id:"clothing",name:"服飾",count:tr.filter(s=>s.category==="服飾").length},{id:"tea",name:"茶品",count:tr.filter(s=>s.category==="茶品").length},{id:"lifestyle",name:"生活用品",count:tr.filter(s=>s.category==="生活用品").length}],ds=s=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(s),yT=()=>{m.useRef(null),m.useRef(null),m.useRef(null),m.useEffect(()=>{it.fromTo(".hero-content",{opacity:0,y:30},{opacity:1,y:0,duration:1.2,ease:"power2.out"}),it.fromTo(".product-card",{opacity:0,y:20},{opacity:1,y:0,duration:.8,stagger:.1,ease:"power2.out",delay:.3})},[]);const s=tr.slice(0,8);return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("section",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"text-center hero-content",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6 font-chinese text-primary-btn",children:["Lo-Fi",e.jsx("span",{className:"text-lofi",children:" Marelle"})]}),e.jsx("p",{className:"text-lg md:text-xl mb-8 max-w-2xl mx-auto leading-relaxed text-lofi",children:"探索溫暖質樸的生活美學，每件商品都承載著簡約而美好的生活態度"}),e.jsxs(re,{to:"/products",className:"inline-flex items-center px-8 py-4 rounded-lg font-medium shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 bg-primary-btn text-btn-white",children:["開始探索",e.jsx(di,{className:"ml-2 h-5 w-5"})]})]})})}),e.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-white/50",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 font-chinese text-primary-btn",children:"精選商品"}),e.jsx("p",{className:"max-w-2xl mx-auto text-lofi",children:"嚴選質感生活用品，為您的生活空間增添溫暖與美好"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((t,r)=>e.jsx(re,{to:`/products/${t.id}`,className:"product-card group",children:e.jsxs("div",{className:"bg-white/80 rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"aspect-square overflow-hidden",style:{background:"linear-gradient(135deg, #EFEAE4 0%, #f5f1e8 100%)"},children:e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2 group-hover:opacity-80 transition-opacity duration-200",style:{color:"#666666"},children:t.name}),e.jsx("p",{className:"text-sm mb-3 line-clamp-2",style:{color:"rgba(102, 102, 102, 0.7)"},children:t.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold",style:{color:"#CC824D"},children:ds(t.price)}),t.originalPrice&&e.jsx("span",{className:"text-sm line-through",style:{color:"rgba(102, 102, 102, 0.4)"},children:ds(t.originalPrice)})]})]})]})},t.id))}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(re,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-white/80 border rounded-lg transition-all duration-200 font-medium",style:{color:"#666666",borderColor:"rgba(102, 102, 102, 0.2)"},onMouseEnter:t=>{t.target.style.backgroundColor="rgba(255, 255, 255, 0.9)",t.target.style.borderColor="rgba(102, 102, 102, 0.3)"},onMouseLeave:t=>{t.target.style.backgroundColor="rgba(255, 255, 255, 0.8)",t.target.style.borderColor="rgba(102, 102, 102, 0.2)"},children:["查看全部商品",e.jsx(di,{className:"ml-2 h-4 w-4"})]})})]})}),e.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 font-chinese text-primary-btn",children:"為什麼選擇我們"}),e.jsx("p",{className:"text-lofi",children:"我們致力於為您提供最好的購物體驗和生活品質"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"feature-card text-center group",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 transition-colors duration-200 bg-white/70 border border-gray-200 group-hover:bg-white/90",children:e.jsx(Ys,{className:"h-8 w-8 text-primary-btn"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3 font-chinese text-lofi",children:"精心策展"}),e.jsx("p",{className:"text-lofi leading-relaxed opacity-80",children:"每件商品都經過精心挑選，確保品質與美感的完美結合"})]}),e.jsxs("div",{className:"feature-card text-center group",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 transition-colors duration-200 bg-white/70 border border-gray-200 group-hover:bg-white/90",children:e.jsx(Vo,{className:"h-8 w-8 text-primary-btn"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3 font-chinese text-lofi",children:"用心服務"}),e.jsx("p",{className:"text-lofi leading-relaxed opacity-80",children:"從選購到售後，我們提供貼心周到的服務體驗"})]}),e.jsxs("div",{className:"feature-card text-center group",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 transition-colors duration-200 bg-white/70 border border-gray-200 group-hover:bg-white/90",children:e.jsx(qs,{className:"h-8 w-8 text-primary-btn"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3 font-chinese text-lofi",children:"品質保證"}),e.jsx("p",{className:"text-lofi leading-relaxed opacity-80",children:"嚴格的品質控制，讓您安心享受每一次購物"})]})]})]})}),e.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-white/60",children:e.jsxs("div",{className:"w-full text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 font-chinese text-primary-btn",children:"訂閱電子報"}),e.jsx("p",{className:"text-lofi mb-8 opacity-80",children:"獲取最新商品資訊和生活靈感，讓美好融入您的日常"}),e.jsxs("div",{className:"max-w-md mx-auto flex gap-3",children:[e.jsx("input",{type:"email",placeholder:"輸入您的電子郵件",className:"flex-1 input-lofi"}),e.jsx("button",{className:"btn-primary px-6 py-3 font-chinese",children:"訂閱"})]})]})})]})};function bT({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const vT=m.forwardRef(bT),cw=vT;function jT({title:s,titleId:t,...r},a){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?m.createElement("title",{id:t},s):null,m.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const NT=m.forwardRef(jT),Xc=NT,kh=[{value:"name",label:"名稱"},{value:"price-low",label:"價低→高"},{value:"price-high",label:"價高→低"},{value:"rating",label:"評分"}],Ch=({value:s,onChange:t,size:r="md"})=>{const[a,n]=m.useState(!1),[i,l]=m.useState({top:0,left:0,width:0}),o=m.useRef(null),c=()=>{if(o.current){const p=o.current.getBoundingClientRect();l({top:p.bottom+2,left:p.left,width:p.width})}},d=()=>{a||c(),n(!a)};m.useEffect(()=>{const p=f=>{o.current&&!o.current.contains(f.target)&&n(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const x=kh.find(p=>p.value===s)||kh[0];return e.jsxs("div",{ref:o,className:`sort-dropdown ${a?"open":""} ${r==="sm"?"sort-dropdown-sm":""}`,children:[e.jsxs("button",{type:"button",className:"sort-trigger",onClick:d,"aria-haspopup":"listbox","aria-expanded":a,children:[e.jsx("span",{children:x.label}),e.jsx(Ds,{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`})]}),a&&Zo.createPortal(e.jsx("div",{className:"glass-dropdown fixed z-[99999]",style:{top:`${i.top}px`,left:`${i.left}px`,width:`${i.width}px`,zIndex:99999},children:kh.map(p=>e.jsx("button",{className:`glass-dropdown-option font-chinese ${p.value===s?"selected":""}`,onClick:()=>{t(p.value),n(!1)},children:p.label},p.value))}),document.body)]})},dw=[{id:"root-living",name:"家居生活",children:[{id:"home",name:"家居"},{id:"lifestyle",name:"生活用品"}]},{id:"root-scent",name:"香氛茶飲",children:[{id:"fragrance",name:"香氛"},{id:"tea",name:"茶品"}]},{id:"root-fashion",name:"穿搭配件",children:[{id:"accessories",name:"配件"},{id:"clothing",name:"服飾"}]}],Eh={home:"home",lifestyle:"lifestyle",fragrance:"fragrance",tea:"tea",accessories:"accessories",clothing:"clothing"};function wT(s){if(!s)return[];const t=[];function r(a,n){for(const i of a){const l=[...n,i];if(i.id===s)return t.push(...l),!0;if(i.children&&r(i.children,l))return!0}return!1}return r(dw,[]),t}function _T(){var C;const s=Ga(),{addToCart:t}=Ud(),[r,a]=m.useState(tr),[n,i]=m.useState("all"),[l,o]=m.useState(null),[c,d]=m.useState({}),[x,p]=m.useState("name"),[f,y]=m.useState(""),[b,v]=m.useState(!1),[S,_]=m.useState(new Set);m.useEffect(()=>{const R=new URLSearchParams(s.search).get("cat");R&&Eh[R]&&(i(R),o(R))},[s.search]);const w=E=>{d(R=>({...R,[E]:!R[E]}))},N=E=>{o(E.id)},u=E=>{_(R=>{const k=new Set(R);return k.has(E)?k.delete(E):k.add(E),k})};m.useEffect(()=>{let E=[...tr];if(f&&(E=E.filter(R=>{var k;return R.name.toLowerCase().includes(f.toLowerCase())||((k=R.description)==null?void 0:k.toLowerCase().includes(f.toLowerCase()))})),l&&Eh[l]){const R=Eh[l];E=E.filter(k=>k.category===R)}E.sort((R,k)=>{switch(x){case"price-low":return R.price-k.price;case"price-high":return k.price-R.price;case"name":default:return R.name.localeCompare(k.name)}}),a(E)},[f,l,x]);const h=E=>t(E),g=wT(l||""),j=((C=g.slice(-1)[0])==null?void 0:C.name)||"全部商品",T=g.length?g.map(E=>E.name).join(" / "):"全部類別";return e.jsxs("div",{className:"min-h-screen pt-20 pb-12",children:[e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("aside",{className:"hidden lg:block lg:col-span-3",children:e.jsx("div",{className:"sticky top-24 space-y-6",children:e.jsxs("div",{className:"p-4 rounded-xl bg-white/80 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold font-chinese text-primary-btn",children:"分類"}),e.jsx(Ch,{value:x,onChange:p,size:"sm"})]}),e.jsx("nav",{className:"space-y-1",children:dw.map(E=>{const R=c[E.id];return e.jsxs("div",{onMouseEnter:()=>d(k=>({...k,[E.id]:!0})),onMouseLeave:()=>d(k=>({...k,[E.id]:!1})),children:[e.jsxs("button",{onClick:()=>{w(E.id),N(E)},className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm font-chinese transition-colors ${l===E.id?"bg-primary-btn text-btn-white":"text-lofi hover:bg-white/70"}`,children:[e.jsx("span",{children:E.name}),E.children&&e.jsx(Ds,{className:`w-4 h-4 transition-transform ${R?"rotate-180":""}`})]}),e.jsx("div",{className:`mt-1 ml-2 pl-2 border-l border-gray-200 space-y-1 ${R?"sidebar-anim-expand":"sidebar-anim-collapse"}`,style:{pointerEvents:R?"auto":"none"},children:E.children&&E.children.map(k=>{const O=c[k.id],P=!!k.children;return e.jsxs("div",{onMouseEnter:()=>d($=>({...$,[k.id]:!0,[E.id]:!0})),onMouseLeave:()=>d($=>({...$,[k.id]:!1})),children:[e.jsxs("button",{onClick:()=>{P&&w(k.id),N(k)},className:`w-full flex items-center justify-between px-3 py-2 rounded-md text-sm font-chinese transition-colors ${l===k.id?"bg-primary-btn/90 text-btn-white":"text-lofi hover:bg-white/70"}`,children:[e.jsx("span",{children:k.name}),P&&e.jsx(Ds,{className:`w-4 h-4 transition-transform ${O?"rotate-180":""}`})]}),e.jsx("div",{className:`mt-1 ml-2 pl-2 border-l border-gray-200 space-y-1 ${P&&O?"sidebar-anim-expand":"sidebar-anim-collapse"}`,style:{pointerEvents:P&&O?"auto":"none"},children:P&&k.children&&k.children.map($=>e.jsx("button",{onClick:()=>N($),className:`w-full text-left px-3 py-1.5 rounded text-sm font-chinese transition-colors ${l===$.id?"bg-primary-btn/80 text-btn-white":"text-lofi hover:bg-white/70"}`,children:$.name},$.id))})]},k.id)})})]},E.id)})})]})})}),e.jsxs("div",{className:"lg:col-span-9",children:[e.jsx("div",{className:"mb-8 rounded-xl overflow-hidden border border-gray-200 bg-white/60 backdrop-blur-sm",children:e.jsx("div",{className:"aspect-[16/5] w-full bg-gradient-to-r from-[#EFEAE4] to-[#e6ddcf] flex items-center",children:e.jsxs("div",{className:"px-10 py-8",children:[e.jsx("h2",{className:"text-3xl font-bold font-chinese text-primary-btn mb-3",children:j}),e.jsxs("p",{className:"text-lofi font-chinese opacity-80 text-sm max-w-xl",children:["精選 ",T," 系列商品，呈現簡約與質感的生活美學。"]})]})})}),e.jsx("div",{className:"flex items-center justify-end mb-4 lg:hidden",children:e.jsx(Ch,{value:x,onChange:p})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:r.map(E=>e.jsx("div",{id:`product-${E.id}`,className:"product-item group",children:e.jsxs("div",{className:"product-card-minimal relative overflow-hidden",children:[e.jsxs("div",{className:"imgbox",children:[!E.inStock&&e.jsx("div",{className:"badge-out font-chinese",children:"缺貨"}),e.jsx(re,{to:`/products/${E.id}`,className:"block w-full h-full",children:e.jsx("img",{src:E.image,alt:E.name})}),e.jsx("button",{className:`product-card-favcenter${S.has(E.id)?" active":""}`,onClick:R=>{R.preventDefault(),u(E.id)},"aria-label":"收藏",tabIndex:0,style:{pointerEvents:"auto",background:"none",border:"none",boxShadow:"none"},children:S.has(E.id)?e.jsx(cw,{className:"w-8 h-8"}):e.jsx(Vo,{className:"w-8 h-8"})}),e.jsx("button",{className:"product-card-cartbar",onClick:R=>{R.preventDefault(),h(E)},disabled:!E.inStock,style:{pointerEvents:"auto"},children:E.inStock?"加入購物車":"暫時缺貨"})]}),e.jsxs("div",{className:"info font-chinese",children:[e.jsxs(re,{to:`/products/${E.id}`,children:[" ",e.jsx("h3",{className:"title text-lofi hover:opacity-70 transition-opacity",children:E.name})]}),e.jsxs("div",{className:"pricing",children:[e.jsx("span",{className:"price-tag font-bold",children:ds(E.price)}),E.originalPrice&&e.jsx("span",{className:"price-original",children:ds(E.originalPrice)})]})]})]})},E.id))}),r.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"p-8 rounded-xl max-w-md mx-auto shadow-sm bg-white/80 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 font-chinese text-lofi",children:"沒有找到相關商品"}),e.jsx("p",{className:"mb-4 font-chinese text-gray-500",children:"請嘗試調整搜尋條件或篩選器"}),e.jsx("button",{onClick:()=>{y(""),i("all")},className:"px-6 py-3 rounded-lg font-medium font-chinese transform hover:scale-105 transition-all duration-200 bg-primary-btn text-btn-white",children:"清除篩選"})]})})]})]})}),b&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>v(!1)}),e.jsxs("div",{className:"absolute top-0 left-0 h-full w-80 bg-white/90 backdrop-blur-sm border-r border-gray-200 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold font-chinese text-primary-btn",children:"篩選與搜尋"}),e.jsx("button",{onClick:()=>v(!1),className:"btn-ghost font-chinese",children:"關閉"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 font-chinese text-lofi",children:"排序"}),e.jsx(Ch,{value:x,onChange:p})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3 font-chinese text-primary-btn",children:"分類"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:fT.map(E=>e.jsx("button",{onClick:()=>i(E.id),className:`category-btn-lofi px-4 py-2 font-medium font-chinese ${n===E.id?"selected":""}`,children:E.name},E.id))})]}),e.jsxs("div",{className:"mt-8 flex gap-3",children:[e.jsx("button",{onClick:()=>{y(""),i("all"),p("name")},className:"btn-secondary flex-1 font-chinese",children:"重設"}),e.jsx("button",{onClick:()=>v(!1),className:"btn-primary flex-1 font-chinese",children:"套用"})]})]})]})]})}const ST=()=>{const{id:s}=Di(),t=ns(),[r,a]=m.useState(null),[n,i]=m.useState(0),[l,o]=m.useState(1),[c,d]=m.useState(!1),{addToCart:x}=Ud();m.useEffect(()=>{const b=tr.find(v=>v.id===parseInt(s));b?(a(b),it.fromTo(".product-detail-content",{opacity:0,y:30},{opacity:1,y:0,duration:.8,stagger:.1,ease:"power2.out"})):t("/products")},[s,t]);const p=()=>{r&&(x(r,l),it.fromTo(".add-to-cart-btn",{scale:1},{scale:1.05,duration:.1,yoyo:!0,repeat:1}))};if(!r)return e.jsx("div",{className:"min-h-screen pt-20 flex items-center justify-center bg-lofi",children:e.jsx("div",{className:"p-8 rounded-2xl bg-white/80 border border-gray-200",children:e.jsx("p",{className:"font-chinese text-lofi",children:"載入中..."})})});const f=[r.image,r.image,r.image,r.image],y=tr.filter(b=>b.category===r.category&&b.id!==r.id).slice(0,4);return e.jsx("div",{className:"min-h-screen pt-20 pb-12 bg-lofi",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 font-chinese flex items-center px-4 py-2 rounded-lg transition-all duration-200 btn-secondary",children:[e.jsx(rC,{className:"w-5 h-5 mr-2"}),"返回"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsx("div",{className:"product-detail-content",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square overflow-hidden rounded-2xl bg-white/80 border border-gray-200",children:e.jsx("img",{src:f[n],alt:r.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:f.map((b,v)=>e.jsx("button",{onClick:()=>i(v),className:`aspect-square overflow-hidden rounded-lg transition-all duration-200 ${n===v?"ring-2 ring-apricot-500":"opacity-70 hover:opacity-100"}`,children:e.jsx("img",{src:b,alt:`${r.name} ${v+1}`,className:"w-full h-full object-cover"})},v))})]})}),e.jsxs("div",{className:"product-detail-content space-y-6",children:[e.jsx("div",{className:"text-sm text-primary-btn font-chinese",children:r.category}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-lofi font-chinese",children:r.name}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((b,v)=>e.jsx(wi,{className:`w-5 h-5 ${v<Math.floor(r.rating)?"text-yellow-400 fill-current":"text-gray-300"}`},v)),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:r.rating})]}),e.jsxs("span",{className:"text-sm text-gray-500 font-chinese",children:["(",r.reviews," 則評價)"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-3xl font-bold price-tag",children:ds(r.price)}),r.originalPrice&&e.jsx("span",{className:"text-lg price-original",children:ds(r.originalPrice)})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-lofi font-chinese leading-relaxed",children:r.description})}),e.jsx("div",{className:`status-badge-lofi ${r.inStock?"":"out"} font-chinese`,children:r.inStock?"有現貨":"暫時缺貨"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-gray-700 font-chinese",children:"數量："}),e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>o(Math.max(1,l-1)),className:"px-3 py-1 hover:bg-gray-100 transition-colors",disabled:l<=1,children:"−"}),e.jsx("span",{className:"px-4 py-1 border-x border-gray-300",children:l}),e.jsx("button",{onClick:()=>o(l+1),className:"px-3 py-1 hover:bg-gray-100 transition-colors",children:"+"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:p,disabled:!r.inStock,className:`add-to-cart-btn flex-1 flex items-center justify-center py-3 px-6 rounded-lg font-medium transition-all duration-200 font-chinese ${r.inStock?"btn-primary":"status-badge-lofi out cursor-not-allowed"}`,children:[e.jsx(ss,{className:"w-5 h-5 mr-2"}),r.inStock?"加入購物車":"暫時缺貨"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(!c),className:"p-3 border border-gray-200 rounded-lg hover:bg-white/80 transition-colors",children:c?e.jsx(cw,{className:"w-5 h-5 text-red-500"}):e.jsx(Vo,{className:"w-5 h-5 text-lofi"})}),e.jsx("button",{className:"p-3 border border-gray-200 rounded-lg hover:bg-white/80 transition-colors",children:e.jsx(ow,{className:"w-5 h-5 text-lofi"})})]})]})]}),e.jsxs("div",{className:"bg-white/80 border border-gray-200 p-6 rounded-2xl",children:[e.jsx("h3",{className:"font-semibold text-lofi mb-4 font-chinese",children:"商品詳情"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lofi font-chinese",children:"分類："}),e.jsx("span",{className:"text-primary-btn font-chinese",children:r.category})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lofi font-chinese",children:"評分："}),e.jsxs("span",{className:"text-lofi",children:[r.rating,"/5"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lofi font-chinese",children:"評價數："}),e.jsx("span",{className:"text-lofi",children:r.reviews})]})]})]})]})]}),y.length>0&&e.jsxs("div",{className:"mt-20",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-primary-btn mb-8 font-chinese",children:"相關商品"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:y.map(b=>e.jsxs("div",{className:"card-lofi overflow-hidden group",children:[e.jsx("div",{className:"aspect-square overflow-hidden",children:e.jsx("img",{src:b.image,alt:b.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lofi mb-2 font-chinese line-clamp-2",children:b.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-bold price-tag",children:ds(b.price)}),e.jsx("button",{onClick:()=>t(`/products/${b.id}`),className:"btn-ghost text-sm font-chinese",children:"查看"})]})]})]},b.id))})]})]})})},kT=()=>{const{cartItems:s,removeFromCart:t,updateQuantity:r,clearCart:a,cartTotal:n,cartItemsCount:i}=Ud();m.useEffect(()=>{it.fromTo(".cart-item",{opacity:0,x:-30},{opacity:1,x:0,duration:.6,stagger:.1,ease:"power2.out"})},[s]);const l=(c,d)=>{d<1?t(c):r(c,d)},o=c=>{it.to(`#cart-item-${c}`,{opacity:0,x:-100,duration:.3,ease:"power2.in",onComplete:()=>t(c)})};return s.length===0?e.jsx("div",{className:"min-h-screen pt-20 flex items-center justify-center bg-lofi",children:e.jsx("div",{className:"text-center max-w-md mx-auto px-4",children:e.jsxs("div",{className:"bg-white/80 border border-gray-200 p-12 rounded-2xl",children:[e.jsx(ss,{className:"w-16 h-16 text-gray-400 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-lofi mb-4 font-chinese",children:"購物車是空的"}),e.jsx("p",{className:"text-gray-500 mb-8 font-chinese",children:"還沒有商品在購物車裡，快去挑選喜歡的商品吧！"}),e.jsx(re,{to:"/products",className:"btn-primary font-chinese",children:"開始購物"})]})})}):e.jsx("div",{className:"min-h-screen pt-20 pb-12",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 font-chinese",children:"購物車"}),e.jsxs("p",{className:"text-gray-600 mt-2 font-chinese",children:[i," 件商品"]})]}),e.jsx("button",{onClick:a,className:"btn-ghost text-red-600 hover:bg-red-50 font-chinese",children:"清空購物車"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:s.map(c=>e.jsx("div",{id:`cart-item-${c.id}`,className:"cart-item glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:e.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover rounded-lg"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 font-chinese",children:e.jsx(re,{to:`/products/${c.id}`,className:"hover:text-apricot-600 transition-colors",children:c.name})}),e.jsx("p",{className:"text-sm text-apricot-600 font-chinese",children:c.category}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-2",children:ds(c.price)})]}),e.jsx("button",{onClick:()=>o(c.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx($e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>l(c.id,c.quantity-1),className:"p-2 hover:bg-gray-100 transition-colors",children:e.jsx(eE,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-4 py-2 border-x border-gray-300 min-w-[3rem] text-center",children:c.quantity}),e.jsx("button",{onClick:()=>l(c.id,c.quantity+1),className:"p-2 hover:bg-gray-100 transition-colors",children:e.jsx(ge,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-lg font-bold text-apricot-600",children:ds(c.price*c.quantity)})]})]})]})},c.id))}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass p-6 rounded-2xl sticky top-24",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6 font-chinese",children:"訂單摘要"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"商品小計"}),e.jsx("span",{className:"text-gray-900",children:ds(n)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"運費"}),e.jsx("span",{className:"text-gray-900",children:"免費"})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 font-chinese",children:"總計"}),e.jsx("span",{className:"text-lg font-bold text-apricot-600",children:ds(n)})]})})]}),e.jsx(re,{to:"/checkout",className:"btn-primary w-full mt-8 py-4 text-lg font-chinese",children:"前往結帳"}),e.jsx(re,{to:"/products",className:"btn-secondary w-full mt-4 py-3 font-chinese",children:"繼續購物"}),e.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-800 font-chinese",children:"🚚 購買滿 $1000 免運費"}),n<1e3&&e.jsxs("p",{className:"text-xs text-green-600 mt-1 font-chinese",children:["還差 ",ds(1e3-n)," 即可免運費"]})]})]})})]})]})})},CT=()=>{const s=ns(),{cartItems:t,cartTotal:r,clearCart:a}=Ud(),[n,i]=m.useState(1),[l,o]=m.useState(!1),[c,d]=m.useState(!1),[x,p]=m.useState({fullName:"",email:"",phone:"",address:"",city:"",zipCode:"",notes:""}),[f,y]=m.useState({method:"credit-card",cardNumber:"",expiryDate:"",cvv:"",cardName:""});m.useEffect(()=>{t.length===0&&!c&&s("/cart")},[t,s,c]),m.useEffect(()=>{it.fromTo(".checkout-step",{opacity:0,y:30},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power2.out"})},[n]);const b=(u,h,g)=>{u==="shipping"?p(j=>({...j,[h]:g})):u==="payment"&&y(j=>({...j,[h]:g}))},v=u=>u===1?x.fullName&&x.email&&x.phone&&x.address&&x.city&&x.zipCode:u===2&&f.method==="credit-card"?f.cardNumber&&f.expiryDate&&f.cvv&&f.cardName:!0,S=()=>{v(n)?i(u=>u+1):alert("請填寫所有必填欄位")},_=()=>{i(u=>u-1)},w=async()=>{o(!0),await new Promise(u=>setTimeout(u,2e3)),o(!1),d(!0),a(),it.fromTo(".success-content",{opacity:0,scale:.8},{opacity:1,scale:1,duration:.8,ease:"back.out(1.7)"})};if(c)return e.jsx("div",{className:"min-h-screen pt-20 flex items-center justify-center bg-lofi",children:e.jsx("div",{className:"text-center max-w-md mx-auto px-4",children:e.jsxs("div",{className:"bg-white/80 border border-gray-200 p-12 rounded-2xl success-content",children:[e.jsx(ae,{className:"w-16 h-16 text-green-500 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-lofi mb-4 font-chinese",children:"訂單完成！"}),e.jsx("p",{className:"text-gray-500 mb-8 font-chinese",children:"感謝您的購買，我們會盡快為您處理訂單。"}),e.jsx("button",{onClick:()=>s("/products"),className:"btn-primary w-full font-chinese",children:"繼續購物"})]})})});const N=[{number:1,title:"配送資訊",active:n>=1,completed:n>1},{number:2,title:"付款方式",active:n>=2,completed:n>2},{number:3,title:"確認訂單",active:n>=3,completed:!1}];return e.jsx("div",{className:"min-h-screen pt-20 pb-12 bg-lofi",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-primary-btn font-chinese",children:"結帳"})}),e.jsx("div",{className:"mb-12",children:e.jsx("div",{className:"flex items-center justify-between",children:N.map((u,h)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${u.completed?"bg-green-500 text-white":u.active?"bg-primary-btn text-white":"bg-gray-200 text-gray-600"}`,children:u.completed?"✓":u.number}),e.jsx("span",{className:`ml-2 font-medium font-chinese ${u.active?"text-primary-btn":"text-gray-600"}`,children:u.title}),h<N.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-4 ${u.completed?"bg-green-500":"bg-gray-200"}`})]},u.number))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[n===1&&e.jsxs("div",{className:"checkout-step glass p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6 font-chinese",children:"配送資訊"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"姓名 *"}),e.jsx("input",{type:"text",value:x.fullName,onChange:u=>b("shipping","fullName",u.target.value),className:"input-glass font-chinese",placeholder:"請輸入您的姓名"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"電子郵件 *"}),e.jsx("input",{type:"email",value:x.email,onChange:u=>b("shipping","email",u.target.value),className:"input-glass",placeholder:"example@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"電話 *"}),e.jsx("input",{type:"tel",value:x.phone,onChange:u=>b("shipping","phone",u.target.value),className:"input-glass",placeholder:"09XX-XXX-XXX"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"地址 *"}),e.jsx("input",{type:"text",value:x.address,onChange:u=>b("shipping","address",u.target.value),className:"input-glass font-chinese",placeholder:"請輸入詳細地址"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"城市 *"}),e.jsx("input",{type:"text",value:x.city,onChange:u=>b("shipping","city",u.target.value),className:"input-glass font-chinese",placeholder:"台北市"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"郵遞區號 *"}),e.jsx("input",{type:"text",value:x.zipCode,onChange:u=>b("shipping","zipCode",u.target.value),className:"input-glass",placeholder:"100"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"備註"}),e.jsx("textarea",{value:x.notes,onChange:u=>b("shipping","notes",u.target.value),className:"input-glass font-chinese",rows:"3",placeholder:"配送備註（選填）"})]})]})]}),n===2&&e.jsxs("div",{className:"checkout-step glass p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6 font-chinese",children:"付款方式"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"credit-card",checked:f.method==="credit-card",onChange:u=>b("payment","method",u.target.value),className:"mr-3"}),e.jsx(Ni,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium font-chinese",children:"信用卡"})]}),e.jsxs("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"bank-transfer",checked:f.method==="bank-transfer",onChange:u=>b("payment","method",u.target.value),className:"mr-3"}),e.jsx("span",{className:"font-medium font-chinese",children:"銀行轉帳"})]})]}),f.method==="credit-card"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"持卡人姓名 *"}),e.jsx("input",{type:"text",value:f.cardName,onChange:u=>b("payment","cardName",u.target.value),className:"input-glass font-chinese",placeholder:"請輸入持卡人姓名"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"卡號 *"}),e.jsx("input",{type:"text",value:f.cardNumber,onChange:u=>b("payment","cardNumber",u.target.value),className:"input-glass",placeholder:"1234 5678 9012 3456"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"有效期限 *"}),e.jsx("input",{type:"text",value:f.expiryDate,onChange:u=>b("payment","expiryDate",u.target.value),className:"input-glass",placeholder:"MM/YY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV *"}),e.jsx("input",{type:"text",value:f.cvv,onChange:u=>b("payment","cvv",u.target.value),className:"input-glass",placeholder:"123"})]})]})]}),n===3&&e.jsxs("div",{className:"checkout-step glass p-8 rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6 font-chinese",children:"確認訂單"}),e.jsx("div",{className:"space-y-4 mb-8",children:t.map(u=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white/50 rounded-lg",children:[e.jsx("img",{src:u.image,alt:u.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 font-chinese",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-600 font-chinese",children:["數量：",u.quantity]})]}),e.jsx("div",{className:"text-lg font-bold text-apricot-600",children:ds(u.price*u.quantity)})]},u.id))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"p-4 bg-white/50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 font-chinese",children:"配送地址"}),e.jsxs("p",{className:"text-sm text-gray-600 font-chinese",children:[x.fullName,e.jsx("br",{}),x.address,e.jsx("br",{}),x.city," ",x.zipCode,e.jsx("br",{}),x.phone]})]}),e.jsxs("div",{className:"p-4 bg-white/50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 font-chinese",children:"付款方式"}),e.jsxs("p",{className:"text-sm text-gray-600 font-chinese",children:[f.method==="credit-card"?"信用卡":"銀行轉帳",f.method==="credit-card"&&f.cardNumber&&e.jsxs("span",{className:"block",children:["**** **** **** ",f.cardNumber.slice(-4)]})]})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("button",{onClick:_,disabled:n===1,className:`btn-secondary ${n===1?"opacity-50 cursor-not-allowed":""} font-chinese`,children:"上一步"}),n<3?e.jsx("button",{onClick:S,className:"btn-primary font-chinese",children:"下一步"}):e.jsx("button",{onClick:w,disabled:l,className:`btn-primary ${l?"opacity-50 cursor-not-allowed":""} font-chinese`,children:l?"處理中...":"確認訂單"})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass p-6 rounded-2xl sticky top-24",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6 font-chinese",children:"訂單摘要"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"商品小計"}),e.jsx("span",{className:"text-gray-900",children:ds(r)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"運費"}),e.jsx("span",{className:"text-gray-900",children:"免費"})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 font-chinese",children:"總計"}),e.jsx("span",{className:"text-lg font-bold text-apricot-600",children:ds(r)})]})})]})]})})]})]})})},ET=()=>{const[s,t]=m.useState(tr),[r,a]=m.useState(""),[n,i]=m.useState("asc"),l=[...s].sort((d,x)=>{if(!r)return 0;let p=d[r],f=x[r];return r==="price"?(p=parseFloat(p),f=parseFloat(f)):typeof p=="string"&&(p=p.toLowerCase(),f=f.toLowerCase()),p<f?n==="asc"?-1:1:p>f?n==="asc"?1:-1:0}),o=d=>{r===d?i(n==="asc"?"desc":"asc"):(a(d),i("asc"))};m.useEffect(()=>{it.fromTo(".product-row",{opacity:0,y:20},{opacity:1,y:0,duration:.4,stagger:.05,ease:"power2.out"})},[l]);const c=d=>d?{text:"有庫存",color:"bg-green-100 text-green-800"}:{text:"缺貨",color:"bg-red-100 text-red-800"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"商品管理"}),e.jsx("p",{className:"text-gray-600 mt-2 font-chinese",children:"管理商品資訊、變體和庫存"})]}),e.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:e.jsxs(re,{to:"/admin/products/add",className:"px-6 py-3 bg-[#cc824d] text-white rounded-xl hover:bg-[#b3723f] transition-all duration-200 shadow-lg font-chinese text-lg font-semibold flex items-center",children:[e.jsx(ge,{className:"w-6 h-6 mr-3"}),"新增商品"]})})]}),e.jsxs("div",{className:"glass rounded-2xl overflow-visible",children:[e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold cursor-pointer hover:bg-[#a65c35] transition-colors font-chinese",onClick:()=>o("name"),children:e.jsxs("div",{className:"flex items-center",children:["商品",e.jsx("span",{className:"ml-2",children:r==="name"?n==="asc"?e.jsx(ha,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(ha,{className:"w-4 h-4 opacity-30"})})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold cursor-pointer hover:bg-[#a65c35] transition-colors font-chinese",onClick:()=>o("category"),children:e.jsxs("div",{className:"flex items-center",children:["分類",e.jsx("span",{className:"ml-2",children:r==="category"?n==="asc"?e.jsx(ha,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(ha,{className:"w-4 h-4 opacity-30"})})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold cursor-pointer hover:bg-[#a65c35] transition-colors font-chinese",onClick:()=>o("price"),children:e.jsxs("div",{className:"flex items-center",children:["價格",e.jsx("span",{className:"ml-2",children:r==="price"?n==="asc"?e.jsx(ha,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(ha,{className:"w-4 h-4 opacity-30"})})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold cursor-pointer hover:bg-[#a65c35] transition-colors font-chinese",onClick:()=>o("inStock"),children:e.jsxs("div",{className:"flex items-center",children:["庫存狀態",e.jsx("span",{className:"ml-2",children:r==="inStock"?n==="asc"?e.jsx(ha,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(ha,{className:"w-4 h-4 opacity-30"})})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold cursor-pointer hover:bg-[#a65c35] transition-colors font-chinese",onClick:()=>o("rating"),children:e.jsxs("div",{className:"flex items-center",children:["評分",e.jsx("span",{className:"ml-2",children:r==="rating"?n==="asc"?e.jsx(ha,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(ha,{className:"w-4 h-4 opacity-30"})})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:l.map((d,x)=>{const p=c(d.inStock);return e.jsxs("tr",{className:"product-row hover:bg-white/30",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:d.image,alt:d.name,className:"w-12 h-12 object-cover rounded-lg mr-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 font-chinese",children:d.name}),e.jsxs("div",{className:"text-sm text-gray-500 font-chinese",children:["ID: ",d.id]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-apricot-100 text-apricot-800 rounded-full font-chinese",children:d.category})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-gray-900 font-bold",children:ds(d.price)}),d.originalPrice&&e.jsx("div",{className:"text-sm text-gray-500 line-through",children:ds(d.originalPrice)})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${p.color} font-chinese`,children:p.text})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm text-gray-900",children:d.rating}),e.jsx("span",{className:"text-yellow-400 ml-1",children:"★"}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",d.reviews,")"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx(re,{to:`/admin/products/edit/${d.id}`,className:"p-2 text-gray-400 hover:text-green-500 transition-colors",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx($e,{className:"w-4 h-4"})})]})})]},d.id)})})]})}),l.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 font-chinese",children:"沒有找到符合條件的商品"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-700 font-chinese",children:["顯示 ",e.jsx("span",{className:"font-medium",children:"1"})," 到 ",e.jsx("span",{className:"font-medium",children:l.length})," 項， 共 ",e.jsx("span",{className:"font-medium",children:l.length})," 項商品"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-sm font-chinese",children:"上一頁"}),e.jsx("button",{className:"btn-secondary text-sm font-chinese",children:"下一頁"})]})]})]})},TT=({variants:s,setVariants:t,skuPrefix:r,basePrice:a,onSKUUpdate:n})=>{const[i,l]=m.useState({}),[o,c]=m.useState([]),d=()=>{if(s.length===0)return[];const u=[],h=(g,j)=>{if(g===s.length){const C=j.map(R=>R.sku||R.value.substring(0,2).toUpperCase()),E=`${r||"PRD"}-${C.join("-")}`;u.push({id:`${E}-${Date.now()}-${Math.random()}`,sku:E,combination:[...j],prices:{costPrice:parseFloat(a==null?void 0:a.costPrice)||0,originalPrice:parseFloat(a==null?void 0:a.originalPrice)||0,salePrice:parseFloat(a==null?void 0:a.salePrice)||0,bronzePrice:parseFloat(a==null?void 0:a.bronzePrice)||0,silverPrice:parseFloat(a==null?void 0:a.silverPrice)||0,goldPrice:parseFloat(a==null?void 0:a.goldPrice)||0},stock:0,images:[]});return}const T=s[g];T.values.forEach(C=>{h(g+1,[...j,{variantName:T.name,value:C.value,sku:C.sku}])})};return s.length>0&&h(0,[]),u};m.useEffect(()=>{const u=d();c(u),n&&n(u)},[s,r,a]),m.useEffect(()=>{n&&n(o)},[o]);const x=()=>{const u={id:Date.now(),name:"",values:[{id:Date.now(),value:"",sku:""}]};t([...s,u])},p=u=>{t(s.filter(h=>h.id!==u))},f=(u,h,g)=>{t(s.map(j=>j.id===u?{...j,[h]:g}:j))},y=u=>{t(s.map(h=>h.id===u?{...h,values:[...h.values,{id:Date.now(),value:"",sku:""}]}:h))},b=(u,h)=>{t(s.map(g=>g.id===u?{...g,values:g.values.filter(j=>j.id!==h)}:g))},v=(u,h,g,j)=>{t(s.map(T=>T.id===u?{...T,values:T.values.map(C=>C.id===h?{...C,[g]:j}:C)}:T))},S=u=>{l(h=>({...h,[u]:!h[u]}))},_=(u,h,g)=>{c(j=>j.map(T=>T.id===u?{...T,prices:{...T.prices,[h]:parseFloat(g)||0}}:T))},w=(u,h)=>{c(g=>g.map(j=>j.id===u?{...j,stock:parseInt(h)||0}:j))},N=(u,h)=>{c(g=>g.map(j=>({...j,prices:{...j.prices,[u]:parseFloat(h)||0}})))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold font-chinese flex items-center",children:[e.jsx(ar,{className:"w-5 h-5 mr-2 text-amber-500"}),"變體屬性設定"]}),e.jsxs("button",{type:"button",onClick:x,className:"btn btn-primary flex items-center text-sm",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"新增變體屬性"]})]}),e.jsx("div",{className:"space-y-4",children:s.map((u,h)=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 bg-white/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500 font-chinese",children:["第",h+1,"層"]}),e.jsx("input",{type:"text",placeholder:"變體名稱 (例如: 顏色、尺寸)",className:"input flex-1",value:u.name,onChange:g=>f(u.id,"name",g.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>S(u.id),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",children:i[u.id]?e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(di,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>p(u.id),className:"p-2 text-red-400 hover:text-red-600 rounded-lg",children:e.jsx(bt,{className:"w-4 h-4"})})]})]}),i[u.id]!==!1&&e.jsxs("div",{className:"space-y-3 pl-4",children:[u.values.map((g,j)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-xs text-gray-400 w-8",children:[j+1,"."]}),e.jsx("input",{type:"text",placeholder:"選項名稱",className:"input flex-1",value:g.value,onChange:T=>v(u.id,g.id,"value",T.target.value)}),e.jsx("input",{type:"text",placeholder:"SKU代碼",className:"input w-24 text-center font-mono text-sm",value:g.sku,onChange:T=>v(u.id,g.id,"sku",T.target.value.toUpperCase())}),e.jsx("button",{type:"button",onClick:()=>b(u.id,g.id),className:"p-2 text-red-400 hover:text-red-600 rounded-lg",disabled:u.values.length<=1,children:e.jsx(bt,{className:"w-4 h-4"})})]},g.id)),e.jsxs("button",{type:"button",onClick:()=>y(u.id),className:"flex items-center text-sm text-amber-600 hover:text-amber-700 font-chinese",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),"新增選項"]})]})]},u.id))}),s.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500 font-chinese",children:[e.jsx(ar,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"尚未設定任何變體屬性"}),e.jsx("p",{className:"text-sm",children:"點擊上方按鈕開始新增變體屬性"})]})]}),o.length>0&&e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold font-chinese flex items-center",children:[e.jsx(_a,{className:"w-5 h-5 mr-2 text-amber-500"}),"SKU 組合管理",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",o.length," 個組合)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500 font-chinese",children:"批量操作:"}),e.jsxs("button",{type:"button",onClick:()=>{const u=prompt("請輸入要套用到所有SKU的成本價:");u!==null&&N("costPrice",u)},className:"btn btn-secondary text-xs",children:[e.jsx($b,{className:"w-3 h-3 mr-1"}),"批量成本價"]}),e.jsxs("button",{type:"button",onClick:()=>{const u=prompt("請輸入要套用到所有SKU的售價:");u!==null&&N("salePrice",u)},className:"btn btn-secondary text-xs",children:[e.jsx($b,{className:"w-3 h-3 mr-1"}),"批量售價"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold font-chinese",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold font-chinese",children:"變體組合"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold font-chinese",children:"成本價"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold font-chinese",children:"原價"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold font-chinese",children:"售價"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold font-chinese",children:"銅卡價"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold font-chinese",children:"銀卡價"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold font-chinese",children:"金卡價"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold font-chinese",children:"庫存"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(u=>e.jsxs("tr",{className:"hover:bg-white/30",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:u.sku})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"space-y-1",children:u.combination.map((h,g)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-gray-500 font-chinese",children:[h.variantName,":"]}),e.jsx("span",{className:"ml-1 font-medium font-chinese",children:h.value})]},g))})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",className:"input w-20 text-sm",placeholder:"0",value:u.prices.costPrice,onChange:h=>_(u.id,"costPrice",h.target.value)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",className:"input w-20 text-sm",placeholder:"0",value:u.prices.originalPrice,onChange:h=>_(u.id,"originalPrice",h.target.value)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",className:"input w-20 text-sm",placeholder:"0",value:u.prices.salePrice,onChange:h=>_(u.id,"salePrice",h.target.value)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",className:"input w-20 text-sm",placeholder:"0",value:u.prices.bronzePrice,onChange:h=>_(u.id,"bronzePrice",h.target.value)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",className:"input w-20 text-sm",placeholder:"0",value:u.prices.silverPrice,onChange:h=>_(u.id,"silverPrice",h.target.value)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",className:"input w-20 text-sm",placeholder:"0",value:u.prices.goldPrice,onChange:h=>_(u.id,"goldPrice",h.target.value)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",className:"input w-16 text-sm",placeholder:"0",value:u.stock,onChange:h=>w(u.id,h.target.value)})})]},u.id))})]})})]})]})},zb=({product:s,sku:t=null,onGenerated:r})=>{var v;const[a,n]=m.useState(!1),[i,l]=m.useState("product_url"),[o,c]=m.useState(null),d=[{id:"product_url",name:"商品頁面連結",description:"生成商品詳情頁面的QR Code",icon:V8},{id:"sku_info",name:"SKU資訊",description:"包含SKU代碼和基本資訊的QR Code",icon:Bt},{id:"product_image",name:"商品圖片",description:"直接連結到商品主圖的QR Code",icon:jo}],x=S=>{var w,N,u,h,g;const _=window.location.origin;switch(S){case"product_url":return{type:"product_url",url:`${_}/products/${((w=s.urlSlug)==null?void 0:w["zh-TW"])||s.id}`,title:((N=s.name)==null?void 0:N["zh-TW"])||s.name,description:"掃描查看商品詳情"};case"sku_info":return{type:"sku_info",sku:(t==null?void 0:t.sku)||`${s.skuPrefix}BASE`,productName:((u=s.name)==null?void 0:u["zh-TW"])||s.name,price:(t==null?void 0:t.originalPrice)||s.baseOriginalPrice,variantInfo:((h=t==null?void 0:t.variantPath)==null?void 0:h.map(j=>`${j.levelName["zh-TW"]}: ${j.optionName["zh-TW"]}`).join(" / "))||"基本款",description:"SKU商品資訊"};case"product_image":return{type:"product_image",imageUrl:s.mainImageUrl||s.images&&s.images[0]||"",productName:((g=s.name)==null?void 0:g["zh-TW"])||s.name,description:"商品圖片"};default:return null}},p=S=>{encodeURIComponent(JSON.stringify(S));const _=`
      <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200">
        <rect width="200" height="200" fill="white"/>
        <rect x="20" y="20" width="20" height="20" fill="black"/>
        <rect x="60" y="20" width="20" height="20" fill="black"/>
        <rect x="100" y="20" width="20" height="20" fill="black"/>
        <rect x="140" y="20" width="20" height="20" fill="black"/>
        <rect x="20" y="60" width="20" height="20" fill="black"/>
        <rect x="100" y="60" width="20" height="20" fill="black"/>
        <rect x="160" y="60" width="20" height="20" fill="black"/>
        <rect x="20" y="100" width="20" height="20" fill="black"/>
        <rect x="60" y="100" width="20" height="20" fill="black"/>
        <rect x="140" y="100" width="20" height="20" fill="black"/>
        <rect x="20" y="140" width="20" height="20" fill="black"/>
        <rect x="60" y="140" width="20" height="20" fill="black"/>
        <rect x="100" y="140" width="20" height="20" fill="black"/>
        <rect x="160" y="140" width="20" height="20" fill="black"/>
        <rect x="40" y="160" width="60" height="20" fill="black"/>
        <rect x="120" y="160" width="60" height="20" fill="black"/>
        <text x="100" y="190" font-family="Arial" font-size="8" text-anchor="middle" fill="black">
          ${S.type.toUpperCase()}
        </text>
      </svg>
    `;return`data:image/svg+xml;base64,${btoa(_)}`},f=async()=>{n(!0);try{const S=x(i);if(!S)throw new Error("無效的QR Code類型");await new Promise(N=>setTimeout(N,1500));const _=p(S),w={id:Date.now(),type:i,data:S,imageUrl:_,productId:s.id,skuId:(t==null?void 0:t.id)||null,createdAt:new Date().toISOString()};c(w),r&&r(w)}catch(S){console.error("QR Code生成失敗:",S),alert("QR Code生成失敗，請稍後再試")}finally{n(!1)}},y=()=>{if(!o)return;const S=document.createElement("a");S.href=o.imageUrl,S.download=`qr-${o.type}-${(t==null?void 0:t.sku)||s.skuPrefix||"product"}.svg`,document.body.appendChild(S),S.click(),document.body.removeChild(S)},b=()=>{if(!o)return;const S=JSON.stringify(o.data,null,2);navigator.clipboard.writeText(S).then(()=>{alert("QR Code數據已複製到剪貼簿")})};return e.jsxs("div",{className:"qr-generator glass rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(qu,{className:"w-6 h-6 text-[#cc824d] mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"QR Code 生成器"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"選擇QR Code類型"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:d.map(S=>{const _=S.icon;return e.jsxs("label",{className:"relative",children:[e.jsx("input",{type:"radio",name:"qr-type",value:S.id,checked:i===S.id,onChange:w=>l(w.target.value),className:"sr-only"}),e.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${i===S.id?"border-[#cc824d] bg-[#cc824d]/10":"border-gray-300 hover:border-[#cc824d]/50"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(_,{className:`w-5 h-5 mr-3 mt-0.5 ${i===S.id?"text-[#cc824d]":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium font-chinese ${i===S.id?"text-[#cc824d]":"text-gray-900"}`,children:S.name}),e.jsx("div",{className:"text-sm text-gray-600 font-chinese",children:S.description})]}),i===S.id&&e.jsx(ae,{className:"w-5 h-5 text-[#cc824d] ml-auto"})]})})]},S.id)})})]}),e.jsx("div",{className:"flex items-center space-x-3 mb-6",children:e.jsx("button",{onClick:f,disabled:a,className:"flex-1 px-4 py-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-chinese flex items-center justify-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"生成中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qu,{className:"w-5 h-5 mr-2"}),"生成 QR Code"]})})}),o&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 font-chinese",children:"生成結果"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:b,className:"px-3 py-1 text-sm text-[#cc824d] border border-[#cc824d] rounded hover:bg-[#cc824d] hover:text-white transition-colors font-chinese",children:"複製數據"}),e.jsxs("button",{onClick:y,className:"px-3 py-1 text-sm bg-[#cc824d] text-white rounded hover:bg-[#b3723f] transition-colors font-chinese flex items-center",children:[e.jsx(vi,{className:"w-4 h-4 mr-1"}),"下載"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:o.imageUrl,alt:"Generated QR Code",className:"w-48 h-48 mx-auto border rounded-lg shadow-md"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 font-chinese",children:(v=d.find(S=>S.id===o.type))==null?void 0:v.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"類型"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.type})]}),o.data.url&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"連結"}),e.jsx("p",{className:"text-sm text-gray-900 break-all",children:o.data.url})]}),o.data.sku&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"SKU"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.data.sku})]}),o.data.variantInfo&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"變體資訊"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.data.variantInfo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"生成時間"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(o.createdAt).toLocaleString("zh-TW")})]})]})]})]})]})},DT=[{id:1,name:{"zh-TW":"配件",en:"Accessories"},slug:{"zh-TW":"accessories",en:"accessories"},description:{"zh-TW":"各種精美配件",en:"Various accessories"},parentId:null,level:0,sortOrder:1,isActive:!0,productCount:15,children:[{id:11,name:{"zh-TW":"首飾",en:"Jewelry"},slug:{"zh-TW":"jewelry",en:"jewelry"},description:{"zh-TW":"項鍊、耳環等首飾",en:"Necklaces, earrings and more"},parentId:1,level:1,sortOrder:1,isActive:!0,productCount:8,children:[]},{id:12,name:{"zh-TW":"包包",en:"Bags"},slug:{"zh-TW":"bags",en:"bags"},description:{"zh-TW":"手袋、背包等",en:"Handbags, backpacks and more"},parentId:1,level:1,sortOrder:2,isActive:!0,productCount:7,children:[]}]},{id:2,name:{"zh-TW":"家居",en:"Home"},slug:{"zh-TW":"home",en:"home"},description:{"zh-TW":"家居用品與裝飾",en:"Home goods and decorations"},parentId:null,level:0,sortOrder:2,isActive:!0,productCount:23,children:[{id:21,name:{"zh-TW":"裝飾品",en:"Decorations"},slug:{"zh-TW":"decorations",en:"decorations"},description:{"zh-TW":"各種家居裝飾品",en:"Various home decorations"},parentId:2,level:1,sortOrder:1,isActive:!0,productCount:12,children:[]},{id:22,name:{"zh-TW":"收納用品",en:"Storage"},slug:{"zh-TW":"storage",en:"storage"},description:{"zh-TW":"收納盒、整理用品",en:"Storage boxes and organizers"},parentId:2,level:1,sortOrder:2,isActive:!0,productCount:11,children:[]}]},{id:3,name:{"zh-TW":"香氛",en:"Fragrance"},slug:{"zh-TW":"fragrance",en:"fragrance"},description:{"zh-TW":"香水、香氛用品",en:"Perfumes and fragrance products"},parentId:null,level:0,sortOrder:3,isActive:!0,productCount:18,children:[]}],AT=({selectedCategories:s=[],onCategoriesChange:t,multiple:r=!0})=>{const[a,n]=m.useState(DT),[i,l]=m.useState(new Set([1,2])),[o,c]=m.useState(!1),[d,x]=m.useState(null),[p,f]=m.useState({name:{"zh-TW":"",en:""},slug:{"zh-TW":"",en:""},description:{"zh-TW":"",en:""},parentId:null,isActive:!0}),y=u=>{const h=new Set(i);h.has(u)?h.delete(u):h.add(u),l(h)},b=u=>{if(t)if(r){const h=s.includes(u)?s.filter(g=>g!==u):[...s,u];t(h)}else t([u])},v=(u=a)=>{let h=[];return u.forEach(g=>{h.push(g),g.children&&g.children.length>0&&(h=h.concat(v(g.children)))}),h},S=u=>u.toLowerCase().replace(/[\u4e00-\u9fff]/g,h=>encodeURIComponent(h)).replace(/[^a-z0-9%]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");m.useEffect(()=>{p.name["zh-TW"]&&!p.slug["zh-TW"]&&f(u=>({...u,slug:{...u.slug,"zh-TW":S(u.name["zh-TW"])}})),p.name.en&&!p.slug.en&&f(u=>({...u,slug:{...u.slug,en:S(u.name.en)}}))},[p.name]);const _=()=>{if(!p.name["zh-TW"]||!p.name.en){alert("請填寫完整的分類名稱");return}const u={...p,id:Date.now(),level:p.parentId?1:0,sortOrder:a.length+1,productCount:0,children:[]};p.parentId?n(h=>h.map(g=>g.id===p.parentId?{...g,children:[...g.children,u]}:g)):n(h=>[...h,u]),c(!1),f({name:{"zh-TW":"",en:""},slug:{"zh-TW":"",en:""},description:{"zh-TW":"",en:""},parentId:null,isActive:!0})},w=(u,h=0)=>u.map(g=>e.jsxs("div",{className:`${h>0?"ml-6":""}`,children:[e.jsxs("div",{className:`flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors ${s.includes(g.id)?"bg-[#cc824d]/10 border border-[#cc824d]":"border border-transparent"}`,children:[g.children&&g.children.length>0&&e.jsx("button",{type:"button",onClick:()=>y(g.id),className:"p-1 text-gray-400 hover:text-gray-600 mr-2",children:i.has(g.id)?e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(di,{className:"w-4 h-4"})}),e.jsx(nw,{className:`w-5 h-5 mr-3 ${s.includes(g.id)?"text-[#cc824d]":"text-gray-400"}`}),e.jsx("input",{type:r?"checkbox":"radio",name:"category",checked:s.includes(g.id),onChange:()=>b(g.id),className:"mr-3 rounded"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 font-chinese",children:[g.name["zh-TW"]," / ",g.name.en]}),e.jsx("p",{className:"text-sm text-gray-600 font-chinese",children:g.description["zh-TW"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded font-chinese",children:[g.productCount," 件商品"]}),e.jsx("button",{type:"button",onClick:()=>x(g),className:"p-1 text-gray-400 hover:text-blue-500",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>N(g.id),className:"p-1 text-gray-400 hover:text-red-500",children:e.jsx($e,{className:"w-4 h-4"})})]})]})})]}),g.children&&g.children.length>0&&i.has(g.id)&&e.jsx("div",{className:"mt-2",children:w(g.children,h+1)})]},g.id)),N=u=>{if(confirm("確定要刪除這個分類嗎？這將會影響相關的商品。")){const h=g=>g.filter(j=>j.id!==u).map(j=>({...j,children:j.children?h(j.children):[]}));n(h(a))}};return e.jsxs("div",{className:"category-manager space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"分類管理"}),e.jsxs("button",{type:"button",onClick:()=>c(!0),className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors font-chinese flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"新增分類"]})]}),e.jsx("div",{className:"glass rounded-lg p-4 max-h-96 overflow-y-auto",children:a.length>0?w(a):e.jsx("div",{className:"text-center py-8 text-gray-500 font-chinese",children:"尚未建立任何分類"})}),s.length>0&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2 font-chinese",children:"已選分類："}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(u=>{const h=v().find(g=>g.id===u);return h?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-200 text-blue-800 font-chinese",children:[e.jsx(_a,{className:"w-4 h-4 mr-1"}),h.name["zh-TW"],e.jsx("button",{type:"button",onClick:()=>b(u),className:"ml-2 hover:text-blue-600",children:e.jsx(bt,{className:"w-3 h-3"})})]},u):null})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 font-chinese",children:"新增分類"}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(bt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"父分類（可選）"}),e.jsxs("select",{value:p.parentId||"",onChange:u=>f(h=>({...h,parentId:u.target.value?parseInt(u.target.value):null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese",children:[e.jsx("option",{value:"",children:"頂級分類"}),a.map(u=>e.jsx("option",{value:u.id,children:u.name["zh-TW"]},u.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["分類名稱 (中文) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.name["zh-TW"],onChange:u=>f(h=>({...h,name:{...h.name,"zh-TW":u.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese",placeholder:"例如：配件"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["分類名稱 (英文) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.name.en,onChange:u=>f(h=>({...h,name:{...h.name,en:u.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"e.g., Accessories"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"URL別名 (中文)"}),e.jsx("input",{type:"text",value:p.slug["zh-TW"],onChange:u=>f(h=>({...h,slug:{...h.slug,"zh-TW":u.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"accessories"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"URL別名 (英文)"}),e.jsx("input",{type:"text",value:p.slug.en,onChange:u=>f(h=>({...h,slug:{...h.slug,en:u.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"accessories"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"分類描述 (中文)"}),e.jsx("textarea",{value:p.description["zh-TW"],onChange:u=>f(h=>({...h,description:{...h.description,"zh-TW":u.target.value}})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese resize-none",placeholder:"分類描述"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"分類描述 (英文)"}),e.jsx("textarea",{value:p.description.en,onChange:u=>f(h=>({...h,description:{...h.description,en:u.target.value}})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent resize-none",placeholder:"Category description"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors font-chinese",children:"取消"}),e.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors font-chinese",children:"保存分類"})]})]})})]})},IT=({initialStatus:s="draft",onStatusChange:t,stockLevel:r=0,publishDate:a=null,language:n="zh-TW"})=>{const[i,l]=m.useState(s),[o,c]=m.useState(a?new Date(a).toISOString().slice(0,16):""),[d,x]=m.useState([{status:"draft",timestamp:new Date,user:"系統管理員",reason:"商品建立"}]),[p,f]=m.useState(!1),[y,b]=m.useState(!1),v={draft:{name:{"zh-TW":"草稿",en:"Draft"},color:"gray",bgColor:"bg-gray-100",textColor:"text-gray-800",borderColor:"border-gray-300",icon:be,description:"商品尚未發布，僅管理員可見"},active:{name:{"zh-TW":"啟用",en:"Active"},color:"green",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-300",icon:ae,description:"商品已發布，對顧客可見"},inactive:{name:{"zh-TW":"停用",en:"Inactive"},color:"red",bgColor:"bg-red-100",textColor:"text-red-800",borderColor:"border-red-300",icon:Zs,description:"商品已下架，對顧客不可見"},scheduled:{name:{"zh-TW":"排程發布",en:"Scheduled"},color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-800",borderColor:"border-blue-300",icon:Ir,description:"商品將在指定時間發布"},out_of_stock:{name:{"zh-TW":"缺貨",en:"Out of Stock"},color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-300",icon:te,description:"商品庫存不足，建議補貨"}};m.useEffect(()=>{r<=0&&i==="active"?(b(!0),it.fromTo(".stock-alert",{scale:.8,opacity:0},{scale:1,opacity:1,duration:.4,ease:"back.out(1.7)"})):b(!1)},[r,i]);const S=(j,T="")=>{if(j===i||j==="active"&&r<=0&&!window.confirm("商品庫存為0，確定要啟用嗎？"))return;const C=i;l(j);const E={status:j,previousStatus:C,timestamp:new Date,user:"當前用戶",reason:T||_(j)};x(R=>[E,...R]),it.fromTo(".status-indicator",{scale:.8,rotation:-10},{scale:1,rotation:0,duration:.5,ease:"back.out(1.7)"}),t==null||t(j,E)},_=j=>({draft:"設為草稿狀態",active:"商品上架",inactive:"商品下架",scheduled:"設定排程發布"})[j]||"狀態變更",w=()=>{if(!o){alert("請選擇發布時間");return}const j=new Date(o);if(j<=new Date){alert("發布時間必須是未來時間");return}S("scheduled",`排程於 ${j.toLocaleString("zh-TW")} 發布`),f(!1)},N=j=>{var C,E;const T=v[j];return((C=T==null?void 0:T.name)==null?void 0:C[n])||((E=T==null?void 0:T.name)==null?void 0:E["zh-TW"])||j},h=(()=>v[i]||v.draft)(),g=h.icon;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"商品狀態"}),e.jsxs("div",{className:"status-indicator flex items-center space-x-4 mb-4",children:[e.jsxs("div",{className:`flex items-center px-4 py-2 rounded-lg border-2 ${h.bgColor} ${h.borderColor}`,children:[e.jsx(g,{className:`w-5 h-5 mr-2 ${h.textColor}`}),e.jsx("span",{className:`font-medium ${h.textColor} font-chinese`,children:N(i)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 font-chinese",children:h.description}),i==="scheduled"&&o&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1 font-chinese",children:["發布時間: ",new Date(o).toLocaleString("zh-TW")]})]})]}),y&&e.jsx("div",{className:"stock-alert bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(te,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800 font-chinese",children:"庫存警告"}),e.jsxs("p",{className:"text-sm text-yellow-700 font-chinese",children:["商品庫存為 ",r,"，建議補貨或下架商品"]}),e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsx("button",{onClick:()=>S("inactive","因庫存不足下架"),className:"text-xs px-3 py-1 bg-yellow-200 hover:bg-yellow-300 text-yellow-800 rounded font-chinese",children:"暫時下架"}),e.jsx("button",{onClick:()=>b(!1),className:"text-xs px-3 py-1 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded font-chinese",children:"稍後處理"})]})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.entries(v).map(([j,T])=>{if(j===i||j==="out_of_stock")return null;const C=T.icon,E=j==="active"&&r<=0;return e.jsxs("button",{type:"button",onClick:()=>S(j),disabled:E,className:`flex items-center px-3 py-2 rounded-lg border transition-colors duration-200 font-chinese text-sm ${E?"bg-gray-100 text-gray-400 cursor-not-allowed border-gray-200":`${T.bgColor} ${T.textColor} ${T.borderColor} hover:opacity-80`}`,children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),N(j)]},j)}),!p&&e.jsxs("button",{type:"button",onClick:()=>f(!0),className:"flex items-center px-3 py-2 rounded-lg border border-blue-300 bg-blue-100 text-blue-800 hover:opacity-80 transition-colors duration-200 font-chinese text-sm",children:[e.jsx(Ir,{className:"w-4 h-4 mr-1"}),"排程發布"]})]}),p&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-3 font-chinese",children:"設定發布時間"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"datetime-local",value:o,onChange:j=>c(j.target.value),min:new Date().toISOString().slice(0,16),className:"px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200 font-chinese text-sm",children:"確認"}),e.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors duration-200 font-chinese text-sm",children:"取消"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"狀態變更記錄"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:d.map((j,T)=>{const C=v[j.status]||v.draft,E=C.icon;return e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`p-1 rounded-full ${C.bgColor}`,children:e.jsx(E,{className:`w-4 h-4 ${C.textColor}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 font-chinese",children:j.previousStatus?`${N(j.previousStatus)} → ${N(j.status)}`:N(j.status)}),e.jsx("time",{className:"text-xs text-gray-500",children:j.timestamp.toLocaleString("zh-TW")})]}),e.jsx("p",{className:"text-sm text-gray-600 font-chinese",children:j.reason}),e.jsxs("p",{className:"text-xs text-gray-500 font-chinese",children:["操作者: ",j.user]})]})]},T)})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"自動狀態規則"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-chinese",children:"庫存為0時自動下架"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-chinese",children:"低庫存時發送通知"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-chinese",children:"排程時間到時自動發布"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PT=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),Wb=s=>{const t=PT(s);return t.charAt(0).toUpperCase()+t.slice(1)},mw=(...s)=>s.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),MT=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=m.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:l,...o},c)=>m.createElement("svg",{ref:c,...OT,width:t,height:t,stroke:s,strokeWidth:a?Number(r)*24/Number(t):r,className:mw("lucide",n),...!i&&!MT(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,x])=>m.createElement(d,x)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(s,t)=>{const r=m.forwardRef(({className:a,...n},i)=>m.createElement(LT,{ref:i,iconNode:t,className:mw(`lucide-${RT(Wb(s))}`,`lucide-${s}`,a),...n}));return r.displayName=Wb(s),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],$T=He("arrow-right-left",FT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],UT=He("check",VT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zT=He("chevron-down",BT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],uw=He("circle-alert",WT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],No=He("circle-check-big",GT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Gb=He("circle-x",HT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Th=He("clipboard",qT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cf=He("clock",YT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],bp=He("credit-card",ZT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zd=He("download",QT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Cx=He("eye",XT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Dd=He("file-text",KT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],eD=He("package-check",JT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]],sD=He("package-x",tD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wd=He("plus",rD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],xw=He("receipt",aD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gd=He("refresh-cw",nD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Hb=He("search",iD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oD=He("settings",lD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],qb=He("shopping-bag",cD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Dh=He("shopping-cart",dD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],df=He("square-pen",mD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],mf=He("trash-2",uD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],hD=He("trending-down",xD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],hw=He("trending-up",pD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fD=He("triangle-alert",gD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bD=He("users",yD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yb=He("x",vD),xe=({options:s=[],value:t="",onChange:r=()=>{},placeholder:a="請選擇...",searchPlaceholder:n="搜尋選項...",className:i="",disabled:l=!1,allowClear:o=!1,multiple:c=!1,maxDisplayOptions:d=10,createNewOption:x=null})=>{const[p,f]=m.useState(!1),[y,b]=m.useState(""),[v,S]=m.useState(s),[_,w]=m.useState(c?Array.isArray(t)?t:[]:[t]),[N,u]=m.useState({top:0,left:0,width:0}),h=m.useRef(null),g=m.useRef(null),j=m.useRef(null),C=(D=>D.map(M=>typeof M=="string"?{value:M,label:M}:M))(s);m.useEffect(()=>{const D=C.filter(M=>M.label.toLowerCase().includes(y.toLowerCase())||M.value.toLowerCase().includes(y.toLowerCase()));S(D)},[y,s]),m.useEffect(()=>{w(c?Array.isArray(t)?t:[]:[t])},[t,c]);const E=()=>{if(h.current){const D=h.current.getBoundingClientRect(),M=window.innerHeight,A=300;let V=D.bottom+2,B=D.left;V+A>M&&(V=D.top-A-2),B+D.width>window.innerWidth&&(B=window.innerWidth-D.width-10),B<10&&(B=10),u({top:Math.max(V,10),left:B,width:D.width})}},R=()=>{l||(p?f(!1):(f(!0),requestAnimationFrame(()=>{E()})))};m.useEffect(()=>{p&&j.current&&(E(),it.fromTo(j.current,{opacity:0,y:-10,scale:.95},{opacity:1,y:0,scale:1,duration:.2,ease:"power2.out"}))},[p]),m.useEffect(()=>{const D=V=>{h.current&&!h.current.contains(V.target)&&j.current&&!j.current.contains(V.target)&&(f(!1),b(""))},M=()=>{p&&E()},A=()=>{p&&E()};return p&&(document.addEventListener("mousedown",D),document.addEventListener("scroll",M,!0),window.addEventListener("scroll",M),window.addEventListener("resize",A),requestAnimationFrame(E)),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("scroll",M,!0),window.removeEventListener("scroll",M),window.removeEventListener("resize",A)}},[p]);const k=D=>{if(c){const M=_.includes(D.value)?_.filter(A=>A!==D.value):[..._,D.value];w(M),r(M)}else w([D.value]),r(D.value),f(!1),b("")},O=D=>{D.stopPropagation(),c?(w([]),r([])):(w([""]),r(""))},P=()=>{if(x&&y.trim()){const D=x(y.trim());D&&(k(D),b(""))}},$=()=>{if(c){if(_.length===0)return a;if(_.length===1){const D=C.find(M=>M.value===_[0]);return D?D.label:_[0]}return`已選擇 ${_.length} 項`}else{if(!_[0])return a;const D=C.find(M=>M.value===_[0]);return D?D.label:_[0]}},I=D=>_.includes(D),L=x&&y.trim()&&!v.some(D=>D.label.toLowerCase()===y.toLowerCase());return e.jsxs("div",{ref:h,className:`relative ${i}`,style:{zIndex:p?9999:"auto"},children:[e.jsxs("div",{onClick:R,className:`
          relative w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg 
          cursor-pointer transition-all duration-200 font-chinese
          glass-light hover:border-button-300 hover:shadow-md
          ${l?"opacity-50 cursor-not-allowed":""}
          ${p?"border-button-500 shadow-lg ring-2 ring-button-100":""}
        `,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`truncate ${!_[0]&&!c?"text-gray-500":"text-gray-900"}`,children:$()}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[o&&(_[0]||c&&_.length>0)&&e.jsx("button",{onClick:O,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",type:"button",children:e.jsx(Yb,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),e.jsx(zT,{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${p?"transform rotate-180":""}`})]})]}),c&&_.length>1&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[_.slice(0,3).map(D=>{const M=C.find(A=>A.value===D);return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-button-100 text-button-800 text-xs rounded-full",children:[M?M.label:D,e.jsx("button",{onClick:A=>{A.stopPropagation(),k({value:D})},className:"hover:bg-button-200 rounded-full p-0.5",children:e.jsx(Yb,{className:"w-3 h-3"})})]},D)}),_.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",_.length-3," 更多"]})]})]}),p&&Zo.createPortal(e.jsxs("div",{ref:j,className:"fixed z-[99999] glass-dropdown",style:{top:`${N.top}px`,left:`${N.left}px`,width:`${N.width}px`,zIndex:99999,minWidth:"200px"},children:[e.jsx("div",{className:"glass-dropdown-search",children:e.jsxs("div",{className:"relative",children:[e.jsx(Hb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 w-4 h-4 z-10"}),e.jsx("input",{ref:g,type:"text",value:y,onChange:D=>b(D.target.value),placeholder:n,className:"font-chinese",autoFocus:!0})]})}),e.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[L&&e.jsxs("button",{onClick:P,className:"glass-dropdown-create font-chinese group",children:[e.jsx("div",{className:"w-4 h-4 border-2 rounded-full flex items-center justify-center transition-colors",style:{borderColor:"#CC824D"},children:e.jsx("div",{className:"w-1 h-1 rounded-full transition-colors",style:{backgroundColor:"#CC824D"}})}),e.jsxs("span",{className:"group-hover:text-orange-800",children:['創建 "',y,'"']})]}),v.slice(0,d).map(D=>e.jsxs("button",{onClick:()=>k(D),className:`glass-dropdown-option font-chinese ${I(D.value)?"selected":""}`,children:[e.jsx("span",{className:"truncate",children:D.label}),I(D.value)&&e.jsx(UT,{className:"w-4 h-4 flex-shrink-0 ml-2",style:{color:"#CC824D"}})]},D.value)),v.length===0&&!L&&e.jsxs("div",{className:"glass-dropdown-empty font-chinese",children:[e.jsx(Hb,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"沒有找到符合的選項"})]}),v.length>d&&e.jsxs("div",{className:"glass-dropdown-more font-chinese",children:["還有 ",v.length-d," 個選項..."]})]})]}),document.body)]})},jD=()=>{const s=ns(),[t,r]=m.useState(!1),[a,n]=m.useState([]),[i,l]=m.useState("basic"),[o,c]=m.useState({skuPrefix:"",name:{"zh-TW":"",en:""},description:{"zh-TW":"",en:""},shortDescription:{"zh-TW":"",en:""},category:"",categoryIds:[],tags:[],baseCostPrice:"",baseOriginalPrice:"",baseSalePrice:"",baseBronzePrice:"",baseSilverPrice:"",baseGoldPrice:"",metaTitle:{"zh-TW":"",en:""},metaDescription:{"zh-TW":"",en:""},urlSlug:{"zh-TW":"",en:""},status:"draft",publishDate:null,inStock:!0,featured:!1,sortWeight:0,specifications:{material:"",dimensions:"",weight:"",color:"",origin:""}}),[d,x]=m.useState([]),[p,f]=m.useState([]),[y,b]=m.useState(""),[v,S]=m.useState({}),[_,w]=m.useState("zh-TW"),N=[{id:"basic",name:"基本資訊",icon:Bt},{id:"categories",name:"分類管理",icon:nw},{id:"variants",name:"變體管理",icon:ar},{id:"pricing",name:"價格設定",icon:We},{id:"status",name:"狀態管理",icon:$o},{id:"qr",name:"QR Code",icon:qu},{id:"seo",name:"SEO設定",icon:Jo}];m.useEffect(()=>{it.fromTo(".add-product-content",{opacity:0,y:20},{opacity:1,y:0,duration:.6,ease:"power2.out"})},[]);const u=[{value:"配件",label:"配件"},{value:"家居",label:"家居"},{value:"香氛",label:"香氛"},{value:"服飾",label:"服飾"},{value:"茶品",label:"茶品"},{value:"生活用品",label:"生活用品"}],h=(P,$,I=null)=>{c(L=>I?{...L,[P]:{...L[P],[I]:$}}:{...L,[P]:$}),v[P]&&S(L=>({...L,[P]:""}))},g=P=>P.toLowerCase().replace(/[\u4e00-\u9fff]/g,$=>encodeURIComponent($)).replace(/[^a-z0-9%]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");m.useEffect(()=>{o.name["zh-TW"]&&!o.urlSlug["zh-TW"]&&h("urlSlug",g(o.name["zh-TW"]),"zh-TW"),o.name.en&&!o.urlSlug.en&&h("urlSlug",g(o.name.en),"en")},[o.name]);const j=P=>{Array.from(P.target.files).forEach(I=>{if(I.type.startsWith("image/")){const L=new FileReader;L.onload=D=>{n(M=>[...M,{id:Date.now()+Math.random(),url:D.target.result,file:I,name:I.name}])},L.readAsDataURL(I)}})},T=P=>{n($=>$.filter(I=>I.id!==P))},C=()=>{y.trim()&&!o.tags.includes(y.trim())&&(c(P=>({...P,tags:[...P.tags,y.trim()]})),b(""))},E=P=>{c($=>({...$,tags:$.tags.filter(I=>I!==P)}))},R=()=>{var $,I,L,D,M,A,V;const P={};return($=o.name["zh-TW"])!=null&&$.trim()||(P.nameZh="商品名稱(中文)為必填項目"),(I=o.name.en)!=null&&I.trim()||(P.nameEn="商品名稱(英文)為必填項目"),(L=o.description["zh-TW"])!=null&&L.trim()||(P.descriptionZh="商品描述(中文)為必填項目"),(D=o.description.en)!=null&&D.trim()||(P.descriptionEn="商品描述(英文)為必填項目"),o.category||(P.category="請選擇商品分類"),(M=o.skuPrefix)!=null&&M.trim()||(P.skuPrefix="SKU前綴為必填項目"),(!o.baseOriginalPrice||parseFloat(o.baseOriginalPrice)<=0)&&(P.baseOriginalPrice="請輸入有效的基礎原價"),(A=o.urlSlug["zh-TW"])!=null&&A.trim()||(P.urlSlugZh="URL別名(中文)為必填項目"),(V=o.urlSlug.en)!=null&&V.trim()||(P.urlSlugEn="URL別名(英文)為必填項目"),a.length===0&&(P.images="請至少上傳一張商品圖片"),S(P),Object.keys(P).length===0},k=async P=>{if(P.preventDefault(),!R()){alert("請修正表單錯誤後再提交");return}r(!0);try{await new Promise(I=>setTimeout(I,2e3));const $={...o,images:a.map(I=>I.url),variants:d,skus:p,createdAt:new Date().toISOString()};console.log("商品資料:",$),s("/admin/products",{state:{message:"商品創建成功！"}})}catch($){console.error("創建商品失敗:",$),S({submit:"創建商品失敗，請稍後再試"})}finally{r(!1)}},O=()=>{var P,$,I,L;switch(i){case"basic":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["SKU前綴 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.skuPrefix,onChange:D=>h("skuPrefix",D.target.value.toUpperCase()),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors ${v.skuPrefix?"border-red-500":"border-gray-300"}`,placeholder:"例如：WHT",maxLength:"10"}),v.skuPrefix&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.skuPrefix})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["商品名稱 (中文) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.name["zh-TW"],onChange:D=>h("name",D.target.value,"zh-TW"),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese ${v.nameZh?"border-red-500":"border-gray-300"}`,placeholder:"請輸入商品名稱"}),v.nameZh&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.nameZh})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["商品名稱 (英文) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.name.en,onChange:D=>h("name",D.target.value,"en"),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors ${v.nameEn?"border-red-500":"border-gray-300"}`,placeholder:"Enter product name"}),v.nameEn&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.nameEn})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["商品描述 (中文) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:o.description["zh-TW"],onChange:D=>h("description",D.target.value,"zh-TW"),rows:4,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese resize-none ${v.descriptionZh?"border-red-500":"border-gray-300"}`,placeholder:"請輸入商品描述"}),v.descriptionZh&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.descriptionZh})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["商品描述 (英文) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:o.description.en,onChange:D=>h("description",D.target.value,"en"),rows:4,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors resize-none ${v.descriptionEn?"border-red-500":"border-gray-300"}`,placeholder:"Enter product description"}),v.descriptionEn&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.descriptionEn})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["商品分類 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(xe,{options:[{value:"",label:"請選擇分類"},...u.map(D=>({value:D.value,label:D.label}))],value:o.category,onChange:D=>h("category",D),placeholder:"搜尋商品分類...",className:`w-full ${v.category?"border-red-500":""}`}),v.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.category})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["商品圖片 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[#cc824d] transition-colors",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:j,className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsx(jo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 font-chinese mb-2",children:"點擊或拖拽圖片到此處"}),e.jsx("p",{className:"text-xs text-gray-500 font-chinese",children:"支援 JPG、PNG 格式，建議 4:3 比例"})]})]}),a.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:a.map((D,M)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:D.url,alt:D.name,className:"w-full h-24 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>T(D.id),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:e.jsx(bt,{className:"w-3 h-3"})}),M===0&&e.jsx("div",{className:"absolute bottom-1 left-1 px-2 py-1 bg-black bg-opacity-50 text-white text-xs rounded font-chinese",children:"主圖"})]},D.id))}),v.images&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.images})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"商品標籤"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:y,onChange:D=>b(D.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese",placeholder:"輸入標籤名稱",onKeyPress:D=>D.key==="Enter"&&(D.preventDefault(),C())}),e.jsx("button",{type:"button",onClick:C,className:"px-4 py-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors font-chinese",children:"新增"})]}),o.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:o.tags.map((D,M)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-[#cc824d] text-white font-chinese",children:[D,e.jsx("button",{type:"button",onClick:()=>E(D),className:"ml-2 hover:text-gray-200",children:e.jsx(bt,{className:"w-4 h-4"})})]},M))})]})]});case"categories":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"商品分類管理"}),e.jsx(AT,{selectedCategories:o.categoryIds,onCategoriesChange:D=>c(M=>({...M,categoryIds:D})),language:_})]});case"variants":return e.jsx(TT,{variants:d,setVariants:x,skuPrefix:o.skuPrefix,basePrice:{costPrice:o.baseCostPrice,originalPrice:o.baseOriginalPrice,salePrice:o.baseSalePrice,bronzePrice:o.baseBronzePrice,silverPrice:o.baseSilverPrice,goldPrice:o.baseGoldPrice}});case"pricing":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"價格設定"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"基礎成本價"}),e.jsx("input",{type:"number",value:o.baseCostPrice,onChange:D=>h("baseCostPrice",D.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors",placeholder:"0",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["基礎原價 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:o.baseOriginalPrice,onChange:D=>h("baseOriginalPrice",D.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors ${v.baseOriginalPrice?"border-red-500":"border-gray-300"}`,placeholder:"0",min:"0",step:"0.01"}),v.baseOriginalPrice&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.baseOriginalPrice})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"基礎優惠價"}),e.jsx("input",{type:"number",value:o.baseSalePrice,onChange:D=>h("baseSalePrice",D.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors",placeholder:"0",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"銅牌會員價"}),e.jsx("input",{type:"number",value:o.baseBronzePrice,onChange:D=>h("baseBronzePrice",D.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors",placeholder:"0",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"銀牌會員價"}),e.jsx("input",{type:"number",value:o.baseSilverPrice,onChange:D=>h("baseSilverPrice",D.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors",placeholder:"0",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"黃金會員價"}),e.jsx("input",{type:"number",value:o.baseGoldPrice,onChange:D=>h("baseGoldPrice",D.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors",placeholder:"0",min:"0",step:"0.01"})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 font-chinese",children:"💡 提示：這些是基礎價格，在「變體管理」分頁中，每個SKU都可以基於這些價格進行個別微調。"})})]});case"status":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"商品狀態管理"}),e.jsx(IT,{initialStatus:o.status,onStatusChange:(D,M)=>{c(A=>({...A,status:D})),console.log("狀態變更:",D,M)},stockLevel:50,publishDate:o.publishDate,language:_})]});case"qr":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"QR Code 管理"}),e.jsx(zb,{product:o,onGenerated:D=>{console.log("QR Code生成完成:",D)}}),p.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 font-chinese",children:"SKU專屬 QR Code"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.slice(0,4).map(D=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-2",children:["SKU: ",D.sku]}),e.jsx("div",{className:"text-xs text-gray-600 mb-3",children:D.variantPath.map(M=>`${M.levelName["zh-TW"]}: ${M.optionName["zh-TW"]}`).join(" / ")}),e.jsx(zb,{product:o,sku:D,onGenerated:M=>{console.log(`SKU ${D.sku} QR Code生成完成:`,M)}})]},D.id))}),p.length>4&&e.jsxs("p",{className:"text-sm text-gray-600 font-chinese",children:["還有 ",p.length-4," 個SKU，請在SKU管理頁面中生成對應的QR Code"]})]})]});case"seo":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"SEO 設定"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["URL別名 (中文) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.urlSlug["zh-TW"],onChange:D=>h("urlSlug",D.target.value,"zh-TW"),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese ${v.urlSlugZh?"border-red-500":"border-gray-300"}`,placeholder:"例如：beautiful-whitening-serum"}),v.urlSlugZh&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.urlSlugZh})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["URL別名 (英文) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.urlSlug.en,onChange:D=>h("urlSlug",D.target.value,"en"),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors ${v.urlSlugEn?"border-red-500":"border-gray-300"}`,placeholder:"beautiful-whitening-serum"}),v.urlSlugEn&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:v.urlSlugEn})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"SEO標題 (中文)"}),e.jsx("input",{type:"text",value:o.metaTitle["zh-TW"],onChange:D=>h("metaTitle",D.target.value,"zh-TW"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese",placeholder:"SEO 標題（建議60字以內）",maxLength:"60"}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 font-chinese",children:[((P=o.metaTitle["zh-TW"])==null?void 0:P.length)||0,"/60 字"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"SEO標題 (英文)"}),e.jsx("input",{type:"text",value:o.metaTitle.en,onChange:D=>h("metaTitle",D.target.value,"en"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors",placeholder:"SEO Title (max 60 chars)",maxLength:"60"}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[(($=o.metaTitle.en)==null?void 0:$.length)||0,"/60 chars"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"SEO描述 (中文)"}),e.jsx("textarea",{value:o.metaDescription["zh-TW"],onChange:D=>h("metaDescription",D.target.value,"zh-TW"),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese resize-none",placeholder:"SEO 描述（建議160字以內）",maxLength:"160"}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 font-chinese",children:[((I=o.metaDescription["zh-TW"])==null?void 0:I.length)||0,"/160 字"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"SEO描述 (英文)"}),e.jsx("textarea",{value:o.metaDescription.en,onChange:D=>h("metaDescription",D.target.value,"en"),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors resize-none",placeholder:"SEO Description (max 160 chars)",maxLength:"160"}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[((L=o.metaDescription.en)==null?void 0:L.length)||0,"/160 chars"]})]})]})]});default:return null}};return e.jsxs("div",{className:"add-product-content",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s("/admin/products"),className:"p-2 text-gray-400 hover:text-[#cc824d] rounded-lg transition-colors",children:e.jsx(Ko,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"新增商品"}),e.jsx("p",{className:"text-gray-600 mt-1 font-chinese",children:"創建新的商品並設定變體"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xe,{options:[{value:"zh-TW",label:"繁體中文"},{value:"en",label:"English"}],value:_,onChange:w,placeholder:"選擇語言",className:"min-w-[140px]"}),e.jsx(xe,{options:[{value:"draft",label:"草稿"},{value:"active",label:"啟用"},{value:"inactive",label:"停用"}],value:o.status,onChange:P=>h("status",P),placeholder:"選擇狀態",className:"min-w-[120px]"})]})]}),e.jsx("div",{className:"glass rounded-2xl p-2 mb-6",children:e.jsx("nav",{className:"flex space-x-1",children:N.map(P=>{const $=P.icon;return e.jsxs("button",{onClick:()=>l(P.id),className:`flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-200 font-chinese ${i===P.id?"bg-[#cc824d] text-white shadow-md":"text-gray-600 hover:text-[#cc824d] hover:bg-white/50"}`,children:[e.jsx($,{className:"w-4 h-4 mr-2"}),P.name]},P.id)})})}),e.jsxs("form",{onSubmit:k,children:[e.jsx("div",{className:"glass rounded-2xl p-6 mb-6",children:O()}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>s("/admin/products"),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-chinese",children:"取消"}),e.jsx("button",{type:"submit",disabled:t,className:"px-6 py-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-chinese font-semibold flex items-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"創建中..."]}):e.jsxs(e.Fragment,{children:[e.jsx($o,{className:"w-5 h-5 mr-2"}),"創建商品"]})})]}),v.submit&&e.jsx("p",{className:"mt-2 text-sm text-red-600 font-chinese text-center",children:v.submit})]})]})},ND=()=>{const s=ns(),{id:t}=Di(),[r,a]=m.useState(!1),[n,i]=m.useState([]),[l,o]=m.useState({name:"",description:"",category:"",price:"",originalPrice:"",inStock:!0,featured:!1,tags:[],specifications:{material:"",dimensions:"",weight:"",color:"",origin:""}}),[c,d]=m.useState(""),[x,p]=m.useState({});m.useEffect(()=>{const h=tr.find(g=>g.id===parseInt(t));h&&(o({name:h.name,description:h.description,category:h.category,price:h.price.toString(),originalPrice:h.originalPrice?h.originalPrice.toString():"",inStock:h.inStock,featured:h.featured,tags:h.tags||[],specifications:h.specifications||{material:"",dimensions:"",weight:"",color:"",origin:""}}),h.image&&i([{id:1,url:h.image,name:"product-image.jpg"}])),it.fromTo(".edit-product-content",{opacity:0,y:20},{opacity:1,y:0,duration:.6,ease:"power2.out"})},[t]);const f=[{value:"配件",label:"配件"},{value:"家居",label:"家居"},{value:"香氛",label:"香氛"},{value:"服飾",label:"服飾"},{value:"茶品",label:"茶品"},{value:"生活用品",label:"生活用品"}],y=(h,g)=>{o(j=>({...j,[h]:g})),x[h]&&p(j=>({...j,[h]:""}))},b=(h,g)=>{o(j=>({...j,specifications:{...j.specifications,[h]:g}}))},v=h=>{Array.from(h.target.files).forEach(j=>{if(j.type.startsWith("image/")){const T=new FileReader;T.onload=C=>{i(E=>[...E,{id:Date.now()+Math.random(),url:C.target.result,file:j,name:j.name}])},T.readAsDataURL(j)}})},S=h=>{i(g=>g.filter(j=>j.id!==h))},_=()=>{c.trim()&&!l.tags.includes(c.trim())&&(o(h=>({...h,tags:[...h.tags,c.trim()]})),d(""))},w=h=>{o(g=>({...g,tags:g.tags.filter(j=>j!==h)}))},N=()=>{const h={};return l.name.trim()||(h.name="商品名稱為必填項目"),l.description.trim()||(h.description="商品描述為必填項目"),l.category||(h.category="請選擇商品分類"),(!l.price||parseFloat(l.price)<=0)&&(h.price="請輸入有效的商品價格"),l.originalPrice&&parseFloat(l.originalPrice)<=parseFloat(l.price)&&(h.originalPrice="原價必須大於售價"),p(h),Object.keys(h).length===0},u=async h=>{if(h.preventDefault(),!!N()){a(!0);try{await new Promise(j=>setTimeout(j,2e3));const g={...l,images:n.map(j=>j.url),id:parseInt(t),updatedAt:new Date().toISOString()};console.log("更新商品資料:",g),s("/admin/products",{state:{message:"商品更新成功！"}})}catch(g){console.error("更新商品失敗:",g),p({submit:"更新商品失敗，請稍後再試"})}finally{a(!1)}}};return e.jsxs("div",{className:"edit-product-content space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s("/admin/products"),className:"p-2 text-gray-400 hover:text-[#cc824d] rounded-lg transition-colors",children:e.jsx(Ko,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"編輯商品"}),e.jsx("p",{className:"text-gray-600 mt-1 font-chinese",children:"修改商品資訊"})]})]})}),e.jsxs("form",{onSubmit:u,className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 font-chinese",children:"基本資訊"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["商品名稱 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.name,onChange:h=>y("name",h.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese ${x.name?"border-red-500":"border-gray-300"}`,placeholder:"請輸入商品名稱"}),x.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:x.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["商品描述 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:l.description,onChange:h=>y("description",h.target.value),rows:4,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese resize-none ${x.description?"border-red-500":"border-gray-300"}`,placeholder:"請輸入商品描述"}),x.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:x.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["商品分類 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:l.category,onChange:h=>y("category",h.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese ${x.category?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"請選擇分類"}),f.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]}),x.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:x.category})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:["售價 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:l.price,onChange:h=>y("price",h.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese ${x.price?"border-red-500":"border-gray-300"}`,placeholder:"0",min:"0",step:"0.01"}),x.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:x.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"原價"}),e.jsx("input",{type:"number",value:l.originalPrice,onChange:h=>y("originalPrice",h.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese ${x.originalPrice?"border-red-500":"border-gray-300"}`,placeholder:"0",min:"0",step:"0.01"}),x.originalPrice&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-chinese",children:x.originalPrice})]})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 font-chinese",children:"商品規格"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"材質"}),e.jsx("input",{type:"text",value:l.specifications.material,onChange:h=>b("material",h.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese",placeholder:"例如：100% 純棉"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"尺寸"}),e.jsx("input",{type:"text",value:l.specifications.dimensions,onChange:h=>b("dimensions",h.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese",placeholder:"例如：長 x 寬 x 高"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"重量"}),e.jsx("input",{type:"text",value:l.specifications.weight,onChange:h=>b("weight",h.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese",placeholder:"例如：500g"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"顏色"}),e.jsx("input",{type:"text",value:l.specifications.color,onChange:h=>b("color",h.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese",placeholder:"例如：米白色"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"產地"}),e.jsx("input",{type:"text",value:l.specifications.origin,onChange:h=>b("origin",h.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese",placeholder:"例如：台灣製造"})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 font-chinese",children:"商品標籤"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:h=>d(h.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent transition-colors font-chinese",placeholder:"輸入標籤名稱",onKeyPress:h=>h.key==="Enter"&&(h.preventDefault(),_())}),e.jsx("button",{type:"button",onClick:_,className:"px-4 py-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors font-chinese",children:"新增"})]}),l.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map((h,g)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-[#cc824d] text-white font-chinese",children:[h,e.jsx("button",{type:"button",onClick:()=>w(h),className:"ml-2 hover:text-gray-200",children:e.jsx(bt,{className:"w-4 h-4"})})]},g))})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 font-chinese",children:"商品圖片"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[#cc824d] transition-colors",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:v,className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsx(jo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 font-chinese mb-2",children:"點擊或拖拽圖片到此處"}),e.jsx("p",{className:"text-xs text-gray-500 font-chinese",children:"支援 JPG、PNG 格式"})]})]}),n.length>0&&e.jsx("div",{className:"space-y-3",children:n.map(h=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsx("img",{src:h.url,alt:h.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate font-chinese",children:h.name})}),e.jsx("button",{type:"button",onClick:()=>S(h.id),className:"p-1 text-red-600 hover:text-red-800",children:e.jsx(bt,{className:"w-4 h-4"})})]},h.id))})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 font-chinese",children:"商品設定"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 font-chinese",children:"庫存狀態"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.inStock,onChange:h=>y("inStock",h.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#cc824d]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#cc824d]"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 font-chinese",children:"推薦商品"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.featured,onChange:h=>y("featured",h.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#cc824d]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#cc824d]"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"submit",disabled:r,className:"w-full px-6 py-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-chinese font-semibold flex items-center justify-center",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"更新中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-5 h-5 mr-2"}),"更新商品"]})}),e.jsx("button",{type:"button",onClick:()=>s("/admin/products"),className:"w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-chinese",children:"取消"})]}),x.submit&&e.jsx("p",{className:"text-sm text-red-600 font-chinese",children:x.submit})]})]})]})},X={PENDING:"pending",PAYMENT_PENDING:"payment_pending",PAYMENT_PROCESSING:"payment_processing",PAYMENT_FAILED:"payment_failed",CONFIRMED:"confirmed",ON_HOLD:"on_hold",PROCESSING:"processing",PICKING:"picking",PACKED:"packed",SHIPPED:"shipped",IN_TRANSIT:"in_transit",OUT_FOR_DELIVERY:"out_for_delivery",DELIVERED:"delivered",COMPLETED:"completed",CANCELLED:"cancelled",REFUNDED:"refunded",RETURNED:"returned",EXCHANGED:"exchanged",DISPUTED:"disputed",FRAUD:"fraud"},Ae={UNPAID:"unpaid",PAID:"paid",TRANSFERRED:"transferred",CONFIRMED:"confirmed",PARTIAL_PAID:"partial_paid",REFUNDED:"refunded",PARTIAL_REFUNDED:"partial_refunded",FAILED:"failed",CANCELLED:"cancelled"},so={NORMAL:"normal",PRE_ORDER:"pre_order",SUBSCRIPTION:"subscription",GIFT:"gift",SAMPLE:"sample",B2B:"b2b",WHOLESALE:"wholesale",DROPSHIPPING:"dropshipping"},Ks={LOW:"low",NORMAL:"normal",HIGH:"high",URGENT:"urgent",VIP:"vip"},Zb={PERSONAL:"personal",COMPANY:"company",DONATION:"donation",CARRIER:"carrier"},Qb={WEBSITE:"website",MOBILE_APP:"mobile_app",ADMIN:"admin",API:"api",PHONE:"phone",STORE:"store",MARKETPLACE:"marketplace"};class wD{constructor(){this.storageKey="marelle-orders",this.statusHistoryKey="marelle-order-status-history",this.returnRequestsKey="marelle-return-requests",this.orderCounterKey="marelle-order-counter",this.initializeData()}initializeData(){if(!localStorage.getItem(this.storageKey)){const t=this.generateSampleOrders();localStorage.setItem(this.storageKey,JSON.stringify(t))}localStorage.getItem(this.statusHistoryKey)||localStorage.setItem(this.statusHistoryKey,JSON.stringify([])),localStorage.getItem(this.returnRequestsKey)||localStorage.setItem(this.returnRequestsKey,JSON.stringify([])),localStorage.getItem(this.orderCounterKey)||localStorage.setItem(this.orderCounterKey,JSON.stringify(1e3))}generateSampleOrders(){const t=new Date,r=[];for(let a=1;a<=50;a++){const n=new Date(t.getTime()-Math.random()*30*24*60*60*1e3),i={id:a,orderNumber:`ORD-${(1e3+a).toString()}`,type:so.NORMAL,status:this.getRandomStatus(),paymentStatus:this.getRandomPaymentStatus(),priority:Ks.NORMAL,customerId:Math.random()>.3?Math.floor(Math.random()*100)+1:null,customerType:Math.random()>.3?"member":"guest",customerEmail:`customer${a}@example.com`,customerPhone:`09${Math.floor(Math.random()*1e8).toString().padStart(8,"0")}`,shippingAddress:{firstName:"王",lastName:`小明${a}`,addressLine1:`台北市大安區復興南路${a}號`,city:"台北市",state:"大安區",postalCode:"10677",country:"Taiwan",phone:`09${Math.floor(Math.random()*1e8).toString().padStart(8,"0")}`},items:this.generateOrderItems(a),subtotal:1200+a*100,shippingFee:80,taxAmount:0,discountAmount:a%5===0?100:0,totalAmount:1200+a*100+80-(a%5===0?100:0),paidAmount:0,paymentMethod:this.getRandomPaymentMethod(),paymentGateway:"green_world",shippingMethod:"宅配",shippingCarrier:"黑貓宅急便",trackingNumber:Math.random()>.5?`BK${Math.floor(Math.random()*1e9)}`:null,isGift:Math.random()>.8,giftMessage:Math.random()>.9?"祝您生日快樂！":null,invoiceType:Zb.PERSONAL,riskScore:Math.floor(Math.random()*100),manualReviewRequired:Math.random()>.9,source:Qb.WEBSITE,channel:"online",tags:[],createdAt:n.toISOString(),updatedAt:n.toISOString(),confirmedAt:this.isConfirmedStatus(this.getRandomStatus())?n.toISOString():null,shippedAt:null,deliveredAt:null,completedAt:null,cancelledAt:null};[Ae.PAID,Ae.CONFIRMED].includes(i.paymentStatus)&&(i.paidAmount=i.totalAmount),r.push(i)}return r}generateOrderItems(t){const r=Math.floor(Math.random()*3)+1,a=[],n=[{id:1,name:"保濕精華液",price:680,sku:"SK001"},{id:2,name:"美白面膜",price:380,sku:"SK002"},{id:3,name:"抗老眼霜",price:980,sku:"SK003"},{id:4,name:"潔面乳",price:280,sku:"SK004"},{id:5,name:"防曬乳",price:450,sku:"SK005"}];for(let i=0;i<r;i++){const l=n[Math.floor(Math.random()*n.length)],o=Math.floor(Math.random()*3)+1;a.push({id:t*10+i,orderId:t,productId:l.id,sku:l.sku,productName:l.name,quantity:o,unitPrice:l.price,originalPrice:l.price,discountAmount:0,totalPrice:l.price*o,isGift:!1,status:"pending",shippedQuantity:0,deliveredQuantity:0,returnedQuantity:0})}return a}getRandomStatus(){const t=[X.PENDING,X.PAYMENT_PENDING,X.CONFIRMED,X.PROCESSING,X.SHIPPED,X.DELIVERED,X.COMPLETED,X.CANCELLED];return t[Math.floor(Math.random()*t.length)]}getRandomPaymentStatus(){const t=[Ae.UNPAID,Ae.PAID,Ae.CONFIRMED,Ae.FAILED];return t[Math.floor(Math.random()*t.length)]}getRandomPaymentMethod(){const t=["信用卡","LINE Pay","銀行轉帳","貨到付款","Apple Pay"];return t[Math.floor(Math.random()*t.length)]}isConfirmedStatus(t){return[X.CONFIRMED,X.PROCESSING,X.SHIPPED,X.DELIVERED,X.COMPLETED].includes(t)}generateOrderNumber(){let t=parseInt(localStorage.getItem(this.orderCounterKey)||"1000");return t+=1,localStorage.setItem(this.orderCounterKey,JSON.stringify(t)),`ORD-${t}`}getAllOrders(){try{return JSON.parse(localStorage.getItem(this.storageKey)||"[]").sort((r,a)=>new Date(a.createdAt)-new Date(r.createdAt))}catch(t){return console.error("Error loading orders:",t),[]}}getOrderById(t){return this.getAllOrders().find(a=>a.id===parseInt(t))}getOrderByNumber(t){return this.getAllOrders().find(a=>a.orderNumber===t)}searchOrders(t,r={}){let a=this.getAllOrders();if(t){const n=t.toLowerCase();a=a.filter(i=>i.orderNumber.toLowerCase().includes(n)||i.customerEmail.toLowerCase().includes(n)||i.customerPhone&&i.customerPhone.includes(n)||i.trackingNumber&&i.trackingNumber.toLowerCase().includes(n))}if(r.status&&r.status.length>0&&(a=a.filter(n=>r.status.includes(n.status))),r.paymentStatus&&r.paymentStatus.length>0&&(a=a.filter(n=>r.paymentStatus.includes(n.paymentStatus))),r.type&&(a=a.filter(n=>n.type===r.type)),r.priority&&(a=a.filter(n=>n.priority===r.priority)),r.customerId&&(a=a.filter(n=>n.customerId===r.customerId)),r.dateRange){const{start:n,end:i}=r.dateRange;a=a.filter(l=>{const o=new Date(l.createdAt);return o>=new Date(n)&&o<=new Date(i)})}return r.paymentMethod&&(a=a.filter(n=>n.paymentMethod===r.paymentMethod)),a}createOrder(t){try{const r=this.getAllOrders(),a={id:Date.now(),orderNumber:this.generateOrderNumber(),type:so.NORMAL,status:X.PENDING,paymentStatus:Ae.UNPAID,priority:Ks.NORMAL,customerId:t.customerId||null,customerType:t.customerId?"member":"guest",customerEmail:t.customerEmail,customerPhone:t.customerPhone||null,customerNotes:t.customerNotes||null,shippingAddress:t.shippingAddress,billingAddress:t.billingAddress||t.shippingAddress,items:t.items.map((n,i)=>({id:Date.now()+i,orderId:Date.now(),productId:n.productId,variantId:n.variantId||null,sku:n.sku,productName:n.productName,variantName:n.variantName||null,quantity:n.quantity,unitPrice:n.unitPrice,originalPrice:n.originalPrice||n.unitPrice,discountAmount:n.discountAmount||0,totalPrice:n.unitPrice*n.quantity,isGift:n.isGift||!1,status:"pending",shippedQuantity:0,deliveredQuantity:0,returnedQuantity:0})),subtotal:t.subtotal,shippingFee:t.shippingFee||0,taxAmount:t.taxAmount||0,discountAmount:t.discountAmount||0,couponDiscount:t.couponDiscount||0,pointDiscount:t.pointDiscount||0,totalAmount:t.totalAmount,paidAmount:0,refundedAmount:0,paymentMethod:t.paymentMethod||null,paymentGateway:t.paymentGateway||null,shippingMethod:t.shippingMethod||null,shippingCarrier:t.shippingCarrier||null,couponsUsed:t.couponsUsed||[],pointsUsed:t.pointsUsed||0,pointsEarned:t.pointsEarned||0,invoiceType:t.invoiceType||Zb.PERSONAL,invoiceData:t.invoiceData||null,isGift:t.isGift||!1,giftMessage:t.giftMessage||null,giftWrapping:t.giftWrapping||!1,specialInstructions:t.specialInstructions||null,internalNotes:t.internalNotes||null,riskScore:0,fraudCheckStatus:"pending",manualReviewRequired:!1,createdBy:t.createdBy||null,assignedTo:t.assignedTo||null,tags:t.tags||[],source:t.source||Qb.ADMIN,channel:t.channel||"admin",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),confirmedAt:null,shippedAt:null,deliveredAt:null,completedAt:null,cancelledAt:null};return r.unshift(a),localStorage.setItem(this.storageKey,JSON.stringify(r)),this.recordStatusChange(a.id,null,X.PENDING,"訂單建立",null,!0),{success:!0,order:a}}catch(r){return console.error("Error creating order:",r),{success:!1,error:r.message}}}updateOrder(t,r){try{const a=this.getAllOrders(),n=a.findIndex(o=>o.id===parseInt(t));if(n===-1)return{success:!1,error:"訂單不存在"};const i={...a[n]},l={...i,...r,updatedAt:new Date().toISOString()};return a[n]=l,localStorage.setItem(this.storageKey,JSON.stringify(a)),r.status&&r.status!==i.status&&this.recordStatusChange(t,i.status,r.status,r.statusChangeReason||"手動更新",r.changedBy||null,!1),{success:!0,order:l}}catch(a){return console.error("Error updating order:",a),{success:!1,error:a.message}}}updateOrderStatus(t,r,a,n=null,i=!1){try{const l=this.getOrderById(t);if(!l)return{success:!1,error:"訂單不存在"};const o=l.status,c={status:r,updatedAt:new Date().toISOString()};r===X.CONFIRMED&&!l.confirmedAt?c.confirmedAt=new Date().toISOString():r===X.SHIPPED&&!l.shippedAt?c.shippedAt=new Date().toISOString():r===X.DELIVERED&&!l.deliveredAt?c.deliveredAt=new Date().toISOString():r===X.COMPLETED&&!l.completedAt?c.completedAt=new Date().toISOString():r===X.CANCELLED&&!l.cancelledAt&&(c.cancelledAt=new Date().toISOString());const d=this.updateOrder(t,c);return d.success&&(this.recordStatusChange(t,o,r,a,n,!1),i&&console.log(`Notify customer about order ${l.orderNumber} status change to ${r}`)),d}catch(l){return console.error("Error updating order status:",l),{success:!1,error:l.message}}}recordStatusChange(t,r,a,n,i,l){try{const o=JSON.parse(localStorage.getItem(this.statusHistoryKey)||"[]"),c={id:Date.now(),orderId:parseInt(t),fromStatus:r,toStatus:a,reason:n,changedBy:i,automated:l,metadata:{},createdAt:new Date().toISOString()};o.unshift(c),localStorage.setItem(this.statusHistoryKey,JSON.stringify(o))}catch(o){console.error("Error recording status change:",o)}}getOrderStatusHistory(t){try{return JSON.parse(localStorage.getItem(this.statusHistoryKey)||"[]").filter(a=>a.orderId===parseInt(t))}catch(r){return console.error("Error loading status history:",r),[]}}deleteOrder(t){try{const r=this.getAllOrders(),a=r.filter(n=>n.id!==parseInt(t));return a.length===r.length?{success:!1,error:"訂單不存在"}:(localStorage.setItem(this.storageKey,JSON.stringify(a)),{success:!0})}catch(r){return console.error("Error deleting order:",r),{success:!1,error:r.message}}}getOrderStatistics(){const t=this.getAllOrders(),r=new Date,a=new Date(r.getFullYear(),r.getMonth(),r.getDate()),n=new Date(r.getFullYear(),r.getMonth(),1),i=new Date(r.getFullYear(),0,1),l=t.length,o=t.filter(u=>new Date(u.createdAt)>=a).length,c=t.filter(u=>new Date(u.createdAt)>=n).length,d=t.filter(u=>new Date(u.createdAt)>=i).length,x={};Object.values(X).forEach(u=>{x[u]=t.filter(h=>h.status===u).length});const p={};Object.values(Ae).forEach(u=>{p[u]=t.filter(h=>h.paymentStatus===u).length});const f=t.reduce((u,h)=>u+h.totalAmount,0),y=t.filter(u=>[Ae.PAID,Ae.CONFIRMED].includes(u.paymentStatus)).reduce((u,h)=>u+h.paidAmount,0),b=t.filter(u=>u.paymentStatus===Ae.UNPAID).reduce((u,h)=>u+h.totalAmount,0),v=l>0?f/l:0,S=new Set(t.filter(u=>u.customerId).map(u=>u.customerId)).size,_=t.filter(u=>u.customerType==="guest").length,w=t.filter(u=>u.customerType==="member").length,N=t.reduce((u,h)=>u+h.items.reduce((g,j)=>g+j.quantity,0),0);return{totalOrders:l,todayOrders:o,monthOrders:c,yearOrders:d,statusDistribution:x,paymentStatusDistribution:p,totalRevenue:f,paidRevenue:y,pendingRevenue:b,averageOrderValue:v,uniqueCustomers:S,guestOrders:_,memberOrders:w,totalItemsSold:N,giftOrders:t.filter(u=>u.isGift).length,urgentOrders:t.filter(u=>u.priority===Ks.URGENT).length,manualReviewOrders:t.filter(u=>u.manualReviewRequired).length}}batchUpdateStatus(t,r,a,n=null){try{const i={successful:[],failed:[]};return t.forEach(l=>{const o=this.updateOrderStatus(l,r,a,n);o.success?i.successful.push(l):i.failed.push({id:l,error:o.error})}),{success:!0,results:i}}catch(i){return console.error("Error in batch status update:",i),{success:!1,error:i.message}}}getOrderTrends(t=30){const r=this.getAllOrders(),a=new Date,n=[];for(let i=t-1;i>=0;i--){const l=new Date(a.getTime()-i*24*60*60*1e3),o=new Date(l.getFullYear(),l.getMonth(),l.getDate()),c=new Date(o.getTime()+24*60*60*1e3),d=r.filter(p=>{const f=new Date(p.createdAt);return f>=o&&f<c}),x=d.reduce((p,f)=>p+f.totalAmount,0);n.push({date:o.toISOString().split("T")[0],orderCount:d.length,revenue:x,averageOrderValue:d.length>0?x/d.length:0})}return n}}const ba=new wD,_D=()=>{var I,L;const[s,t]=m.useState([]),[r,a]=m.useState(""),[n,i]=m.useState(""),[l,o]=m.useState(""),[c,d]=m.useState(""),[x,p]=m.useState(!1),[f,y]=m.useState({}),[b,v]=m.useState([]),[S,_]=m.useState(!1),[w,N]=m.useState(!0);m.useEffect(()=>{u(),h()},[r,n,l,c]);const u=()=>{N(!0);try{const D={status:r?[r]:[],paymentStatus:n?[n]:[],type:l||null,priority:c||null},M=ba.searchOrders("",D);t(M)}catch(D){console.error("Error loading orders:",D)}finally{N(!1)}},h=()=>{try{const D=ba.getOrderStatistics();y(D)}catch(D){console.error("Error loading statistics:",D)}},g=D=>{if(window.confirm("確定要刪除這個訂單嗎？此操作無法復原。")){const M=ba.deleteOrder(D);M.success?(u(),h()):alert("刪除失敗："+M.error)}},j=D=>{if(b.length===0){alert("請先選擇要操作的訂單");return}if(window.confirm(`確定要將 ${b.length} 個訂單狀態更新為「${O(D)}」嗎？`)){const M=ba.batchUpdateStatus(b,D,"批次狀態更新");M.success?(alert(`成功更新 ${M.results.successful.length} 個訂單`),v([]),_(!1),u(),h()):alert("批次更新失敗："+M.error)}},T=D=>{v(M=>{const A=M.includes(D)?M.filter(V=>V!==D):[...M,D];return _(A.length>0),A})},C=()=>{if(b.length===s.length)v([]),_(!1);else{const D=s.map(M=>M.id);v(D),_(!0)}},E=D=>{const A={[X.PENDING]:{label:"待處理",className:"bg-gray-100 text-gray-800",icon:be},[X.PAYMENT_PENDING]:{label:"待付款",className:"bg-yellow-100 text-yellow-800",icon:We},[X.CONFIRMED]:{label:"已確認",className:"bg-blue-100 text-blue-800",icon:ae},[X.PROCESSING]:{label:"處理中",className:"bg-purple-100 text-purple-800",icon:be},[X.SHIPPED]:{label:"已出貨",className:"bg-indigo-100 text-indigo-800",icon:tt},[X.DELIVERED]:{label:"已送達",className:"bg-green-100 text-green-800",icon:ae},[X.COMPLETED]:{label:"已完成",className:"bg-green-100 text-green-800",icon:ae},[X.CANCELLED]:{label:"已取消",className:"bg-red-100 text-red-800",icon:te},[X.REFUNDED]:{label:"已退款",className:"bg-orange-100 text-orange-800",icon:te}}[D]||{label:D,className:"bg-gray-100 text-gray-800",icon:be},V=A.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A.className}`,children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),A.label]})},R=D=>{const A={[Ae.UNPAID]:{label:"未付款",className:"bg-red-100 text-red-800"},[Ae.PAID]:{label:"已付款",className:"bg-green-100 text-green-800"},[Ae.CONFIRMED]:{label:"已確認",className:"bg-green-100 text-green-800"},[Ae.FAILED]:{label:"失敗",className:"bg-red-100 text-red-800"},[Ae.REFUNDED]:{label:"已退款",className:"bg-orange-100 text-orange-800"}}[D]||{label:D,className:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A.className}`,children:A.label})},k=D=>{const A={[Ks.LOW]:{label:"低",className:"bg-gray-100 text-gray-800"},[Ks.NORMAL]:{label:"一般",className:"bg-blue-100 text-blue-800"},[Ks.HIGH]:{label:"高",className:"bg-orange-100 text-orange-800"},[Ks.URGENT]:{label:"緊急",className:"bg-red-100 text-red-800"},[Ks.VIP]:{label:"VIP",className:"bg-purple-100 text-purple-800"}}[D]||{label:D,className:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A.className}`,children:A.label})},O=D=>({[X.PENDING]:"待處理",[X.PAYMENT_PENDING]:"待付款",[X.CONFIRMED]:"已確認",[X.PROCESSING]:"處理中",[X.SHIPPED]:"已出貨",[X.DELIVERED]:"已送達",[X.COMPLETED]:"已完成",[X.CANCELLED]:"已取消"})[D]||D,P=D=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(D),$=D=>new Date(D).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return w?e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-lg text-gray-600",children:"載入訂單資料中..."})})}):e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 font-chinese",children:"訂單管理"}),e.jsxs(re,{to:"/admin/orders/add",className:"inline-flex items-center space-x-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"新增訂單"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(ss,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"總訂單"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.totalOrders||0})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(We,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"總營收"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P(f.totalRevenue||0)})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(ji,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"今日訂單"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.todayOrders||0})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(dt,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"獨立客戶"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.uniqueCustomers||0})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"待處理"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(((I=f.statusDistribution)==null?void 0:I.pending)||0)+(((L=f.statusDistribution)==null?void 0:L.payment_pending)||0)})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50 mb-6",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:()=>p(!x),className:"flex items-center space-x-2 px-4 py-2 bg-white/80 border border-gray-300 text-gray-700 rounded-lg hover:bg-[#fdf8f2]/30 transition-colors",children:[e.jsx(gs,{className:"w-5 h-5"}),e.jsx("span",{children:"篩選"})]})})}),x&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"訂單狀態"}),e.jsx(xe,{options:[{value:"",label:"全部狀態"},{value:X.PENDING,label:"待處理"},{value:X.PAYMENT_PENDING,label:"待付款"},{value:X.CONFIRMED,label:"已確認"},{value:X.PROCESSING,label:"處理中"},{value:X.SHIPPED,label:"已出貨"},{value:X.DELIVERED,label:"已送達"},{value:X.COMPLETED,label:"已完成"},{value:X.CANCELLED,label:"已取消"}],value:r,onChange:a,placeholder:"選擇訂單狀態",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"付款狀態"}),e.jsx(xe,{options:[{value:"",label:"全部狀態"},{value:Ae.UNPAID,label:"未付款"},{value:Ae.PAID,label:"已付款"},{value:Ae.CONFIRMED,label:"已確認"},{value:Ae.FAILED,label:"失敗"},{value:Ae.REFUNDED,label:"已退款"}],value:n,onChange:i,placeholder:"選擇付款狀態",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"訂單類型"}),e.jsx(xe,{options:[{value:"",label:"全部類型"},{value:so.NORMAL,label:"一般訂單"},{value:so.PRE_ORDER,label:"預購訂單"},{value:so.GIFT,label:"禮品訂單"},{value:so.SAMPLE,label:"試用品"}],value:l,onChange:o,placeholder:"選擇訂單類型",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"優先級"}),e.jsx(xe,{options:[{value:"",label:"全部優先級"},{value:Ks.LOW,label:"低"},{value:Ks.NORMAL,label:"一般"},{value:Ks.HIGH,label:"高"},{value:Ks.URGENT,label:"緊急"},{value:Ks.VIP,label:"VIP"}],value:c,onChange:d,placeholder:"選擇優先級",className:"w-full"})]})]})})]}),S&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-blue-800 font-medium",children:["已選擇 ",b.length," 個訂單"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>j(X.CONFIRMED),className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"批次確認"}),e.jsx("button",{onClick:()=>j(X.SHIPPED),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"批次出貨"}),e.jsx("button",{onClick:()=>j(X.CANCELLED),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"批次取消"}),e.jsx("button",{onClick:()=>{v([]),_(!1)},className:"px-3 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm",children:"取消選擇"})]})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 overflow-visible",children:[e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-[#fdf8f2]/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:b.length===s.length&&s.length>0,onChange:C,className:"rounded border-gray-300 text-[#cc824d] focus:ring-[#cc824d]"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"訂單資訊"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"客戶資訊"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"金額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"建立時間"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white/50 divide-y divide-gray-200",children:s.map(D=>e.jsxs("tr",{className:"hover:bg-[#fdf8f2]/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:b.includes(D.id),onChange:()=>T(D.id),className:"rounded border-gray-300 text-[#cc824d] focus:ring-[#cc824d]"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 font-mono",children:D.orderNumber}),e.jsxs("div",{className:"text-sm text-gray-500",children:[D.items.length," 件商品"]}),D.priority!==Ks.NORMAL&&e.jsx("div",{className:"mt-1",children:k(D.priority)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.customerEmail}),D.customerPhone&&e.jsx("div",{className:"text-sm text-gray-500",children:D.customerPhone}),e.jsx("div",{className:"text-xs text-gray-400",children:D.customerType==="member"?"會員":"訪客"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-2",children:[E(D.status),R(D.paymentStatus)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:P(D.totalAmount)}),D.discountAmount>0&&e.jsxs("div",{className:"text-xs text-green-600",children:["折扣 ",P(D.discountAmount)]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:$(D.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(re,{to:`/admin/orders/${D.id}`,className:"text-[#cc824d] hover:text-[#b3723f] transition-colors",title:"查看詳情",children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsx(re,{to:`/admin/orders/${D.id}/edit`,className:"text-blue-600 hover:text-blue-800 transition-colors",title:"編輯",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>g(D.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"刪除",children:e.jsx($e,{className:"w-5 h-5"})})]})})]},D.id))})]})}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ss,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"沒有找到訂單"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:searchQuery||r||n||l||c?"嘗試調整搜尋條件或篩選器":"開始建立您的第一個訂單"}),!searchQuery&&!r&&!n&&!l&&!c&&e.jsx("div",{className:"mt-6",children:e.jsxs(re,{to:"/admin/orders/add",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-[#cc824d] hover:bg-[#b3723f] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#cc824d]",children:[e.jsx(ge,{className:"-ml-1 mr-2 h-5 w-5"}),"新增訂單"]})})]})]})]})},ec=({isOpen:s,onClose:t,title:r,children:a,size:n="max-w-4xl",showCloseButton:i=!0,headerClass:l="bg-gradient-to-r from-[#cc824d]/80 to-[#b3723f]/80"})=>s?e.jsxs("div",{className:"fixed inset-0 z-[100000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 backdrop-blur-md",onClick:t}),e.jsxs("div",{className:`relative ${n} w-full max-h-[90vh] overflow-hidden rounded-3xl bg-white/80 backdrop-blur-xl border border-white/30 shadow-2xl`,children:[r&&e.jsx("div",{className:`${l} backdrop-blur-sm text-white px-6 py-4 border-b border-white/20`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold font-chinese",children:r}),i&&e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(bt,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"relative overflow-y-auto max-h-[calc(90vh-80px)]",children:a})]})]}):null,SD=()=>{const{id:s}=Di(),t=ns(),[r,a]=m.useState(null),[n,i]=m.useState([]),[l,o]=m.useState(!0),[c,d]=m.useState(!1),[x,p]=m.useState(""),[f,y]=m.useState("");m.useEffect(()=>{b()},[s]);const b=()=>{o(!0);try{const g=ba.getOrderById(s);if(g){a(g);const j=ba.getOrderStatusHistory(s);i(j)}else t("/admin/orders")}catch(g){console.error("Error loading order details:",g)}finally{o(!1)}},v=()=>{if(!x||!f.trim()){alert("請選擇新狀態並填寫變更原因");return}const g=ba.updateOrderStatus(parseInt(s),x,f,null,!0);g.success?(d(!1),p(""),y(""),b()):alert("狀態更新失敗："+g.error)},S=()=>{if(window.confirm("確定要刪除這個訂單嗎？此操作無法復原。")){const g=ba.deleteOrder(s);g.success?t("/admin/orders"):alert("刪除失敗："+g.error)}},_=g=>{const T={[X.PENDING]:{label:"待處理",className:"bg-gray-100 text-gray-800",icon:be},[X.PAYMENT_PENDING]:{label:"待付款",className:"bg-yellow-100 text-yellow-800",icon:We},[X.CONFIRMED]:{label:"已確認",className:"bg-blue-100 text-blue-800",icon:ae},[X.PROCESSING]:{label:"處理中",className:"bg-purple-100 text-purple-800",icon:be},[X.SHIPPED]:{label:"已出貨",className:"bg-indigo-100 text-indigo-800",icon:tt},[X.DELIVERED]:{label:"已送達",className:"bg-green-100 text-green-800",icon:ae},[X.COMPLETED]:{label:"已完成",className:"bg-green-100 text-green-800",icon:ae},[X.CANCELLED]:{label:"已取消",className:"bg-red-100 text-red-800",icon:te}}[g]||{label:g,className:"bg-gray-100 text-gray-800",icon:be},C=T.icon;return e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${T.className}`,children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),T.label]})},w=g=>{const T={[Ae.UNPAID]:{label:"未付款",className:"bg-red-100 text-red-800"},[Ae.PAID]:{label:"已付款",className:"bg-green-100 text-green-800"},[Ae.CONFIRMED]:{label:"已確認",className:"bg-green-100 text-green-800"},[Ae.FAILED]:{label:"失敗",className:"bg-red-100 text-red-800"},[Ae.REFUNDED]:{label:"已退款",className:"bg-orange-100 text-orange-800"}}[g]||{label:g,className:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${T.className}`,children:T.label})},N=g=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(g),u=g=>g?new Date(g).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",h=()=>{const g=r==null?void 0:r.status;return[{value:X.PENDING,label:"待處理"},{value:X.PAYMENT_PENDING,label:"待付款"},{value:X.CONFIRMED,label:"已確認"},{value:X.PROCESSING,label:"處理中"},{value:X.SHIPPED,label:"已出貨"},{value:X.DELIVERED,label:"已送達"},{value:X.COMPLETED,label:"已完成"},{value:X.CANCELLED,label:"已取消"}].filter(T=>T.value!==g)};return l?e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-lg text-gray-600",children:"載入訂單詳情中..."})})}):r?e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs(re,{to:"/admin/orders",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Ko,{className:"w-5 h-5 mr-2"}),"返回訂單列表"]}),e.jsx("div",{className:"border-l border-gray-300 h-6"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 font-chinese",children:["訂單詳情 - ",r.orderNumber]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[_(r.status),w(r.paymentStatus),r.isGift&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-pink-100 text-pink-800",children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"禮品訂單"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsx("span",{children:"更新狀態"})]}),e.jsxs(re,{to:`/admin/orders/${r.id}/edit`,className:"flex items-center space-x-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsx("span",{children:"編輯訂單"})]}),e.jsxs("button",{onClick:S,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{children:"刪除"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"商品明細"}),e.jsx("div",{className:"space-y-4",children:r.items.map(g=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-[#fdf8f2]/30 rounded-lg border border-gray-200/30",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(Bt,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:g.productName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",g.sku]}),g.variantName&&e.jsxs("p",{className:"text-sm text-gray-500",children:["規格: ",g.variantName]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[N(g.unitPrice)," × ",g.quantity]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["小計: ",N(g.totalPrice)]})]})]},g.id))}),e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"商品小計"}),e.jsx("span",{className:"text-gray-900",children:N(r.subtotal)})]}),r.shippingFee>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"運費"}),e.jsx("span",{className:"text-gray-900",children:N(r.shippingFee)})]}),r.discountAmount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"折扣"}),e.jsxs("span",{className:"text-green-600",children:["-",N(r.discountAmount)]})]}),r.couponDiscount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"優惠券折扣"}),e.jsxs("span",{className:"text-green-600",children:["-",N(r.couponDiscount)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"總金額"}),e.jsx("span",{className:"text-gray-900",children:N(r.totalAmount)})]})]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"狀態歷史"}),e.jsx("div",{className:"space-y-4",children:n.map((g,j)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${j===0?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(be,{className:`w-5 h-5 ${j===0?"text-blue-600":"text-gray-400"}`})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[g.fromStatus&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-500",children:g.fromStatus}),e.jsx("span",{className:"text-gray-400",children:"→"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:g.toStatus})]}),g.reason&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.reason}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[u(g.createdAt),g.automated&&" (自動)"]})]})]},g.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(na,{className:"w-5 h-5 mr-2"}),"客戶資訊"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xl,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.customerEmail})]}),r.customerPhone&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Uo,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.customerPhone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_a,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.customerType==="member"?"會員":"訪客"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Mr,{className:"w-5 h-5 mr-2"}),"收件資訊"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[r.shippingAddress.firstName," ",r.shippingAddress.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:r.shippingAddress.addressLine1}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.shippingAddress.city," ",r.shippingAddress.state," ",r.shippingAddress.postalCode]}),r.shippingAddress.phone&&e.jsxs("p",{className:"text-sm text-gray-600",children:["電話: ",r.shippingAddress.phone]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ni,{className:"w-5 h-5 mr-2"}),"付款資訊"]}),e.jsxs("div",{className:"space-y-3",children:[r.paymentMethod&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"付款方式: "}),e.jsx("span",{className:"text-sm text-gray-900",children:r.paymentMethod})]}),r.paymentGateway&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"付款閘道: "}),e.jsx("span",{className:"text-sm text-gray-900",children:r.paymentGateway})]}),r.paymentReference&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"付款參考號: "}),e.jsx("span",{className:"text-sm text-gray-900 font-mono",children:r.paymentReference})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"已付金額: "}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:N(r.paidAmount)})]}),r.paymentDate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"付款時間: "}),e.jsx("span",{className:"text-sm text-gray-900",children:u(r.paymentDate)})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(tt,{className:"w-5 h-5 mr-2"}),"物流資訊"]}),e.jsxs("div",{className:"space-y-3",children:[r.shippingMethod&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"配送方式: "}),e.jsx("span",{className:"text-sm text-gray-900",children:r.shippingMethod})]}),r.shippingCarrier&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"物流商: "}),e.jsx("span",{className:"text-sm text-gray-900",children:r.shippingCarrier})]}),r.trackingNumber&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"追蹤號碼: "}),e.jsx("span",{className:"text-sm text-gray-900 font-mono",children:r.trackingNumber})]}),r.shippedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"出貨時間: "}),e.jsx("span",{className:"text-sm text-gray-900",children:u(r.shippedAt)})]}),r.deliveredAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"送達時間: "}),e.jsx("span",{className:"text-sm text-gray-900",children:u(r.deliveredAt)})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ji,{className:"w-5 h-5 mr-2"}),"訂單資訊"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"建立時間: "}),e.jsx("span",{className:"text-sm text-gray-900",children:u(r.createdAt)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"訂單來源: "}),e.jsx("span",{className:"text-sm text-gray-900",children:r.source})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"銷售渠道: "}),e.jsx("span",{className:"text-sm text-gray-900",children:r.channel})]}),r.internalNotes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"內部備註: "}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:r.internalNotes})]})]})]})]})]}),e.jsx(ec,{isOpen:c,onClose:()=>d(!1),title:"更新訂單狀態",size:"max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"目前狀態"}),e.jsx("div",{className:"p-3 bg-[#fdf8f2]/30 rounded-lg border border-gray-200/30",children:_(r.status)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["新狀態 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:x,onChange:g=>p(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"",children:"請選擇狀態"}),h().map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["變更原因 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:f,onChange:g=>y(g.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"請輸入狀態變更的原因..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-[#fdf8f2]/30 transition-colors",children:"取消"}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:"確認更新"})]})]})})]}):e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-lg text-red-600",children:"訂單不存在"})})})},Xb=()=>{const{id:s}=Di(),t=ns(),r=!!s,[a,n]=m.useState({customerEmail:"",customerPhone:"",customerType:"guest",items:[],shippingAddress:{firstName:"",lastName:"",addressLine1:"",city:"",state:"",postalCode:"",phone:""},shippingMethod:"standard",shippingCarrier:"",paymentMethod:"credit_card",paymentStatus:Ae.UNPAID,status:X.PENDING,internalNotes:"",isGift:!1,giftMessage:""}),[i,l]=m.useState(!1),[o,c]=m.useState(!1),[d,x]=m.useState(""),[p]=m.useState([{id:1,name:"保濕精華",sku:"MOIST-001",price:1200,stock:50},{id:2,name:"抗皺面霜",sku:"ANTI-002",price:1800,stock:30},{id:3,name:"美白精華",sku:"WHITE-003",price:1500,stock:25},{id:4,name:"眼部精華",sku:"EYE-004",price:1e3,stock:40},{id:5,name:"清潔面膜",sku:"CLEAN-005",price:800,stock:60}]);m.useEffect(()=>{r&&f()},[s,r]);const f=()=>{l(!0);try{const h=ba.getOrderById(s);h?n({customerEmail:h.customerEmail,customerPhone:h.customerPhone||"",customerType:h.customerType,items:h.items,shippingAddress:h.shippingAddress,shippingMethod:h.shippingMethod||"standard",shippingCarrier:h.shippingCarrier||"",paymentMethod:h.paymentMethod||"credit_card",paymentStatus:h.paymentStatus,status:h.status,internalNotes:h.internalNotes||"",isGift:h.isGift||!1,giftMessage:h.giftMessage||""}):t("/admin/orders")}catch(h){console.error("Error loading order:",h)}finally{l(!1)}},y=()=>{const h=a.items.reduce((j,T)=>j+T.totalPrice,0),g=a.shippingMethod==="express"?150:80;return{subtotal:h,shippingFee:g,total:h+g}},b=h=>{const g=a.items.findIndex(j=>j.productId===h.id);if(g>=0){const j=[...a.items];j[g].quantity+=1,j[g].totalPrice=j[g].unitPrice*j[g].quantity,n(T=>({...T,items:j}))}else{const j={id:Date.now(),productId:h.id,productName:h.name,sku:h.sku,unitPrice:h.price,quantity:1,totalPrice:h.price};n(T=>({...T,items:[...T.items,j]}))}c(!1),x("")},v=(h,g)=>{if(g<=0)return;const j=a.items.map(T=>T.id===h?{...T,quantity:g,totalPrice:T.unitPrice*g}:T);n(T=>({...T,items:j}))},S=h=>{const g=a.items.filter(j=>j.id!==h);n(j=>({...j,items:g}))},_=async h=>{h.preventDefault(),l(!0);try{const g=y(),j={...a,subtotal:g.subtotal,shippingFee:g.shippingFee,totalAmount:g.total,paidAmount:a.paymentStatus===Ae.PAID?g.total:0};let T;r?T=ba.updateOrder(parseInt(s),j):T=ba.createOrder(j),T.success?t("/admin/orders"):alert("操作失敗："+T.error)}catch(g){console.error("Error saving order:",g),alert("保存失敗："+g.message)}finally{l(!1)}},w=p.filter(h=>h.name.toLowerCase().includes(d.toLowerCase())||h.sku.toLowerCase().includes(d.toLowerCase())),N=h=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(h);if(i)return e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-lg text-gray-600",children:"載入中..."})})});const u=y();return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs(re,{to:"/admin/orders",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Ko,{className:"w-5 h-5 mr-2"}),"返回訂單列表"]}),e.jsx("div",{className:"border-l border-gray-300 h-6"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 font-chinese",children:r?"編輯訂單":"新增訂單"})]})}),e.jsx("form",{onSubmit:_,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(na,{className:"w-5 h-5 mr-2"}),"客戶資訊"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["電子郵件 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(xl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",required:!0,value:a.customerEmail,onChange:h=>n(g=>({...g,customerEmail:h.target.value})),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"customer@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"聯絡電話"}),e.jsxs("div",{className:"relative",children:[e.jsx(Uo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",value:a.customerPhone,onChange:h=>n(g=>({...g,customerPhone:h.target.value})),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"0912-345-678"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"客戶類型"}),e.jsxs("select",{value:a.customerType,onChange:h=>n(g=>({...g,customerType:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"guest",children:"訪客"}),e.jsx("option",{value:"member",children:"會員"})]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"商品項目"}),e.jsxs("button",{type:"button",onClick:()=>c(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"添加商品"})]})]}),a.items.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"尚未添加任何商品"}):e.jsx("div",{className:"space-y-4",children:a.items.map(h=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-[#fdf8f2]/30 rounded-lg border border-gray-200/30",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:h.productName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",h.sku]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["單價: ",N(h.unitPrice)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"1",value:h.quantity,onChange:g=>v(h.id,parseInt(g.target.value)||1),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"}),e.jsx("span",{className:"text-sm text-gray-500",children:"件"})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-medium text-gray-900",children:N(h.totalPrice)})}),e.jsx("button",{type:"button",onClick:()=>S(h.id),className:"text-red-600 hover:text-red-800 transition-colors",children:e.jsx($e,{className:"w-5 h-5"})})]},h.id))}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-6 w-full max-w-2xl max-h-96 overflow-hidden border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"選擇商品"}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:w.map(h=>e.jsx("button",{type:"button",onClick:()=>b(h),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-[#fdf8f2]/30 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:h.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",h.sku," | 庫存: ",h.stock]})]}),e.jsx("span",{className:"font-medium text-[#cc824d]",children:N(h.price)})]})},h.id))})]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Mr,{className:"w-5 h-5 mr-2"}),"收件地址"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["姓氏 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:a.shippingAddress.firstName,onChange:h=>n(g=>({...g,shippingAddress:{...g.shippingAddress,firstName:h.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["名字 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:a.shippingAddress.lastName,onChange:h=>n(g=>({...g,shippingAddress:{...g.shippingAddress,lastName:h.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["地址 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:a.shippingAddress.addressLine1,onChange:h=>n(g=>({...g,shippingAddress:{...g.shippingAddress,addressLine1:h.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["城市 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:a.shippingAddress.city,onChange:h=>n(g=>({...g,shippingAddress:{...g.shippingAddress,city:h.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["縣市 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:a.shippingAddress.state,onChange:h=>n(g=>({...g,shippingAddress:{...g.shippingAddress,state:h.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["郵遞區號 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:a.shippingAddress.postalCode,onChange:h=>n(g=>({...g,shippingAddress:{...g.shippingAddress,postalCode:h.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"聯絡電話"}),e.jsx("input",{type:"tel",value:a.shippingAddress.phone,onChange:h=>n(g=>({...g,shippingAddress:{...g.shippingAddress,phone:h.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"特殊選項"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isGift",checked:a.isGift,onChange:h=>n(g=>({...g,isGift:h.target.checked})),className:"w-4 h-4 text-[#cc824d] border-gray-300 rounded focus:ring-[#cc824d]"}),e.jsx("label",{htmlFor:"isGift",className:"ml-2 text-sm text-gray-700",children:"這是禮品訂單"})]}),a.isGift&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"禮品留言"}),e.jsx("textarea",{value:a.giftMessage,onChange:h=>n(g=>({...g,giftMessage:h.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"請輸入禮品留言..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"內部備註"}),e.jsx("textarea",{value:a.internalNotes,onChange:h=>n(g=>({...g,internalNotes:h.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"內部備註（客戶看不到）..."})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"訂單摘要"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"商品小計"}),e.jsx("span",{className:"text-gray-900",children:N(u.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"運費"}),e.jsx("span",{className:"text-gray-900",children:N(u.shippingFee)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold border-t border-gray-200 pt-3",children:[e.jsx("span",{className:"text-gray-900",children:"總金額"}),e.jsx("span",{className:"text-gray-900",children:N(u.total)})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(tt,{className:"w-5 h-5 mr-2"}),"配送設定"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"配送方式"}),e.jsxs("select",{value:a.shippingMethod,onChange:h=>n(g=>({...g,shippingMethod:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"standard",children:"標準配送 (+$80)"}),e.jsx("option",{value:"express",children:"快速配送 (+$150)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"物流商"}),e.jsx("input",{type:"text",value:a.shippingCarrier,onChange:h=>n(g=>({...g,shippingCarrier:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"例: 黑貓宅急便"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ni,{className:"w-5 h-5 mr-2"}),"付款與狀態"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"付款方式"}),e.jsxs("select",{value:a.paymentMethod,onChange:h=>n(g=>({...g,paymentMethod:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"credit_card",children:"信用卡"}),e.jsx("option",{value:"bank_transfer",children:"銀行轉帳"}),e.jsx("option",{value:"cod",children:"貨到付款"}),e.jsx("option",{value:"line_pay",children:"Line Pay"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"付款狀態"}),e.jsxs("select",{value:a.paymentStatus,onChange:h=>n(g=>({...g,paymentStatus:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:Ae.UNPAID,children:"未付款"}),e.jsx("option",{value:Ae.PAID,children:"已付款"}),e.jsx("option",{value:Ae.CONFIRMED,children:"已確認"}),e.jsx("option",{value:Ae.FAILED,children:"失敗"}),e.jsx("option",{value:Ae.REFUNDED,children:"已退款"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"訂單狀態"}),e.jsxs("select",{value:a.status,onChange:h=>n(g=>({...g,status:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:X.PENDING,children:"待處理"}),e.jsx("option",{value:X.PAYMENT_PENDING,children:"待付款"}),e.jsx("option",{value:X.CONFIRMED,children:"已確認"}),e.jsx("option",{value:X.PROCESSING,children:"處理中"}),e.jsx("option",{value:X.SHIPPED,children:"已出貨"}),e.jsx("option",{value:X.DELIVERED,children:"已送達"}),e.jsx("option",{value:X.COMPLETED,children:"已完成"}),e.jsx("option",{value:X.CANCELLED,children:"已取消"})]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{type:"submit",disabled:i||a.items.length===0,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx($o,{className:"w-5 h-5"}),e.jsx("span",{children:i?"保存中...":r?"更新訂單":"建立訂單"})]}),e.jsx(re,{to:"/admin/orders",className:"w-full flex items-center justify-center space-x-2 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-[#fdf8f2]/30 transition-colors",children:e.jsx("span",{children:"取消"})})]}),a.items.length===0&&e.jsxs("p",{className:"text-sm text-red-600 mt-2 flex items-center",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"請至少添加一個商品"]})]})]})]})})]})},kD=()=>e.jsxs(aa,{children:[e.jsx(q,{index:!0,element:e.jsx(_D,{})}),e.jsx(q,{path:":id",element:e.jsx(SD,{})}),e.jsx(q,{path:":id/edit",element:e.jsx(Xb,{})}),e.jsx(q,{path:"new",element:e.jsx(Xb,{})})]});class CD{constructor(){this.initializeAnalyticsData(),this.initializeRealTimeData()}initializeAnalyticsData(){if(!localStorage.getItem("marelle_analytics_data")){const t=this.generateInitialAnalyticsData();localStorage.setItem("marelle_analytics_data",JSON.stringify(t))}}initializeRealTimeData(){if(!localStorage.getItem("marelle_realtime_analytics")){const t=this.generateRealTimeData();localStorage.setItem("marelle_realtime_analytics",JSON.stringify(t))}}getSalesTrends(t="30d"){const r=this.getAnalyticsData(),a=this.filterDataByPeriod(r.sales_analytics,t);return{revenue_trend:this.calculateRevenueTrend(a),order_trend:this.calculateOrderTrend(a),conversion_trend:this.calculateConversionTrend(a),average_order_value:this.calculateAOVTrend(a),growth_metrics:this.calculateGrowthMetrics(a),seasonal_patterns:this.analyzeSeasonalPatterns(a)}}getProductPerformance(t=null,r=50){let n=this.getAnalyticsData().product_analytics;return t&&(n=n.filter(i=>i.category_id===t)),n.sort((i,l)=>l.total_revenue-i.total_revenue).slice(0,r).map(i=>({...i,performance_score:this.calculateProductPerformanceScore(i),growth_rate:this.calculateProductGrowthRate(i),inventory_turnover:this.calculateInventoryTurnover(i),profit_margin:this.calculateProfitMargin(i)}))}getCrossSellAnalysis(){const r=this.getAnalyticsData().order_analytics,a=this.analyzeProductCombinations(r),n=this.analyzeCategoryAffinities(r),i=this.analyzeSequentialPurchases(r);return{product_combinations:a,category_affinities:n,sequential_purchases:i,cross_sell_opportunities:this.identifyCrossSellOpportunities(a)}}getRFMAnalysis(){const a=this.getAnalyticsData().customer_analytics.map(n=>{const i=this.calculateRFMScores(n);return{customer_id:n.customer_id,customer_name:n.customer_name,rfm_scores:i,segment:this.determineRFMSegment(i),customer_lifetime_value:this.calculateCLV(n),churn_probability:this.calculateChurnProbability(n)}});return this.groupByRFMSegments(a)}getCustomerLifecycleAnalysis(){return this.getAnalyticsData().customer_analytics.map(a=>({customer_id:a.customer_id,current_stage:this.determineLifecycleStage(a),stage_duration:this.calculateStageDuration(a),progression_score:this.calculateProgressionScore(a),next_stage_probability:this.calculateNextStageProbability(a),churn_risk:this.calculateChurnRisk(a),recommended_actions:this.getRecommendedActions(a)}))}getCustomerBehaviorInsights(t){const a=this.getAnalyticsData().customer_analytics.find(n=>n.customer_id===t);return a?{purchase_patterns:this.analyzePurchasePatterns(a),category_preferences:this.analyzeCategoryPreferences(a),brand_affinity:this.analyzeBrandAffinity(a),price_sensitivity:this.analyzePriceSensitivity(a),seasonal_behavior:this.analyzeSeasonalBehavior(a),device_preferences:this.analyzeDevicePreferences(a),communication_preferences:this.analyzeCommunicationPreferences(a)}:null}getSupplyChainAnalytics(){const t=this.getAnalyticsData();return{supplier_performance:this.analyzeSupplierPerformance(t.supplier_analytics),inventory_efficiency:this.analyzeInventoryEfficiency(t.inventory_analytics),logistics_performance:this.analyzeLogisticsPerformance(t.logistics_analytics),procurement_insights:this.analyzeProcurementEfficiency(t.procurement_analytics),cost_analysis:this.analyzeCostStructure(t.operational_costs)}}getInventoryAnalysis(){const r=this.getAnalyticsData().inventory_analytics;return{stock_levels:this.analyzeStockLevels(r),turnover_rates:this.calculateTurnoverRates(r),slow_moving_items:this.identifySlowMovingItems(r),stockout_analysis:this.analyzeStockouts(r),demand_forecasting:this.generateDemandForecast(r),optimization_recommendations:this.getInventoryOptimizationRecommendations(r)}}getAIInsights(){const t=this.getAnalyticsData();return{business_opportunities:this.identifyBusinessOpportunities(t),risk_alerts:this.detectRiskFactors(t),optimization_suggestions:this.generateOptimizationSuggestions(t),trend_predictions:this.predictTrends(t),anomaly_detections:this.detectAnomalies(t),competitive_insights:this.analyzeCompetitivePosition(t)}}detectAnomalies(t="7d"){const r=this.getAnalyticsData();return this.getRealTimeData(),{sales_anomalies:this.detectSalesAnomalies(r.sales_analytics,t),traffic_anomalies:this.detectTrafficAnomalies(r.user_tracking,t),inventory_anomalies:this.detectInventoryAnomalies(r.inventory_analytics,t),customer_behavior_anomalies:this.detectCustomerBehaviorAnomalies(r.customer_analytics,t),operational_anomalies:this.detectOperationalAnomalies(r.operational_metrics,t)}}generatePredictions(t="30d"){const r=this.getAnalyticsData();return{sales_forecast:this.predictSales(r,t),demand_forecast:this.predictDemand(r,t),customer_churn_prediction:this.predictCustomerChurn(r),inventory_requirements:this.predictInventoryRequirements(r,t),market_opportunities:this.predictMarketOpportunities(r)}}getRealTimeMetrics(){const t=this.getRealTimeData();return{current_visitors:t.current_visitors,active_sessions:t.active_sessions,real_time_sales:t.real_time_sales,conversion_rate:t.conversion_rate,top_pages:t.top_pages,top_products:t.top_products,geographic_distribution:t.geographic_distribution,device_breakdown:t.device_breakdown}}getKPIDashboard(t="30d"){const r=this.getAnalyticsData(),a=this.filterDataByPeriod(r,t);return{financial_kpis:{total_revenue:this.calculateTotalRevenue(a),gross_profit:this.calculateGrossProfit(a),profit_margin:this.calculateProfitMargin(a),average_order_value:this.calculateAverageOrderValue(a),customer_acquisition_cost:this.calculateCAC(a),customer_lifetime_value:this.calculateAverageCLV(a)},operational_kpis:{conversion_rate:this.calculateConversionRate(a),cart_abandonment_rate:this.calculateCartAbandonmentRate(a),inventory_turnover:this.calculateInventoryTurnover(a),order_fulfillment_rate:this.calculateOrderFulfillmentRate(a),customer_satisfaction:this.calculateCustomerSatisfaction(a),return_rate:this.calculateReturnRate(a)},growth_kpis:{revenue_growth:this.calculateRevenueGrowth(a),customer_growth:this.calculateCustomerGrowth(a),market_share_growth:this.calculateMarketShareGrowth(a),repeat_purchase_rate:this.calculateRepeatPurchaseRate(a)}}}generateInitialAnalyticsData(){const t=new Date,r=new Date(t.getTime()-30*24*60*60*1e3);return{sales_analytics:this.generateSalesData(r,t),customer_analytics:this.generateCustomerData(),product_analytics:this.generateProductData(),order_analytics:this.generateOrderData(),user_tracking:this.generateUserTrackingData(),inventory_analytics:this.generateInventoryData(),supplier_analytics:this.generateSupplierData(),logistics_analytics:this.generateLogisticsData(),procurement_analytics:this.generateProcurementData(),operational_costs:this.generateOperationalCostsData(),operational_metrics:this.generateOperationalMetricsData()}}generateSalesData(t,r){const a=[],n=new Date(t);for(;n<=r;){const i=n.getDay(),o=i===0||i===6?15e3:25e3,c=.7+Math.random()*.6,d=1+(n.getTime()-t.getTime())/(r.getTime()-t.getTime())*.2,x=Math.round(o*c*d),p=Math.round(x/(800+Math.random()*400));a.push({date:new Date(n),revenue:x,orders:p,visitors:Math.round(p*(8+Math.random()*12)),conversion_rate:Math.round(p/(p*(8+Math.random()*12))*1e4)/100,average_order_value:Math.round(x/p)}),n.setDate(n.getDate()+1)}return a}generateCustomerData(){const t=[],r=["VIP","常客","新客","沉睡客戶"];for(let a=1;a<=500;a++){const n=r[Math.floor(Math.random()*r.length)],i=Math.floor(Math.random()*365)+1,l=n==="VIP"?Math.floor(Math.random()*20)+10:n==="常客"?Math.floor(Math.random()*10)+5:n==="新客"?Math.floor(Math.random()*3)+1:Math.floor(Math.random()*2)+1,o=l*(500+Math.random()*2e3);t.push({customer_id:a,customer_name:`客戶 ${a}`,email:`customer${a}@example.com`,segment:n,rfm_metrics:{recency:i,frequency:l,monetary:Math.round(o)},first_purchase_date:new Date(Date.now()-i*24*60*60*1e3-Math.random()*365*24*60*60*1e3),last_purchase_date:new Date(Date.now()-i*24*60*60*1e3),total_orders:l,total_revenue:Math.round(o),average_order_value:Math.round(o/l),preferred_categories:this.generatePreferredCategories(),device_preference:Math.random()>.6?"mobile":"desktop",acquisition_channel:this.generateAcquisitionChannel()})}return t}generateProductData(){const t=["護膚","彩妝","香水","保養","工具"],r=[];for(let a=1;a<=100;a++){const n=t[Math.floor(Math.random()*t.length)],i=Math.floor(Math.random()*2e3)+100,l=Math.floor(Math.random()*500)+10,o=i*l;r.push({product_id:a,product_name:`${n}商品 ${a}`,category:n,category_id:t.indexOf(n)+1,price:i,cost:Math.round(i*(.4+Math.random()*.3)),units_sold:l,total_revenue:o,gross_profit:o-Math.round(i*(.4+Math.random()*.3))*l,views:l*(20+Math.random()*50),conversion_rate:Math.round(l/(l*(20+Math.random()*50))*1e4)/100,inventory_level:Math.floor(Math.random()*200)+50,reorder_point:Math.floor(Math.random()*30)+10,supplier_id:Math.floor(Math.random()*20)+1,launch_date:new Date(Date.now()-Math.random()*365*24*60*60*1e3),rating:3.5+Math.random()*1.5,review_count:Math.floor(Math.random()*100)+5})}return r}calculateRevenueTrend(t){return t.map(r=>({date:r.date,revenue:r.revenue,growth_rate:this.calculateDayOverDayGrowth(t,r.date,"revenue")}))}calculateRFMScores(t){const r=t.rfm_metrics.recency<=30?5:t.rfm_metrics.recency<=60?4:t.rfm_metrics.recency<=90?3:t.rfm_metrics.recency<=180?2:1,a=t.rfm_metrics.frequency>=10?5:t.rfm_metrics.frequency>=5?4:t.rfm_metrics.frequency>=3?3:t.rfm_metrics.frequency>=2?2:1,n=t.rfm_metrics.monetary>=5e3?5:t.rfm_metrics.monetary>=2e3?4:t.rfm_metrics.monetary>=1e3?3:t.rfm_metrics.monetary>=500?2:1;return{recency:r,frequency:a,monetary:n,total_score:r+a+n}}determineRFMSegment(t){const r=t.total_score;return r>=13?"Champions":r>=11?"Loyal Customers":r>=9?"Potential Loyalists":r>=7?"At Risk":r>=5?"Cannot Lose Them":"Lost"}getAnalyticsData(){const t=localStorage.getItem("marelle_analytics_data");return t?JSON.parse(t):this.generateInitialAnalyticsData()}getRealTimeData(){const t=localStorage.getItem("marelle_realtime_analytics");return t?JSON.parse(t):this.generateRealTimeData()}updateAnalyticsData(t){localStorage.setItem("marelle_analytics_data",JSON.stringify(t))}updateRealTimeData(t){localStorage.setItem("marelle_realtime_analytics",JSON.stringify(t))}generateRealTimeData(){return{current_visitors:Math.floor(Math.random()*500)+100,active_sessions:Math.floor(Math.random()*300)+50,real_time_sales:Math.floor(Math.random()*1e4)+5e3,conversion_rate:(2+Math.random()*8).toFixed(2),top_pages:this.generateTopPages(),top_products:this.generateTopProducts(),geographic_distribution:this.generateGeographicData(),device_breakdown:{mobile:65+Math.random()*20,desktop:25+Math.random()*15,tablet:5+Math.random()*10},last_updated:new Date}}generateTopPages(){return["首頁","商品列表","商品詳情","購物車","結帳","會員中心"].map(r=>({page:r,visitors:Math.floor(Math.random()*200)+50,bounce_rate:(20+Math.random()*60).toFixed(1)}))}generateTopProducts(){return Array.from({length:10},(t,r)=>({product_id:r+1,product_name:`熱銷商品 ${r+1}`,views:Math.floor(Math.random()*100)+50,sales:Math.floor(Math.random()*20)+5}))}generateGeographicData(){return["台北市","新北市","桃園市","台中市","台南市","高雄市"].map(r=>({region:r,visitors:Math.floor(Math.random()*100)+20,percentage:(Math.random()*30+5).toFixed(1)}))}generatePreferredCategories(){const t=["護膚","彩妝","香水","保養","工具"],r=Math.floor(Math.random()*3)+1;return t.sort(()=>.5-Math.random()).slice(0,r)}generateAcquisitionChannel(){const t=["自然搜尋","社交媒體","電子郵件","直接訪問","推薦","付費廣告"];return t[Math.floor(Math.random()*t.length)]}filterDataByPeriod(t,r){return t}calculateDayOverDayGrowth(t,r,a){return(Math.random()-.5)*20}calculateOrderTrend(t){return t}calculateConversionTrend(t){return t}calculateAOVTrend(t){return t}calculateGrowthMetrics(t){return{}}analyzeSeasonalPatterns(t){return{}}calculateProductPerformanceScore(t){return Math.random()*100}calculateProductGrowthRate(t){return(Math.random()-.5)*20}calculateInventoryTurnover(t){return Math.random()*12}calculateProfitMargin(t){return Math.random()*50}analyzeProductCombinations(t){return[]}analyzeCategoryAffinities(t){return[]}analyzeSequentialPurchases(t){return[]}identifyCrossSellOpportunities(t){return[]}calculateCLV(t){return t.total_revenue*(1+Math.random())}calculateChurnProbability(t){return Math.random()*100}groupByRFMSegments(t){return{}}determineLifecycleStage(t){return"active"}calculateStageDuration(t){return Math.floor(Math.random()*365)}calculateProgressionScore(t){return Math.random()*100}calculateNextStageProbability(t){return Math.random()*100}calculateChurnRisk(t){return Math.random()*100}getRecommendedActions(t){return[]}analyzePurchasePatterns(t){return{}}analyzeCategoryPreferences(t){return{}}analyzeBrandAffinity(t){return{}}analyzePriceSensitivity(t){return{}}analyzeSeasonalBehavior(t){return{}}analyzeDevicePreferences(t){return{}}analyzeCommunicationPreferences(t){return{}}generateOrderData(){return[]}generateUserTrackingData(){return[]}generateInventoryData(){return[]}generateSupplierData(){return[]}generateLogisticsData(){return[]}generateProcurementData(){return[]}generateOperationalCostsData(){return[]}generateOperationalMetricsData(){return[]}}const on=new CD,ED=()=>{var h,g,j,T,C,E,R,k,O;const[s,t]=m.useState({}),[r,a]=m.useState({}),[n,i]=m.useState({}),[l,o]=m.useState({}),[c,d]=m.useState(!0),[x,p]=m.useState("30d"),[f,y]=m.useState(new Date);m.useEffect(()=>{b();const P=setInterval(v,3e4);return()=>clearInterval(P)},[x]);const b=async()=>{try{d(!0);const P=on.getKPIDashboard(x);t(P);const $=on.getSalesTrends(x);i($);const I=on.getAIInsights();o(I),v()}catch(P){console.error("載入分析數據失敗:",P)}finally{d(!1)}},v=()=>{const P=on.getRealTimeMetrics();a(P),y(new Date)},S=P=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(P),_=P=>new Intl.NumberFormat("zh-TW").format(P),w=P=>`${(P||0).toFixed(1)}%`,N=P=>P>0?e.jsx(Re,{className:"h-4 w-4 text-green-500"}):P<0?e.jsx(wa,{className:"h-4 w-4 text-red-500"}):e.jsx("div",{className:"h-4 w-4"}),u=P=>P>0?"text-green-600":P<0?"text-red-600":"text-gray-600";return c?e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ps,{className:"h-6 w-6 animate-spin text-[#cc824d]"}),e.jsx("span",{className:"text-lg text-gray-600",children:"載入數據分析中..."})]})})}):e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"w-full px-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"數據分析總覽"}),e.jsx("p",{className:"text-gray-600",children:"360度全方位業務數據洞察與智能分析"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:x,onChange:P=>p(P.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"7d",children:"近 7 天"}),e.jsx("option",{value:"30d",children:"近 30 天"}),e.jsx("option",{value:"90d",children:"近 90 天"}),e.jsx("option",{value:"1y",children:"近 1 年"})]}),e.jsxs("button",{onClick:v,className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b8753f] transition-colors flex items-center",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"刷新"]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(be,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"實時監控"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["最後更新: ",f.toLocaleTimeString("zh-TW")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"當前訪客"}),e.jsx(Ee,{className:"h-5 w-5 text-blue-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:_(r.current_visitors||0)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["活躍會話: ",_(r.active_sessions||0)]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"即時銷售"}),e.jsx(We,{className:"h-5 w-5 text-green-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:S(r.real_time_sales||0)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["轉換率: ",r.conversion_rate||0,"%"]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"設備分布"}),e.jsx(ul,{className:"h-5 w-5 text-purple-500"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"手機"}),e.jsx("span",{className:"font-semibold",children:w((h=r.device_breakdown)==null?void 0:h.mobile)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"桌機"}),e.jsx("span",{className:"font-semibold",children:w((g=r.device_breakdown)==null?void 0:g.desktop)})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"熱門頁面"}),e.jsx(Hu,{className:"h-5 w-5 text-orange-500"})]}),e.jsx("div",{className:"space-y-1",children:(r.top_pages||[]).slice(0,2).map((P,$)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"truncate",children:P.page}),e.jsx("span",{className:"font-semibold",children:_(P.visitors)})]},$))})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(oe,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"關鍵績效指標 (KPIs)"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"財務績效"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"總營收"}),e.jsx(We,{className:"h-5 w-5 text-green-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:S(((j=s.financial_kpis)==null?void 0:j.total_revenue)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[N(5.2),e.jsx("span",{className:u(5.2),children:"+5.2% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"毛利潤"}),e.jsx(Re,{className:"h-5 w-5 text-blue-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:S(((T=s.financial_kpis)==null?void 0:T.gross_profit)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[N(3.1),e.jsx("span",{className:u(3.1),children:"+3.1% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"平均訂單價值"}),e.jsx(ss,{className:"h-5 w-5 text-purple-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:S(((C=s.financial_kpis)==null?void 0:C.average_order_value)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[N(-1.5),e.jsx("span",{className:u(-1.5),children:"-1.5% vs 上期"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"營運績效"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"轉換率"}),e.jsx(Re,{className:"h-5 w-5 text-green-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:w(((E=s.operational_kpis)==null?void 0:E.conversion_rate)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[N(2.3),e.jsx("span",{className:u(2.3),children:"+2.3% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"購物車放棄率"}),e.jsx(te,{className:"h-5 w-5 text-orange-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:w(((R=s.operational_kpis)==null?void 0:R.cart_abandonment_rate)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[N(-3.8),e.jsx("span",{className:u(-3.8),children:"-3.8% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"客戶滿意度"}),e.jsx(wr,{className:"h-5 w-5 text-blue-500"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:w(((k=s.operational_kpis)==null?void 0:k.customer_satisfaction)||0)}),e.jsxs("div",{className:"flex items-center text-sm",children:[N(1.2),e.jsx("span",{className:u(1.2),children:"+1.2% vs 上期"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"庫存周轉率"}),e.jsx(ps,{className:"h-5 w-5 text-purple-500"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:[(((O=s.operational_kpis)==null?void 0:O.inventory_turnover)||0).toFixed(1),"x"]}),e.jsxs("div",{className:"flex items-center text-sm",children:[N(.8),e.jsx("span",{className:u(.8),children:"+0.8% vs 上期"})]})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ys,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"AI 智能洞察"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(mi,{className:"h-5 w-5 mr-2 text-yellow-500"}),"商業機會"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-yellow-400 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"護膚類商品需求上升"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"檢測到護膚類商品搜尋量增加 23%，建議增加相關產品推廣"}),e.jsx("div",{className:"text-xs text-yellow-600 mt-2",children:"置信度: 87%"})]})]})}),e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-green-400 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-800",children:"交叉銷售機會"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"購買保養品的客戶有 68% 機率同時購買工具類商品"}),e.jsx("div",{className:"text-xs text-green-600 mt-2",children:"置信度: 92%"})]})]})})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(te,{className:"h-5 w-5 mr-2 text-red-500"}),"風險警示"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-red-400 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-800",children:"庫存不足警告"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"5 件熱銷商品庫存將在 7 天內售完，需要及時補貨"}),e.jsx("div",{className:"text-xs text-red-600 mt-2",children:"風險等級: 高"})]})]})}),e.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-orange-400 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-orange-800",children:"客戶流失風險"}),e.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"23 位 VIP 客戶 30 天內未購物，存在流失風險"}),e.jsx("div",{className:"text-xs text-orange-600 mt-2",children:"風險等級: 中"})]})]})})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(Mr,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"訂單地理分布"]}),e.jsx("div",{className:"space-y-3",children:(r.geographic_distribution||[]).map((P,$)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 bg-[#cc824d] rounded-full",style:{opacity:.3+P.percentage/100*.7}}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:P.region})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:_(P.visitors)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[P.percentage,"%"]})]})]},$))})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(Hu,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"今日熱銷商品"]}),e.jsx("div",{className:"space-y-3",children:(r.top_products||[]).slice(0,5).map((P,$)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-[#cc824d] text-white text-xs font-bold rounded-full",children:$+1}),e.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:P.product_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[_(P.sales)," 件"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[_(P.views)," 瀏覽"]})]})]},$))})]})]})]})})},TD=()=>{const[s,t]=m.useState({}),[r,a]=m.useState("30days"),[n,i]=m.useState("revenue"),[l,o]=m.useState(!0),[c,d]=m.useState(!1),x=[{value:"7days",label:"最近7天"},{value:"30days",label:"最近30天"},{value:"90days",label:"最近90天"},{value:"1year",label:"最近1年"},{value:"custom",label:"自訂範圍"}],p=[{value:"revenue",label:"營收分析",icon:We},{value:"orders",label:"訂單分析",icon:ss},{value:"customers",label:"客戶分析",icon:wr},{value:"products",label:"商品分析",icon:oe}];m.useEffect(()=>{f()},[r,n]);const f=async()=>{o(!0);try{const g=on.getSalesAnalytics(r,n);t(g)}catch(g){console.error("載入銷售數據失敗:",g)}finally{o(!1)}},y=async()=>{d(!0),await new Promise(g=>setTimeout(g,1e3)),await f(),d(!1)},b=g=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(g||0),v=g=>new Intl.NumberFormat("zh-TW").format(g||0),S=g=>`${(g||0).toFixed(1)}%`,_=g=>g>0?e.jsx(Sx,{className:"h-4 w-4 text-green-600"}):g<0?e.jsx(_x,{className:"h-4 w-4 text-red-600"}):e.jsx("div",{className:"h-4 w-4"}),w=g=>g>0?"text-green-600":g<0?"text-red-600":"text-gray-500",N={totalRevenue:{value:258e4,trend:12.5,label:"總營收"},totalOrders:{value:1250,trend:8.3,label:"總訂單"},avgOrderValue:{value:2064,trend:3.7,label:"平均訂單價值"},conversionRate:{value:3.2,trend:-1.2,label:"轉換率"},totalCustomers:{value:856,trend:15.6,label:"總客戶數"},repeatCustomers:{value:342,trend:22.1,label:"回購客戶"}},u=[{id:1,name:"經典珍珠項鍊",sales:125,revenue:156250,growth:18.5},{id:2,name:"玫瑰金手鍊",sales:98,revenue:98e3,growth:12.3},{id:3,name:"鑽石耳環套組",sales:87,revenue:217500,growth:8.7},{id:4,name:"翡翠玉鐲",sales:65,revenue:195e3,growth:25.6},{id:5,name:"銀飾戒指",sales:156,revenue:62400,growth:-3.2}],h=[{channel:"官方網站",revenue:1548e3,percentage:60,growth:15.2},{channel:"第三方平台",revenue:645e3,percentage:25,growth:8.9},{channel:"實體店面",revenue:258e3,percentage:10,growth:-5.3},{channel:"社群媒體",revenue:129e3,percentage:5,growth:28.7}];return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"w-full px-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"銷售分析"}),e.jsx("p",{className:"text-gray-600",children:"深度分析銷售數據，洞察商業趨勢與機會"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(xe,{options:x.map(g=>({value:g.value,label:g.label})),value:r,onChange:a,placeholder:"選擇時間範圍",className:"min-w-[160px]"}),e.jsxs("button",{onClick:y,disabled:c,className:`px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b8753f] transition-colors flex items-center ${c?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(ps,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),c?"更新中...":"刷新數據"]}),e.jsxs("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center",children:[e.jsx(aw,{className:"h-4 w-4 mr-2"}),"匯出報表"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-8",children:Object.entries(N).map(([g,j])=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:j.label}),_(j.trend)]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g==="totalRevenue"||g==="avgOrderValue"?b(j.value):g==="conversionRate"?S(j.value):v(j.value)}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("span",{className:`text-sm font-medium ${w(j.trend)}`,children:[Math.abs(j.trend).toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"vs 上期"})]})]})]},g))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"銷售趨勢"]}),e.jsx("div",{className:"flex space-x-2",children:p.map(g=>e.jsx("button",{onClick:()=>i(g.value),className:`px-3 py-1 text-xs rounded-full transition-colors ${n===g.value?"bg-[#cc824d] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:g.label},g.value))})]}),e.jsx("div",{className:"h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"銷售趨勢圖表"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"圖表組件整合中..."})]})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(_l,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"銷售管道分析"]}),e.jsx("div",{className:"space-y-4",children:h.map((g,j)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:g.channel}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:b(g.revenue)}),e.jsxs("span",{className:`text-xs font-medium ${w(g.growth)}`,children:[g.growth>0?"+":"",g.growth.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full transition-all duration-500",style:{width:`${g.percentage}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 min-w-0",children:[g.percentage.toFixed(1),"%"]})]})]},j))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ss,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"熱銷商品排行"]}),e.jsxs("button",{className:"text-sm text-[#cc824d] hover:text-[#b8753f] flex items-center",children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"}),"查看全部"]})]}),e.jsx("div",{className:"space-y-4",children:u.map((g,j)=>e.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${j===0?"bg-yellow-500":j===1?"bg-gray-400":j===2?"bg-orange-600":"bg-gray-300"}`,children:j+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:g.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["銷量: ",v(g.sales)]}),e.jsxs("span",{children:["營收: ",b(g.revenue)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`flex items-center space-x-1 ${w(g.growth)}`,children:[_(g.growth),e.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(g.growth).toFixed(1),"%"]})]})})]},g.id))})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(be,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"銷售預測與洞察"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"本月銷售預測"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"預估營收"}),e.jsx("span",{className:"font-bold text-blue-900",children:b(32e5)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-blue-700",children:"預估訂單"}),e.jsx("span",{className:"font-bold text-blue-900",children:v(1580)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"關鍵洞察"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Re,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"週末銷售表現優異"}),e.jsx("p",{className:"text-xs text-green-700",children:"週末轉換率提升 23%，建議加強週末促銷活動"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsx(wa,{className:"h-5 w-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-900",children:"手機端轉換率偏低"}),e.jsx("p",{className:"text-xs text-orange-700",children:"手機端轉換率較桌面端低 15%，需優化行動體驗"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx(wr,{className:"h-5 w-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"客戶回購率成長"}),e.jsx("p",{className:"text-xs text-purple-700",children:"新客戶回購率較上月提升 8.5%，客戶忠誠度提高"})]})]})]})]})]})]})]})]})})},DD=()=>{const[s,t]=m.useState({}),[r,a]=m.useState("all"),[n,i]=m.useState("30days"),[l,o]=m.useState("overview"),[c,d]=m.useState(!0),x=[{value:"all",label:"全部客戶"},{value:"vip",label:"VIP客戶"},{value:"loyal",label:"忠誠客戶"},{value:"new",label:"新客戶"},{value:"inactive",label:"流失客戶"}],p=[{value:"overview",label:"客戶概覽",icon:oe},{value:"rfm",label:"RFM分析",icon:gs},{value:"lifecycle",label:"生命週期",icon:be},{value:"behavior",label:"購買行為",icon:ss},{value:"satisfaction",label:"滿意度分析",icon:Vo}];m.useEffect(()=>{f()},[r,n,l]);const f=async()=>{d(!0);try{const k=on.getCustomerAnalytics(r,n,l);t(k)}catch(k){console.error("載入客戶數據失敗:",k)}finally{d(!1)}},y=k=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(k||0),b=k=>new Intl.NumberFormat("zh-TW").format(k||0),v=k=>`${(k||0).toFixed(1)}%`,S={totalCustomers:{value:12580,trend:8.5,label:"總客戶數"},newCustomers:{value:1250,trend:15.2,label:"新客戶"},activeCustomers:{value:8950,trend:5.8,label:"活躍客戶"},churned:{value:520,trend:-12.3,label:"流失客戶"},avgLifetimeValue:{value:8650,trend:12.1,label:"平均生命週期價值"},avgOrderValue:{value:2100,trend:3.7,label:"平均訂單價值"},repeatRate:{value:35.8,trend:6.2,label:"回購率"},satisfaction:{value:4.2,trend:2.4,label:"滿意度評分"}},_=[{segment:"冠軍客戶",count:1256,percentage:10,rfm:"R5F5M5",characteristics:"高頻次、高價值、近期活躍",color:"bg-green-500",textColor:"text-green-900",bgColor:"bg-green-50"},{segment:"忠誠客戶",count:2512,percentage:20,rfm:"R4F4M4",characteristics:"中高頻次、穩定價值、定期購買",color:"bg-blue-500",textColor:"text-blue-900",bgColor:"bg-blue-50"},{segment:"潛力客戶",count:1884,percentage:15,rfm:"R3F3M3",characteristics:"中等頻次、有成長潛力",color:"bg-yellow-500",textColor:"text-yellow-900",bgColor:"bg-yellow-50"},{segment:"新客戶",count:3144,percentage:25,rfm:"R5F1M2",characteristics:"近期註冊、首次或少量購買",color:"bg-purple-500",textColor:"text-purple-900",bgColor:"bg-purple-50"},{segment:"需要關注",count:2010,percentage:16,rfm:"R2F2M2",characteristics:"購買頻次下降、需要重新喚醒",color:"bg-orange-500",textColor:"text-orange-900",bgColor:"bg-orange-50"},{segment:"流失客戶",count:1774,percentage:14,rfm:"R1F1M1",characteristics:"長期未購買、低價值",color:"bg-red-500",textColor:"text-red-900",bgColor:"bg-red-50"}],w=[{stage:"潛在客戶",count:5230,conversion:15.8,avgTime:"7天"},{stage:"新客戶",count:3144,conversion:45.2,avgTime:"30天"},{stage:"活躍客戶",count:8950,conversion:72.5,avgTime:"90天"},{stage:"忠誠客戶",count:2512,conversion:85.3,avgTime:"180天"},{stage:"冠軍客戶",count:1256,conversion:92.1,avgTime:"365天+"}],N=[{behavior:"瀏覽商品",percentage:100,sessions:45230},{behavior:"加入購物車",percentage:25.8,sessions:11669},{behavior:"開始結帳",percentage:12.5,sessions:5654},{behavior:"完成付款",percentage:8.9,sessions:4025},{behavior:"重複購買",percentage:3.2,sessions:1447}],u=[{aspect:"商品品質",score:4.5,responses:2340},{aspect:"配送服務",score:4.2,responses:2156},{aspect:"客服體驗",score:4.3,responses:1890},{aspect:"網站體驗",score:4.1,responses:2567},{aspect:"價格合理性",score:3.9,responses:2234}],h=k=>k>0?e.jsx(Re,{className:"h-4 w-4 text-green-600"}):k<0?e.jsx(wa,{className:"h-4 w-4 text-red-600"}):e.jsx("div",{className:"h-4 w-4"}),g=k=>k>0?"text-green-600":k<0?"text-red-600":"text-gray-500",j=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Object.entries(S).map(([k,O])=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:O.label}),h(O.trend)]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.includes("Value")||k.includes("Order")?y(O.value):k==="repeatRate"?v(O.value):k==="satisfaction"?`${O.value}/5.0`:b(O.value)}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("span",{className:`text-sm font-medium ${g(O.trend)}`,children:[Math.abs(O.trend).toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"vs 上期"})]})]})]},k))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(dt,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"客戶分佈趨勢"]}),e.jsx("div",{className:"h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"客戶分佈圖表"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"圖表組件整合中..."})]})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Mr,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"地理分佈"]}),e.jsx("div",{className:"space-y-4",children:[{region:"台北市",customers:3250,percentage:25.8},{region:"新北市",customers:2890,percentage:23},{region:"台中市",customers:1560,percentage:12.4},{region:"高雄市",customers:1340,percentage:10.7},{region:"其他縣市",customers:3540,percentage:28.1}].map((k,O)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:k.region}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full",style:{width:`${k.percentage}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 min-w-0",children:[b(k.customers)," (",k.percentage,"%)"]})]})]},O))})]})]})]}),T=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(gs,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"RFM 客戶分群分析"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map((k,O)=>e.jsxs("div",{className:`${k.bgColor} border border-gray-200 rounded-xl p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:`text-lg font-semibold ${k.textColor}`,children:k.segment}),e.jsx("div",{className:`w-4 h-4 rounded-full ${k.color}`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"客戶數量"}),e.jsx("span",{className:"font-bold text-gray-900",children:b(k.count)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"佔比"}),e.jsx("span",{className:"font-bold text-gray-900",children:v(k.percentage)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"RFM評分"}),e.jsx("span",{className:"font-mono text-sm font-bold text-gray-900",children:k.rfm})]}),e.jsx("div",{className:"pt-2 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-600",children:k.characteristics})})]})]},O))})]})}),C=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(be,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"客戶生命週期分析"]}),e.jsx("div",{className:"space-y-4",children:w.map((k,O)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:k.stage}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["轉換率: ",v(k.conversion)]}),e.jsxs("span",{className:"text-gray-600",children:["平均停留: ",k.avgTime]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-[#cc824d] h-3 rounded-full transition-all duration-500",style:{width:`${k.count/12580*100}%`}})}),e.jsx("span",{className:"font-bold text-gray-900 min-w-0",children:b(k.count)})]})]},O))})]})}),E=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(ss,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"購買行為漏斗分析"]}),e.jsx("div",{className:"space-y-4",children:N.map((k,O)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:k.behavior}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-gray-900",children:b(k.sessions)}),e.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",v(k.percentage),")"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-gradient-to-r from-[#cc824d] to-[#b8753f] h-4 rounded-full transition-all duration-700",style:{width:`${k.percentage}%`}})}),O<N.length-1&&e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 mt-2",children:e.jsx(wa,{className:"h-4 w-4 text-gray-400"})})]},O))})]})}),R=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Vo,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"客戶滿意度分析"]}),e.jsx("div",{className:"space-y-6",children:u.map((k,O)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:k.aspect}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-bold text-lg text-gray-900",children:k.score}),e.jsx("span",{className:"text-sm text-gray-600",children:"/5.0"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",b(k.responses),"則評價)"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[[1,2,3,4,5].map(P=>e.jsx("div",{className:`w-6 h-6 rounded ${P<=Math.floor(k.score)?"bg-yellow-400":P===Math.ceil(k.score)&&k.score%1!==0?"bg-gradient-to-r from-yellow-400 to-gray-300":"bg-gray-300"}`},P)),e.jsx("div",{className:"flex-1 ml-4",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${k.score/5*100}%`}})})})]})]},O))})]})});return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"w-full px-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"客戶分析"}),e.jsx("p",{className:"text-gray-600",children:"深度了解客戶行為，提升客戶價值與忠誠度"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(xe,{options:x.map(k=>({value:k.value,label:k.label})),value:r,onChange:a,placeholder:"選擇客戶群組",className:"min-w-[160px]"}),e.jsx(xe,{options:[{value:"7days",label:"最近7天"},{value:"30days",label:"最近30天"},{value:"90days",label:"最近90天"},{value:"1year",label:"最近1年"}],value:n,onChange:i,placeholder:"選擇時間範圍",className:"min-w-[140px]"})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"flex space-x-8",children:p.map(k=>{const O=k.icon,P=l===k.value;return e.jsxs("button",{onClick:()=>o(k.value),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${P?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(O,{className:"h-5 w-5"}),e.jsx("span",{children:k.label})]},k.value)})})}),l==="overview"&&j(),l==="rfm"&&T(),l==="lifecycle"&&C(),l==="behavior"&&E(),l==="satisfaction"&&R()]})})},AD=()=>{const[s,t]=m.useState({}),[r,a]=m.useState("all"),[n,i]=m.useState("30days"),[l,o]=m.useState("performance"),[c,d]=m.useState("revenue"),[x,p]=m.useState(!0),f=[{value:"all",label:"全部分類"},{value:"jewelry",label:"珠寶首飾"},{value:"accessories",label:"配件飾品"},{value:"luxury",label:"精品收藏"},{value:"gift",label:"禮品套組"}],y=[{value:"performance",label:"商品表現",icon:oe},{value:"inventory",label:"庫存分析",icon:un},{value:"forecast",label:"需求預測",icon:Re},{value:"optimization",label:"組合優化",icon:Ys},{value:"competitor",label:"競品分析",icon:su}],b=[{value:"revenue",label:"按營收排序"},{value:"quantity",label:"按銷量排序"},{value:"growth",label:"按成長率排序"},{value:"margin",label:"按利潤率排序"},{value:"rating",label:"按評分排序"}];m.useEffect(()=>{v()},[r,n,l,c]);const v=async()=>{p(!0);try{const L=on.getProductAnalytics(r,n,l);t(L)}catch(L){console.error("載入商品數據失敗:",L)}finally{p(!1)}},S=L=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(L||0),_=L=>new Intl.NumberFormat("zh-TW").format(L||0),w=L=>`${(L||0).toFixed(1)}%`,N={totalProducts:{value:1250,trend:5.2,label:"總商品數"},activeProducts:{value:980,trend:3.8,label:"在售商品"},topPerformers:{value:125,trend:15.6,label:"熱銷商品"},lowStock:{value:45,trend:-8.3,label:"低庫存預警"},avgRating:{value:4.3,trend:2.1,label:"平均評分"},avgMargin:{value:35.8,trend:1.2,label:"平均利潤率"},conversionRate:{value:12.5,trend:4.7,label:"商品轉換率"},returnRate:{value:2.1,trend:-15.3,label:"退貨率"}},u=[{id:1,name:"經典珍珠項鍊",category:"珠寶首飾",revenue:356250,quantity:125,growth:18.5,margin:42.3,rating:4.8,reviews:89,stock:45,stockStatus:"normal",trend:"up"},{id:2,name:"玫瑰金手鍊",category:"珠寶首飾",revenue:298e3,quantity:98,growth:12.3,margin:38.7,rating:4.6,reviews:72,stock:23,stockStatus:"low",trend:"up"},{id:3,name:"鑽石耳環套組",category:"珠寶首飾",revenue:517500,quantity:87,growth:8.7,margin:52.1,rating:4.9,reviews:156,stock:78,stockStatus:"normal",trend:"up"},{id:4,name:"翡翠玉鐲",category:"精品收藏",revenue:195e3,quantity:65,growth:25.6,margin:35.2,rating:4.4,reviews:43,stock:12,stockStatus:"critical",trend:"up"},{id:5,name:"銀飾戒指",category:"配件飾品",revenue:62400,quantity:156,growth:-3.2,margin:28.9,rating:4.2,reviews:98,stock:89,stockStatus:"normal",trend:"down"}],h=[{category:"珠寶首飾",total:450,inStock:380,lowStock:45,outOfStock:25},{category:"配件飾品",total:320,inStock:285,lowStock:25,outOfStock:10},{category:"精品收藏",total:180,inStock:156,lowStock:15,outOfStock:9},{category:"禮品套組",total:300,inStock:267,lowStock:23,outOfStock:10}],g=[{product:"經典珍珠項鍊",currentSales:125,predictedSales:145,confidence:85,trend:"increasing"},{product:"玫瑰金手鍊",currentSales:98,predictedSales:112,confidence:78,trend:"increasing"},{product:"鑽石耳環套組",currentSales:87,predictedSales:95,confidence:82,trend:"stable"},{product:"翡翠玉鐲",currentSales:65,predictedSales:85,confidence:90,trend:"increasing"},{product:"銀飾戒指",currentSales:156,predictedSales:148,confidence:75,trend:"decreasing"}],j=[{type:"cross-sell",title:"交叉銷售機會",description:"珍珠項鍊與玫瑰金手鍊搭配銷售",impact:"預估提升 15% 營收",confidence:82},{type:"pricing",title:"價格優化建議",description:"銀飾戒指價格下調 5% 可提升銷量",impact:"預估提升 23% 銷量",confidence:76},{type:"inventory",title:"庫存調整建議",description:"翡翠玉鐲需要補貨，建議增加庫存",impact:"避免缺貨損失",confidence:95},{type:"promotion",title:"促銷策略建議",description:"配件飾品類別適合打包促銷",impact:"預估提升 18% 轉換率",confidence:71}],T=L=>L==="up"||L>0?e.jsx(Re,{className:"h-4 w-4 text-green-600"}):L==="down"||L<0?e.jsx(wa,{className:"h-4 w-4 text-red-600"}):e.jsx("div",{className:"h-4 w-4"}),C=L=>L==="up"||L>0?"text-green-600":L==="down"||L<0?"text-red-600":"text-gray-500",E=L=>{switch(L){case"critical":return"text-red-600 bg-red-50 border-red-200";case"low":return"text-orange-600 bg-orange-50 border-orange-200";case"normal":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},R=L=>{switch(L){case"critical":return"緊急補貨";case"low":return"庫存偏低";case"normal":return"庫存正常";default:return"狀態未知"}},k=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Object.entries(N).map(([L,D])=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:D.label}),T(D.trend)]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L==="avgRating"?`${D.value}/5.0`:L.includes("Rate")||L==="avgMargin"?w(D.value):_(D.value)}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("span",{className:`text-sm font-medium ${C(D.trend)}`,children:[Math.abs(D.trend).toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"vs 上期"})]})]})]},L))}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ss,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"商品表現排行"]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(xe,{options:b.map(L=>({value:L.value,label:L.label})),value:c,onChange:d,placeholder:"選擇排序方式",className:"min-w-[140px] text-sm"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"商品名稱"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"營收"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"銷量"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"成長率"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"利潤率"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"評分"}),e.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-600",children:"庫存狀態"})]})}),e.jsx("tbody",{children:u.map((L,D)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${D===0?"bg-yellow-500":D===1?"bg-gray-400":D===2?"bg-orange-600":"bg-gray-300"}`,children:D+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:L.name}),e.jsx("p",{className:"text-sm text-gray-500",children:L.category})]})]})}),e.jsx("td",{className:"py-4 px-4 text-right font-semibold text-gray-900",children:S(L.revenue)}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-900",children:_(L.quantity)}),e.jsx("td",{className:"py-4 px-4 text-right",children:e.jsxs("div",{className:`flex items-center justify-end space-x-1 ${C(L.growth)}`,children:[T(L.growth),e.jsxs("span",{className:"font-medium",children:[Math.abs(L.growth).toFixed(1),"%"]})]})}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-900",children:w(L.margin)}),e.jsx("td",{className:"py-4 px-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsx(wi,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"font-medium text-gray-900",children:L.rating}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",L.reviews,")"]})]})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${E(L.stockStatus)}`,children:R(L.stockStatus)})})]},L.id))})]})})]})]}),O=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(un,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"庫存狀況分析"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:h.map((L,D)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:L.category}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"總商品數"}),e.jsx("span",{className:"font-bold text-gray-900",children:_(L.total)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-green-700",children:"正常庫存"}),e.jsx("span",{className:"font-medium text-green-700",children:_(L.inStock)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${L.inStock/L.total*100}%`}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-orange-700",children:"低庫存"}),e.jsx("span",{className:"font-medium text-orange-700",children:_(L.lowStock)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${L.lowStock/L.total*100}%`}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-red-700",children:"缺貨"}),e.jsx("span",{className:"font-medium text-red-700",children:_(L.outOfStock)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${L.outOfStock/L.total*100}%`}})})]})]})]},D))})]})}),P=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"需求預測分析"]}),e.jsx("div",{className:"space-y-4",children:g.map((L,D)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:L.product}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.trend==="increasing"?"bg-green-100 text-green-800":L.trend==="decreasing"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:L.trend==="increasing"?"上升趨勢":L.trend==="decreasing"?"下降趨勢":"穩定趨勢"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"當期銷量"}),e.jsx("p",{className:"font-bold text-gray-900",children:_(L.currentSales)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"預測銷量"}),e.jsx("p",{className:"font-bold text-gray-900",children:_(L.predictedSales)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"預測信心度"}),e.jsx("p",{className:"font-bold text-gray-900",children:w(L.confidence)})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"預測準確度"}),e.jsx("span",{children:w(L.confidence)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full",style:{width:`${L.confidence}%`}})})]})]},D))})]})}),$=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Ys,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"智能優化建議"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:j.map((L,D)=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${L.type==="cross-sell"?"bg-blue-100":L.type==="pricing"?"bg-green-100":L.type==="inventory"?"bg-orange-100":"bg-purple-100"}`,children:[L.type==="cross-sell"&&e.jsx(wn,{className:"h-5 w-5 text-blue-600"}),L.type==="pricing"&&e.jsx(_a,{className:"h-5 w-5 text-green-600"}),L.type==="inventory"&&e.jsx(un,{className:"h-5 w-5 text-orange-600"}),L.type==="promotion"&&e.jsx(Ys,{className:"h-5 w-5 text-purple-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:L.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:L.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-600",children:L.impact}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"信心度:"}),e.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[L.confidence,"%"]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-green-500 h-1 rounded-full",style:{width:`${L.confidence}%`}})})})]})]})},D))})]})}),I=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(su,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"競品分析"]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(su,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"競品分析功能開發中"}),e.jsx("p",{className:"text-gray-600",children:"即將推出完整的競品價格監控和市場分析功能"})]})]})});return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"w-full px-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"商品分析"}),e.jsx("p",{className:"text-gray-600",children:"深度分析商品表現，優化商品組合與庫存策略"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(xe,{options:f.map(L=>({value:L.value,label:L.label})),value:r,onChange:a,placeholder:"選擇商品分類",className:"min-w-[160px]"}),e.jsx(xe,{options:[{value:"7days",label:"最近7天"},{value:"30days",label:"最近30天"},{value:"90days",label:"最近90天"},{value:"1year",label:"最近1年"}],value:n,onChange:i,placeholder:"選擇時間範圍",className:"min-w-[140px]"})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"flex space-x-8",children:y.map(L=>{const D=L.icon,M=l===L.value;return e.jsxs("button",{onClick:()=>o(L.value),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${M?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(D,{className:"h-5 w-5"}),e.jsx("span",{children:L.label})]},L.value)})})}),l==="performance"&&k(),l==="inventory"&&O(),l==="forecast"&&P(),l==="optimization"&&$(),l==="competitor"&&I()]})})},ID=()=>{const[s,t]=m.useState({}),[r,a]=m.useState("30days"),[n,i]=m.useState("overview"),[l,o]=m.useState("efficiency"),[c,d]=m.useState(!0),x=[{value:"overview",label:"營運總覽",icon:oe},{value:"supply-chain",label:"供應鏈",icon:tt},{value:"logistics",label:"物流分析",icon:Mr},{value:"inventory",label:"庫存管理",icon:un},{value:"cost",label:"成本分析",icon:We},{value:"performance",label:"績效監控",icon:Ob}],p=[{value:"7days",label:"最近7天"},{value:"30days",label:"最近30天"},{value:"90days",label:"最近90天"},{value:"1year",label:"最近1年"}];m.useEffect(()=>{f()},[r,n,l]);const f=async()=>{d(!0);try{const I=on.getOperationalAnalytics(r,n);t(I)}catch(I){console.error("載入營運數據失敗:",I)}finally{d(!1)}},y=I=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(I||0),b=I=>new Intl.NumberFormat("zh-TW").format(I||0),v=I=>`${(I||0).toFixed(1)}%`,S={orderFulfillment:{value:96.8,trend:2.1,label:"訂單履行率",unit:"%"},avgProcessingTime:{value:1.2,trend:-8.5,label:"平均處理時間",unit:"天"},inventoryTurnover:{value:8.5,trend:12.3,label:"庫存周轉率",unit:"次/年"},supplierReliability:{value:94.2,trend:1.8,label:"供應商可靠性",unit:"%"},shippingAccuracy:{value:98.5,trend:.7,label:"配送準確率",unit:"%"},returnRate:{value:2.3,trend:-15.2,label:"退貨率",unit:"%"},costEfficiency:{value:87.6,trend:5.4,label:"成本效率",unit:"%"},customerSatisfaction:{value:4.4,trend:3.2,label:"客戶滿意度",unit:"/5.0"}},_=[{supplier:"珠寶供應商A",category:"珠寶首飾",reliability:96.5,quality:4.8,leadTime:7,cost:"A",status:"excellent"},{supplier:"配件供應商B",category:"配件飾品",reliability:92.3,quality:4.5,leadTime:5,cost:"B",status:"good"},{supplier:"精品供應商C",category:"精品收藏",reliability:89.7,quality:4.9,leadTime:14,cost:"A",status:"good"},{supplier:"包裝供應商D",category:"包裝材料",reliability:95.1,quality:4.2,leadTime:3,cost:"C",status:"excellent"}],w=[{region:"台北市",orders:1250,avgDeliveryTime:1.2,onTimeRate:98.5,cost:85e3},{region:"新北市",orders:980,avgDeliveryTime:1.5,onTimeRate:96.8,cost:72e3},{region:"台中市",orders:650,avgDeliveryTime:2.1,onTimeRate:94.2,cost:58e3},{region:"高雄市",orders:520,avgDeliveryTime:2.3,onTimeRate:92.6,cost:48e3},{region:"其他地區",orders:800,avgDeliveryTime:3.2,onTimeRate:89.4,cost:85e3}],N=[{product:"經典珍珠項鍊",category:"珠寶首飾",stock:15,minStock:20,status:"low",action:"建議補貨"},{product:"翡翠玉鐲",category:"精品收藏",stock:5,minStock:15,status:"critical",action:"緊急補貨"},{product:"銀飾戒指",category:"配件飾品",stock:89,minStock:30,status:"normal",action:"庫存正常"},{product:"鑽石耳環套組",category:"珠寶首飾",stock:78,minStock:25,status:"normal",action:"庫存正常"}],u=[{category:"商品採購",amount:185e4,percentage:45.2,trend:2.3},{category:"物流配送",amount:348e3,percentage:8.5,trend:-1.8},{category:"包裝材料",amount:164e3,percentage:4,trend:5.2},{category:"倉儲費用",amount:246e3,percentage:6,trend:-3.1},{category:"人事成本",amount:82e4,percentage:20,trend:4.7},{category:"營運費用",amount:656e3,percentage:16,trend:-2.5}],h=[{kpi:"訂單處理效率",current:95.8,target:95,status:"exceed"},{kpi:"庫存準確性",current:98.2,target:98,status:"exceed"},{kpi:"配送及時率",current:96.5,target:97,status:"below"},{kpi:"成本控制率",current:87.6,target:85,status:"exceed"},{kpi:"客戶滿意度",current:88,target:90,status:"below"},{kpi:"供應商績效",current:94.2,target:93,status:"exceed"}],g=I=>I>0?e.jsx(Re,{className:"h-4 w-4 text-green-600"}):I<0?e.jsx(wa,{className:"h-4 w-4 text-red-600"}):e.jsx("div",{className:"h-4 w-4"}),j=I=>I>0?"text-green-600":I<0?"text-red-600":"text-gray-500",T=I=>{switch(I){case"excellent":return"text-green-600 bg-green-50 border-green-200";case"good":return"text-blue-600 bg-blue-50 border-blue-200";case"normal":return"text-gray-600 bg-gray-50 border-gray-200";case"low":return"text-orange-600 bg-orange-50 border-orange-200";case"critical":return"text-red-600 bg-red-50 border-red-200";case"exceed":return"text-green-600 bg-green-50 border-green-200";case"below":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},C=I=>{switch(I){case"excellent":return"優秀";case"good":return"良好";case"normal":return"正常";case"low":return"偏低";case"critical":return"緊急";case"exceed":return"達標";case"below":return"未達標";default:return"未知"}},E=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Object.entries(S).map(([I,L])=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:L.label}),g(L.trend)]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[L.value,L.unit]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("span",{className:`text-sm font-medium ${j(L.trend)}`,children:[Math.abs(L.trend).toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"vs 上期"})]})]})]},I))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(te,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"庫存預警"]}),e.jsx("div",{className:"space-y-4",children:N.map((I,L)=>e.jsxs("div",{className:`p-4 rounded-lg border ${T(I.status)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:I.product}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T(I.status)}`,children:C(I.status)})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:["分類：",I.category]}),e.jsxs("p",{children:["當前庫存：",I.stock," / 最低庫存：",I.minStock]}),e.jsx("p",{className:"font-medium",children:I.action})]})]},L))})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(_l,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"成本結構分析"]}),e.jsx("div",{className:"space-y-4",children:u.map((I,L)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:I.category}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:y(I.amount)}),e.jsxs("span",{className:`text-xs ${j(I.trend)}`,children:[I.trend>0?"+":"",I.trend.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full",style:{width:`${I.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600 min-w-0",children:[I.percentage.toFixed(1),"%"]})]})]},L))})]})]})]}),R=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(tt,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"供應商績效分析"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"供應商"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"類別"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"可靠性"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"品質評分"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"交付時間"}),e.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-600",children:"成本等級"}),e.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-600",children:"整體評價"})]})}),e.jsx("tbody",{children:_.map((I,L)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4 font-medium text-gray-900",children:I.supplier}),e.jsx("td",{className:"py-4 px-4 text-gray-600",children:I.category}),e.jsx("td",{className:"py-4 px-4 text-right text-gray-900",children:v(I.reliability)}),e.jsxs("td",{className:"py-4 px-4 text-right text-gray-900",children:[I.quality,"/5.0"]}),e.jsxs("td",{className:"py-4 px-4 text-right text-gray-900",children:[I.leadTime,"天"]}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${I.cost==="A"?"bg-green-100 text-green-800":I.cost==="B"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[I.cost,"級"]})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${T(I.status)}`,children:C(I.status)})})]},L))})]})})]})}),k=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Mr,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"物流配送分析"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:w.map((I,L)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:I.region}),e.jsxs("span",{className:"text-sm text-gray-600",children:[b(I.orders)," 訂單"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"平均配送"}),e.jsxs("p",{className:"font-bold text-gray-900",children:[I.avgDeliveryTime,"天"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"準時率"}),e.jsx("p",{className:"font-bold text-gray-900",children:v(I.onTimeRate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"配送成本"}),e.jsx("p",{className:"font-bold text-gray-900",children:y(I.cost)})]})]})]},L))}),e.jsx("div",{className:"h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"物流配送地圖"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"地圖組件整合中..."})]})})]})]})}),O=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(un,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"庫存管理總覽"]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(un,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"詳細庫存分析"}),e.jsx("p",{className:"text-gray-600",children:"請參考商品分析模組的庫存功能"})]})]})}),P=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(We,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"詳細成本分析"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"成本趨勢分析"}),e.jsx("div",{className:"h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"成本趨勢圖表"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"圖表組件整合中..."})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"成本優化建議"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"物流成本優化"}),e.jsx("p",{className:"text-xs text-green-700",children:"建議整合配送路線，預估節省8%物流成本"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"採購成本優化"}),e.jsx("p",{className:"text-xs text-blue-700",children:"建議批量採購熱銷商品，預估節省5%採購成本"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-orange-900",children:"倉儲成本優化"}),e.jsx("p",{className:"text-xs text-orange-700",children:"建議優化庫存結構，預估節省12%倉儲成本"})]})]})]})]})]})}),$=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Ob,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"關鍵績效指標 (KPI)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((I,L)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:I.kpi}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${T(I.status)}`,children:C(I.status)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"當前值"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[I.current,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"目標值"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[I.target,"%"]})]}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${I.status==="exceed"?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(I.current/I.target*100,100)}%`}})})})]})]},L))})]})});return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"w-full px-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"營運分析"}),e.jsx("p",{className:"text-gray-600",children:"監控營運效率，優化供應鏈與物流管理"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("select",{value:r,onChange:I=>a(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:p.map(I=>e.jsx("option",{value:I.value,children:I.label},I.value))}),e.jsxs("button",{className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b8753f] transition-colors flex items-center",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"刷新數據"]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"flex space-x-8",children:x.map(I=>{const L=I.icon,D=n===I.value;return e.jsxs("button",{onClick:()=>i(I.value),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${D?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(L,{className:"h-5 w-5"}),e.jsx("span",{children:I.label})]},I.value)})})}),n==="overview"&&E(),n==="supply-chain"&&R(),n==="logistics"&&k(),n==="inventory"&&O(),n==="cost"&&P(),n==="performance"&&$()]})})},RD=()=>{const[s,t]=m.useState({}),[r,a]=m.useState("all"),[n,i]=m.useState("all"),[l,o]=m.useState("insights"),[c,d]=m.useState(!0),[x,p]=m.useState(!1),f=[{value:"all",label:"全部洞察"},{value:"sales",label:"銷售洞察"},{value:"customer",label:"客戶洞察"},{value:"product",label:"商品洞察"},{value:"operational",label:"營運洞察"},{value:"risk",label:"風險洞察"}],y=[{value:"all",label:"全部優先級"},{value:"critical",label:"緊急"},{value:"high",label:"高"},{value:"medium",label:"中"},{value:"low",label:"低"}],b=[{value:"insights",label:"智能洞察",icon:mi},{value:"anomalies",label:"異常檢測",icon:te},{value:"predictions",label:"預測分析",icon:Re},{value:"recommendations",label:"優化建議",icon:Ys},{value:"risks",label:"風險評估",icon:qs}];m.useEffect(()=>{v()},[r,n,l]);const v=async()=>{d(!0);try{const P=on.getAIInsights(r,n,l);t(P)}catch(P){console.error("載入AI洞察失敗:",P)}finally{d(!1)}},S=async()=>{p(!0),await new Promise(P=>setTimeout(P,2e3)),await v(),p(!1)},_=[{id:1,type:"opportunity",category:"sales",priority:"high",title:"週末銷售黃金時段發現",description:"週六下午2-5點的轉換率比平日高出32%，建議加強週末促銷活動",impact:"預估提升15%週末營收",confidence:89,actionable:!0,timestamp:"2小時前",insights:["週末客戶瀏覽時間較長，購買決策更謹慎","珠寶首飾類別在週末表現尤其突出","建議推出週末限定優惠提升轉換"]},{id:2,type:"warning",category:"customer",priority:"critical",title:"高價值客戶流失風險警報",description:"檢測到25位VIP客戶購買頻率下降超過60%，有流失風險",impact:"潛在損失營收280萬元",confidence:94,actionable:!0,timestamp:"30分鐘前",insights:["流失客戶主要集中在精品收藏類別","客服滿意度評分低於4.0的客戶流失率高3倍","建議立即啟動客戶挽回計畫"]},{id:3,type:"insight",category:"product",priority:"medium",title:"商品組合優化機會",description:"珍珠項鍊與玫瑰金手鍊的搭配購買率高達67%，建議建立套裝商品",impact:"預估提升12%客單價",confidence:82,actionable:!0,timestamp:"1小時前",insights:["套裝購買客戶的復購率高於單品購買客戶18%","建議價格折扣控制在8-12%之間","套裝商品適合作為節日禮品推廣"]},{id:4,type:"trend",category:"operational",priority:"low",title:"物流效率改善趨勢",description:"北部地區配送時間較上月改善15%，南部地區仍有優化空間",impact:"整體客戶滿意度提升",confidence:76,actionable:!1,timestamp:"4小時前",insights:["新物流夥伴的服務品質穩定提升","南部配送延遲主要因為倉儲位置","建議評估南部增設配送點的可行性"]}],w=[{id:1,type:"spike",metric:"網站流量",value:"+156%",description:"今日下午3點檢測到異常流量激增",severity:"medium",status:"investigating",timestamp:"1小時前"},{id:2,type:"drop",metric:"轉換率",value:"-23%",description:"手機端轉換率異常下降",severity:"high",status:"confirmed",timestamp:"2小時前"},{id:3,type:"unusual",metric:"退貨率",value:"+45%",description:"特定商品類別退貨率異常上升",severity:"critical",status:"action_required",timestamp:"45分鐘前"}],N=[{category:"銷售預測",metric:"下月營收",prediction:"3,250,000",confidence:88,trend:"increasing",variance:"±8%"},{category:"需求預測",metric:"熱門商品",prediction:"珍珠系列",confidence:92,trend:"stable",variance:"±5%"},{category:"客戶預測",metric:"新客增長",prediction:"1,580",confidence:79,trend:"increasing",variance:"±12%"},{category:"庫存預測",metric:"補貨需求",prediction:"15個SKU",confidence:95,trend:"urgent",variance:"±3%"}],u=[{category:"marketing",title:"個人化推薦系統",description:"基於客戶購買歷史建立個人化商品推薦",priority:"high",effort:"medium",impact:"high",expectedROI:"285%"},{category:"pricing",title:"動態定價策略",description:"根據需求和庫存情況調整商品價格",priority:"medium",effort:"high",impact:"medium",expectedROI:"156%"},{category:"inventory",title:"智能補貨系統",description:"使用AI預測最佳補貨時機和數量",priority:"high",effort:"low",impact:"high",expectedROI:"234%"},{category:"customer",title:"客戶流失預警",description:"建立早期客戶流失預警和挽回機制",priority:"critical",effort:"medium",impact:"high",expectedROI:"412%"}],h=[{type:"operational",title:"供應鏈中斷風險",probability:"medium",impact:"high",riskScore:75,description:"主要供應商集中度過高，存在供應中斷風險",mitigation:"建議建立備用供應商網絡"},{type:"financial",title:"庫存積壓風險",probability:"low",impact:"medium",riskScore:35,description:"季節性商品庫存可能面臨積壓",mitigation:"提前規劃清倉促銷活動"},{type:"market",title:"競爭加劇風險",probability:"high",impact:"medium",riskScore:68,description:"新競爭者進入市場，價格競爭激烈",mitigation:"加強品牌差異化和客戶忠誠度"}],g=P=>{switch(P){case"opportunity":return e.jsx(wE,{className:"h-5 w-5 text-green-600"});case"warning":return e.jsx(te,{className:"h-5 w-5 text-red-600"});case"insight":return e.jsx(mi,{className:"h-5 w-5 text-blue-600"});case"trend":return e.jsx(Re,{className:"h-5 w-5 text-purple-600"});default:return e.jsx(hl,{className:"h-5 w-5 text-gray-600"})}},j=P=>{switch(P){case"critical":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},T=P=>{switch(P){case"critical":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},C=()=>e.jsx("div",{className:"space-y-6",children:_.map(P=>e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-gray-50 rounded-lg",children:g(P.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:P.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${j(P.priority)}`,children:P.priority==="critical"?"緊急":P.priority==="high"?"高":P.priority==="medium"?"中":"低"}),e.jsx("span",{className:"text-xs text-gray-500",children:P.timestamp})]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:P.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"預期影響"}),e.jsx("p",{className:"font-medium text-gray-900",children:P.impact})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"信心度"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[P.confidence,"%"]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"可執行性"}),e.jsx("p",{className:"font-medium text-gray-900",children:P.actionable?"可執行":"觀察中"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"關鍵洞察:"}),e.jsx("ul",{className:"space-y-1",children:P.insights.map(($,I)=>e.jsxs("li",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#cc824d] mt-2 mr-3 flex-shrink-0"}),$]},I))})]}),P.actionable&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("button",{className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b8753f] transition-colors text-sm",children:"執行建議"})})]})]})},P.id))}),E=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(te,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"異常檢測報告"]}),e.jsx("div",{className:"space-y-4",children:w.map(P=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:P.metric}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${T(P.severity)}`,children:P.severity==="critical"?"嚴重":P.severity==="high"?"高":"中"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`text-lg font-bold ${P.type==="spike"?"text-green-600":P.type==="drop"?"text-red-600":"text-orange-600"}`,children:P.value}),e.jsx("p",{className:"text-xs text-gray-500",children:P.timestamp})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:P.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.status==="investigating"?"bg-blue-100 text-blue-800":P.status==="confirmed"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:P.status==="investigating"?"調查中":P.status==="confirmed"?"已確認":"需要處理"}),e.jsx("button",{className:"text-sm text-[#cc824d] hover:text-[#b8753f]",children:"查看詳細"})]})]},P.id))})]})}),R=()=>e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:N.map((P,$)=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:P.category}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.trend==="increasing"?"bg-green-100 text-green-800":P.trend==="urgent"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:P.trend==="increasing"?"上升趨勢":P.trend==="urgent"?"緊急":"穩定"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:P.metric}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.prediction})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"預測信心度"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[P.confidence,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full",style:{width:`${P.confidence}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"誤差範圍"}),e.jsx("span",{className:"font-medium text-gray-900",children:P.variance})]})]})]},$))})}),k=()=>e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:u.map((P,$)=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:P.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${j(P.priority)}`,children:P.priority==="critical"?"緊急":P.priority==="high"?"高":P.priority==="medium"?"中":"低"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:P.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"實施難度"}),e.jsx("p",{className:"font-medium text-gray-900",children:P.effort==="high"?"高":P.effort==="medium"?"中":"低"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"預期影響"}),e.jsx("p",{className:"font-medium text-gray-900",children:P.impact==="high"?"高":P.impact==="medium"?"中":"低"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"預期ROI"}),e.jsx("p",{className:"font-bold text-green-600",children:P.expectedROI})]}),e.jsx("button",{className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b8753f] transition-colors text-sm",children:"開始實施"})]})]},$))})}),O=()=>e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:h.map((P,$)=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:P.title}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:P.riskScore}),e.jsx("div",{className:"text-xs text-gray-500",children:"風險分數"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"發生機率"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.probability==="high"?"bg-red-100 text-red-800":P.probability==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:P.probability==="high"?"高":P.probability==="medium"?"中":"低"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"影響程度"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.impact==="high"?"bg-red-100 text-red-800":P.impact==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:P.impact==="high"?"高":P.impact==="medium"?"中":"低"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:`h-2 rounded-full ${P.riskScore>=70?"bg-red-500":P.riskScore>=40?"bg-yellow-500":"bg-green-500"}`,style:{width:`${P.riskScore}%`}})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:P.description}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"建議措施"}),e.jsx("p",{className:"text-sm text-gray-700",children:P.mitigation})]})]},$))})});return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"w-full px-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx(Ys,{className:"h-8 w-8 mr-3 text-[#cc824d]"}),"AI 智能洞察"]}),e.jsx("p",{className:"text-gray-600",children:"運用人工智能分析商業數據，提供智能洞察與預測建議"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("select",{value:r,onChange:P=>a(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:f.map(P=>e.jsx("option",{value:P.value,children:P.label},P.value))}),e.jsx("select",{value:n,onChange:P=>i(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:y.map(P=>e.jsx("option",{value:P.value,children:P.label},P.value))}),e.jsxs("button",{onClick:S,disabled:x,className:`px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b8753f] transition-colors flex items-center ${x?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(ps,{className:`h-4 w-4 mr-2 ${x?"animate-spin":""}`}),x?"AI分析中...":"重新分析"]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"flex space-x-8",children:b.map(P=>{const $=P.icon,I=l===P.value;return e.jsxs("button",{onClick:()=>o(P.value),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${I?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx($,{className:"h-5 w-5"}),e.jsx("span",{children:P.label})]},P.value)})})}),x&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-center",children:[e.jsx(Sk,{className:"h-5 w-5 text-blue-600 mr-2 animate-pulse"}),e.jsx("span",{className:"text-blue-800",children:"AI 正在分析最新數據，請稍候..."})]}),l==="insights"&&C(),l==="anomalies"&&E(),l==="predictions"&&R(),l==="recommendations"&&k(),l==="risks"&&O()]})})},PD=()=>{const s=Ga();return m.useEffect(()=>{it.fromTo(".analytics-content",{opacity:0,y:20},{opacity:1,y:0,duration:.6,ease:"power2.out"})},[s.pathname]),e.jsx("div",{className:"analytics-content",children:e.jsx("div",{className:"analytics-content",children:e.jsxs(aa,{children:[e.jsx(q,{path:"/",element:e.jsx(ED,{})}),e.jsx(q,{path:"/sales",element:e.jsx(TD,{})}),e.jsx(q,{path:"/customers",element:e.jsx(DD,{})}),e.jsx(q,{path:"/products",element:e.jsx(AD,{})}),e.jsx(q,{path:"/operations",element:e.jsx(ID,{})}),e.jsx(q,{path:"/ai-insights",element:e.jsx(RD,{})})]})})})};class vp{constructor(){this.storageKey="marelle-system-settings",this.changeLogKey="marelle-setting-changes",this.initializeDefaultSettings()}initializeDefaultSettings(){const t=this.getAllSettings();if(Object.keys(t).length===0){const r=this.getDefaultSettingsStructure();localStorage.setItem(this.storageKey,JSON.stringify(r))}}getDefaultSettingsStructure(){return{system_core:{"system.name":{settingId:"system.name",category:"system_core",key:"system.name",displayName:"系統名稱",description:"電商平台的顯示名稱",value:"Marelle",defaultValue:"Marelle",dataType:"string",isRequired:!0,isSystem:!0,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"system.description":{settingId:"system.description",category:"system_core",key:"system.description",displayName:"系統描述",description:"電商平台的簡短描述",value:"優雅的線上購物體驗",defaultValue:"優雅的線上購物體驗",dataType:"textarea",isRequired:!1,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"system.contact_email":{settingId:"system.contact_email",category:"system_core",key:"system.contact_email",displayName:"聯絡信箱",description:"系統管理員聯絡信箱",value:"admin@marelle.com",defaultValue:"admin@marelle.com",dataType:"email",isRequired:!0,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"system.phone":{settingId:"system.phone",category:"system_core",key:"system.phone",displayName:"聯絡電話",description:"客服聯絡電話",value:"+886-2-1234-5678",defaultValue:"+886-2-1234-5678",dataType:"string",isRequired:!1,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}},system_security:{"security.password_min_length":{settingId:"security.password_min_length",category:"system_security",key:"security.password_min_length",displayName:"密碼最小長度",description:"使用者密碼的最小字元數",value:8,defaultValue:8,dataType:"number",constraints:{minValue:6,maxValue:32},isRequired:!0,isSystem:!0,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"security.password_require_uppercase":{settingId:"security.password_require_uppercase",category:"system_security",key:"security.password_require_uppercase",displayName:"密碼需要大寫字母",description:"密碼是否必須包含大寫字母",value:!0,defaultValue:!0,dataType:"boolean",isRequired:!0,isSystem:!0,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"security.login_max_attempts":{settingId:"security.login_max_attempts",category:"system_security",key:"security.login_max_attempts",displayName:"登入最大嘗試次數",description:"帳號被鎖定前的最大登入失敗次數",value:5,defaultValue:5,dataType:"number",constraints:{minValue:3,maxValue:10},isRequired:!0,isSystem:!0,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"security.session_timeout":{settingId:"security.session_timeout",category:"system_security",key:"security.session_timeout",displayName:"會話超時時間",description:"使用者會話的超時時間（分鐘）",value:30,defaultValue:30,dataType:"number",constraints:{minValue:10,maxValue:720},isRequired:!0,isSystem:!0,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}},notification_management:{"notification.email_enabled":{settingId:"notification.email_enabled",category:"notification_management",key:"notification.email_enabled",displayName:"啟用郵件通知",description:"是否啟用系統郵件通知功能",value:!0,defaultValue:!0,dataType:"boolean",isRequired:!0,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"notification.email_smtp_host":{settingId:"notification.email_smtp_host",category:"notification_management",key:"notification.email_smtp_host",displayName:"SMTP 主機",description:"郵件發送伺服器地址",value:"smtp.gmail.com",defaultValue:"smtp.gmail.com",dataType:"string",isRequired:!0,isSystem:!1,isUserConfigurable:!0,requiresRestart:!0,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"notification.sms_enabled":{settingId:"notification.sms_enabled",category:"notification_management",key:"notification.sms_enabled",displayName:"啟用簡訊通知",description:"是否啟用系統簡訊通知功能",value:!1,defaultValue:!1,dataType:"boolean",isRequired:!0,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}},payment_management:{"payment.currency":{settingId:"payment.currency",category:"payment_management",key:"payment.currency",displayName:"預設貨幣",description:"系統預設的貨幣單位",value:"TWD",defaultValue:"TWD",dataType:"select",constraints:{options:[{value:"TWD",label:"新台幣 (TWD)"},{value:"USD",label:"美元 (USD)"},{value:"EUR",label:"歐元 (EUR)"},{value:"JPY",label:"日圓 (JPY)"}]},isRequired:!0,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"payment.credit_card_enabled":{settingId:"payment.credit_card_enabled",category:"payment_management",key:"payment.credit_card_enabled",displayName:"啟用信用卡支付",description:"是否啟用信用卡支付功能",value:!0,defaultValue:!0,dataType:"boolean",isRequired:!0,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"payment.handling_fee":{settingId:"payment.handling_fee",category:"payment_management",key:"payment.handling_fee",displayName:"手續費百分比",description:"支付處理手續費百分比",value:2.5,defaultValue:2.5,dataType:"number",constraints:{minValue:0,maxValue:10},isRequired:!1,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}},shipping_management:{"shipping.free_shipping_threshold":{settingId:"shipping.free_shipping_threshold",category:"shipping_management",key:"shipping.free_shipping_threshold",displayName:"免運費門檻",description:"享受免運費的最低消費金額",value:1e3,defaultValue:1e3,dataType:"number",constraints:{minValue:0,maxValue:1e4},isRequired:!1,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"shipping.default_rate":{settingId:"shipping.default_rate",category:"shipping_management",key:"shipping.default_rate",displayName:"預設運費",description:"標準配送的預設運費",value:80,defaultValue:80,dataType:"number",constraints:{minValue:0,maxValue:500},isRequired:!0,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},"shipping.processing_days":{settingId:"shipping.processing_days",category:"shipping_management",key:"shipping.processing_days",displayName:"處理天數",description:"訂單處理所需的工作天數",value:2,defaultValue:2,dataType:"number",constraints:{minValue:1,maxValue:10},isRequired:!0,isSystem:!1,isUserConfigurable:!0,requiresRestart:!1,version:1,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}}}getAllSettings(){const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):{}}getSettingsByCategory(t){return this.getAllSettings()[t]||{}}getSetting(t,r){var n;return(n=this.getSettingsByCategory(t)[r])==null?void 0:n.value}getSettingObject(t,r){return this.getSettingsByCategory(t)[r]}updateSetting(t,r,a,n="admin"){var o;const i=this.getAllSettings();i[t]||(i[t]={});const l=(o=i[t][r])==null?void 0:o.value;return i[t][r]&&(i[t][r]={...i[t][r],value:a,updatedAt:new Date().toISOString(),updatedBy:n,version:i[t][r].version+1}),localStorage.setItem(this.storageKey,JSON.stringify(i)),this.logSettingChange(t,r,l,a,n),i[t][r]}resetSetting(t,r,a="admin"){const n=this.getSettingObject(t,r);return n?this.updateSetting(t,r,n.defaultValue,a):null}updateMultipleSettings(t,r="admin"){const a=[];return t.forEach(({category:n,key:i,value:l})=>{const o=this.updateSetting(n,i,l,r);a.push(o)}),a}logSettingChange(t,r,a,n,i,l=""){const o=this.getChangeLogs(),c={logId:this.generateId(),settingId:`${t}.${r}`,category:t,key:r,changeType:a===void 0?"create":"update",oldValue:a,newValue:n,reason:l,changedBy:i,changedAt:new Date().toISOString(),ipAddress:"localhost",userAgent:navigator.userAgent};o.push(c),localStorage.setItem(this.changeLogKey,JSON.stringify(o))}getChangeLogs(t=null,r=100){const a=localStorage.getItem(this.changeLogKey);let n=a?JSON.parse(a):[];return t&&(n=n.filter(i=>i.category===t)),n.sort((i,l)=>new Date(l.changedAt)-new Date(i.changedAt)).slice(0,r)}getSettingsStatistics(){const t=this.getAllSettings(),r=Object.keys(t),a=this.getChangeLogs();let n=0,i=0,l=0,o=0;return r.forEach(c=>{const d=t[c];Object.values(d).forEach(x=>{n++,x.status==="active"&&i++,x.isSystem&&l++,x.isUserConfigurable&&o++})}),{totalSettings:n,activeSettings:i,systemSettings:l,userConfigurableSettings:o,totalCategories:r.length,recentChanges:a.slice(0,10),lastModified:a.length>0?a[0].changedAt:null}}exportSettings(t=null){const r=this.getAllSettings(),a={timestamp:new Date().toISOString(),version:"1.0",settings:t?Object.fromEntries(Object.entries(r).filter(([n])=>t.includes(n))):r};return JSON.stringify(a,null,2)}importSettings(t,r="admin"){try{const a=JSON.parse(t),n=[];return Object.entries(a.settings).forEach(([i,l])=>{Object.entries(l).forEach(([o,c])=>{const d=this.updateSetting(i,o,c.value,r);n.push({category:i,key:o,success:!!d})})}),{success:!0,results:n}}catch(a){return{success:!1,error:a.message}}}validateSetting(t,r,a){const n=this.getSettingObject(t,r);if(!n)return{valid:!1,error:"設定不存在"};const{dataType:i,constraints:l,isRequired:o}=n;if(o&&(a==null||a===""))return{valid:!1,error:"此設定為必填項目"};if(a!=null)switch(i){case"number":if(isNaN(a))return{valid:!1,error:"必須是數字"};const c=Number(a);if((l==null?void 0:l.minValue)!==void 0&&c<l.minValue)return{valid:!1,error:`最小值為 ${l.minValue}`};if((l==null?void 0:l.maxValue)!==void 0&&c>l.maxValue)return{valid:!1,error:`最大值為 ${l.maxValue}`};break;case"email":if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))return{valid:!1,error:"請輸入有效的電子郵件地址"};break;case"url":try{new URL(a)}catch{return{valid:!1,error:"請輸入有效的URL"}}break;case"string":case"textarea":if(l!=null&&l.minLength&&a.length<l.minLength)return{valid:!1,error:`最小長度為 ${l.minLength}`};if(l!=null&&l.maxLength&&a.length>l.maxLength)return{valid:!1,error:`最大長度為 ${l.maxLength}`};break;case"select":if(l!=null&&l.options&&!l.options.map(p=>p.value).includes(a))return{valid:!1,error:"請選擇有效的選項"};break}return{valid:!0}}searchSettings(t,r=null){const a=this.getAllSettings(),n=[];return Object.entries(a).forEach(([i,l])=>{r&&i!==r||Object.entries(l).forEach(([o,c])=>{`${c.displayName} ${c.description} ${o}`.toLowerCase().includes(t.toLowerCase())&&n.push({...c,category:i,key:o})})}),n}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}clearAllData(){localStorage.removeItem(this.storageKey),localStorage.removeItem(this.changeLogKey)}}Fi(vp,"SETTING_CATEGORIES",{SYSTEM_CORE:"system_core",SYSTEM_SECURITY:"system_security",SYSTEM_PERFORMANCE:"system_performance",USER_MANAGEMENT:"user_management",PRODUCT_MANAGEMENT:"product_management",INVENTORY_MANAGEMENT:"inventory_management",ORDER_MANAGEMENT:"order_management",PAYMENT_MANAGEMENT:"payment_management",SHIPPING_MANAGEMENT:"shipping_management",PROMOTION_MANAGEMENT:"promotion_management",CONTENT_MANAGEMENT:"content_management",NOTIFICATION_MANAGEMENT:"notification_management",ANALYTICS_MANAGEMENT:"analytics_management",PAYMENT_GATEWAY:"payment_gateway",LOGISTICS_PROVIDER:"logistics_provider",EMAIL_SERVICE:"email_service",SMS_SERVICE:"sms_service",CLOUD_STORAGE:"cloud_storage",FRONTEND_THEME:"frontend_theme",FRONTEND_LAYOUT:"frontend_layout",FRONTEND_SEO:"frontend_seo",BACKEND_INTERFACE:"backend_interface",BACKEND_WORKFLOW:"backend_workflow",BACKEND_REPORTING:"backend_reporting"}),Fi(vp,"DATA_TYPES",{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",JSON:"json",ARRAY:"array",FILE:"file",IMAGE:"image",URL:"url",EMAIL:"email",PASSWORD:"password",TEXTAREA:"textarea",SELECT:"select",MULTI_SELECT:"multi_select",DATE:"date",TIME:"time",DATETIME:"datetime",COLOR:"color",RANGE:"range"});const Me=new vp,MD=()=>{const[s,t]=m.useState({}),[r,a]=m.useState([]),[n,i]=m.useState({}),[l,o]=m.useState({}),[c,d]=m.useState(""),[x,p]=m.useState([]);m.useEffect(()=>{f()},[]),m.useEffect(()=>{if(c.trim()){const h=Me.searchSettings(c);p(h)}else p([])},[c]);const f=()=>{const h=Me.getSettingsStatistics();t(h),a(h.recentChanges);const g=y();i(g);const j=b();o(j)},y=()=>{var j,T,C,E,R,k,O;const h=Me.getSettingsByCategory("system_security"),g=Me.getSettingsByCategory("notification_management");return{security:{status:"healthy",message:"安全設定正常",lastCheck:new Date().toISOString(),details:{passwordPolicy:((j=h["security.password_min_length"])==null?void 0:j.value)>=8,loginProtection:((T=h["security.login_max_attempts"])==null?void 0:T.value)<=5,sessionTimeout:((C=h["security.session_timeout"])==null?void 0:C.value)<=60}},notifications:{status:(E=g["notification.email_enabled"])!=null&&E.value?"active":"warning",message:(R=g["notification.email_enabled"])!=null&&R.value?"通知系統正常運作":"部分通知功能未啟用",lastCheck:new Date().toISOString(),details:{email:(k=g["notification.email_enabled"])==null?void 0:k.value,sms:(O=g["notification.sms_enabled"])==null?void 0:O.value}},performance:{status:"healthy",message:"系統效能良好",lastCheck:new Date().toISOString(),details:{responseTime:"< 200ms",uptime:"99.9%",memoryUsage:"65%"}}}},b=()=>({"system.name":Me.getSetting("system_core","system.name"),"security.password_min_length":Me.getSetting("system_security","security.password_min_length"),"notification.email_enabled":Me.getSetting("notification_management","notification.email_enabled"),"payment.currency":Me.getSetting("payment_management","payment.currency"),"shipping.free_shipping_threshold":Me.getSetting("shipping_management","shipping.free_shipping_threshold")}),v=(h,g,j)=>{Me.updateSetting(h,g,j),f()},S=()=>{const h=Me.exportSettings(),g=new Blob([h],{type:"application/json"}),j=URL.createObjectURL(g),T=document.createElement("a");T.href=j,T.download=`marelle-settings-${new Date().toISOString().split("T")[0]}.json`,T.click(),URL.revokeObjectURL(j)},_=h=>{const g=h.target.files[0];if(g){const j=new FileReader;j.onload=T=>{const C=Me.importSettings(T.target.result);C.success?(alert("設定匯入成功！"),f()):alert(`匯入失敗：${C.error}`)},j.readAsText(g)}},w=h=>new Date(h).toLocaleString("zh-TW"),N=h=>{switch(h){case"healthy":case"active":return e.jsx(ae,{className:"h-5 w-5 text-green-500"});case"warning":return e.jsx(te,{className:"h-5 w-5 text-yellow-500"});case"error":return e.jsx(te,{className:"h-5 w-5 text-red-500"});default:return e.jsx(be,{className:"h-5 w-5 text-gray-500"})}},u=h=>{switch(h){case"healthy":case"active":return"text-green-600 bg-green-50 border-green-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"error":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"系統設定總覽"}),e.jsx("p",{className:"text-gray-600",children:"集中管理所有系統配置與設定項目"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:S,className:"bg-white text-gray-700 border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors flex items-center font-medium",children:[e.jsx(aw,{className:"h-5 w-5 mr-2"}),"匯出設定"]}),e.jsxs("label",{className:"bg-white text-gray-700 border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors flex items-center font-medium cursor-pointer",children:[e.jsx(zC,{className:"h-5 w-5 mr-2"}),"匯入設定",e.jsx("input",{type:"file",accept:".json",onChange:_,className:"hidden"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"總設定項目"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalSettings||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(kr,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"啟用設定"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.activeSettings||0})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ae,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"設定分類"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalCategories||0})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(zu,{className:"h-6 w-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"系統設定"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.systemSettings||0})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(kx,{className:"h-6 w-6 text-orange-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(oe,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"系統狀態監控"]}),e.jsx("div",{className:"space-y-4",children:Object.entries(n).map(([h,g])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[N(g.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:h}),e.jsx("p",{className:"text-sm text-gray-600",children:g.message})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${u(g.status)}`,children:g.status==="healthy"?"正常":g.status==="active"?"運作中":g.status==="warning"?"警告":"錯誤"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:w(g.lastCheck)})]})]},h))})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(zu,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"快速設定"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"系統名稱"}),e.jsx("input",{type:"text",value:l["system.name"]||"",onChange:h=>v("system_core","system.name",h.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"密碼最小長度"}),e.jsx("input",{type:"number",value:l["security.password_min_length"]||"",onChange:h=>v("system_security","security.password_min_length",Number(h.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"預設貨幣"}),e.jsx(xe,{options:[{value:"TWD",label:"新台幣 (TWD)"},{value:"USD",label:"美元 (USD)"},{value:"EUR",label:"歐元 (EUR)"},{value:"JPY",label:"日圓 (JPY)"}],value:l["payment.currency"]||"TWD",onChange:h=>v("payment_management","payment.currency",h),placeholder:"選擇貨幣",className:"w-full"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"免運費門檻"}),e.jsx("input",{type:"number",value:l["shipping.free_shipping_threshold"]||"",onChange:h=>v("shipping_management","shipping.free_shipping_threshold",Number(h.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]})})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(be,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"最近變更"]}),e.jsxs("div",{className:"space-y-3",children:[r.slice(0,5).map((h,g)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.settingId}),e.jsx("span",{className:"text-xs text-gray-500",children:w(h.changedAt)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(na,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:h.changedBy})]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"變更："}),e.jsx("span",{className:"text-red-600 line-through mr-2",children:String(h.oldValue)}),e.jsx("span",{className:"text-green-600",children:String(h.newValue)})]})]},g)),r.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"暫無變更記錄"})]})]})})]})]})})},OD=()=>{const[s,t]=m.useState({}),[r,a]=m.useState(null),[n,i]=m.useState({}),[l,o]=m.useState({}),[c,d]=m.useState(""),[x,p]=m.useState(!1);m.useEffect(()=>{f()},[]);const f=()=>{const h=Me.getSettingsByCategory("system_core");t(h),i(Object.fromEntries(Object.entries(h).map(([g,j])=>[g,j.value])))},y=h=>{a(h),i(g=>{var j;return{...g,[h]:((j=s[h])==null?void 0:j.value)||""}})},b=h=>{a(null),i(g=>{var j;return{...g,[h]:((j=s[h])==null?void 0:j.value)||""}}),o(g=>{const j={...g};return delete j[h],j})},v=async h=>{const g=n[h],j=Me.validateSetting("system_core",h,g);if(!j.valid){o(T=>({...T,[h]:j.error}));return}try{Me.updateSetting("system_core",h,g),a(null),o(T=>{const C={...T};return delete C[h],C}),d("success"),p(!1),f(),setTimeout(()=>d(""),3e3)}catch{d("error"),setTimeout(()=>d(""),3e3)}},S=(h,g)=>{i(j=>({...j,[h]:g})),p(!0),l[h]&&o(j=>{const T={...j};return delete T[h],T})},_=h=>{window.confirm("確定要重置此設定為預設值嗎？")&&(Me.resetSetting("system_core",h),f(),d("reset"),setTimeout(()=>d(""),3e3))},w=()=>{const h=[];let g=!1;if(Object.keys(n).forEach(j=>{var T;if(n[j]!==((T=s[j])==null?void 0:T.value)){const C=Me.validateSetting("system_core",j,n[j]);C.valid?h.push({category:"system_core",key:j,value:n[j]}):(o(E=>({...E,[j]:C.error})),g=!0)}}),g){d("validation_error"),setTimeout(()=>d(""),3e3);return}h.length>0&&(Me.updateMultipleSettings(h),p(!1),d("success"),f(),setTimeout(()=>d(""),3e3))},N=h=>({"system.name":e.jsx(ml,{className:"h-5 w-5"}),"system.description":e.jsx(hl,{className:"h-5 w-5"}),"system.contact_email":e.jsx(xl,{className:"h-5 w-5"}),"system.phone":e.jsx(Uo,{className:"h-5 w-5"}),"system.address":e.jsx(Mr,{className:"h-5 w-5"}),"system.website":e.jsx(Jo,{className:"h-5 w-5"}),"system.timezone":e.jsx(be,{className:"h-5 w-5"}),"system.language":e.jsx(M8,{className:"h-5 w-5"})})[h]||e.jsx(hl,{className:"h-5 w-5"}),u=(h,g)=>{var E,R;const j=r===h,T=j?n[h]:g.value,C=l[h];return g.dataType==="textarea"?e.jsxs("div",{className:"space-y-2",children:[j?e.jsx("textarea",{value:T||"",onChange:k=>S(h,k.target.value),rows:4,className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${C?"border-red-300":"border-gray-300"}`,placeholder:g.description}):e.jsx("div",{className:"min-h-[100px] p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:T||"未設定"})}),C&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),C]})]}):g.dataType==="select"&&((E=g.constraints)!=null&&E.options)?e.jsxs("div",{className:"space-y-2",children:[j?e.jsx("select",{value:T||"",onChange:k=>S(h,k.target.value),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${C?"border-red-300":"border-gray-300"}`,children:g.constraints.options.map(k=>e.jsx("option",{value:k.value,children:k.label},k.value))}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:((R=g.constraints.options.find(k=>k.value===T))==null?void 0:R.label)||T||"未設定"})}),C&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),C]})]}):e.jsxs("div",{className:"space-y-2",children:[j?e.jsx("input",{type:g.dataType==="email"?"email":g.dataType==="number"?"number":g.dataType==="url"?"url":"text",value:T||"",onChange:k=>S(h,k.target.value),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${C?"border-red-300":"border-gray-300"}`,placeholder:g.description}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:T||"未設定"})}),C&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),C]})]})};return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"一般設定"}),e.jsx("p",{className:"text-gray-600",children:"管理系統的基本資訊和聯絡方式"})]}),e.jsx("div",{className:"flex space-x-3",children:x&&e.jsxs("button",{onClick:w,className:"bg-[#cc824d] text-white px-6 py-3 rounded-lg hover:bg-[#b8753f] transition-colors flex items-center font-medium",children:[e.jsx(ae,{className:"h-5 w-5 mr-2"}),"儲存所有變更"]})})]}),c&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg border flex items-center ${c==="success"?"bg-green-50 border-green-200 text-green-800":c==="reset"?"bg-blue-50 border-blue-200 text-blue-800":c==="validation_error"?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-red-50 border-red-200 text-red-800"}`,children:[c==="success"&&e.jsx(ae,{className:"h-5 w-5 mr-2"}),c==="reset"&&e.jsx(ps,{className:"h-5 w-5 mr-2"}),c==="validation_error"&&e.jsx(te,{className:"h-5 w-5 mr-2"}),c==="error"&&e.jsx(te,{className:"h-5 w-5 mr-2"}),c==="success"&&"設定已成功儲存",c==="reset"&&"設定已重置為預設值",c==="validation_error"&&"請修正驗證錯誤後再試",c==="error"&&"儲存失敗，請稍後再試"]}),e.jsx("div",{className:"space-y-6",children:Object.entries(s).map(([h,g])=>e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:N(h)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:g.displayName}),g.isRequired&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"必填"}),g.isSystem&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"系統設定"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:g.description}),u(h,g),e.jsx("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["版本: v",g.version]}),e.jsxs("span",{children:["更新時間: ",new Date(g.updatedAt).toLocaleString("zh-TW")]}),g.requiresRestart&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"需要重啟"})]})})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:r===h?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v(h),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"儲存",children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>b(h),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"取消",children:"×"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y(h),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"編輯",children:e.jsx(_e,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>_(h),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"重置為預設值",children:e.jsx(ps,{className:"h-5 w-5"})})]})})]})},h))}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx(hl,{className:"h-5 w-5 mr-2"}),"設定說明"]}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"系統名稱"}),"：顯示在網站標題和相關文件中的平台名稱"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"系統描述"}),"：簡短描述您的電商平台特色和服務"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"聯絡信箱"}),"：客戶服務和系統通知的主要信箱地址"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"聯絡電話"}),"：客戶可以聯繫的服務電話號碼"]}),e.jsx("p",{children:"• 標示「必填」的項目為系統正常運作所需的必要設定"}),e.jsx("p",{children:"• 標示「系統設定」的項目會影響系統核心功能，請謹慎修改"}),e.jsx("p",{children:"• 標示「需要重啟」的項目在變更後需要重新啟動系統才會生效"})]})]})]})})},LD=()=>{const[s,t]=m.useState({}),[r,a]=m.useState(null),[n,i]=m.useState({}),[l,o]=m.useState({}),[c,d]=m.useState(""),[x,p]=m.useState(0),[f,y]=m.useState([]);m.useEffect(()=>{b()},[]),m.useEffect(()=>{v()},[s]);const b=()=>{const C=Me.getSettingsByCategory("system_security");t(C),i(Object.fromEntries(Object.entries(C).map(([E,R])=>[E,R.value])))},v=()=>{var $,I,L,D;let C=0;const E=[],R=(($=s["security.password_min_length"])==null?void 0:$.value)||0;R>=12?C+=25:R>=8?C+=15:E.push("建議密碼最小長度設為 12 個字元以提高安全性"),((I=s["security.password_require_uppercase"])==null?void 0:I.value)?C+=20:E.push("建議要求密碼包含大寫字母");const O=((L=s["security.login_max_attempts"])==null?void 0:L.value)||0;O<=3?C+=20:O<=5?C+=15:E.push("建議將登入最大嘗試次數設為 3 次");const P=((D=s["security.session_timeout"])==null?void 0:D.value)||0;P<=15?C+=20:P<=30?C+=15:E.push("建議將會話超時時間設為 30 分鐘以內"),C+=15,p(Math.min(C,100)),y(E)},S=C=>{a(C),i(E=>{var R;return{...E,[C]:(R=s[C])==null?void 0:R.value}})},_=C=>{a(null),i(E=>{var R;return{...E,[C]:(R=s[C])==null?void 0:R.value}}),o(E=>{const R={...E};return delete R[C],R})},w=async C=>{const E=n[C],R=Me.validateSetting("system_security",C,E);if(!R.valid){o(k=>({...k,[C]:R.error}));return}try{Me.updateSetting("system_security",C,E),a(null),o(k=>{const O={...k};return delete O[C],O}),d("success"),b(),setTimeout(()=>d(""),3e3)}catch{d("error"),setTimeout(()=>d(""),3e3)}},N=(C,E)=>{i(R=>({...R,[C]:E})),l[C]&&o(R=>{const k={...R};return delete k[C],k})},u=C=>{window.confirm("確定要重置此安全設定為預設值嗎？這可能會影響系統安全性。")&&(Me.resetSetting("system_security",C),b(),d("reset"),setTimeout(()=>d(""),3e3))},h=C=>C>=90?{level:"優秀",color:"text-green-600 bg-green-50 border-green-200"}:C>=70?{level:"良好",color:"text-blue-600 bg-blue-50 border-blue-200"}:C>=50?{level:"中等",color:"text-yellow-600 bg-yellow-50 border-yellow-200"}:{level:"需改善",color:"text-red-600 bg-red-50 border-red-200"},g=C=>({"security.password_min_length":e.jsx(nf,{className:"h-5 w-5"}),"security.password_require_uppercase":e.jsx(fp,{className:"h-5 w-5"}),"security.password_require_lowercase":e.jsx(fp,{className:"h-5 w-5"}),"security.password_require_numbers":e.jsx(rw,{className:"h-5 w-5"}),"security.password_require_symbols":e.jsx(Bb,{className:"h-5 w-5"}),"security.login_max_attempts":e.jsx(na,{className:"h-5 w-5"}),"security.session_timeout":e.jsx(be,{className:"h-5 w-5"}),"security.enable_2fa":e.jsx(qs,{className:"h-5 w-5"}),"security.ip_whitelist":e.jsx(Jo,{className:"h-5 w-5"})})[C]||e.jsx(qs,{className:"h-5 w-5"}),j=(C,E)=>{var P,$;const R=r===C,k=R?n[C]:E.value,O=l[C];return E.dataType==="boolean"?e.jsxs("div",{className:"space-y-2",children:[R?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:C,checked:k===!0,onChange:()=>N(C,!0),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),"啟用"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:C,checked:k===!1,onChange:()=>N(C,!1),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),"停用"]})]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("div",{className:"flex items-center space-x-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"已啟用"})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-red-600 font-medium",children:"已停用"})]})})}),O&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),O]})]}):E.dataType==="number"?e.jsxs("div",{className:"space-y-2",children:[R?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"number",value:k||"",onChange:I=>N(C,Number(I.target.value)),min:(P=E.constraints)==null?void 0:P.minValue,max:($=E.constraints)==null?void 0:$.maxValue,className:`flex-1 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${O?"border-red-300":"border-gray-300"}`}),E.constraints&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",E.constraints.minValue,"-",E.constraints.maxValue,")"]})]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:k})}),O&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),O]})]}):e.jsxs("div",{className:"space-y-2",children:[R?e.jsx("input",{type:"text",value:k||"",onChange:I=>N(C,I.target.value),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${O?"border-red-300":"border-gray-300"}`,placeholder:E.description}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:k||"未設定"})}),O&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),O]})]})},T=h(x);return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"安全設定"}),e.jsx("p",{className:"text-gray-600",children:"管理系統安全相關配置和政策"})]})}),c&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg border flex items-center ${c==="success"?"bg-green-50 border-green-200 text-green-800":c==="reset"?"bg-blue-50 border-blue-200 text-blue-800":"bg-red-50 border-red-200 text-red-800"}`,children:[c==="success"&&e.jsx(ae,{className:"h-5 w-5 mr-2"}),c==="reset"&&e.jsx(ps,{className:"h-5 w-5 mr-2"}),c==="error"&&e.jsx(te,{className:"h-5 w-5 mr-2"}),c==="success"&&"安全設定已成功儲存",c==="reset"&&"安全設定已重置為預設值",c==="error"&&"儲存失敗，請稍後再試"]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(qs,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"安全評分"]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-4xl font-bold text-gray-900",children:x}),e.jsxs("div",{children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${T.color}`,children:T.level}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"系統安全等級"})]})]}),e.jsx("div",{className:"w-32 h-32",children:e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-gray-200"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:`${2*Math.PI*56}`,strokeDashoffset:`${2*Math.PI*56*(1-x/100)}`,className:x>=70?"text-green-500":x>=50?"text-yellow-500":"text-red-500"})]})})]}),f.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-yellow-900 mb-2 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"安全建議"]}),e.jsx("ul",{className:"space-y-1 text-sm text-yellow-800",children:f.map((C,E)=>e.jsxs("li",{children:["• ",C]},E))})]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(s).map(([C,E])=>e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:g(C)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.displayName}),E.isRequired&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"必填"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"安全設定"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:E.description}),j(C,E),e.jsx("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["版本: v",E.version]}),e.jsxs("span",{children:["更新時間: ",new Date(E.updatedAt).toLocaleString("zh-TW")]}),E.requiresRestart&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"需要重啟"})]})})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:r===C?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(C),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"儲存",children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>_(C),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"取消",children:"×"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>S(C),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"編輯",children:e.jsx(_e,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>u(C),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"重置為預設值",children:e.jsx(ps,{className:"h-5 w-5"})})]})})]})},C))}),e.jsxs("div",{className:"mt-8 bg-red-50 border border-red-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-3 flex items-center",children:[e.jsx(Bb,{className:"h-5 w-5 mr-2"}),"安全設定重要說明"]}),e.jsxs("div",{className:"space-y-2 text-sm text-red-800",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"密碼政策"}),"：強密碼政策可以有效防止暴力破解攻擊"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"登入限制"}),"：限制失敗登入次數可以防止惡意嘗試"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"會話管理"}),"：適當的會話超時可以降低帳號被盜用風險"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"重要提醒"}),"：修改安全設定前請確保您了解其影響"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"備份建議"}),"：修改前建議先匯出目前設定作為備份"]}),e.jsx("p",{children:"• ⚠️ 不當的安全設定可能會影響系統安全性，請謹慎操作"})]})]})]})})},FD=()=>{var u,h,g,j,T,C,E,R;const[s,t]=m.useState({}),[r,a]=m.useState(null),[n,i]=m.useState({}),[l,o]=m.useState({}),[c,d]=m.useState(""),[x,p]=m.useState("");m.useEffect(()=>{f()},[]);const f=()=>{const k=Me.getSettingsByCategory("notification_management");t(k),i(Object.fromEntries(Object.entries(k).map(([O,P])=>[O,P.value])))},y=k=>{a(k),i(O=>{var P;return{...O,[k]:(P=s[k])==null?void 0:P.value}})},b=k=>{a(null),i(O=>{var P;return{...O,[k]:(P=s[k])==null?void 0:P.value}}),o(O=>{const P={...O};return delete P[k],P})},v=async k=>{const O=n[k],P=Me.validateSetting("notification_management",k,O);if(!P.valid){o($=>({...$,[k]:P.error}));return}try{Me.updateSetting("notification_management",k,O),a(null),o($=>{const I={...$};return delete I[k],I}),d("success"),f(),setTimeout(()=>d(""),3e3)}catch{d("error"),setTimeout(()=>d(""),3e3)}},S=(k,O)=>{i(P=>({...P,[k]:O})),l[k]&&o(P=>{const $={...P};return delete $[k],$})},_=k=>{p(k),setTimeout(()=>{p(""),alert(`${k==="email"?"測試郵件":"測試簡訊"}已發送！`)},2e3)},w=k=>({"notification.email_enabled":e.jsx(xl,{className:"h-5 w-5"}),"notification.email_smtp_host":e.jsx(kx,{className:"h-5 w-5"}),"notification.email_smtp_port":e.jsx(ar,{className:"h-5 w-5"}),"notification.email_username":e.jsx(yk,{className:"h-5 w-5"}),"notification.email_password":e.jsx(nf,{className:"h-5 w-5"}),"notification.sms_enabled":e.jsx(ul,{className:"h-5 w-5"}),"notification.push_enabled":e.jsx(yp,{className:"h-5 w-5"})})[k]||e.jsx(jn,{className:"h-5 w-5"}),N=(k,O)=>{const P=r===k,$=P?n[k]:O.value,I=l[k];return O.dataType==="boolean"?e.jsx("div",{className:"space-y-2",children:P?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:k,checked:$===!0,onChange:()=>S(k,!0),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),"啟用"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:k,checked:$===!1,onChange:()=>S(k,!1),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),"停用"]})]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("div",{className:"flex items-center space-x-2",children:$?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"已啟用"})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-red-600 font-medium",children:"已停用"})]})})})}):O.dataType==="password"?e.jsxs("div",{className:"space-y-2",children:[P?e.jsx("input",{type:"password",value:$||"",onChange:L=>S(k,L.target.value),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${I?"border-red-300":"border-gray-300"}`,placeholder:"輸入密碼"}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:$?"••••••••":"未設定"})}),I&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),I]})]}):O.dataType==="number"?e.jsx("div",{className:"space-y-2",children:P?e.jsx("input",{type:"number",value:$||"",onChange:L=>S(k,Number(L.target.value)),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${I?"border-red-300":"border-gray-300"}`}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:$})})}):e.jsxs("div",{className:"space-y-2",children:[P?e.jsx("input",{type:"text",value:$||"",onChange:L=>S(k,L.target.value),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${I?"border-red-300":"border-gray-300"}`,placeholder:O.description}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:$||"未設定"})}),I&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),I]})]})};return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"通知設定"}),e.jsx("p",{className:"text-gray-600",children:"管理系統通知服務和訊息發送設定"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>_("email"),disabled:!((u=s["notification.email_enabled"])!=null&&u.value)||x==="email",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[x==="email"?e.jsx(be,{className:"h-5 w-5 mr-2 animate-spin"}):e.jsx(xl,{className:"h-5 w-5 mr-2"}),"測試郵件"]}),e.jsxs("button",{onClick:()=>_("sms"),disabled:!((h=s["notification.sms_enabled"])!=null&&h.value)||x==="sms",className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[x==="sms"?e.jsx(be,{className:"h-5 w-5 mr-2 animate-spin"}):e.jsx(ul,{className:"h-5 w-5 mr-2"}),"測試簡訊"]})]})]}),c&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg border flex items-center ${c==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[c==="success"?e.jsx(ae,{className:"h-5 w-5 mr-2"}):e.jsx(te,{className:"h-5 w-5 mr-2"}),c==="success"?"通知設定已成功儲存":"儲存失敗，請稍後再試"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"郵件通知"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(g=s["notification.email_enabled"])!=null&&g.value?"已啟用":"已停用"})]}),e.jsx("div",{className:`p-3 rounded-lg ${(j=s["notification.email_enabled"])!=null&&j.value?"bg-green-100":"bg-gray-100"}`,children:e.jsx(xl,{className:`h-6 w-6 ${(T=s["notification.email_enabled"])!=null&&T.value?"text-green-600":"text-gray-400"}`})})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"簡訊通知"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(C=s["notification.sms_enabled"])!=null&&C.value?"已啟用":"已停用"})]}),e.jsx("div",{className:`p-3 rounded-lg ${(E=s["notification.sms_enabled"])!=null&&E.value?"bg-green-100":"bg-gray-100"}`,children:e.jsx(ul,{className:`h-6 w-6 ${(R=s["notification.sms_enabled"])!=null&&R.value?"text-green-600":"text-gray-400"}`})})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"系統狀態"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"正常運作"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(ae,{className:"h-6 w-6 text-blue-600"})})]})})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(s).map(([k,O])=>e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:w(k)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:O.displayName}),O.isRequired&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"必填"}),O.requiresRestart&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"需要重啟"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:O.description}),N(k,O),e.jsx("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["版本: v",O.version]}),e.jsxs("span",{children:["更新時間: ",new Date(O.updatedAt).toLocaleString("zh-TW")]})]})})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:r===k?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v(k),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"儲存",children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>b(k),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"取消",children:"×"})]}):e.jsx("button",{onClick:()=>y(k),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"編輯",children:e.jsx(_e,{className:"h-5 w-5"})})})]})},k))}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx(hl,{className:"h-5 w-5 mr-2"}),"通知設定說明"]}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"郵件通知"}),"：用於發送訂單確認、密碼重設等重要通知"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"SMTP 設定"}),"：配置郵件發送伺服器，建議使用專業的郵件服務"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"簡訊通知"}),"：用於即時重要訊息，如驗證碼、緊急通知"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"測試功能"}),"：建議設定完成後先執行測試確保服務正常"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"安全提醒"}),"：SMTP 密碼等敏感資訊會以加密方式儲存"]})]})]})]})})},$D=()=>{const[s,t]=m.useState({}),[r,a]=m.useState(null),[n,i]=m.useState({}),[l,o]=m.useState({}),[c,d]=m.useState(""),[x,p]=m.useState({});m.useEffect(()=>{f()},[]);const f=()=>{const g=Me.getSettingsByCategory("payment_management");t(g),i(Object.fromEntries(Object.entries(g).map(([j,T])=>[j,T.value])))},y=g=>{a(g),i(j=>{var T;return{...j,[g]:(T=s[g])==null?void 0:T.value}})},b=g=>{a(null),i(j=>{var T;return{...j,[g]:(T=s[g])==null?void 0:T.value}}),o(j=>{const T={...j};return delete T[g],T})},v=async g=>{const j=n[g],T=Me.validateSetting("payment_management",g,j);if(!T.valid){o(C=>({...C,[g]:T.error}));return}try{Me.updateSetting("payment_management",g,j),a(null),o(C=>{const E={...C};return delete E[g],E}),d("success"),f(),setTimeout(()=>d(""),3e3)}catch{d("error"),setTimeout(()=>d(""),3e3)}},S=(g,j)=>{i(T=>({...T,[g]:j})),l[g]&&o(T=>{const C={...T};return delete C[g],C})},_=g=>{p(j=>({...j,[g]:!j[g]}))},w=g=>({"payment.currency":e.jsx(We,{className:"h-5 w-5"}),"payment.credit_card_enabled":e.jsx(Ni,{className:"h-5 w-5"}),"payment.bank_transfer_enabled":e.jsx(gp,{className:"h-5 w-5"}),"payment.mobile_payment_enabled":e.jsx(ul,{className:"h-5 w-5"}),"payment.handling_fee":e.jsx(tw,{className:"h-5 w-5"}),"payment.gateway_api_key":e.jsx(qs,{className:"h-5 w-5"}),"payment.merchant_id":e.jsx(ar,{className:"h-5 w-5"})})[g]||e.jsx(We,{className:"h-5 w-5"}),N=(g,j)=>{var R,k,O,P;const T=r===g,C=T?n[g]:j.value,E=l[g];if(j.dataType==="boolean")return e.jsx("div",{className:"space-y-2",children:T?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:g,checked:C===!0,onChange:()=>S(g,!0),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),"啟用"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:g,checked:C===!1,onChange:()=>S(g,!1),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),"停用"]})]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("div",{className:"flex items-center space-x-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"已啟用"})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-red-600 font-medium",children:"已停用"})]})})})});if(j.dataType==="select"&&((R=j.constraints)!=null&&R.options))return e.jsxs("div",{className:"space-y-2",children:[T?e.jsx("select",{value:C||"",onChange:$=>S(g,$.target.value),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${E?"border-red-300":"border-gray-300"}`,children:j.constraints.options.map($=>e.jsx("option",{value:$.value,children:$.label},$.value))}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:((k=j.constraints.options.find($=>$.value===C))==null?void 0:k.label)||C||"未設定"})}),E&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),E]})]});if(j.dataType==="number")return e.jsxs("div",{className:"space-y-2",children:[T?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:C||"",onChange:$=>S(g,Number($.target.value)),step:g.includes("fee")?"0.01":"1",min:(O=j.constraints)==null?void 0:O.minValue,max:(P=j.constraints)==null?void 0:P.maxValue,className:`flex-1 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${E?"border-red-300":"border-gray-300"}`}),g.includes("fee")&&e.jsx("span",{className:"text-sm text-gray-500",children:"%"})]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("p",{className:"text-gray-900",children:[C,g.includes("fee")?"%":""]})}),E&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),E]})]});if(j.dataType==="password"||g.includes("key")||g.includes("secret")){const $=x[g];return e.jsxs("div",{className:"space-y-2",children:[T?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:$?"text":"password",value:C||"",onChange:I=>S(g,I.target.value),className:`flex-1 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${E?"border-red-300":"border-gray-300"}`,placeholder:"輸入敏感資料"}),e.jsx("button",{type:"button",onClick:()=>_(g),className:"p-2 text-gray-400 hover:text-gray-600",children:$?e.jsx(Gu,{className:"h-5 w-5"}):e.jsx(Ee,{className:"h-5 w-5"})})]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-gray-900",children:C?$?C:"••••••••••••••••":"未設定"}),C&&e.jsx("button",{type:"button",onClick:()=>_(g),className:"p-1 text-gray-400 hover:text-gray-600",children:$?e.jsx(Gu,{className:"h-4 w-4"}):e.jsx(Ee,{className:"h-4 w-4"})})]})}),E&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),E]})]})}return e.jsxs("div",{className:"space-y-2",children:[T?e.jsx("input",{type:"text",value:C||"",onChange:$=>S(g,$.target.value),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${E?"border-red-300":"border-gray-300"}`,placeholder:j.description}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:C||"未設定"})}),E&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),E]})]})},h=(()=>[{key:"payment.credit_card_enabled",name:"信用卡支付",icon:Ni},{key:"payment.bank_transfer_enabled",name:"銀行轉帳",icon:gp},{key:"payment.mobile_payment_enabled",name:"行動支付",icon:ul}].map(j=>{var T;return{...j,enabled:((T=s[j.key])==null?void 0:T.value)||!1}}))();return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"支付設定"}),e.jsx("p",{className:"text-gray-600",children:"管理支付方式、手續費和金流服務設定"})]})}),c&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg border flex items-center ${c==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[c==="success"?e.jsx(ae,{className:"h-5 w-5 mr-2"}):e.jsx(te,{className:"h-5 w-5 mr-2"}),c==="success"?"支付設定已成功儲存":"儲存失敗，請稍後再試"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:h.map(g=>{const j=g.icon;return e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:g.name}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:g.enabled?"已啟用":"已停用"})]}),e.jsx("div",{className:`p-3 rounded-lg ${g.enabled?"bg-green-100":"bg-gray-100"}`,children:e.jsx(j,{className:`h-6 w-6 ${g.enabled?"text-green-600":"text-gray-400"}`})})]})},g.key)})}),e.jsx("div",{className:"space-y-6",children:Object.entries(s).map(([g,j])=>e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:w(g)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.displayName}),j.isRequired&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"必填"}),(g.includes("key")||g.includes("secret"))&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"敏感資料"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:j.description}),N(g,j),e.jsx("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["版本: v",j.version]}),e.jsxs("span",{children:["更新時間: ",new Date(j.updatedAt).toLocaleString("zh-TW")]})]})})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:r===g?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v(g),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"儲存",children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>b(g),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"取消",children:"×"})]}):e.jsx("button",{onClick:()=>y(g),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"編輯",children:e.jsx(_e,{className:"h-5 w-5"})})})]})},g))}),e.jsxs("div",{className:"mt-8 bg-green-50 border border-green-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[e.jsx(hl,{className:"h-5 w-5 mr-2"}),"支付設定說明"]}),e.jsxs("div",{className:"space-y-2 text-sm text-green-800",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"支付貨幣"}),"：系統預設的交易貨幣，影響所有商品定價顯示"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"支付方式"}),"：可單獨啟用或停用各種支付管道"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"手續費設定"}),"：可設定各支付方式的處理費用百分比"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"API 金鑰"}),"：用於連接第三方支付服務，請妥善保管"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"測試模式"}),"：開發階段建議使用測試環境進行驗證"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"安全提醒"}),"：所有敏感資料都會加密儲存，定期更新金鑰以確保安全"]})]})]})]})})},VD=()=>{var g,j;const[s,t]=m.useState({}),[r,a]=m.useState(null),[n,i]=m.useState({}),[l,o]=m.useState({}),[c,d]=m.useState(""),[x,p]=m.useState([]),[f,y]=m.useState(!1);m.useEffect(()=>{b(),v()},[]);const b=()=>{const T=Me.getSettingsByCategory("shipping_management");t(T),i(Object.fromEntries(Object.entries(T).map(([C,E])=>[C,E.value])))},v=()=>{p([{id:1,name:"台灣本島",regions:["台北市","新北市","桃園市","台中市","台南市","高雄市"],baseRate:80,freeShippingThreshold:1e3,estimatedDays:"1-2"},{id:2,name:"離島地區",regions:["金門縣","連江縣","澎湖縣"],baseRate:150,freeShippingThreshold:2e3,estimatedDays:"3-5"}])},S=T=>{a(T),i(C=>{var E;return{...C,[T]:(E=s[T])==null?void 0:E.value}})},_=T=>{a(null),i(C=>{var E;return{...C,[T]:(E=s[T])==null?void 0:E.value}}),o(C=>{const E={...C};return delete E[T],E})},w=async T=>{const C=n[T],E=Me.validateSetting("shipping_management",T,C);if(!E.valid){o(R=>({...R,[T]:E.error}));return}try{Me.updateSetting("shipping_management",T,C),a(null),o(R=>{const k={...R};return delete k[T],k}),d("success"),b(),setTimeout(()=>d(""),3e3)}catch{d("error"),setTimeout(()=>d(""),3e3)}},N=(T,C)=>{i(E=>({...E,[T]:C})),l[T]&&o(E=>{const R={...E};return delete R[T],R})},u=T=>({"shipping.free_shipping_threshold":e.jsx(We,{className:"h-5 w-5"}),"shipping.default_rate":e.jsx(tt,{className:"h-5 w-5"}),"shipping.processing_days":e.jsx(be,{className:"h-5 w-5"}),"shipping.weight_based_pricing":e.jsx(Ub,{className:"h-5 w-5"}),"shipping.domestic_zones":e.jsx(Mr,{className:"h-5 w-5"}),"shipping.international_enabled":e.jsx(Jo,{className:"h-5 w-5"})})[T]||e.jsx(tt,{className:"h-5 w-5"}),h=(T,C)=>{var O,P;const E=r===T,R=E?n[T]:C.value,k=l[T];return C.dataType==="boolean"?e.jsx("div",{className:"space-y-2",children:E?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:T,checked:R===!0,onChange:()=>N(T,!0),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),"啟用"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:T,checked:R===!1,onChange:()=>N(T,!1),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),"停用"]})]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("div",{className:"flex items-center space-x-2",children:R?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"已啟用"})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-red-600 font-medium",children:"已停用"})]})})})}):C.dataType==="number"?e.jsxs("div",{className:"space-y-2",children:[E?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:R||"",onChange:$=>N(T,Number($.target.value)),min:(O=C.constraints)==null?void 0:O.minValue,max:(P=C.constraints)==null?void 0:P.maxValue,className:`flex-1 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${k?"border-red-300":"border-gray-300"}`}),T.includes("threshold")||T.includes("rate")?e.jsx("span",{className:"text-sm text-gray-500",children:"元"}):T.includes("days")?e.jsx("span",{className:"text-sm text-gray-500",children:"天"}):null]}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("p",{className:"text-gray-900",children:[R,T.includes("threshold")||T.includes("rate")?" 元":T.includes("days")?" 天":""]})}),k&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),k]})]}):e.jsxs("div",{className:"space-y-2",children:[E?e.jsx("input",{type:"text",value:R||"",onChange:$=>N(T,$.target.value),className:`w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${k?"border-red-300":"border-gray-300"}`,placeholder:C.description}):e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:R||"未設定"})}),k&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),k]})]})};return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"物流設定"}),e.jsx("p",{className:"text-gray-600",children:"管理配送區域、運費計算和物流服務設定"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"bg-[#cc824d] text-white px-6 py-3 rounded-lg hover:bg-[#b8753f] transition-colors flex items-center font-medium",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),"新增配送區域"]})]}),c&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg border flex items-center ${c==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[c==="success"?e.jsx(ae,{className:"h-5 w-5 mr-2"}):e.jsx(te,{className:"h-5 w-5 mr-2"}),c==="success"?"物流設定已成功儲存":"儲存失敗，請稍後再試"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(tt,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"基本物流設定"]}),e.jsx("div",{className:"space-y-6",children:Object.entries(s).map(([T,C])=>e.jsx("div",{className:"border-b border-gray-200 pb-6 last:border-b-0",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:u(T)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:C.displayName}),C.isRequired&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"必填"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:C.description}),h(T,C)]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:r===T?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(T),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"儲存",children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>_(T),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"取消",children:"×"})]}):e.jsx("button",{onClick:()=>S(T),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"編輯",children:e.jsx(_e,{className:"h-5 w-5"})})})]})},T))})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Mr,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"配送區域管理"]}),e.jsx("div",{className:"space-y-4",children:x.map(T=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-2",children:T.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["覆蓋區域：",T.regions.join("、")]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"基本運費"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[T.baseRate," 元"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"免運門檻"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[T.freeShippingThreshold," 元"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"預計送達"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[T.estimatedDays," 天"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"編輯",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"刪除",children:e.jsx($e,{className:"h-4 w-4"})})]})]})},T.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ub,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"運費計算器"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"訂單金額"}),e.jsx("input",{type:"number",placeholder:"輸入訂單金額",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"配送區域"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"",children:"選擇配送區域"}),x.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))]})]}),e.jsx("button",{className:"w-full bg-[#cc824d] text-white py-2 rounded-lg hover:bg-[#b8753f] transition-colors",children:"計算運費"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600",children:"計算結果將顯示在這裡"})})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(tt,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"物流統計"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"總配送區域"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[x.length," 個"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均運費"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[Math.round(x.reduce((T,C)=>T+C.baseRate,0)/x.length)," 元"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"免運門檻"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[(g=s["shipping.free_shipping_threshold"])==null?void 0:g.value," 元"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"處理時間"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[(j=s["shipping.processing_days"])==null?void 0:j.value," 天"]})]})]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-orange-50 border border-orange-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-900 mb-3 flex items-center",children:[e.jsx(hl,{className:"h-5 w-5 mr-2"}),"物流設定說明"]}),e.jsxs("div",{className:"space-y-2 text-sm text-orange-800",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"免運門檻"}),"：達到此金額的訂單將享有免費配送服務"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"預設運費"}),"：未達免運門檻訂單的標準配送費用"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"處理天數"}),"：訂單確認後到商品出貨的作業時間"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"配送區域"}),"：可為不同地區設定不同的運費和配送時間"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"計算方式"}),"：可選擇按重量、體積或固定費率計算運費"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"建議"}),"：定期檢視配送政策以確保符合成本效益和客戶需求"]})]})]})]})})},UD=()=>(m.useEffect(()=>{it.fromTo(".settings-content",{opacity:0,y:20},{opacity:1,y:0,duration:.6,ease:"power2.out"})},[]),e.jsx("div",{className:"settings-content",children:e.jsxs(aa,{children:[e.jsx(q,{index:!0,element:e.jsx(MD,{})}),e.jsx(q,{path:"general",element:e.jsx(OD,{})}),e.jsx(q,{path:"security",element:e.jsx(LD,{})}),e.jsx(q,{path:"notifications",element:e.jsx(FD,{})}),e.jsx(q,{path:"payments",element:e.jsx($D,{})}),e.jsx(q,{path:"shipping",element:e.jsx(VD,{})})]})})),BD=({children:s,containerId:t="portal-root"})=>{const[r,a]=m.useState(null);return m.useEffect(()=>{let n=document.getElementById(t);return n||(n=document.createElement("div"),n.id=t,n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.zIndex="999999",document.body.appendChild(n)),a(n),()=>{n&&n.children.length===0&&document.body.removeChild(n)}},[t]),r?Zo.createPortal(s,r):null},_t=({value:s,onChange:t,options:r=[],placeholder:a="請選擇...",className:n="",disabled:i=!1,size:l="md"})=>{const[o,c]=m.useState(!1),[d,x]=m.useState({top:0,left:0,width:0}),p=m.useRef(null),f={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-5 py-3 text-base"},y=r.find(S=>S.value===s);m.useEffect(()=>{const S=_=>{p.current&&!p.current.contains(_.target)&&c(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const b=S=>{t(S),c(!1)},v=()=>{if(!i){if(!o&&p.current){const S=p.current.getBoundingClientRect();x({top:S.bottom+window.scrollY,left:S.left+window.scrollX,width:S.width})}c(!o)}};return e.jsxs("div",{ref:p,className:`relative z-[99999] ${n}`,children:[e.jsx("button",{type:"button",onClick:v,disabled:i,className:`
          w-full text-left bg-white border border-gray-300 rounded-xl
          ${f[l]}
          font-chinese focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent 
          shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer
          ${i?"bg-gray-100 cursor-not-allowed opacity-60":"hover:border-gray-400"}
          ${o?"ring-2 ring-amber-500 border-transparent":""}
        `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?e.jsxs("span",{className:"flex items-center",children:[y.icon&&e.jsx("span",{className:"mr-2",children:y.icon}),y.label]}):a}),e.jsx(Ds,{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${o?"transform rotate-180":""}`})]})}),o&&e.jsx(BD,{children:e.jsx("div",{className:"glass-dropdown fixed z-[999999]",style:{top:d.top,left:d.left,width:d.width,zIndex:999999},children:e.jsx("div",{className:"max-h-60 overflow-y-auto",children:r.map((S,_)=>e.jsx("button",{type:"button",onClick:()=>b(S.value),className:`glass-dropdown-option font-chinese ${s===S.value?"selected":""}`,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("span",{className:"flex items-center",children:[S.icon&&e.jsx("span",{className:"mr-3 text-lg",children:S.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:S.label}),S.description&&e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:S.description})]})]}),s===S.value&&e.jsx($o,{className:"w-4 h-4",style:{color:"#CC824D"}})]})},S.value||_))})})})]})},zD=[{id:1,sku:"TSHIRT-001-WH-M",name:"經典T恤 白色/M",category:"服飾",warehouse:"主倉庫",currentStock:25,safeStock:10,avgCost:180,totalValue:4500,barcode:"1234567890123",allowNegative:!1,lastUpdated:"2024-09-15",status:"normal"},{id:2,sku:"TSHIRT-001-BL-L",name:"經典T恤 黑色/L",category:"服飾",warehouse:"主倉庫",currentStock:3,safeStock:5,avgCost:180,totalValue:540,barcode:"1234567890124",allowNegative:!1,lastUpdated:"2024-09-14",status:"low"},{id:3,sku:"BOTTLE-001",name:"運動水壺",category:"配件",warehouse:"分倉庫A",currentStock:50,safeStock:15,avgCost:120,totalValue:6e3,barcode:"1234567890125",allowNegative:!0,lastUpdated:"2024-09-16",status:"normal"},{id:4,sku:"GIFT-SET-001",name:"新手禮盒組",category:"贈品",warehouse:"主倉庫",currentStock:-2,safeStock:5,avgCost:350,totalValue:-700,barcode:"1234567890126",allowNegative:!0,lastUpdated:"2024-09-15",status:"presale"}],WD=()=>{const[s,t]=m.useState("全部"),[r,a]=m.useState("全部"),[n,i]=m.useState("sku"),[l,o]=m.useState("asc");m.useState(null);const c=m.useMemo(()=>{let f=zD.filter(y=>{const b=s==="全部"||y.warehouse===s,v=r==="全部"||y.category===r;return b&&v});return f.sort((y,b)=>{let v=y[n],S=b[n];return typeof v=="string"&&(v=v.toLowerCase(),S=S.toLowerCase()),l==="asc"?v<S?-1:v>S?1:0:v>S?-1:v<S?1:0}),f},[s,r,n,l]),d=f=>{n===f?o(l==="asc"?"desc":"asc"):(i(f),o("asc"))},x=f=>f.status==="presale"?e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-purple-100 text-purple-700 rounded font-chinese",children:"預售中"}):f.status==="low"?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-red-100 text-red-700 rounded font-chinese",children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),"低庫存"]}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-green-100 text-green-700 rounded font-chinese",children:"正常"}),p=({field:f})=>n!==f?null:l==="asc"?e.jsx(Sx,{className:"w-4 h-4 inline ml-1"}):e.jsx(_x,{className:"w-4 h-4 inline ml-1"});return e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen",children:e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(JS,{className:"w-8 h-8 text-amber-500 mr-3"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-chinese",children:"整合庫存管理"})]}),e.jsx("div",{className:"glass rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(su,{className:"w-5 h-5 text-gray-400"}),e.jsx(xe,{options:[{value:"全部",label:"全部倉庫"},{value:"主倉庫",label:"主倉庫"},{value:"分倉庫A",label:"分倉庫A"}],value:s,onChange:t,placeholder:"選擇倉庫",className:"w-36"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{className:"w-5 h-5 text-gray-400"}),e.jsx(xe,{options:[{value:"全部",label:"全部分類"},{value:"服飾",label:"服飾"},{value:"配件",label:"配件"},{value:"贈品",label:"贈品"}],value:r,onChange:a,placeholder:"選擇商品分類",className:"w-32"})]}),e.jsxs("div",{className:"text-sm text-gray-500 font-chinese",children:["共 ",c.length," 項商品"]})]})}),e.jsx("div",{className:"glass rounded-2xl overflow-visible",children:e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white",style:{position:"relative",zIndex:1},children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>d("sku"),children:["SKU ",e.jsx(p,{field:"sku"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>d("name"),children:["商品名稱 ",e.jsx(p,{field:"name"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>d("warehouse"),children:["倉庫 ",e.jsx(p,{field:"warehouse"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>d("currentStock"),children:["庫存量 ",e.jsx(p,{field:"currentStock"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>d("safeStock"),children:["安全庫存 ",e.jsx(p,{field:"safeStock"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>d("avgCost"),children:["平均成本 ",e.jsx(p,{field:"avgCost"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>d("totalValue"),children:["庫存價值 ",e.jsx(p,{field:"totalValue"})]}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"條碼"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"狀態"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(f=>e.jsxs("tr",{className:"hover:bg-white/30",children:[e.jsx("td",{className:"px-4 py-3 font-mono text-sm",children:f.sku}),e.jsx("td",{className:"px-4 py-3 font-chinese",children:f.name}),e.jsx("td",{className:"px-4 py-3 font-chinese",children:f.warehouse}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`font-bold ${f.currentStock<0?"text-purple-600":f.currentStock<f.safeStock?"text-red-600":"text-green-600"}`,children:f.currentStock})}),e.jsx("td",{className:"px-4 py-3",children:f.safeStock}),e.jsxs("td",{className:"px-4 py-3",children:["NT$ ",f.avgCost]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`font-bold ${f.totalValue<0?"text-purple-600":"text-gray-900"}`,children:["NT$ ",f.totalValue.toLocaleString()]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(qu,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-mono text-xs",children:f.barcode})]})}),e.jsx("td",{className:"px-4 py-3",children:x(f)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"編輯",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"物流",children:e.jsx(tt,{className:"w-4 h-4"})})]})})]},f.id))})]})})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:c.length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總商品數"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:c.filter(f=>f.status==="low").length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"低庫存警示"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c.filter(f=>f.status==="presale").length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"預售商品"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["NT$ ",c.reduce((f,y)=>f+y.totalValue,0).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總庫存價值"})]})]})]})})},GD=[{id:1,memberNo:"M000001",name:"張小華",email:"zhang@example.com",phone:"0912345678",gender:"女",birthday:"1990-05-15",registerDate:"2023-01-15",lastLoginDate:"2024-09-15",level:"VIP",totalSpent:15800,points:1580,orders:12,status:"active",tags:["高價值客戶","忠實會員"]},{id:2,memberNo:"M000002",name:"李大明",email:"li@example.com",phone:"0923456789",gender:"男",birthday:"1985-08-22",registerDate:"2023-03-20",lastLoginDate:"2024-09-14",level:"金卡",totalSpent:8900,points:890,orders:7,status:"active",tags:["潛力客戶"]},{id:3,memberNo:"M000003",name:"王美麗",email:"wang@example.com",phone:"0934567890",gender:"女",birthday:"1992-12-03",registerDate:"2023-06-10",lastLoginDate:"2024-08-30",level:"銀卡",totalSpent:3200,points:320,orders:3,status:"inactive",tags:["新會員"]},{id:4,memberNo:"M000004",name:"陳志明",email:"chen@example.com",phone:"0945678901",gender:"男",birthday:"1988-04-18",registerDate:"2022-11-25",lastLoginDate:"2024-09-16",level:"VIP",totalSpent:25600,points:2560,orders:18,status:"active",tags:["高價值客戶","推薦達人"]}],HD=()=>{const[s,t]=m.useState("全部"),[r,a]=m.useState("全部"),[n,i]=m.useState("memberNo"),[l,o]=m.useState("asc"),[c,d]=m.useState(!1),[x,p]=m.useState(null),f=m.useMemo(()=>{let _=GD.filter(w=>{const N=s==="全部"||w.level===s,u=r==="全部"||w.status===r;return N&&u});return _.sort((w,N)=>{let u=w[n],h=N[n];return typeof u=="string"&&(u=u.toLowerCase(),h=h.toLowerCase()),l==="asc"?u<h?-1:u>h?1:0:u>h?-1:u<h?1:0}),_},[s,r,n,l]),y=_=>{n===_?o(l==="asc"?"desc":"asc"):(i(_),o("asc"))},b=_=>{const w={VIP:{bg:"bg-purple-100",text:"text-purple-700",icon:"👑"},金卡:{bg:"bg-yellow-100",text:"text-yellow-700",icon:"⭐"},銀卡:{bg:"bg-gray-100",text:"text-gray-700",icon:"🥈"},一般:{bg:"bg-blue-100",text:"text-blue-700",icon:"👤"}},N=w[_]||w.一般;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-bold rounded font-chinese ${N.bg} ${N.text}`,children:[N.icon," ",_]})},v=_=>_==="active"?e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-green-100 text-green-700 rounded font-chinese",children:"活躍"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-red-100 text-red-700 rounded font-chinese",children:"休眠"}),S=({field:_})=>n!==_?null:l==="asc"?e.jsx(Sx,{className:"w-4 h-4 inline ml-1"}):e.jsx(_x,{className:"w-4 h-4 inline ml-1"});return e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen",children:e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(wr,{className:"w-8 h-8 text-amber-500 mr-3"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-chinese",children:"會員管理系統"})]}),e.jsxs("button",{className:"btn btn-primary flex items-center",onClick:()=>d(!0),children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),"新增會員"]})]}),e.jsx("div",{className:"glass rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wi,{className:"w-5 h-5 text-gray-400"}),e.jsx(xe,{options:[{value:"全部",label:"全部等級"},{value:"VIP",label:"VIP"},{value:"金卡",label:"金卡"},{value:"銀卡",label:"銀卡"},{value:"一般",label:"一般"}],value:s,onChange:t,placeholder:"選擇會員等級",className:"w-36"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{className:"w-5 h-5 text-gray-400"}),e.jsx(xe,{options:[{value:"全部",label:"全部狀態"},{value:"active",label:"活躍"},{value:"inactive",label:"休眠"}],value:r,onChange:a,placeholder:"選擇會員狀態",className:"w-28"})]}),e.jsxs("div",{className:"text-sm text-gray-500 font-chinese",children:["共 ",f.length," 位會員"]})]})}),e.jsx("div",{className:"glass rounded-2xl overflow-visible",children:e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>y("memberNo"),children:["會員編號 ",e.jsx(S,{field:"memberNo"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>y("name"),children:["姓名 ",e.jsx(S,{field:"name"})]}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"聯絡資訊"}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>y("level"),children:["會員等級 ",e.jsx(S,{field:"level"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>y("totalSpent"),children:["消費金額 ",e.jsx(S,{field:"totalSpent"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>y("points"),children:["積分 ",e.jsx(S,{field:"points"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>y("orders"),children:["訂單數 ",e.jsx(S,{field:"orders"})]}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"狀態"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"標籤"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(_=>e.jsxs("tr",{className:"hover:bg-white/30",children:[e.jsx("td",{className:"px-4 py-3 font-mono text-sm",children:_.memberNo}),e.jsx("td",{className:"px-4 py-3 font-chinese font-medium",children:_.name}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:_.email}),e.jsx("div",{className:"text-gray-500",children:_.phone})]})}),e.jsx("td",{className:"px-4 py-3",children:b(_.level)}),e.jsxs("td",{className:"px-4 py-3 font-bold text-green-600",children:["NT$ ",_.totalSpent.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"w-4 h-4 text-amber-500 mr-1"}),_.points]})}),e.jsx("td",{className:"px-4 py-3",children:_.orders}),e.jsx("td",{className:"px-4 py-3",children:v(_.status)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:_.tags.slice(0,2).map((w,N)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded font-chinese",children:[e.jsx(_a,{className:"w-3 h-3 mr-1"}),w]},N))})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"查看詳情",onClick:()=>p(_),children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"編輯",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"溝通記錄",children:e.jsx(Yk,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-amber-600 hover:bg-amber-100 rounded",title:"積分管理",children:e.jsx(Ni,{className:"w-4 h-4"})})]})})]},_.id))})]})})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:f.length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總會員數"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.filter(_=>_.status==="active").length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"活躍會員"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f.filter(_=>_.level==="VIP").length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"VIP會員"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-amber-600",children:["NT$ ",f.reduce((_,w)=>_+w.totalSpent,0).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總消費金額"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.reduce((_,w)=>_+w.points,0).toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總積分"})]})]}),e.jsx(ec,{isOpen:!!x,onClose:()=>p(null),title:"會員詳情",size:"max-w-2xl",children:x&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"會員編號"}),e.jsx("div",{className:"text-gray-900",children:x.memberNo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"姓名"}),e.jsx("div",{className:"text-gray-900 font-chinese",children:x.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"Email"}),e.jsx("div",{className:"text-gray-900",children:x.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"手機"}),e.jsx("div",{className:"text-gray-900",children:x.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"性別"}),e.jsx("div",{className:"text-gray-900 font-chinese",children:x.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"生日"}),e.jsx("div",{className:"text-gray-900",children:x.birthday})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"註冊日期"}),e.jsx("div",{className:"text-gray-900",children:x.registerDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 font-chinese mb-1",children:"最後登入"}),e.jsx("div",{className:"text-gray-900",children:x.lastLoginDate})]})]}),e.jsxs("div",{className:"border-t border-white/30 pt-6",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"會員統計"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.level}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"會員等級"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["NT$ ",x.totalSpent.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總消費"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:x.points}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"積分"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.orders}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"訂單數"})]})]})]}),e.jsxs("div",{className:"border-t border-white/30 pt-6",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"會員標籤"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.tags.map((_,w)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-sm bg-blue-100/80 text-blue-700 rounded-full font-chinese backdrop-blur-sm",children:[e.jsx(_a,{className:"w-4 h-4 mr-1"}),_]},w))})]})]})})]})})},qD=({isOpen:s,onClose:t})=>{const[r,a]=m.useState({templateId:"",channel:"",recipient:"",variables:{}}),[n,i]=m.useState(null),[l,o]=m.useState(!1),c=[{id:1,name:"訂單確認通知",channels:["email_html","sms"]},{id:2,name:"會員生日祝福",channels:["email_html","line_text"]},{id:3,name:"商品缺貨提醒",channels:["email_text","push_app"]},{id:4,name:"促銷活動通知",channels:["email_html","line_flex","push_web"]}],d=[{id:"email_html",name:"Email (HTML)",icon:"📧",placeholder:"test@example.com"},{id:"email_text",name:"Email (純文字)",icon:"📧",placeholder:"test@example.com"},{id:"sms",name:"SMS 簡訊",icon:"💬",placeholder:"0912345678"},{id:"line_text",name:"LINE 文字",icon:"💬",placeholder:"LINE User ID"},{id:"line_flex",name:"LINE Flex",icon:"💬",placeholder:"LINE User ID"},{id:"push_app",name:"App 推播",icon:"📱",placeholder:"Device Token"},{id:"push_web",name:"網頁推播",icon:"🌐",placeholder:"Subscription Endpoint"}],x=[{key:"user.name",name:"用戶姓名",example:"張小明"},{key:"user.email",name:"電子郵件",example:"user@example.com"},{key:"order.id",name:"訂單編號",example:"ORD-20240916-001"},{key:"order.total",name:"訂單總額",example:"NT$ 1,580"},{key:"product.name",name:"商品名稱",example:"精緻杏仁蛋糕"},{key:"system.site_name",name:"網站名稱",example:"Marelle"}],p=c.find(S=>S.id===parseInt(r.templateId)),f=p?d.filter(S=>p.channels.includes(S.id)):d,y=d.find(S=>S.id===r.channel),b=async()=>{if(!r.templateId||!r.channel||!r.recipient){alert("請填寫完整的測試配置");return}o(!0),i(null);try{await new Promise(_=>setTimeout(_,2e3));const S=Math.random()>.1;i({success:S,message:S?"測試通知發送成功！":"測試通知發送失敗",details:S?`通知已成功發送至 ${r.recipient}，請檢查您的${y==null?void 0:y.name}`:`發送失敗：${r.channel==="sms"?"SMS 配額不足":"連接超時"}`,timestamp:new Date().toLocaleString("zh-TW")})}catch(S){i({success:!1,message:"測試過程發生錯誤",details:S.message,timestamp:new Date().toLocaleString("zh-TW")})}finally{o(!1)}},v=(S,_)=>{a(w=>({...w,variables:{...w.variables,[S]:_}}))};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-screen overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold font-chinese",children:"通知測試工具"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Zs,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese mb-2",children:"選擇範本 *"}),e.jsx(_t,{value:r.templateId,onChange:S=>a(_=>({..._,templateId:S,channel:""})),options:[{value:"",label:"請選擇範本"},...c.map(S=>({value:S.id.toString(),label:S.name,description:`支援 ${S.channels.length} 個渠道`}))],placeholder:"請選擇範本"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese mb-2",children:"選擇渠道 *"}),e.jsx(_t,{value:r.channel,onChange:S=>a(_=>({..._,channel:S})),options:[{value:"",label:"請選擇渠道"},...f.map(S=>({value:S.id,label:S.name,icon:S.icon,description:`發送至 ${S.placeholder}`}))],disabled:!r.templateId,placeholder:"請選擇渠道"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese mb-2",children:"收件人 *"}),e.jsx("input",{type:"text",value:r.recipient,onChange:S=>a(_=>({..._,recipient:S.target.value})),placeholder:(y==null?void 0:y.placeholder)||"請先選擇渠道",disabled:!r.channel,className:"w-full border border-gray-300 rounded-lg px-3 py-2 font-chinese focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese mb-2",children:"測試變數（選填）"}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3",children:x.map(S=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-purple-600 w-32 flex-shrink-0",children:`{{${S.key}}}`}),e.jsx("input",{type:"text",placeholder:S.example,value:r.variables[S.key]||"",onChange:_=>v(S.key,_.target.value),className:"flex-1 border border-gray-200 rounded px-2 py-1 text-sm"})]},S.key))})]}),n&&e.jsxs("div",{className:`p-4 rounded-lg border ${n.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[n.success?e.jsx(ae,{className:"w-5 h-5 text-green-600 mr-2"}):e.jsx(Zs,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("span",{className:`font-medium font-chinese ${n.success?"text-green-800":"text-red-800"}`,children:n.message})]}),e.jsx("p",{className:`text-sm font-chinese ${n.success?"text-green-700":"text-red-700"}`,children:n.details}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 font-chinese",children:["測試時間：",n.timestamp]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t",children:[e.jsx("button",{onClick:b,disabled:l||!r.templateId||!r.channel||!r.recipient,className:"flex-1 btn btn-primary flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"發送中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(rE,{className:"w-4 h-4 mr-2"}),"發送測試"]})}),e.jsx("button",{onClick:t,className:"flex-1 btn btn-secondary",children:"關閉"})]})]})]})}):null},Ll=[{id:1,name:"訂單確認通知",description:"用戶下單後自動發送的確認通知",category:"order",subcategory:"order_created",trigger:"訂單建立",channels:["email_html","sms"],priority:"high",status:"active",lastUsed:"2024-09-15",usageCount:156,successRate:98.5,createdAt:"2024-01-15",updatedAt:"2024-09-10"},{id:2,name:"會員生日祝福",description:"會員生日當天發送的祝福訊息",category:"user",subcategory:"user_birthday",trigger:"會員生日",channels:["email_html","line_text"],priority:"normal",status:"active",lastUsed:"2024-09-14",usageCount:89,successRate:95.2,createdAt:"2024-02-20",updatedAt:"2024-08-15"},{id:3,name:"商品缺貨提醒",description:"商品庫存不足時發送給管理員的提醒",category:"product",subcategory:"product_low_stock",trigger:"庫存低於安全水位",channels:["email_text","push_app"],priority:"urgent",status:"active",lastUsed:"2024-09-16",usageCount:23,successRate:100,createdAt:"2024-03-01",updatedAt:"2024-09-05"},{id:4,name:"促銷活動通知",description:"新促銷活動開始時發送給會員",category:"marketing",subcategory:"campaign_started",trigger:"活動開始",channels:["email_html","line_flex","push_web"],priority:"normal",status:"inactive",lastUsed:"2024-08-30",usageCount:245,successRate:92.8,createdAt:"2024-01-10",updatedAt:"2024-08-25"}],YD=()=>{const[s,t]=m.useState("全部"),[r,a]=m.useState("全部"),[n,i]=m.useState("updatedAt"),[l,o]=m.useState("desc"),[c,d]=m.useState("templates"),[x,p]=m.useState(!1),[f,y]=m.useState("7d"),[b,v]=m.useState("all"),[S,_]=m.useState("all"),[w,N]=m.useState("7d"),u=m.useMemo(()=>{let M=Ll.filter(A=>{const V=s==="全部"||A.category===s,B=r==="全部"||A.status===r;return V&&B});return M.sort((A,V)=>{let B=A[n],z=V[n];return typeof B=="string"&&(B=B.toLowerCase(),z=z.toLowerCase()),l==="asc"?B<z?-1:B>z?1:0:B>z?-1:B<z?1:0}),M},[s,r,n,l]),h=M=>{n===M?o(l==="asc"?"desc":"asc"):(i(M),o("asc"))},g=M=>{const A={order:{bg:"bg-blue-100",text:"text-blue-700",label:"訂單",icon:"📦"},user:{bg:"bg-green-100",text:"text-green-700",label:"用戶",icon:"👤"},product:{bg:"bg-purple-100",text:"text-purple-700",label:"商品",icon:"🛍️"},marketing:{bg:"bg-pink-100",text:"text-pink-700",label:"行銷",icon:"🎯"},system:{bg:"bg-gray-100",text:"text-gray-700",label:"系統",icon:"⚙️"}},V=A[M]||A.system;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-bold rounded font-chinese ${V.bg} ${V.text}`,children:[V.icon," ",V.label]})},j=M=>{const A={urgent:{bg:"bg-red-100",text:"text-red-700",label:"緊急"},high:{bg:"bg-orange-100",text:"text-orange-700",label:"高"},normal:{bg:"bg-yellow-100",text:"text-yellow-700",label:"普通"},low:{bg:"bg-gray-100",text:"text-gray-700",label:"低"}},V=A[M]||A.normal;return e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-bold rounded font-chinese ${V.bg} ${V.text}`,children:V.label})},T=M=>M==="active"?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-green-100 text-green-700 rounded font-chinese",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"啟用"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-gray-100 text-gray-700 rounded font-chinese",children:[e.jsx(Ba,{className:"w-3 h-3 mr-1"}),"停用"]}),C=M=>{const A={email_html:{icon:"📧",name:"Email"},email_text:{icon:"📧",name:"Email"},sms:{icon:"💬",name:"SMS"},line_text:{icon:"💬",name:"LINE"},line_flex:{icon:"💬",name:"LINE"},push_app:{icon:"📱",name:"App推播"},push_web:{icon:"🌐",name:"網頁推播"}};return e.jsx("div",{className:"flex space-x-1",children:M.map((V,B)=>{const z=A[V];return e.jsx("span",{title:z==null?void 0:z.name,className:"text-sm",children:z==null?void 0:z.icon},B)})})},E=({field:M})=>n!==M?null:l==="asc"?e.jsx(Sx,{className:"w-4 h-4 inline ml-1"}):e.jsx(_x,{className:"w-4 h-4 inline ml-1"}),R=[{id:"templates",name:"範本管理",icon:Bt},{id:"variables",name:"變數管理",icon:ar},{id:"triggers",name:"觸發器",icon:rr},{id:"channels",name:"渠道設定",icon:E8},{id:"history",name:"通知歷史",icon:be},{id:"analytics",name:"效果分析",icon:oe}],k=()=>{switch(c){case"templates":return O();case"variables":return P();case"triggers":return $();case"channels":return I();case"history":return L();case"analytics":return D();default:return O()}},O=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"glass rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{className:"w-5 h-5 text-gray-400"}),e.jsx(xe,{options:[{value:"全部",label:"全部分類"},{value:"order",label:"訂單"},{value:"user",label:"用戶"},{value:"product",label:"商品"},{value:"marketing",label:"行銷"},{value:"system",label:"系統"}],value:s,onChange:t,placeholder:"選擇分類",className:"w-48"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(_t,{value:r,onChange:a,options:[{value:"全部",label:"全部狀態"},{value:"active",label:"啟用",icon:"✅",description:"正在使用的範本"},{value:"inactive",label:"停用",icon:"⏸️",description:"已停用的範本"}],className:"w-32",placeholder:"選擇狀態"})}),e.jsxs("div",{className:"text-sm text-gray-500 font-chinese",children:["共 ",u.length," 個範本"]})]})}),e.jsx("div",{className:"glass rounded-2xl overflow-visible",children:e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>h("name"),children:["範本名稱 ",e.jsx(E,{field:"name"})]}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"分類"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"觸發條件"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"通知渠道"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"優先級"}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>h("usageCount"),children:["使用次數 ",e.jsx(E,{field:"usageCount"})]}),e.jsxs("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese cursor-pointer",onClick:()=>h("successRate"),children:["成功率 ",e.jsx(E,{field:"successRate"})]}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"狀態"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(M=>e.jsxs("tr",{className:"hover:bg-white/30",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium font-chinese",children:M.name}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:M.description})]})}),e.jsx("td",{className:"px-4 py-3",children:g(M.category)}),e.jsx("td",{className:"px-4 py-3 font-chinese",children:M.trigger}),e.jsx("td",{className:"px-4 py-3",children:C(M.channels)}),e.jsx("td",{className:"px-4 py-3",children:j(M.priority)}),e.jsx("td",{className:"px-4 py-3 text-center",children:M.usageCount}),e.jsxs("td",{className:"px-4 py-3 text-center font-bold text-green-600",children:[M.successRate,"%"]}),e.jsx("td",{className:"px-4 py-3",children:T(M.status)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"查看詳情",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"編輯",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"測試發送",children:e.jsx(rr,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"刪除",children:e.jsx($e,{className:"w-4 h-4"})})]})})]},M.id))})]})})})]}),P=()=>{const M=[{id:"user",name:"用戶相關",icon:"👤",color:"blue",variables:[{key:"user.name",name:"用戶姓名",description:"用戶的真實姓名",example:"張小明"},{key:"user.email",name:"電子郵件",description:"用戶的電子郵件地址",example:"user@example.com"},{key:"user.phone",name:"手機號碼",description:"用戶的手機號碼",example:"0912345678"},{key:"user.birthday",name:"生日",description:"用戶的生日日期",example:"1990-01-01"},{key:"user.level",name:"會員等級",description:"用戶的會員等級",example:"VIP"},{key:"user.points",name:"積分餘額",description:"用戶目前的積分數量",example:"1250"}]},{id:"order",name:"訂單相關",icon:"📦",color:"green",variables:[{key:"order.id",name:"訂單編號",description:"訂單的唯一識別碼",example:"ORD-20240916-001"},{key:"order.total",name:"訂單總額",description:"訂單的總金額",example:"NT$ 1,580"},{key:"order.status",name:"訂單狀態",description:"訂單目前的處理狀態",example:"已出貨"},{key:"order.date",name:"下單日期",description:"訂單建立的日期時間",example:"2024-09-16 14:30"},{key:"order.items",name:"商品列表",description:"訂單中的商品清單",example:"商品A x2, 商品B x1"},{key:"order.shipping",name:"配送方式",description:"選擇的配送方式",example:"宅配到府"}]},{id:"product",name:"商品相關",icon:"🛍️",color:"purple",variables:[{key:"product.name",name:"商品名稱",description:"商品的完整名稱",example:"精緻杏仁蛋糕"},{key:"product.price",name:"商品價格",description:"商品的售價",example:"NT$ 480"},{key:"product.sku",name:"商品編號",description:"商品的SKU編號",example:"CAKE-ALM-001"},{key:"product.category",name:"商品分類",description:"商品所屬分類",example:"蛋糕類"},{key:"product.stock",name:"庫存數量",description:"商品目前庫存",example:"25"},{key:"product.discount",name:"折扣資訊",description:"商品的折扣信息",example:"9折優惠"}]},{id:"system",name:"系統相關",icon:"⚙️",color:"gray",variables:[{key:"system.site_name",name:"網站名稱",description:"網站的名稱",example:"Marelle"},{key:"system.contact_email",name:"客服信箱",description:"客服聯絡信箱",example:"support@marelle.com"},{key:"system.current_date",name:"當前日期",description:"系統當前日期",example:"2024-09-16"},{key:"system.current_time",name:"當前時間",description:"系統當前時間",example:"14:30:25"},{key:"system.domain",name:"網站域名",description:"網站的域名地址",example:"www.marelle.com"},{key:"system.version",name:"系統版本",description:"當前系統版本號",example:"v2.1.0"}]}],A=V=>{const B={blue:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",badge:"bg-blue-100"},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700",badge:"bg-green-100"},purple:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700",badge:"bg-purple-100"},gray:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700",badge:"bg-gray-100"}};return B[V]||B.gray};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese",children:"變數管理"}),e.jsxs("div",{className:"text-sm text-gray-500 font-chinese",children:["共 ",M.reduce((V,B)=>V+B.variables.length,0)," 個變數"]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-amber-800 font-chinese mb-2",children:"💡 使用說明"}),e.jsxs("p",{className:"text-sm text-amber-700 font-chinese",children:["在通知範本中使用 ",e.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"{{變數名稱}}"})," 格式來插入動態內容。 例如：",e.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"{{user.name}}"})," 會被替換為實際的用戶姓名。"]})]})]}),M.map(V=>{const B=A(V.color);return e.jsxs("div",{className:"glass rounded-2xl overflow-visible",children:[e.jsx("div",{className:`${B.bg} ${B.border} border-b px-6 py-4`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:V.icon}),e.jsx("h4",{className:`text-lg font-bold font-chinese ${B.text}`,children:V.name}),e.jsxs("span",{className:`ml-auto px-3 py-1 ${B.badge} ${B.text} text-sm font-medium rounded-full font-chinese`,children:[V.variables.length," 個變數"]})]})}),e.jsx("div",{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"變數名稱"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"描述"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"範例值"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.variables.map((z,F)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono text-purple-600",children:"{{"+z.key+"}}"})}),e.jsx("div",{className:"text-sm font-medium text-gray-900 font-chinese mt-1",children:z.name})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:z.description})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 font-chinese",children:z.example})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-900 text-sm font-chinese",onClick:()=>navigator.clipboard.writeText(`{{${z.key}}}`),title:"複製變數",children:"📋 複製"})})]},z.key))})]})})})]},V.id)})]})},$=()=>{const M=[{id:1,name:"用戶註冊",category:"user",event:"user_registered",description:"新用戶完成註冊時觸發",conditions:[{field:"user.email_verified",operator:"equals",value:"true"}],status:"active",templates:["歡迎註冊通知","新手指南"],lastTriggered:"2024-09-16 10:30",triggerCount:23},{id:2,name:"訂單建立",category:"order",event:"order_created",description:"用戶成功下單時觸發",conditions:[{field:"order.status",operator:"equals",value:"confirmed"},{field:"order.payment_status",operator:"equals",value:"paid"}],status:"active",templates:["訂單確認通知"],lastTriggered:"2024-09-16 14:15",triggerCount:89},{id:3,name:"庫存警告",category:"product",event:"stock_low",description:"商品庫存低於安全水位時觸發",conditions:[{field:"product.stock",operator:"less_than",value:"10"}],status:"active",templates:["庫存不足提醒"],lastTriggered:"2024-09-15 18:45",triggerCount:5},{id:4,name:"生日祝福",category:"user",event:"user_birthday",description:"用戶生日當天觸發",conditions:[{field:"system.date",operator:"equals",value:"user.birthday"},{field:"user.birthday_notifications",operator:"equals",value:"enabled"}],status:"active",templates:["生日祝福訊息","生日專屬優惠"],lastTriggered:"2024-09-14 09:00",triggerCount:12}],A=z=>{const F={user:{bg:"bg-blue-100",text:"text-blue-700",label:"用戶",icon:"👤"},order:{bg:"bg-green-100",text:"text-green-700",label:"訂單",icon:"📦"},product:{bg:"bg-purple-100",text:"text-purple-700",label:"商品",icon:"🛍️"},system:{bg:"bg-gray-100",text:"text-gray-700",label:"系統",icon:"⚙️"}},W=F[z]||F.system;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-bold rounded font-chinese ${W.bg} ${W.text}`,children:[W.icon," ",W.label]})},V=z=>z==="active"?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-green-100 text-green-700 rounded font-chinese",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"啟用"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-gray-100 text-gray-700 rounded font-chinese",children:[e.jsx(Ba,{className:"w-3 h-3 mr-1"}),"停用"]}),B=z=>{const F={equals:"等於",not_equals:"不等於",greater_than:"大於",less_than:"小於",contains:"包含",not_contains:"不包含"};return`${z.field} ${F[z.operator]||z.operator} ${z.value}`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese",children:"觸發器管理"}),e.jsxs("button",{className:"btn btn-primary flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"新增觸發器"]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 font-chinese mb-2",children:"🎯 觸發器說明"}),e.jsx("p",{className:"text-sm text-blue-700 font-chinese",children:"觸發器定義了何時自動發送通知。當系統事件發生且符合設定條件時，相關的通知範本會被自動執行。"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:M.length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總觸發器數"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:M.filter(z=>z.status==="active").length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"啟用中"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:M.reduce((z,F)=>z+F.triggerCount,0)}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"今日觸發次數"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:M.reduce((z,F)=>z+F.templates.length,0)}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"關聯範本數"})]})]})]}),e.jsx("div",{className:"glass rounded-2xl overflow-visible",children:e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"觸發器名稱"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"分類"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"觸發條件"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"關聯範本"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"觸發次數"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"狀態"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:M.map(z=>e.jsxs("tr",{className:"hover:bg-white/30",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium font-chinese",children:z.name}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:z.description})]})}),e.jsx("td",{className:"px-4 py-3",children:A(z.category)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"space-y-1",children:z.conditions.map((F,W)=>e.jsx("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:B(F)},W))})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"space-y-1",children:z.templates.map((F,W)=>e.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded font-chinese mr-1",children:F},W))})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("div",{className:"font-bold",children:z.triggerCount}),e.jsx("div",{className:"text-xs text-gray-500",children:z.lastTriggered})]}),e.jsx("td",{className:"px-4 py-3",children:V(z.status)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"查看詳情",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"編輯",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"手動觸發",children:e.jsx(rr,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"刪除",children:e.jsx($e,{className:"w-4 h-4"})})]})})]},z.id))})]})})})]})},I=()=>{const M=[{id:"email_html",name:"Email (HTML)",description:"HTML格式的電子郵件",icon:"📧",status:"active",config:{smtp_host:"smtp.gmail.com",smtp_port:"587",smtp_user:"notification@marelle.com",smtp_encryption:"TLS"},stats:{sent:1420,delivered:1380,opened:850,clicked:320},lastTest:"2024-09-16 10:00",testStatus:"success"},{id:"email_text",name:"Email (純文字)",description:"純文字格式的電子郵件",icon:"📧",status:"active",config:{smtp_host:"smtp.gmail.com",smtp_port:"587",smtp_user:"notification@marelle.com",smtp_encryption:"TLS"},stats:{sent:340,delivered:338,opened:280,clicked:45},lastTest:"2024-09-16 10:00",testStatus:"success"},{id:"sms",name:"SMS 簡訊",description:"手機簡訊通知",icon:"💬",status:"active",config:{provider:"中華電信",api_key:"****-****-****-1234",sender_id:"Marelle"},stats:{sent:890,delivered:875,opened:875,clicked:0},lastTest:"2024-09-15 16:30",testStatus:"success"},{id:"line_text",name:"LINE 文字訊息",description:"LINE官方帳號文字訊息",icon:"💬",status:"active",config:{channel_access_token:"****-****-****-5678",channel_secret:"****-****-****-9012"},stats:{sent:560,delivered:548,opened:520,clicked:180},lastTest:"2024-09-16 09:15",testStatus:"success"},{id:"line_flex",name:"LINE Flex 訊息",description:"LINE互動式Flex訊息",icon:"💬",status:"active",config:{channel_access_token:"****-****-****-5678",channel_secret:"****-****-****-9012"},stats:{sent:230,delivered:228,opened:215,clicked:120},lastTest:"2024-09-16 09:15",testStatus:"success"},{id:"push_app",name:"App 推播",description:"手機應用程式推播通知",icon:"📱",status:"inactive",config:{fcm_server_key:"****-****-****-3456",apns_cert:"production.p12"},stats:{sent:0,delivered:0,opened:0,clicked:0},lastTest:"2024-09-10 14:20",testStatus:"failed"},{id:"push_web",name:"網頁推播",description:"瀏覽器網頁推播通知",icon:"🌐",status:"active",config:{vapid_public_key:"****-****-****-7890",vapid_private_key:"****-****-****-1357"},stats:{sent:450,delivered:420,opened:350,clicked:150},lastTest:"2024-09-16 11:45",testStatus:"success"}],A=F=>F==="active"?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-green-100 text-green-700 rounded font-chinese",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"啟用"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-gray-100 text-gray-700 rounded font-chinese",children:[e.jsx(Ba,{className:"w-3 h-3 mr-1"}),"停用"]}),V=F=>F==="success"?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-green-100 text-green-700 rounded font-chinese",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"正常"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-red-100 text-red-700 rounded font-chinese",children:[e.jsx(Zs,{className:"w-3 h-3 mr-1"}),"異常"]}),B=(F,W)=>W>0?(F/W*100).toFixed(1):"0.0",z=(F,W)=>W>0?(F/W*100).toFixed(1):"0.0";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese",children:"渠道設定管理"}),e.jsxs("button",{className:"btn btn-primary flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"新增渠道"]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800 font-chinese mb-2",children:"📡 渠道說明"}),e.jsx("p",{className:"text-sm text-green-700 font-chinese",children:"配置各種通知渠道的連接設定和參數，確保通知能正確發送到用戶。定期測試渠道狀態以維持最佳效果。"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:M.length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總渠道數"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:M.filter(F=>F.status==="active").length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"啟用渠道"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:M.reduce((F,W)=>F+W.stats.sent,0).toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總發送數"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[M.filter(F=>F.testStatus==="success").length,"/",M.length]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"正常渠道"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:M.map(F=>e.jsxs("div",{className:"glass rounded-2xl overflow-visible",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:F.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold font-chinese",children:F.name}),e.jsx("p",{className:"text-sm opacity-90 font-chinese",children:F.description})]})]}),A(F.status)]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:F.stats.sent.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"發送數"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[B(F.stats.delivered,F.stats.sent),"%"]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"送達率"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[z(F.stats.opened,F.stats.delivered),"%"]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"開啟率"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:F.stats.clicked}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"點擊數"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 font-chinese",children:"連接狀態"}),V(F.testStatus)]}),e.jsxs("div",{className:"text-xs text-gray-500 font-chinese mb-4",children:["最後測試：",F.lastTest]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"flex-1 btn btn-secondary text-xs py-2",children:[e.jsx(ar,{className:"w-4 h-4 mr-1"}),"設定"]}),e.jsxs("button",{className:"flex-1 btn btn-primary text-xs py-2",children:[e.jsx(rr,{className:"w-4 h-4 mr-1"}),"測試"]})]})]})]})]},F.id))})]})},L=()=>{const M=[{id:"N001",templateName:"訂單確認通知",recipient:"user@example.com",channel:"email_html",status:"delivered",sentAt:"2024-09-16 14:15:30",deliveredAt:"2024-09-16 14:15:45",openedAt:"2024-09-16 14:20:12",clickedAt:"2024-09-16 14:22:08",subject:"您的訂單 #ORD-20240916-001 已確認",errorMessage:null},{id:"N002",templateName:"會員生日祝福",recipient:"0912345678",channel:"sms",status:"delivered",sentAt:"2024-09-16 09:00:00",deliveredAt:"2024-09-16 09:00:15",openedAt:"2024-09-16 09:00:15",clickedAt:null,subject:"生日快樂！專屬優惠等您領取",errorMessage:null},{id:"N003",templateName:"商品缺貨提醒",recipient:"admin@marelle.com",channel:"email_text",status:"failed",sentAt:"2024-09-16 08:30:00",deliveredAt:null,openedAt:null,clickedAt:null,subject:"商品庫存警告：精緻杏仁蛋糕",errorMessage:"SMTP connection timeout"},{id:"N004",templateName:"促銷活動通知",recipient:"LINE-USER-123",channel:"line_flex",status:"delivered",sentAt:"2024-09-15 16:00:00",deliveredAt:"2024-09-15 16:00:05",openedAt:"2024-09-15 16:05:20",clickedAt:"2024-09-15 16:06:15",subject:"限時優惠：全館商品9折起",errorMessage:null},{id:"N005",templateName:"密碼重設通知",recipient:"member@example.com",channel:"email_html",status:"pending",sentAt:"2024-09-16 14:30:00",deliveredAt:null,openedAt:null,clickedAt:null,subject:"密碼重設確認",errorMessage:null}],A=F=>{const W={pending:{bg:"bg-yellow-100",text:"text-yellow-700",label:"發送中",icon:be},delivered:{bg:"bg-green-100",text:"text-green-700",label:"已送達",icon:ae},failed:{bg:"bg-red-100",text:"text-red-700",label:"失敗",icon:Zs},bounced:{bg:"bg-orange-100",text:"text-orange-700",label:"退回",icon:Zs}},Y=W[F]||W.pending,ne=Y.icon;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-bold rounded font-chinese ${Y.bg} ${Y.text}`,children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),Y.label]})},V=F=>{const Y={email_html:{icon:"📧",name:"Email"},email_text:{icon:"📧",name:"Email"},sms:{icon:"💬",name:"SMS"},line_text:{icon:"💬",name:"LINE"},line_flex:{icon:"💬",name:"LINE"},push_app:{icon:"📱",name:"App推播"},push_web:{icon:"🌐",name:"網頁推播"}}[F]||{icon:"📤",name:"未知"};return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded font-chinese",children:[Y.icon," ",Y.name]})},B=M.filter(F=>{const W=b==="all"||F.channel===b,Y=S==="all"||F.status===S;return W&&Y}),z={total:M.length,delivered:M.filter(F=>F.status==="delivered").length,failed:M.filter(F=>F.status==="failed").length,pending:M.filter(F=>F.status==="pending").length,opened:M.filter(F=>F.openedAt).length,clicked:M.filter(F=>F.clickedAt).length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese",children:"通知歷史記錄"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(_t,{value:f,onChange:y,options:[{value:"1d",label:"今天",icon:"📅"},{value:"7d",label:"7天",icon:"📊"},{value:"30d",label:"30天",icon:"📈"},{value:"90d",label:"90天",icon:"📉"}],className:"w-24"}),e.jsx(_t,{value:b,onChange:v,options:[{value:"all",label:"全部渠道"},{value:"email_html",label:"Email (HTML)",icon:"📧"},{value:"email_text",label:"Email (文字)",icon:"📧"},{value:"sms",label:"SMS",icon:"💬"},{value:"line_text",label:"LINE (文字)",icon:"💬"},{value:"line_flex",label:"LINE (Flex)",icon:"💬"},{value:"push_web",label:"網頁推播",icon:"🌐"}],className:"w-48"}),e.jsx(_t,{value:S,onChange:_,options:[{value:"all",label:"全部狀態"},{value:"delivered",label:"已送達",icon:"✅"},{value:"failed",label:"失敗",icon:"❌"},{value:"pending",label:"發送中",icon:"⏳"}],className:"w-32"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:z.total}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總發送"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:z.delivered}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"已送達"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:z.failed}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"失敗"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:z.pending}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"發送中"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:z.opened}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"已開啟"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:z.clicked}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"已點擊"})]})]})]}),e.jsx("div",{className:"glass rounded-2xl overflow-visible",children:e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"通知ID"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"範本"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"收件人"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"渠道"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"狀態"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"發送時間"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"互動"}),e.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:B.map(F=>e.jsxs("tr",{className:"hover:bg-white/30",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono",children:F.id})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium font-chinese",children:F.templateName}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese truncate max-w-xs",children:F.subject})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm font-mono",children:F.recipient})}),e.jsx("td",{className:"px-4 py-3",children:V(F.channel)}),e.jsxs("td",{className:"px-4 py-3",children:[A(F.status),F.errorMessage&&e.jsx("div",{className:"text-xs text-red-500 mt-1 font-chinese",children:F.errorMessage})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-sm",children:F.sentAt}),F.deliveredAt&&e.jsxs("div",{className:"text-xs text-gray-500",children:["送達: ",F.deliveredAt]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1",children:[F.openedAt&&e.jsxs("div",{className:"text-xs text-blue-600",children:["開啟: ",F.openedAt]}),F.clickedAt&&e.jsxs("div",{className:"text-xs text-purple-600",children:["點擊: ",F.clickedAt]}),!F.openedAt&&!F.clickedAt&&F.status==="delivered"&&e.jsx("div",{className:"text-xs text-gray-400",children:"無互動"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"查看詳情",children:e.jsx(Ee,{className:"w-4 h-4"})}),F.status==="failed"&&e.jsx("button",{className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"重新發送",children:e.jsx(rr,{className:"w-4 h-4"})})]})})]},F.id))})]})})})]})},D=()=>{const M={overview:{totalSent:3890,deliveryRate:97.2,openRate:68.5,clickRate:12.8,unsubscribeRate:.3},channelPerformance:[{channel:"email_html",name:"Email (HTML)",sent:1420,delivered:1380,opened:850,clicked:320,deliveryRate:97.2,openRate:61.6,clickRate:23.2},{channel:"sms",name:"SMS",sent:890,delivered:875,opened:875,clicked:0,deliveryRate:98.3,openRate:100,clickRate:0},{channel:"line_flex",name:"LINE Flex",sent:560,delivered:548,opened:520,clicked:180,deliveryRate:97.9,openRate:94.9,clickRate:34.6},{channel:"push_web",name:"網頁推播",sent:450,delivered:420,opened:350,clicked:150,deliveryRate:93.3,openRate:83.3,clickRate:42.9},{channel:"email_text",name:"Email (文字)",sent:340,delivered:338,opened:280,clicked:45,deliveryRate:99.4,openRate:82.8,clickRate:16.1},{channel:"line_text",name:"LINE 文字",sent:230,delivered:228,opened:215,clicked:120,deliveryRate:99.1,openRate:94.3,clickRate:55.8}],templatePerformance:[{template:"訂單確認通知",sent:890,delivered:875,opened:680,clicked:120,deliveryRate:98.3,openRate:77.7,clickRate:17.6},{template:"會員生日祝福",sent:560,delivered:548,opened:520,clicked:180,deliveryRate:97.9,openRate:94.9,clickRate:34.6},{template:"商品缺貨提醒",sent:450,delivered:445,opened:398,clicked:45,deliveryRate:98.9,openRate:89.4,clickRate:11.3},{template:"促銷活動通知",sent:890,delivered:865,opened:420,clicked:350,deliveryRate:97.2,openRate:48.6,clickRate:83.3},{template:"密碼重設通知",sent:340,delivered:338,opened:310,clicked:28,deliveryRate:99.4,openRate:91.7,clickRate:9}],timeSeriesData:[{date:"2024-09-10",sent:450,delivered:438,opened:320,clicked:65},{date:"2024-09-11",sent:520,delivered:508,opened:380,clicked:78},{date:"2024-09-12",sent:480,delivered:465,opened:340,clicked:72},{date:"2024-09-13",sent:610,delivered:595,opened:450,clicked:89},{date:"2024-09-14",sent:580,delivered:568,opened:420,clicked:85},{date:"2024-09-15",sent:640,delivered:622,opened:480,clicked:95},{date:"2024-09-16",sent:610,delivered:594,opened:440,clicked:88}]},A=(B,z)=>z==="delivery"?B>=95?"text-green-600":B>=85?"text-yellow-600":"text-red-600":z==="open"?B>=25?"text-green-600":B>=15?"text-yellow-600":"text-red-600":z==="click"?B>=5?"text-green-600":B>=2?"text-yellow-600":"text-red-600":"text-gray-600",V=B=>({email_html:"📧",email_text:"📧",sms:"💬",line_text:"💬",line_flex:"💬",push_web:"🌐"})[B]||"📤";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese",children:"效果分析"}),e.jsx(_t,{value:w,onChange:N,options:[{value:"1d",label:"今天",icon:"📅"},{value:"7d",label:"7天",icon:"📊"},{value:"30d",label:"30天",icon:"📈"},{value:"90d",label:"90天",icon:"📉"}],className:"w-24"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:M.overview.totalSent.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總發送數"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsxs("div",{className:`text-2xl font-bold ${A(M.overview.deliveryRate,"delivery")}`,children:[M.overview.deliveryRate,"%"]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"送達率"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsxs("div",{className:`text-2xl font-bold ${A(M.overview.openRate,"open")}`,children:[M.overview.openRate,"%"]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"開啟率"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsxs("div",{className:`text-2xl font-bold ${A(M.overview.clickRate,"click")}`,children:[M.overview.clickRate,"%"]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"點擊率"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[M.overview.unsubscribeRate,"%"]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"取消訂閱率"})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl overflow-visible",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white px-6 py-4",children:e.jsx("h4",{className:"text-lg font-bold font-chinese",children:"渠道效果分析"})}),e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"渠道"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"發送數"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"送達率"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"開啟率"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"點擊率"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"效果評級"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.channelPerformance.map(B=>{const z=B.deliveryRate*.3+B.openRate*.4+B.clickRate*.3,F=z>=80?"優秀":z>=60?"良好":z>=40?"普通":"需改善",W=z>=80?"text-green-600":z>=60?"text-blue-600":z>=40?"text-yellow-600":"text-red-600";return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:V(B.channel)}),e.jsx("span",{className:"font-medium font-chinese",children:B.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:B.sent.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`font-bold ${A(B.deliveryRate,"delivery")}`,children:[B.deliveryRate,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`font-bold ${A(B.openRate,"open")}`,children:[B.openRate,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`font-bold ${A(B.clickRate,"click")}`,children:[B.clickRate,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`font-bold font-chinese ${W}`,children:F})})]},B.channel)})})]})})]}),e.jsxs("div",{className:"glass rounded-2xl overflow-visible",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white px-6 py-4",children:e.jsx("h4",{className:"text-lg font-bold font-chinese",children:"範本效果分析"})}),e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"範本名稱"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"發送數"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"送達率"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"開啟率"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"點擊率"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"建議"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.templatePerformance.map(B=>{let z="";return B.deliveryRate<95?z="優化發送設定":B.openRate<20?z="改善主旨行":B.clickRate<5?z="優化內容與CTA":z="表現良好",e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-medium font-chinese",children:B.template})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:B.sent.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`font-bold ${A(B.deliveryRate,"delivery")}`,children:[B.deliveryRate,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`font-bold ${A(B.openRate,"open")}`,children:[B.openRate,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`font-bold ${A(B.clickRate,"click")}`,children:[B.clickRate,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm text-gray-600 font-chinese",children:z})})]},B.template)})})]})})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h4",{className:"text-lg font-bold font-chinese mb-4",children:"發送趨勢"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:M.timeSeriesData.map(B=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-500 font-chinese mb-2",children:[new Date(B.date).getMonth()+1,"/",new Date(B.date).getDate()]}),e.jsxs("div",{className:"bg-blue-100 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-bold text-blue-800",children:B.sent}),e.jsx("div",{className:"text-xs text-blue-600 font-chinese",children:"發送"})]}),e.jsxs("div",{className:"bg-green-100 rounded-lg p-2 mt-1",children:[e.jsx("div",{className:"text-xs font-bold text-green-800",children:B.opened}),e.jsx("div",{className:"text-xs text-green-600 font-chinese",children:"開啟"})]})]},B.date))})]})]})};return e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen",children:e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(jn,{className:"w-8 h-8 text-amber-500 mr-3"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 font-chinese",children:"通知管理系統"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>p(!0),className:"btn btn-secondary flex items-center",children:[e.jsx(rr,{className:"w-5 h-5 mr-2"}),"測試通知"]}),e.jsxs("button",{className:"btn btn-primary flex items-center",children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),"新增範本"]})]})]}),e.jsx("div",{className:"mb-6 flex space-x-2 overflow-x-auto",children:R.map(M=>{const A=M.icon;return e.jsxs("button",{className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium font-chinese whitespace-nowrap transition-colors ${c===M.id?"bg-[#cc824d] text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"}`,onClick:()=>d(M.id),children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:M.name})]},M.id)})}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Ll.length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總範本數"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ll.filter(M=>M.status==="active").length}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"啟用範本"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Ll.reduce((M,A)=>M+A.usageCount,0).toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"總發送次數"})]}),e.jsxs("div",{className:"glass rounded-xl p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[(Ll.reduce((M,A)=>M+A.successRate,0)/Ll.length).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:"平均成功率"})]})]}),k(),e.jsx(qD,{isOpen:x,onClose:()=>p(!1)})]})})},ZD={product:{create:"新增商品",read:"查看商品",update:"編輯商品",delete:"刪除商品"},inventory:{create:"新增庫存",read:"查看庫存",update:"編輯庫存",delete:"刪除庫存"},order:{create:"新增訂單",read:"查看訂單",update:"編輯訂單",delete:"刪除訂單"},member:{create:"新增會員",read:"查看會員",update:"編輯會員",delete:"刪除會員"},promotion:{create:"新增優惠",read:"查看優惠",update:"編輯優惠",delete:"刪除優惠"},supplier:{create:"新增供應商",read:"查看供應商",update:"編輯供應商",delete:"刪除供應商"},analytics:{create:"新增分析",read:"查看分析",update:"編輯分析",delete:"刪除分析"},system:{create:"新增系統設定",read:"查看系統設定",update:"編輯系統設定",delete:"刪除系統設定"},notification:{create:"新增通知",read:"查看通知",update:"編輯通知",delete:"刪除通知"},content:{create:"新增內容",read:"查看內容",update:"編輯內容",delete:"刪除內容"},admin:{create:"新增管理員",read:"查看管理員",update:"編輯管理員",delete:"刪除管理員"},marketing:{create:"新增行銷",read:"查看行銷",update:"編輯行銷",delete:"刪除行銷"},purchase:{create:"新增採購",read:"查看採購",update:"編輯採購",delete:"刪除採購"},gift:{create:"新增贈品",read:"查看贈品",update:"編輯贈品",delete:"刪除贈品"}},QD=[{id:1,roleName:"超級管理員",rolePrefix:"S",permissions:Object.keys(ZD).reduce((s,t)=>(s[t]={create:!0,read:!0,update:!0,delete:!0},s),{}),isSystemRole:!0},{id:2,roleName:"商品管理員",rolePrefix:"P",permissions:{product:{create:!0,read:!0,update:!0,delete:!0},inventory:{create:!0,read:!0,update:!0,delete:!1},order:{create:!1,read:!0,update:!0,delete:!1},analytics:{create:!1,read:!0,update:!1,delete:!1}},isSystemRole:!1},{id:3,roleName:"客服管理員",rolePrefix:"C",permissions:{order:{create:!1,read:!0,update:!0,delete:!1},member:{create:!1,read:!0,update:!0,delete:!1},notification:{create:!0,read:!0,update:!0,delete:!1}},isSystemRole:!1}],XD=[{id:1,employeeId:"S0001",roleId:1,email:"admin@marelle.com",displayName:"系統管理員",avatarUrl:null,isActive:!0,failedLoginAttempts:0,lockedUntil:null,lastLoginAt:null,createdAt:new Date().toISOString()}],Kb={minLength:4,maxLength:10,startNumber:1,padZeros:4},KD={maxAge:24*60*60*1e3,warningTime:10*60*1e3,extendTime:2*60*60*1e3},Ah={maxFailedAttempts:5,lockoutDuration:24*60*60*1e3,inactiveThreshold:30*24*60*60*1e3},JD={product:"商品管理",inventory:"庫存管理",order:"訂單管理",member:"會員管理",promotion:"優惠管理",supplier:"供應商管理",analytics:"數據分析",system:"系統設定",notification:"通知管理",content:"內容管理",admin:"管理員管理",marketing:"行銷管理",purchase:"採購管理",gift:"贈品管理"},eA={create:"新增",read:"查看",update:"編輯",delete:"刪除"},tA=(s,t=[])=>{const r=s.toUpperCase();let a=Kb.startNumber;const n=t.filter(l=>l.startsWith(r)).map(l=>parseInt(l.substring(r.length))).filter(l=>!isNaN(l));n.length>0&&(a=Math.max(...n)+1);const i=a.toString().padStart(Kb.padZeros,"0");return`${r}${i}`},sA=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<64;r++)t+=s.charAt(Math.floor(Math.random()*s.length));return t};class rA{constructor(){this.initializeData()}initializeData(){if(localStorage.getItem("admin_roles")||localStorage.setItem("admin_roles",JSON.stringify(QD)),!localStorage.getItem("admin_users")){const t=XD.map(r=>({...r,passwordHash:this.hashPassword("Admin123!")}));localStorage.setItem("admin_users",JSON.stringify(t))}localStorage.getItem("admin_sessions")||localStorage.setItem("admin_sessions",JSON.stringify([])),localStorage.getItem("admin_login_logs")||localStorage.setItem("admin_login_logs",JSON.stringify([]))}getAllRoles(){return JSON.parse(localStorage.getItem("admin_roles")||"[]")}getRoleById(t){return this.getAllRoles().find(a=>a.id===t)}createRole(t){const r=this.getAllRoles();this.getAllUsers().map(n=>n.employeeId);const a={id:Math.max(0,...r.map(n=>n.id))+1,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r.push(a),localStorage.setItem("admin_roles",JSON.stringify(r)),a}updateRole(t,r){const a=this.getAllRoles(),n=a.findIndex(i=>i.id===t);return n===-1?null:(a[n]={...a[n],...r,updatedAt:new Date().toISOString()},localStorage.setItem("admin_roles",JSON.stringify(a)),a[n])}deleteRole(t){const r=this.getAllRoles(),a=r.find(o=>o.id===t);if(!a||a.isSystemRole||this.getAllUsers().some(o=>o.roleId===t))return!1;const l=r.filter(o=>o.id!==t);return localStorage.setItem("admin_roles",JSON.stringify(l)),!0}getAllUsers(){return JSON.parse(localStorage.getItem("admin_users")||"[]")}getUserById(t){return this.getAllUsers().find(a=>a.id===t)}getUserByEmail(t){return this.getAllUsers().find(a=>a.email===t)}getUserByEmployeeId(t){return this.getAllUsers().find(a=>a.employeeId===t)}createUser(t){const r=this.getAllUsers(),a=this.getRoleById(t.roleId);if(!a)throw new Error("指定的角色不存在");const n=r.map(o=>o.employeeId),i=tA(a.rolePrefix,n),l={id:Math.max(0,...r.map(o=>o.id))+1,employeeId:i,...t,passwordHash:this.hashPassword(t.password),isActive:!0,failedLoginAttempts:0,lockedUntil:null,lastLoginAt:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return delete l.password,r.push(l),localStorage.setItem("admin_users",JSON.stringify(r)),l}updateUser(t,r){const a=this.getAllUsers(),n=a.findIndex(i=>i.id===t);return n===-1?null:(r.password&&(r.passwordHash=this.hashPassword(r.password),delete r.password),a[n]={...a[n],...r,updatedAt:new Date().toISOString()},localStorage.setItem("admin_users",JSON.stringify(a)),a[n])}deleteUser(t){const r=this.getAllUsers(),a=r.find(l=>l.id===t);if(!a)return!1;const n=this.getRoleById(a.roleId);if(n&&n.rolePrefix==="S")return!1;const i=r.filter(l=>l.id!==t);return localStorage.setItem("admin_users",JSON.stringify(i)),!0}getAllSessions(){return JSON.parse(localStorage.getItem("admin_sessions")||"[]")}createSession(t){const r=this.getAllSessions(),a=sA(),n=new Date(Date.now()+KD.maxAge),i={id:Math.max(0,...r.map(l=>l.id))+1,userId:t,sessionToken:a,expiresAt:n.toISOString(),lastActivity:new Date().toISOString(),createdAt:new Date().toISOString()};return r.push(i),localStorage.setItem("admin_sessions",JSON.stringify(r)),i}validateSession(t){const a=this.getAllSessions().find(c=>c.sessionToken===t);if(!a)return null;const n=new Date,i=new Date(a.expiresAt);if(n>i)return this.invalidateSession(t),null;this.updateSessionActivity(t);const l=this.getUserById(a.userId),o=this.getRoleById(l==null?void 0:l.roleId);return!l||!l.isActive||!o?(this.invalidateSession(t),null):{sessionId:a.id,userId:l.id,employeeId:l.employeeId,displayName:l.displayName,email:l.email,roleId:o.id,roleName:o.roleName,permissions:o.permissions,avatarUrl:l.avatarUrl,lastActivity:a.lastActivity}}updateSessionActivity(t){const r=this.getAllSessions(),a=r.findIndex(n=>n.sessionToken===t);a!==-1&&(r[a].lastActivity=new Date().toISOString(),localStorage.setItem("admin_sessions",JSON.stringify(r)))}invalidateSession(t){const a=this.getAllSessions().filter(n=>n.sessionToken!==t);localStorage.setItem("admin_sessions",JSON.stringify(a))}cleanExpiredSessions(){const t=this.getAllSessions(),r=new Date,a=t.filter(n=>{const i=new Date(n.expiresAt);return r<=i});localStorage.setItem("admin_sessions",JSON.stringify(a))}getAllLoginLogs(){return JSON.parse(localStorage.getItem("admin_login_logs")||"[]")}addLoginLog(t){const r=this.getAllLoginLogs(),a={id:Math.max(0,...r.map(n=>n.id))+1,...t,createdAt:new Date().toISOString()};return r.push(a),r.length>1e3&&r.splice(0,r.length-1e3),localStorage.setItem("admin_login_logs",JSON.stringify(r)),a}authenticate(t,r){const a=this.getUserByEmail(t);if(!a)return this.addLoginLog({userId:null,email:t,loginMethod:"password",success:!1,failureReason:"用戶不存在",ipAddress:this.getClientIP(),userAgent:navigator.userAgent}),{success:!1,message:"帳號或密碼錯誤"};if(a.lockedUntil&&new Date(a.lockedUntil)>new Date)return this.addLoginLog({userId:a.id,email:t,loginMethod:"password",success:!1,failureReason:"帳號被鎖定",ipAddress:this.getClientIP(),userAgent:navigator.userAgent}),{success:!1,message:"帳號已被鎖定，請聯繫管理員"};if(!a.isActive)return this.addLoginLog({userId:a.id,email:t,loginMethod:"password",success:!1,failureReason:"帳號已停用",ipAddress:this.getClientIP(),userAgent:navigator.userAgent}),{success:!1,message:"帳號已停用"};if(!this.verifyPassword(r,a.passwordHash)){const l=a.failedLoginAttempts+1;let o={failedLoginAttempts:l};return l>=Ah.maxFailedAttempts&&(o.lockedUntil=new Date(Date.now()+Ah.lockoutDuration).toISOString()),this.updateUser(a.id,o),this.addLoginLog({userId:a.id,email:t,loginMethod:"password",success:!1,failureReason:"密碼錯誤",ipAddress:this.getClientIP(),userAgent:navigator.userAgent}),{success:!1,message:l>=Ah.maxFailedAttempts?"密碼錯誤次數過多，帳號已被鎖定":"帳號或密碼錯誤"}}this.updateUser(a.id,{failedLoginAttempts:0,lockedUntil:null,lastLoginAt:new Date().toISOString()});const i=this.createSession(a.id);return this.addLoginLog({userId:a.id,email:t,loginMethod:"password",success:!0,failureReason:null,ipAddress:this.getClientIP(),userAgent:navigator.userAgent}),{success:!0,sessionToken:i.sessionToken,user:this.validateSession(i.sessionToken)}}hashPassword(t){return btoa(t+"marelle_salt")}verifyPassword(t,r){return this.hashPassword(t)===r}getClientIP(){return"127.0.0.1"}getStatistics(){const t=this.getAllUsers(),r=this.getAllRoles(),a=this.getAllSessions(),n=this.getAllLoginLogs(),i=t.filter(c=>c.isActive),l=t.filter(c=>c.lockedUntil&&new Date(c.lockedUntil)>new Date),o=a.filter(c=>new Date(c.expiresAt)>new Date);return{totalUsers:t.length,activeUsers:i.length,lockedUsers:l.length,totalRoles:r.length,activeSessions:o.length,totalLoginAttempts:n.length,successfulLogins:n.filter(c=>c.success).length,failedLogins:n.filter(c=>!c.success).length}}}const ua=new rA,aA=()=>{const[s,t]=m.useState({}),[r,a]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState([]),[c,d]=m.useState([]),[x,p]=m.useState(null),[f,y]=m.useState(null),[b,v]=m.useState({email:"",password:"",confirmPassword:"",displayName:"",roleId:"",avatarUrl:""}),[S,_]=m.useState({roleName:"",rolePrefix:"",permissions:{}}),[w,N]=m.useState(""),[u,h]=m.useState(""),[g,j]=m.useState("");m.useState(!1),m.useState([]),m.useEffect(()=>{T();const I=setInterval(()=>{ua.cleanExpiredSessions(),T()},6e4);return()=>clearInterval(I)},[]);const T=()=>{const I=ua.getStatistics();t(I);const L=ua.getAllLoginLogs().sort((V,B)=>new Date(B.createdAt)-new Date(V.createdAt)).slice(0,10);a(L);const D=ua.getAllSessions().filter(V=>new Date(V.expiresAt)>new Date).sort((V,B)=>new Date(B.lastActivity)-new Date(V.lastActivity));i(D);const M=ua.getAllRoles();o(M);const A=ua.getAllUsers();d(A)},C=I=>{const L=ua.getUserById(I);return L?L.displayName:"未知用戶"},E=({title:I,value:L,icon:D,color:M="blue",subtitle:A,onClick:V})=>e.jsxs("div",{className:`glass rounded-2xl p-6 ${V?"cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105":""}`,onClick:V,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 p-3 rounded-xl bg-${M}-100`,children:e.jsx(D,{className:`w-6 h-6 text-${M}-600`})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:I}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L}),A&&e.jsx("p",{className:"text-xs text-gray-500 font-chinese",children:A})]})]}),V&&e.jsx("div",{className:"mt-2 text-right",children:e.jsx("span",{className:"text-xs text-blue-600 font-chinese",children:"點擊查看詳情 →"})})]}),R=({isOpen:I,onClose:L,title:D,children:M,size:A="max-w-4xl"})=>I?e.jsxs("div",{className:"fixed inset-0 z-[100000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 backdrop-blur-md",onClick:L}),e.jsxs("div",{className:`relative ${A} w-full max-h-[90vh] overflow-hidden rounded-3xl bg-white/80 backdrop-blur-xl border border-white/30 shadow-2xl`,children:[e.jsx("div",{className:"bg-gradient-to-r from-[#cc824d]/80 to-[#b3723f]/80 backdrop-blur-sm text-white px-6 py-4 border-b border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold font-chinese",children:D}),e.jsx("button",{onClick:L,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(bt,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:M})]})]}):null,k=()=>e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(lf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"搜尋用戶...",value:w,onChange:I=>N(I.target.value),className:"pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white/50 backdrop-blur-sm"})]}),e.jsx(_t,{options:[{value:"",label:"所有角色"},...l.map(I=>({value:I.id,label:I.roleName}))],value:u,onChange:h,placeholder:"篩選角色"}),e.jsx(_t,{options:[{value:"",label:"所有狀態"},{value:"active",label:"啟用"},{value:"disabled",label:"停用"}],value:g,onChange:j,placeholder:"篩選狀態"})]}),e.jsxs("button",{onClick:()=>{y(null),v({email:"",password:"",confirmPassword:"",displayName:"",roleId:"",avatarUrl:""}),p("addUser")},className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b3723f] transition-colors flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),"新增管理員"]})]}),e.jsx("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"用戶"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"角色"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"最後登入"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white/30 divide-y divide-gray-200/50",children:c.filter(I=>{const L=I.displayName.toLowerCase().includes(w.toLowerCase())||I.email.toLowerCase().includes(w.toLowerCase()),D=!u||I.roleId===u,M=!g||g==="active"&&I.isActive||g==="disabled"&&!I.isActive;return L&&D&&M}).map(I=>{var L;return e.jsxs("tr",{className:"hover:bg-white/20",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:I.avatarUrl?e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:I.avatarUrl,alt:""}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx(na,{className:"w-6 h-6 text-gray-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.displayName}),e.jsx("div",{className:"text-sm text-gray-500",children:I.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:((L=l.find(D=>D.id===I.roleId))==null?void 0:L.roleName)||"未知角色"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.isActive?"啟用":"停用"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.lastLoginAt?new Date(I.lastLoginAt).toLocaleString():"從未登入"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{y(I),v({email:I.email,password:"",confirmPassword:"",displayName:I.displayName,roleId:I.roleId,avatarUrl:I.avatarUrl||""}),p("editUser")},className:"text-blue-600 hover:text-blue-900 p-1 rounded",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{window.confirm("確定要刪除這個用戶嗎？")&&(ua.deleteUser(I.id),T())},className:"text-red-600 hover:text-red-900 p-1 rounded",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{ua.updateUser(I.id,{isActive:!I.isActive}),T()},className:`p-1 rounded ${I.isActive?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"}`,children:I.isActive?e.jsx(fp,{className:"w-4 h-4"}):e.jsx(G8,{className:"w-4 h-4"})})]})})]},I.id)})})]})})]}),O=()=>e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"角色管理"}),e.jsxs("button",{onClick:()=>{y(null),_({roleName:"",rolePrefix:"",permissions:{}}),p("addRole")},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),"新增角色"]})]}),e.jsx("div",{className:"grid gap-4",children:l.map(I=>e.jsxs("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-6 border border-white/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:I.roleName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["權限前綴: ",I.rolePrefix]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{y(I),_({roleName:I.roleName,rolePrefix:I.rolePrefix,permissions:I.permissions||{}}),p("editRole")},className:"text-blue-600 hover:text-blue-900 p-2 rounded",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{window.confirm("確定要刪除這個角色嗎？")&&(ua.deleteRole(I.id),T())},className:"text-red-600 hover:text-red-900 p-2 rounded",children:e.jsx($e,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"權限列表:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Object.entries(JD).map(([L,D])=>{var V;const M=((V=I.permissions)==null?void 0:V[L])||{};return Object.values(M).some(Boolean)?e.jsxs("div",{className:"bg-blue-50/80 rounded-lg p-3",children:[e.jsx("h6",{className:"text-xs font-medium text-blue-900 mb-2",children:D}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(eA).map(([B,z])=>M[B]?e.jsx("span",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded",children:z},B):null)})]},L):null})})]})]},I.id))})]}),P=()=>e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"活躍會話"}),e.jsx("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"用戶"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"登入時間"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"最後活動"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"到期時間"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white/30 divide-y divide-gray-200/50",children:n.map(I=>e.jsxs("tr",{className:"hover:bg-white/20",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C(I.userId)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(I.createdAt).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(I.lastActivity).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(I.expiresAt).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>{window.confirm("確定要終止這個會話嗎？")&&(ua.revokeSession(I.id),T())},className:"text-red-600 hover:text-red-900 p-1 rounded",children:e.jsx(bt,{className:"w-4 h-4"})})})]},I.id))})]})})]}),$=()=>e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:"登入日誌"}),e.jsx("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"用戶"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"類型"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"時間"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"詳細"})]})}),e.jsx("tbody",{className:"bg-white/30 divide-y divide-gray-200/50",children:r.map(I=>e.jsxs("tr",{className:"hover:bg-white/20",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C(I.userId)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.success?"成功":"失敗"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(I.createdAt).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.details||"-"})]},I.id))})]})})]});return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"管理員控制台"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(E,{title:"總管理員數",value:s.totalUsers||0,icon:wr,color:"blue",subtitle:`${s.activeUsers||0} 位啟用中`,onClick:()=>p("users")}),e.jsx(E,{title:"角色數量",value:s.totalRoles||0,icon:dt,color:"green",onClick:()=>p("roles")}),e.jsx(E,{title:"活躍會話",value:s.activeSessions||0,icon:be,color:"orange",onClick:()=>p("sessions")}),e.jsx(E,{title:"今日登入",value:s.todayLogins||0,icon:Ee,color:"purple",onClick:()=>p("logs")})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 font-chinese mb-4",children:"快速操作"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>p("users"),className:"flex flex-col items-center p-4 bg-blue-100/50 rounded-xl hover:bg-blue-200/50 transition-colors",children:[e.jsx(wr,{className:"w-8 h-8 text-blue-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-900 font-chinese",children:"管理員管理"})]}),e.jsxs("button",{onClick:()=>p("roles"),className:"flex flex-col items-center p-4 bg-green-100/50 rounded-xl hover:bg-green-200/50 transition-colors",children:[e.jsx(dt,{className:"w-8 h-8 text-green-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-green-900 font-chinese",children:"角色管理"})]}),e.jsxs("button",{onClick:()=>p("sessions"),className:"flex flex-col items-center p-4 bg-orange-100/50 rounded-xl hover:bg-orange-200/50 transition-colors",children:[e.jsx(be,{className:"w-8 h-8 text-orange-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-orange-900 font-chinese",children:"會話管理"})]}),e.jsxs("button",{onClick:()=>p("logs"),className:"flex flex-col items-center p-4 bg-purple-100/50 rounded-xl hover:bg-purple-200/50 transition-colors",children:[e.jsx(Ee,{className:"w-8 h-8 text-purple-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-purple-900 font-chinese",children:"登入日誌"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese mb-4",children:"最近登入"}),e.jsx("div",{className:"space-y-3",children:r.slice(0,5).map(I=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${I.success?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C(I.userId)}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(I.createdAt).toLocaleString()})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${I.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.success?"成功":"失敗"})]},I.id))})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-chinese mb-4",children:"活躍會話"}),e.jsx("div",{className:"space-y-3",children:n.slice(0,5).map(I=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C(I.userId)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["最後活動: ",new Date(I.lastActivity).toLocaleString()]})]}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]},I.id))})]})]}),e.jsx(R,{isOpen:x==="users",onClose:()=>p(null),title:"管理員管理",size:"max-w-6xl",children:k()}),e.jsx(R,{isOpen:x==="roles",onClose:()=>p(null),title:"角色管理",size:"max-w-5xl",children:O()}),e.jsx(R,{isOpen:x==="sessions",onClose:()=>p(null),title:"會話管理",size:"max-w-4xl",children:P()}),e.jsx(R,{isOpen:x==="logs",onClose:()=>p(null),title:"登入日誌",size:"max-w-4xl",children:$()})]})},Ih=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Ft={ACTIVE:"active",INACTIVE:"inactive",OUT_OF_STOCK:"out_of_stock"},Os={SINGLE:"single",MULTIPLE:"multiple",FIXED_COMBO:"fixed_combo",WEIGHTED:"weighted"},Ra={QUANTITY:"quantity",AMOUNT:"amount"},Kt={REGULAR:"regular",SILVER:"silver",GOLD:"gold",PLATINUM:"platinum",VIP:"vip"},Bs={BEAUTY:"beauty",SKINCARE:"skincare",FRAGRANCE:"fragrance",MAKEUP:"makeup",TOOLS:"tools",SAMPLES:"samples",LIMITED:"limited",EXCLUSIVE:"exclusive"},nA=()=>[{id:"gift_001",name:"香氛護手霜",description:"滋潤護手霜，淡雅花香，容量30ml",images:[{id:"img_001",url:"/images/gifts/hand-cream.jpg",alt:"香氛護手霜",sort:1,isMain:!0}],category:Bs.SKINCARE,tags:["護手霜","香氛","滋潤"],weight:.05,dimensions:{length:10,width:3,height:15},inventory:{total:500,available:420,reserved:30,alertThreshold:50,isUnlimited:!1},status:Ft.ACTIVE,createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-03-10")},{id:"gift_002",name:"玫瑰花瓣面膜",description:"天然玫瑰精華面膜，深層保濕，單片裝",images:[{id:"img_002",url:"/images/gifts/rose-mask.jpg",alt:"玫瑰花瓣面膜",sort:1,isMain:!0}],category:Bs.SKINCARE,tags:["面膜","玫瑰","保濕"],weight:.02,dimensions:{length:15,width:12,height:.3},inventory:{total:1e3,available:850,reserved:50,alertThreshold:100,isUnlimited:!1},status:Ft.ACTIVE,createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-03-12")},{id:"gift_003",name:"迷你香水",description:"經典香調迷你香水，容量5ml，方便攜帶",images:[{id:"img_003",url:"/images/gifts/mini-perfume.jpg",alt:"迷你香水",sort:1,isMain:!0}],category:Bs.FRAGRANCE,tags:["香水","迷你","經典"],weight:.03,dimensions:{length:5,width:2,height:8},inventory:{total:300,available:280,reserved:15,alertThreshold:30,isUnlimited:!1},status:Ft.ACTIVE,createdAt:new Date("2024-02-01"),updatedAt:new Date("2024-03-08")},{id:"gift_004",name:"化妝刷組合",description:"專業化妝刷3件組，包含粉底刷、腮紅刷、眼影刷",images:[{id:"img_004",url:"/images/gifts/brush-set.jpg",alt:"化妝刷組合",sort:1,isMain:!0}],category:Bs.TOOLS,tags:["化妝刷","專業","組合"],weight:.15,dimensions:{length:18,width:8,height:2},inventory:{total:200,available:180,reserved:10,alertThreshold:20,isUnlimited:!1},status:Ft.ACTIVE,createdAt:new Date("2024-02-10"),updatedAt:new Date("2024-03-15")},{id:"gift_005",name:"VIP專屬精華",description:"VIP會員專屬抗老精華，珍珠萃取，容量15ml",images:[{id:"img_005",url:"/images/gifts/vip-serum.jpg",alt:"VIP專屬精華",sort:1,isMain:!0}],category:Bs.EXCLUSIVE,tags:["精華","VIP","抗老","珍珠"],weight:.08,dimensions:{length:8,width:3,height:12},inventory:{total:100,available:95,reserved:3,alertThreshold:10,isUnlimited:!1},status:Ft.ACTIVE,createdAt:new Date("2024-02-15"),updatedAt:new Date("2024-03-18")},{id:"gift_006",name:"限量唇膏",description:"限量版絲絨唇膏，玫瑰色調，滋潤不乾燥",images:[{id:"img_006",url:"/images/gifts/limited-lipstick.jpg",alt:"限量唇膏",sort:1,isMain:!0}],category:Bs.MAKEUP,tags:["唇膏","限量","絲絨","玫瑰"],weight:.04,dimensions:{length:7,width:2,height:2},inventory:{total:150,available:45,reserved:5,alertThreshold:25,isUnlimited:!1},status:Ft.ACTIVE,createdAt:new Date("2024-02-20"),updatedAt:new Date("2024-03-20")}],iA=()=>[{id:"tier_rule_001",name:"美妝階梯贈品",campaignId:"campaign_001",targetProduct:{type:"category",categoryIds:["makeup","skincare"]},tiers:[{level:1,condition:{type:Ra.QUANTITY,value:1,operator:">="},giftOptions:[{giftId:"gift_001",quantity:1,priority:1}],selectionType:Os.FIXED_COMBO},{level:2,condition:{type:Ra.QUANTITY,value:2,operator:">="},giftOptions:[{giftId:"gift_002",quantity:1,priority:1},{giftId:"gift_003",quantity:1,priority:2}],selectionType:Os.SINGLE},{level:3,condition:{type:Ra.AMOUNT,value:3e3,operator:">="},giftOptions:[{giftId:"gift_004",quantity:1,priority:1},{giftId:"gift_006",quantity:1,priority:1}],selectionType:Os.MULTIPLE,maxSelections:2}],memberRestrictions:[{memberLevel:Kt.REGULAR,maxTierLevel:2},{memberLevel:Kt.SILVER,maxTierLevel:3}],dateRange:{start:new Date("2024-03-01"),end:new Date("2024-06-30")},status:"active"}],lA=()=>[{id:"member_rule_001",name:"會員等級贈品權益",memberLevels:Object.values(Kt),giftPool:{regularGifts:["gift_001","gift_002"],silverGifts:["gift_001","gift_002","gift_003"],goldGifts:["gift_001","gift_002","gift_003","gift_004"],platinumGifts:["gift_001","gift_002","gift_003","gift_004","gift_006"],vipGifts:["gift_001","gift_002","gift_003","gift_004","gift_005","gift_006"]},restrictions:{dailyLimit:{[Kt.REGULAR]:1,[Kt.SILVER]:2,[Kt.GOLD]:3,[Kt.PLATINUM]:4,[Kt.VIP]:5},monthlyLimit:{[Kt.REGULAR]:5,[Kt.SILVER]:10,[Kt.GOLD]:15,[Kt.PLATINUM]:20,[Kt.VIP]:30},requiresMinSpend:{[Kt.REGULAR]:500,[Kt.SILVER]:400,[Kt.GOLD]:300,[Kt.PLATINUM]:200,[Kt.VIP]:100},newMemberWelcomeGifts:["gift_001"]},exclusiveGifts:["gift_005"]}],oA=()=>[{id:"allocation_001",orderId:"order_001",giftId:"gift_001",quantity:1,allocationTime:new Date("2024-03-15T10:30:00"),status:"delivered",ruleId:"tier_rule_001",ruleType:"tier"},{id:"allocation_002",orderId:"order_002",giftId:"gift_002",quantity:1,allocationTime:new Date("2024-03-18T14:20:00"),status:"sent",ruleId:"tier_rule_001",ruleType:"tier"},{id:"allocation_003",orderId:"order_003",giftId:"gift_003",quantity:1,allocationTime:new Date("2024-03-20T09:15:00"),status:"allocated",ruleId:"member_rule_001",ruleType:"member"}];class cA{constructor(){this.gifts=this.loadData("gifts",nA),this.tierRules=this.loadData("tierRules",iA),this.memberGiftRules=this.loadData("memberGiftRules",lA),this.giftAllocations=this.loadData("giftAllocations",oA)}loadData(t,r){const a=localStorage.getItem(`marelle_gift_${t}`);if(a)try{return JSON.parse(a).map(i=>({...i,createdAt:i.createdAt?new Date(i.createdAt):new Date,updatedAt:i.updatedAt?new Date(i.updatedAt):new Date,...i.dateRange&&{dateRange:{start:new Date(i.dateRange.start),end:new Date(i.dateRange.end)}},...i.allocationTime&&{allocationTime:new Date(i.allocationTime)}}))}catch(n){console.warn(`Failed to load ${t}, using defaults:`,n)}return r()}saveData(t,r){localStorage.setItem(`marelle_gift_${t}`,JSON.stringify(r))}getAllGifts(){return this.gifts}getGiftById(t){return this.gifts.find(r=>r.id===t)}createGift(t){const r={id:Ih(),...t,createdAt:new Date,updatedAt:new Date};return this.gifts.push(r),this.saveData("gifts",this.gifts),r}updateGift(t,r){const a=this.gifts.findIndex(n=>n.id===t);return a!==-1?(this.gifts[a]={...this.gifts[a],...r,updatedAt:new Date},this.saveData("gifts",this.gifts),this.gifts[a]):null}deleteGift(t){const r=this.gifts.findIndex(a=>a.id===t);return r!==-1?(this.gifts.splice(r,1),this.saveData("gifts",this.gifts),!0):!1}updateInventory(t,r,a){const n=this.getGiftById(t);if(!n)return!1;switch(r){case"reserve":if(n.inventory.available>=a)n.inventory.available-=a,n.inventory.reserved+=a;else return!1;break;case"release":n.inventory.reserved-=a,n.inventory.available+=a;break;case"consume":n.inventory.reserved-=a,n.inventory.total-=a;break;case"add":n.inventory.total+=a,n.inventory.available+=a;break}return this.updateGiftStatus(t),this.saveData("gifts",this.gifts),!0}updateGiftStatus(t){const r=this.getGiftById(t);r&&(r.inventory.available<=0?r.status=Ft.OUT_OF_STOCK:r.status===Ft.OUT_OF_STOCK&&(r.status=Ft.ACTIVE),r.updatedAt=new Date)}getAllTierRules(){return this.tierRules}createTierRule(t){const r={id:Ih(),...t,createdAt:new Date};return this.tierRules.push(r),this.saveData("tierRules",this.tierRules),r}updateTierRule(t,r){const a=this.tierRules.findIndex(n=>n.id===t);return a!==-1?(this.tierRules[a]={...this.tierRules[a],...r},this.saveData("tierRules",this.tierRules),this.tierRules[a]):null}getAllMemberGiftRules(){return this.memberGiftRules}getAllAllocations(){return this.giftAllocations}createAllocation(t){const r={id:Ih(),...t,allocationTime:new Date};return this.giftAllocations.push(r),this.saveData("giftAllocations",this.giftAllocations),r}getGiftStatistics(){const t=this.gifts.length,r=this.gifts.filter(o=>o.status===Ft.ACTIVE).length,a=this.gifts.filter(o=>o.status===Ft.OUT_OF_STOCK).length,n=this.gifts.filter(o=>o.inventory.available>0&&o.inventory.available<=o.inventory.alertThreshold).length,i=this.giftAllocations.length,l=this.giftAllocations.filter(o=>{const c=new Date(o.allocationTime).getMonth(),d=new Date().getMonth();return c===d}).length;return{totalGifts:t,activeGifts:r,outOfStockGifts:a,lowStockGifts:n,totalAllocations:i,thisMonthAllocations:l}}searchGifts(t){const r=t.toLowerCase();return this.gifts.filter(a=>a.name.toLowerCase().includes(r)||a.description.toLowerCase().includes(r)||a.tags.some(n=>n.toLowerCase().includes(r))||a.category.toLowerCase().includes(r))}filterGiftsByStatus(t){return this.gifts.filter(r=>r.status===t)}filterGiftsByCategory(t){return this.gifts.filter(r=>r.category===t)}}const _r=new cA,dA=()=>{var L;const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(""),[l,o]=m.useState(""),[c,d]=m.useState(""),[x,p]=m.useState(null),[f,y]=m.useState(!1),[b,v]=m.useState("view"),[S,_]=m.useState({}),[w,N]=m.useState({name:"",description:"",category:"",tags:[],weight:0,dimensions:{length:0,width:0,height:0},inventory:{total:0,available:0,reserved:0,alertThreshold:10,isUnlimited:!1},status:Ft.ACTIVE});m.useEffect(()=>{u(),h()},[]),m.useEffect(()=>{let D=s;n&&(D=_r.searchGifts(n)),l&&(D=D.filter(M=>M.category===l)),c&&(D=D.filter(M=>M.status===c)),a(D)},[s,n,l,c]);const u=()=>{const D=_r.getAllGifts();t(D),a(D)},h=()=>{const D=_r.getGiftStatistics();_(D)},g=()=>{v("create"),N({name:"",description:"",category:"",tags:[],weight:0,dimensions:{length:0,width:0,height:0},inventory:{total:0,available:0,reserved:0,alertThreshold:10,isUnlimited:!1},status:Ft.ACTIVE}),y(!0)},j=D=>{v("edit"),p(D),N({name:D.name,description:D.description,category:D.category,tags:D.tags||[],weight:D.weight,dimensions:D.dimensions,inventory:D.inventory,status:D.status}),y(!0)},T=D=>{v("view"),p(D),y(!0)},C=D=>{window.confirm(`確定要刪除贈品「${D.name}」嗎？`)&&(_r.deleteGift(D.id),u(),h())},E=D=>{D.preventDefault();const M={...w,tags:typeof w.tags=="string"?w.tags.split(",").map(A=>A.trim()):w.tags};b==="create"?_r.createGift(M):b==="edit"&&_r.updateGift(x.id,M),y(!1),u(),h()},R=(D,M,A)=>{_r.updateInventory(D,M,parseInt(A))?(u(),h()):alert("庫存操作失敗！請檢查數量是否足夠。")},k=D=>{switch(D){case Ft.ACTIVE:return e.jsx(ae,{className:"w-5 h-5 text-green-600"});case Ft.OUT_OF_STOCK:return e.jsx(Zs,{className:"w-5 h-5 text-red-600"});case Ft.INACTIVE:return e.jsx(te,{className:"w-5 h-5 text-yellow-600"});default:return null}},O=D=>{switch(D){case Ft.ACTIVE:return"啟用中";case Ft.OUT_OF_STOCK:return"缺貨";case Ft.INACTIVE:return"停用";default:return"未知"}},P=D=>({[Bs.BEAUTY]:"美妝",[Bs.SKINCARE]:"保養",[Bs.FRAGRANCE]:"香氛",[Bs.MAKEUP]:"彩妝",[Bs.TOOLS]:"工具",[Bs.SAMPLES]:"試用",[Bs.LIMITED]:"限量",[Bs.EXCLUSIVE]:"專屬"})[D]||D,$=Object.entries(Bs).map(([D,M])=>({value:M,label:P(M)})),I=Object.entries(Ft).map(([D,M])=>({value:M,label:O(M)}));return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-8",children:e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white rounded-xl hover:shadow-lg transition-all duration-200 font-chinese",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"新增贈品"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx(re,{to:"/admin/gifts/tier-rules",className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50 hover:shadow-lg transition-all duration-200 group",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese text-gray-900 group-hover:text-[#cc824d] transition-colors",children:"階梯式贈品規則"}),e.jsx("p",{className:"text-sm text-gray-600 font-chinese mt-1",children:"設定多層級的贈品觸發條件"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors",children:e.jsx(kr,{className:"w-6 h-6 text-purple-600"})}),e.jsx(di,{className:"w-5 h-5 text-gray-400 group-hover:text-[#cc824d] transition-colors"})]})]})}),e.jsx(re,{to:"/admin/gifts/member-benefits",className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50 hover:shadow-lg transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese text-gray-900 group-hover:text-[#cc824d] transition-colors",children:"會員贈品福利"}),e.jsx("p",{className:"text-sm text-gray-600 font-chinese mt-1",children:"管理不同會員等級的專屬福利"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors",children:e.jsx(dt,{className:"w-6 h-6 text-blue-600"})}),e.jsx(di,{className:"w-5 h-5 text-gray-400 group-hover:text-[#cc824d] transition-colors"})]})]})}),e.jsx(re,{to:"/admin/gifts/allocation-tracking",className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50 hover:shadow-lg transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese text-gray-900 group-hover:text-[#cc824d] transition-colors",children:"贈品分配追蹤"}),e.jsx("p",{className:"text-sm text-gray-600 font-chinese mt-1",children:"監控分配歷史和成本統計"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg group-hover:bg-green-200 transition-colors",children:e.jsx(oe,{className:"w-6 h-6 text-green-600"})}),e.jsx(di,{className:"w-5 h-5 text-gray-400 group-hover:text-[#cc824d] transition-colors"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"總贈品數"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.totalGifts||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"啟用中"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.activeGifts||0})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ae,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"缺貨中"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:S.outOfStockGifts||0})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(Zs,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"本月分配"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:S.thisMonthAllocations||0})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(oe,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 mb-8 border border-gray-200/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(_t,{value:l,onChange:o,options:[{value:"",label:"所有分類"},...$],placeholder:"選擇分類"}),e.jsx(_t,{value:c,onChange:d,options:[{value:"",label:"所有狀態"},...I],placeholder:"選擇狀態"})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden border border-gray-200/50",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#cc824d]/20 to-[#b3723f]/20",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider font-chinese",children:"贈品資訊"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider font-chinese",children:"分類"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider font-chinese",children:"庫存狀態"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider font-chinese",children:"狀態"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200/50",children:r.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-r from-[#cc824d]/20 to-[#b3723f]/20 flex items-center justify-center",children:e.jsx(Be,{className:"w-6 h-6 text-[#cc824d]"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 font-chinese",children:D.name}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese max-w-xs truncate",children:D.description})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100/80 text-blue-800 font-chinese",children:P(D.category)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm font-chinese",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-600",children:"可用:"}),e.jsx("span",{className:`font-medium ${D.inventory.available<=D.inventory.alertThreshold?"text-red-600":"text-green-600"}`,children:D.inventory.available})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-600",children:"總計:"}),e.jsx("span",{className:"font-medium",children:D.inventory.total})]}),D.inventory.available<=D.inventory.alertThreshold&&e.jsx("div",{className:"text-xs text-red-600 font-chinese",children:"庫存不足警告"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[k(D.status),e.jsx("span",{className:"text-sm font-chinese",children:O(D.status)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T(D),className:"p-2 text-[#cc824d] hover:bg-[#cc824d]/10 rounded-lg transition-colors",title:"查看詳情",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(D),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"編輯",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(D),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"刪除",children:e.jsx($e,{className:"w-4 h-4"})})]})})]},D.id))})]})}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 font-chinese",children:"沒有找到贈品"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 font-chinese",children:n||l||c?"請調整搜尋條件":"開始創建您的第一個贈品"})]})]})]}),e.jsx(ec,{isOpen:f,onClose:()=>y(!1),title:b==="view"?"贈品詳情":b==="create"?"新增贈品":"編輯贈品",size:"max-w-4xl",children:b==="view"?e.jsx("div",{className:"p-6 space-y-6",children:x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"基本資訊"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"贈品名稱"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:x.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"描述"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:x.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"分類"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:P(x.category)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"標籤"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:(L=x.tags)==null?void 0:L.map((D,M)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-chinese",children:D},M))})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"庫存資訊"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"總庫存"}),e.jsx("p",{className:"text-gray-900",children:x.inventory.total})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"可用庫存"}),e.jsx("p",{className:"text-gray-900",children:x.inventory.available})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"預留庫存"}),e.jsx("p",{className:"text-gray-900",children:x.inventory.reserved})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"警告閾值"}),e.jsx("p",{className:"text-gray-900",children:x.inventory.alertThreshold})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 font-chinese",children:"庫存操作"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{const D=prompt("請輸入要增加的數量:");D&&!isNaN(D)&&(R(x.id,"add",D),p({...x,inventory:{...x.inventory,total:x.inventory.total+parseInt(D),available:x.inventory.available+parseInt(D)}}))},className:"px-3 py-1 bg-green-100 text-green-700 rounded text-sm font-chinese hover:bg-green-200",children:"增加庫存"}),e.jsx("button",{onClick:()=>{const D=prompt("請輸入要預留的數量:");D&&!isNaN(D)&&(R(x.id,"reserve",D),p({...x,inventory:{...x.inventory,available:x.inventory.available-parseInt(D),reserved:x.inventory.reserved+parseInt(D)}}))},className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded text-sm font-chinese hover:bg-yellow-200",children:"預留庫存"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"規格資訊"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"重量 (kg)"}),e.jsx("p",{className:"text-gray-900",children:x.weight})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"長 (cm)"}),e.jsx("p",{className:"text-gray-900",children:x.dimensions.length})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"寬 (cm)"}),e.jsx("p",{className:"text-gray-900",children:x.dimensions.width})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"高 (cm)"}),e.jsx("p",{className:"text-gray-900",children:x.dimensions.height})]})]})]})]})}):e.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"贈品名稱 *"}),e.jsx("input",{type:"text",value:w.name,onChange:D=>N(M=>({...M,name:D.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm",placeholder:"請輸入贈品名稱",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"分類 *"}),e.jsx(_t,{value:w.category,onChange:D=>N(M=>({...M,category:D})),options:$,placeholder:"選擇分類"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"描述"}),e.jsx("textarea",{value:w.description,onChange:D=>N(M=>({...M,description:D.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm",placeholder:"請輸入贈品描述"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"標籤 (用逗號分隔)"}),e.jsx("input",{type:"text",value:Array.isArray(w.tags)?w.tags.join(", "):w.tags,onChange:D=>N(M=>({...M,tags:D.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm",placeholder:"例如: 護膚, 滋潤, 香氛"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"重量 (kg)"}),e.jsx("input",{type:"number",step:"0.001",value:w.weight,onChange:D=>N(M=>({...M,weight:parseFloat(D.target.value)||0})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"長度 (cm)"}),e.jsx("input",{type:"number",value:w.dimensions.length,onChange:D=>N(M=>({...M,dimensions:{...M.dimensions,length:parseInt(D.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"寬度 (cm)"}),e.jsx("input",{type:"number",value:w.dimensions.width,onChange:D=>N(M=>({...M,dimensions:{...M.dimensions,width:parseInt(D.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"高度 (cm)"}),e.jsx("input",{type:"number",value:w.dimensions.height,onChange:D=>N(M=>({...M,dimensions:{...M.dimensions,height:parseInt(D.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"總庫存"}),e.jsx("input",{type:"number",value:w.inventory.total,onChange:D=>{const M=parseInt(D.target.value)||0;N(A=>({...A,inventory:{...A.inventory,total:M,available:b==="create"?M:A.inventory.available}}))},className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"可用庫存"}),e.jsx("input",{type:"number",value:w.inventory.available,onChange:D=>N(M=>({...M,inventory:{...M.inventory,available:parseInt(D.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"警告閾值"}),e.jsx("input",{type:"number",value:w.inventory.alertThreshold,onChange:D=>N(M=>({...M,inventory:{...M.inventory,alertThreshold:parseInt(D.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"狀態"}),e.jsx(_t,{value:w.status,onChange:D=>N(M=>({...M,status:D})),options:I,placeholder:"選擇狀態"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-white/30",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-3 border border-white/30 text-gray-700 rounded-xl hover:bg-white/20 transition-colors font-chinese bg-white/50 backdrop-blur-sm",children:"取消"}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-[#cc824d]/90 text-white rounded-xl hover:bg-[#b3723f] transition-colors font-chinese backdrop-blur-sm",children:b==="create"?"創建贈品":"更新贈品"})]})]})})]})},mA=()=>{var L,D;const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(null),[l,o]=m.useState(!1),[c,d]=m.useState("view"),[x,p]=m.useState(null),[f,y]=m.useState({name:"",campaignId:"",targetProduct:{type:"category",categoryIds:[],productIds:[],brandIds:[]},tiers:[{level:1,condition:{type:Ra.QUANTITY,value:1,operator:">="},giftOptions:[],selectionType:Os.FIXED_COMBO,maxSelections:1}],memberRestrictions:[],dateRange:{start:"",end:""},status:"active"});m.useEffect(()=>{b(),v()},[]);const b=()=>{const M=_r.getAllTierRules();t(M)},v=()=>{const M=_r.getAllGifts();a(M)},S=()=>{d("create"),y({name:"",campaignId:"",targetProduct:{type:"category",categoryIds:[],productIds:[],brandIds:[]},tiers:[{level:1,condition:{type:Ra.QUANTITY,value:1,operator:">="},giftOptions:[],selectionType:Os.FIXED_COMBO,maxSelections:1}],memberRestrictions:[],dateRange:{start:"",end:""},status:"active"}),o(!0)},_=M=>{var A,V;d("edit"),i(M),y({name:M.name,campaignId:M.campaignId||"",targetProduct:M.targetProduct,tiers:M.tiers,memberRestrictions:M.memberRestrictions||[],dateRange:{start:(A=M.dateRange)!=null&&A.start?new Date(M.dateRange.start).toISOString().split("T")[0]:"",end:(V=M.dateRange)!=null&&V.end?new Date(M.dateRange.end).toISOString().split("T")[0]:""},status:M.status}),o(!0)},w=M=>{d("view"),i(M),o(!0)},N=M=>{if(window.confirm(`確定要刪除規則「${M.name}」嗎？`)){const A=s.filter(V=>V.id!==M.id);t(A)}},u=M=>{M.preventDefault();const A={...f,dateRange:{start:f.dateRange.start?new Date(f.dateRange.start):null,end:f.dateRange.end?new Date(f.dateRange.end):null}};if(c==="create"){const V=_r.createTierRule(A);t(B=>[...B,V])}else if(c==="edit"){const V=_r.updateTierRule(n.id,A);t(B=>B.map(z=>z.id===n.id?V:z))}o(!1)},h=()=>{const M=f.tiers.length+1,A={level:M,condition:{type:Ra.QUANTITY,value:M,operator:">="},giftOptions:[],selectionType:Os.SINGLE,maxSelections:1};y(V=>({...V,tiers:[...V.tiers,A]}))},g=M=>{if(f.tiers.length>1){const V=f.tiers.filter((B,z)=>z!==M).map((B,z)=>({...B,level:z+1}));y(B=>({...B,tiers:V}))}},j=(M,A)=>{y(V=>({...V,tiers:V.tiers.map((B,z)=>z===M?{...B,...A}:B)}))},T=(M,A)=>{const V={giftId:A,quantity:1,priority:f.tiers[M].giftOptions.length+1};j(M,{giftOptions:[...f.tiers[M].giftOptions,V]})},C=(M,A)=>{const V=f.tiers[M].giftOptions.filter((B,z)=>z!==A);j(M,{giftOptions:V})},E=M=>{const A=r.find(V=>V.id===M);return A?A.name:"未知贈品"},R=M=>{const A=M.type===Ra.QUANTITY?"數量":"金額",V=M.operator===">="?"大於等於":M.operator===">"?"大於":"等於",B=M.type===Ra.QUANTITY?"件":"NT$";return`${A} ${V} ${M.value} ${B}`},k=M=>{switch(M){case Os.SINGLE:return"單選";case Os.MULTIPLE:return"多選";case Os.FIXED_COMBO:return"固定組合";case Os.WEIGHTED:return"權重選擇";default:return M}},O=[{value:Os.SINGLE,label:"單選"},{value:Os.MULTIPLE,label:"多選"},{value:Os.FIXED_COMBO,label:"固定組合"},{value:Os.WEIGHTED,label:"權重選擇"}],P=[{value:Ra.QUANTITY,label:"購買數量"},{value:Ra.AMOUNT,label:"購買金額"}],$=[{value:">=",label:"大於等於"},{value:">",label:"大於"},{value:"==",label:"等於"}],I=r.filter(M=>M.status==="active").map(M=>({value:M.id,label:M.name}));return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-8",children:e.jsxs("button",{onClick:S,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white rounded-xl hover:shadow-lg transition-all duration-200 font-chinese",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"新增規則"})]})}),e.jsxs("div",{className:"space-y-4",children:[s.map(M=>{var A,V;return e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese text-gray-900",children:M.name}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${M.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:M.status==="active"?"啟用中":"停用"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>w(M),className:"p-2 text-[#cc824d] hover:bg-[#cc824d]/10 rounded-lg transition-colors",title:"查看詳情",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(M),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"編輯",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(M),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"刪除",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(x===M.id?null:M.id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:x===M.id?e.jsx(ha,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(_a,{className:"w-4 h-4"}),e.jsxs("span",{children:["目標: ",M.targetProduct.type==="category"?"分類":"商品"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(kr,{className:"w-4 h-4"}),e.jsxs("span",{children:["階梯數: ",M.tiers.length]})]}),e.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:(A=M.dateRange)!=null&&A.start&&((V=M.dateRange)!=null&&V.end)?`${new Date(M.dateRange.start).toLocaleDateString()} - ${new Date(M.dateRange.end).toLocaleDateString()}`:"無期限限制"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.tiers.slice(0,3).map((B,z)=>e.jsxs("div",{className:"bg-gradient-to-r from-[#cc824d]/10 to-[#b3723f]/10 rounded-lg px-3 py-2 border border-[#cc824d]/20",children:[e.jsxs("div",{className:"text-xs font-medium text-[#cc824d] font-chinese",children:["階梯 ",B.level,": ",R(B.condition)]}),e.jsxs("div",{className:"text-xs text-gray-600 font-chinese",children:[B.giftOptions.length," 個贈品 | ",k(B.selectionType)]})]},z)),M.tiers.length>3&&e.jsxs("div",{className:"flex items-center px-3 py-2 text-xs text-gray-500 font-chinese",children:["還有 ",M.tiers.length-3," 個階梯..."]})]}),x===M.id&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-white/30",children:[e.jsx("h4",{className:"text-md font-bold font-chinese mb-4",children:"階梯詳情"}),e.jsx("div",{className:"space-y-4",children:M.tiers.map((B,z)=>e.jsxs("div",{className:"bg-white/40 rounded-lg p-4 border border-white/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:"font-medium font-chinese",children:["階梯 ",B.level]}),e.jsxs("span",{className:"text-sm text-gray-600 font-chinese",children:[k(B.selectionType),B.maxSelections>1&&` (最多${B.maxSelections}個)`]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 font-chinese",children:"觸發條件: "}),e.jsx("span",{className:"text-sm text-gray-900 font-chinese",children:R(B.condition)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 font-chinese",children:"可選贈品: "}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:B.giftOptions.map((F,W)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-chinese",children:[e.jsx(Be,{className:"w-3 h-3 mr-1"}),E(F.giftId)," x",F.quantity]},W))})]})]},z))})]})]})},M.id)}),s.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50",children:[e.jsx(kr,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 font-chinese",children:"沒有階梯規則"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 font-chinese",children:"開始創建您的第一個階梯贈品規則"})]})]})]}),e.jsx(ec,{isOpen:l,onClose:()=>o(!1),title:c==="view"?"規則詳情":c==="create"?"新增階梯規則":"編輯階梯規則",size:"max-w-6xl",children:c==="view"?e.jsx("div",{className:"p-6 space-y-6",children:n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"基本資訊"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"規則名稱"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:n.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"活動ID"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:n.campaignId||"無關聯活動"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"目標對象"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:n.targetProduct.type==="category"?"商品分類":"指定商品"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"狀態"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${n.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:n.status==="active"?"啟用中":"停用"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"時間範圍"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"開始日期"}),e.jsx("p",{className:"text-gray-900",children:(L=n.dateRange)!=null&&L.start?new Date(n.dateRange.start).toLocaleDateString():"無限制"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"結束日期"}),e.jsx("p",{className:"text-gray-900",children:(D=n.dateRange)!=null&&D.end?new Date(n.dateRange.end).toLocaleDateString():"無限制"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"階梯設定"}),e.jsx("div",{className:"space-y-4",children:n.tiers.map((M,A)=>e.jsx("div",{className:"bg-white/40 rounded-lg p-4 border border-white/30",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium font-chinese mb-2",children:["階梯 ",M.level]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"觸發條件: "}),e.jsx("span",{className:"font-medium font-chinese",children:R(M.condition)})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"選擇方式: "}),e.jsx("span",{className:"font-medium font-chinese",children:k(M.selectionType)})]}),M.maxSelections>1&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"最大選擇數: "}),e.jsx("span",{className:"font-medium",children:M.maxSelections})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 font-chinese mb-2",children:"可選贈品"}),e.jsx("div",{className:"space-y-1",children:M.giftOptions.map((V,B)=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Be,{className:"w-4 h-4 text-[#cc824d]"}),e.jsx("span",{className:"font-chinese",children:E(V.giftId)}),e.jsxs("span",{className:"text-gray-500",children:["x",V.quantity]}),e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:["優先級 ",V.priority]})]},B))})]})]})},A))})]})]})}):e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"規則名稱 *"}),e.jsx("input",{type:"text",value:f.name,onChange:M=>y(A=>({...A,name:M.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm",placeholder:"請輸入規則名稱",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"活動ID"}),e.jsx("input",{type:"text",value:f.campaignId,onChange:M=>y(A=>({...A,campaignId:M.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm",placeholder:"關聯的活動ID (選填)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"開始日期"}),e.jsx("input",{type:"date",value:f.dateRange.start,onChange:M=>y(A=>({...A,dateRange:{...A.dateRange,start:M.target.value}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"結束日期"}),e.jsx("input",{type:"date",value:f.dateRange.end,onChange:M=>y(A=>({...A,dateRange:{...A.dateRange,end:M.target.value}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-chinese",children:"階梯設定"}),e.jsxs("button",{type:"button",onClick:h,className:"flex items-center space-x-1 px-3 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors text-sm font-chinese",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"新增階梯"})]})]}),e.jsx("div",{className:"space-y-6",children:f.tiers.map((M,A)=>e.jsxs("div",{className:"bg-white/40 rounded-lg p-4 border border-white/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-medium font-chinese",children:["階梯 ",M.level]}),f.tiers.length>1&&e.jsx("button",{type:"button",onClick:()=>g(A),className:"text-red-600 hover:text-red-800 text-sm font-chinese",children:"刪除階梯"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"條件類型"}),e.jsx(_t,{value:M.condition.type,onChange:V=>j(A,{condition:{...M.condition,type:V}}),options:P,placeholder:"選擇條件類型"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"條件值"}),e.jsx("input",{type:"number",value:M.condition.value,onChange:V=>j(A,{condition:{...M.condition,value:parseInt(V.target.value)||0}}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"運算符"}),e.jsx(_t,{value:M.condition.operator,onChange:V=>j(A,{condition:{...M.condition,operator:V}}),options:$,placeholder:"選擇運算符"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"選擇方式"}),e.jsx(_t,{value:M.selectionType,onChange:V=>j(A,{selectionType:V}),options:O,placeholder:"選擇方式"})]}),M.selectionType===Os.MULTIPLE&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"最大選擇數"}),e.jsx("input",{type:"number",min:"1",value:M.maxSelections,onChange:V=>j(A,{maxSelections:parseInt(V.target.value)||1}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"可選贈品"}),e.jsx(_t,{value:"",onChange:V=>T(A,V),options:[{value:"",label:"選擇贈品..."},...I],placeholder:"新增贈品"})]}),e.jsxs("div",{className:"space-y-2",children:[M.giftOptions.map((V,B)=>e.jsxs("div",{className:"flex items-center justify-between bg-white/60 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"w-4 h-4 text-[#cc824d]"}),e.jsx("span",{className:"font-chinese",children:E(V.giftId)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"1",value:V.quantity,onChange:z=>{const F=[...M.giftOptions];F[B].quantity=parseInt(z.target.value)||1,j(A,{giftOptions:F})},className:"w-16 px-2 py-1 border border-gray-200 rounded text-sm text-center"}),e.jsx("button",{type:"button",onClick:()=>C(A,B),className:"text-red-600 hover:text-red-800",children:e.jsx($e,{className:"w-4 h-4"})})]})]},B)),M.giftOptions.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500 text-sm font-chinese",children:"尚未選擇任何贈品"})]})]})]},A))})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-white/30",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-6 py-3 border border-white/30 text-gray-700 rounded-xl hover:bg-white/20 transition-colors font-chinese bg-white/50 backdrop-blur-sm",children:"取消"}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-[#cc824d]/90 text-white rounded-xl hover:bg-[#b3723f] transition-colors font-chinese backdrop-blur-sm",children:c==="create"?"創建規則":"更新規則"})]})]})})]})},uA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(null),[l,o]=m.useState(!1),[c,d]=m.useState("view"),[x,p]=m.useState({name:"",level:1,requirements:{minPurchaseAmount:0,minPurchaseCount:0,minMemberDays:0},benefits:{exclusiveGifts:[],priorityAccess:!1,extraSelections:0,birthMonthGift:null,anniversaryGift:null},restrictions:{maxGiftsPerMonth:0,maxGiftsPerYear:0,blacklistedCategories:[]},status:"active"}),f={1:"from-gray-400 to-gray-500",2:"from-orange-400 to-orange-500",3:"from-yellow-400 to-yellow-500",4:"from-purple-400 to-purple-500",5:"from-pink-400 to-pink-500"},y={1:dt,2:wi,3:qs,4:rT,5:Ys};m.useEffect(()=>{b(),v()},[]);const b=()=>{t([{id:"tier-1",name:"一般會員",level:1,requirements:{minPurchaseAmount:0,minPurchaseCount:0,minMemberDays:0},benefits:{exclusiveGifts:[],priorityAccess:!1,extraSelections:0,birthMonthGift:null,anniversaryGift:null},restrictions:{maxGiftsPerMonth:1,maxGiftsPerYear:12,blacklistedCategories:["limited","exclusive"]},status:"active",memberCount:1250},{id:"tier-2",name:"銀卡會員",level:2,requirements:{minPurchaseAmount:5e3,minPurchaseCount:5,minMemberDays:30},benefits:{exclusiveGifts:["gift-1","gift-2"],priorityAccess:!1,extraSelections:1,birthMonthGift:"gift-sample-1",anniversaryGift:null},restrictions:{maxGiftsPerMonth:2,maxGiftsPerYear:24,blacklistedCategories:["exclusive"]},status:"active",memberCount:850},{id:"tier-3",name:"金卡會員",level:3,requirements:{minPurchaseAmount:15e3,minPurchaseCount:15,minMemberDays:90},benefits:{exclusiveGifts:["gift-1","gift-2","gift-3","gift-4"],priorityAccess:!0,extraSelections:2,birthMonthGift:"gift-beauty-1",anniversaryGift:"gift-skincare-1"},restrictions:{maxGiftsPerMonth:3,maxGiftsPerYear:36,blacklistedCategories:[]},status:"active",memberCount:320},{id:"tier-4",name:"鑽石會員",level:4,requirements:{minPurchaseAmount:5e4,minPurchaseCount:30,minMemberDays:180},benefits:{exclusiveGifts:["gift-1","gift-2","gift-3","gift-4","gift-5","gift-6"],priorityAccess:!0,extraSelections:3,birthMonthGift:"gift-beauty-2",anniversaryGift:"gift-skincare-2"},restrictions:{maxGiftsPerMonth:5,maxGiftsPerYear:60,blacklistedCategories:[]},status:"active",memberCount:85},{id:"tier-5",name:"VIP會員",level:5,requirements:{minPurchaseAmount:1e5,minPurchaseCount:50,minMemberDays:365},benefits:{exclusiveGifts:["gift-1","gift-2","gift-3","gift-4","gift-5","gift-6","gift-7","gift-8"],priorityAccess:!0,extraSelections:5,birthMonthGift:"gift-exclusive-1",anniversaryGift:"gift-exclusive-2"},restrictions:{maxGiftsPerMonth:0,maxGiftsPerYear:0,blacklistedCategories:[]},status:"active",memberCount:25}])},v=()=>{const k=_r.getAllGifts();a(k)},S=()=>{d("create"),p({name:"",level:Math.max(...s.map(k=>k.level),0)+1,requirements:{minPurchaseAmount:0,minPurchaseCount:0,minMemberDays:0},benefits:{exclusiveGifts:[],priorityAccess:!1,extraSelections:0,birthMonthGift:null,anniversaryGift:null},restrictions:{maxGiftsPerMonth:1,maxGiftsPerYear:12,blacklistedCategories:[]},status:"active"}),o(!0)},_=k=>{d("edit"),i(k),p({name:k.name,level:k.level,requirements:{...k.requirements},benefits:{...k.benefits},restrictions:{...k.restrictions},status:k.status}),o(!0)},w=k=>{d("view"),i(k),o(!0)},N=k=>{if(window.confirm(`確定要刪除會員等級「${k.name}」嗎？`)){const O=s.filter(P=>P.id!==k.id);t(O)}},u=k=>{if(k.preventDefault(),c==="create"){const O={id:`tier-${Date.now()}`,...x,memberCount:0};t(P=>[...P,O])}else c==="edit"&&t(O=>O.map(P=>P.id===n.id?{...P,...x}:P));o(!1)},h=k=>{x.benefits.exclusiveGifts.includes(k)||p(O=>({...O,benefits:{...O.benefits,exclusiveGifts:[...O.benefits.exclusiveGifts,k]}}))},g=k=>{p(O=>({...O,benefits:{...O.benefits,exclusiveGifts:O.benefits.exclusiveGifts.filter(P=>P!==k)}}))},j=k=>{const O=r.find(P=>P.id===k);return O?O.name:"未知贈品"},T=k=>y[k]||dt,C=k=>f[k]||"from-gray-400 to-gray-500",E=r.filter(k=>k.status==="active").map(k=>({value:k.id,label:k.name})),R=[{value:"beauty",label:"美妝"},{value:"skincare",label:"護膚"},{value:"fragrance",label:"香氛"},{value:"makeup",label:"彩妝"},{value:"tools",label:"工具"},{value:"samples",label:"小樣"},{value:"limited",label:"限量"},{value:"exclusive",label:"專屬"}];return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-8",children:e.jsxs("button",{onClick:S,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white rounded-xl hover:shadow-lg transition-all duration-200 font-chinese",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"新增等級"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.sort((k,O)=>k.level-O.level).map(k=>{const O=T(k.level),P=C(k.level);return e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/20 overflow-hidden hover:shadow-lg transition-all duration-200",children:[e.jsx("div",{className:`h-2 bg-gradient-to-r ${P}`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 bg-gradient-to-r ${P} rounded-lg`,children:e.jsx(O,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese text-gray-900",children:k.name}),e.jsxs("span",{className:"text-sm text-gray-600 font-chinese",children:["等級 ",k.level]})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${k.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:k.status==="active"?"啟用中":"停用"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-white/40 rounded-lg border border-white/30",children:[e.jsx("div",{className:"text-sm text-gray-600 font-chinese",children:"目前會員數"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:k.memberCount.toLocaleString()})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 font-chinese mb-2",children:"加入條件"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[k.requirements.minPurchaseAmount>0&&e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("span",{children:["消費滿 NT$ ",k.requirements.minPurchaseAmount.toLocaleString()]})}),k.requirements.minPurchaseCount>0&&e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("span",{children:["購買滿 ",k.requirements.minPurchaseCount," 次"]})}),k.requirements.minMemberDays>0&&e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("span",{children:["會員資歷 ",k.requirements.minMemberDays," 天"]})}),k.requirements.minPurchaseAmount===0&&k.requirements.minPurchaseCount===0&&k.requirements.minMemberDays===0&&e.jsx("span",{className:"text-green-600 font-chinese",children:"無條件加入"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 font-chinese mb-2",children:"專屬福利"}),e.jsxs("div",{className:"space-y-1",children:[k.benefits.exclusiveGifts.length>0&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-blue-600",children:[e.jsx(Be,{className:"w-3 h-3"}),e.jsxs("span",{className:"font-chinese",children:["專屬贈品 ",k.benefits.exclusiveGifts.length," 款"]})]}),k.benefits.priorityAccess&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-purple-600",children:[e.jsx(wi,{className:"w-3 h-3"}),e.jsx("span",{className:"font-chinese",children:"優先選擇權"})]}),k.benefits.extraSelections>0&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-green-600",children:[e.jsx(ae,{className:"w-3 h-3"}),e.jsxs("span",{className:"font-chinese",children:["額外選擇 +",k.benefits.extraSelections]})]}),k.benefits.birthMonthGift&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-pink-600",children:[e.jsx(Be,{className:"w-3 h-3"}),e.jsx("span",{className:"font-chinese",children:"生日專屬贈品"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 font-chinese mb-2",children:"使用限制"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[k.restrictions.maxGiftsPerMonth>0?e.jsxs("div",{children:["每月最多 ",k.restrictions.maxGiftsPerMonth," 份贈品"]}):e.jsx("div",{className:"text-green-600 font-chinese",children:"每月無限制"}),k.restrictions.maxGiftsPerYear>0?e.jsxs("div",{children:["每年最多 ",k.restrictions.maxGiftsPerYear," 份贈品"]}):e.jsx("div",{className:"text-green-600 font-chinese",children:"每年無限制"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(k),className:"flex-1 px-3 py-2 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors text-sm font-chinese",children:"詳情"}),e.jsx("button",{onClick:()=>_(k),className:"flex-1 px-3 py-2 text-green-600 border border-green-200 rounded-lg hover:bg-green-50 transition-colors text-sm font-chinese",children:"編輯"}),e.jsx("button",{onClick:()=>N(k),className:"px-3 py-2 text-red-600 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-sm",children:e.jsx($e,{className:"w-4 h-4"})})]})]})]},k.id)}),s.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12 bg-white/60 backdrop-blur-sm rounded-xl border border-white/20",children:[e.jsx(dt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 font-chinese",children:"沒有會員等級"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 font-chinese",children:"開始創建您的第一個會員等級"})]})]})]}),e.jsx(ec,{isOpen:l,onClose:()=>o(!1),title:c==="view"?"會員等級詳情":c==="create"?"新增會員等級":"編輯會員等級",size:"max-w-4xl",children:c==="view"?e.jsx("div",{className:"p-6 space-y-6",children:n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"基本資訊"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"等級名稱"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:n.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"等級"}),e.jsx("p",{className:"text-gray-900",children:n.level})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"目前會員數"}),e.jsx("p",{className:"text-gray-900",children:n.memberCount.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"狀態"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${n.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:n.status==="active"?"啟用中":"停用"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"加入條件"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"最低消費金額"}),e.jsxs("p",{className:"text-gray-900",children:["NT$ ",n.requirements.minPurchaseAmount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"最低購買次數"}),e.jsxs("p",{className:"text-gray-900",children:[n.requirements.minPurchaseCount," 次"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"最低會員天數"}),e.jsxs("p",{className:"text-gray-900",children:[n.requirements.minMemberDays," 天"]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"專屬福利"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"優先選擇權"}),e.jsx("p",{className:"text-gray-900",children:n.benefits.priorityAccess?"是":"否"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"額外選擇數"}),e.jsxs("p",{className:"text-gray-900",children:["+",n.benefits.extraSelections," 個"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"生日贈品"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:n.benefits.birthMonthGift?j(n.benefits.birthMonthGift):"無"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"週年贈品"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:n.benefits.anniversaryGift?j(n.benefits.anniversaryGift):"無"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese mb-2",children:"專屬贈品"}),e.jsxs("div",{className:"space-y-1",children:[n.benefits.exclusiveGifts.map((k,O)=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Be,{className:"w-4 h-4 text-[#cc824d]"}),e.jsx("span",{className:"font-chinese",children:j(k)})]},O)),n.benefits.exclusiveGifts.length===0&&e.jsx("p",{className:"text-gray-500 text-sm font-chinese",children:"無專屬贈品"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"使用限制"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"每月最大贈品數"}),e.jsx("p",{className:"text-gray-900",children:n.restrictions.maxGiftsPerMonth>0?`${n.restrictions.maxGiftsPerMonth} 份`:"無限制"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"每年最大贈品數"}),e.jsx("p",{className:"text-gray-900",children:n.restrictions.maxGiftsPerYear>0?`${n.restrictions.maxGiftsPerYear} 份`:"無限制"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese mb-2",children:"限制分類"}),e.jsxs("div",{className:"space-y-1",children:[n.restrictions.blacklistedCategories.map((k,O)=>{var P;return e.jsxs("div",{className:"text-sm text-red-600 font-chinese",children:["• ",((P=R.find($=>$.value===k))==null?void 0:P.label)||k]},O)}),n.restrictions.blacklistedCategories.length===0&&e.jsx("p",{className:"text-gray-500 text-sm font-chinese",children:"無分類限制"})]})]})]})]})]})}):e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"等級名稱 *"}),e.jsx("input",{type:"text",value:x.name,onChange:k=>p(O=>({...O,name:k.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm",placeholder:"請輸入等級名稱",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"等級 *"}),e.jsx("input",{type:"number",min:"1",max:"10",value:x.level,onChange:k=>p(O=>({...O,level:parseInt(k.target.value)||1})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"加入條件"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"最低消費金額 (NT$)"}),e.jsx("input",{type:"number",min:"0",value:x.requirements.minPurchaseAmount,onChange:k=>p(O=>({...O,requirements:{...O.requirements,minPurchaseAmount:parseInt(k.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"最低購買次數"}),e.jsx("input",{type:"number",min:"0",value:x.requirements.minPurchaseCount,onChange:k=>p(O=>({...O,requirements:{...O.requirements,minPurchaseCount:parseInt(k.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"最低會員天數"}),e.jsx("input",{type:"number",min:"0",value:x.requirements.minMemberDays,onChange:k=>p(O=>({...O,requirements:{...O.requirements,minMemberDays:parseInt(k.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"專屬福利"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:x.benefits.priorityAccess,onChange:k=>p(O=>({...O,benefits:{...O.benefits,priorityAccess:k.target.checked}})),className:"rounded border-gray-300 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 font-chinese",children:"優先選擇權"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"額外選擇數"}),e.jsx("input",{type:"number",min:"0",max:"10",value:x.benefits.extraSelections,onChange:k=>p(O=>({...O,benefits:{...O.benefits,extraSelections:parseInt(k.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"生日贈品"}),e.jsx(_t,{value:x.benefits.birthMonthGift||"",onChange:k=>p(O=>({...O,benefits:{...O.benefits,birthMonthGift:k||null}})),options:[{value:"",label:"無生日贈品"},...E],placeholder:"選擇生日贈品"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"週年贈品"}),e.jsx(_t,{value:x.benefits.anniversaryGift||"",onChange:k=>p(O=>({...O,benefits:{...O.benefits,anniversaryGift:k||null}})),options:[{value:"",label:"無週年贈品"},...E],placeholder:"選擇週年贈品"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"專屬贈品"}),e.jsx(_t,{value:"",onChange:k=>h(k),options:[{value:"",label:"選擇贈品..."},...E.filter(k=>!x.benefits.exclusiveGifts.includes(k.value))],placeholder:"新增專屬贈品"})]}),e.jsxs("div",{className:"space-y-2",children:[x.benefits.exclusiveGifts.map((k,O)=>e.jsxs("div",{className:"flex items-center justify-between bg-white/60 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"w-4 h-4 text-[#cc824d]"}),e.jsx("span",{className:"font-chinese",children:j(k)})]}),e.jsx("button",{type:"button",onClick:()=>g(k),className:"text-red-600 hover:text-red-800",children:e.jsx($e,{className:"w-4 h-4"})})]},O)),x.benefits.exclusiveGifts.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500 text-sm font-chinese",children:"尚未設定專屬贈品"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"使用限制"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"每月最大贈品數 (0 = 無限制)"}),e.jsx("input",{type:"number",min:"0",value:x.restrictions.maxGiftsPerMonth,onChange:k=>p(O=>({...O,restrictions:{...O.restrictions,maxGiftsPerMonth:parseInt(k.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-chinese",children:"每年最大贈品數 (0 = 無限制)"}),e.jsx("input",{type:"number",min:"0",value:x.restrictions.maxGiftsPerYear,onChange:k=>p(O=>({...O,restrictions:{...O.restrictions,maxGiftsPerYear:parseInt(k.target.value)||0}})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#cc824d] focus:border-transparent font-chinese bg-white/70 backdrop-blur-sm"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-white/30",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-6 py-3 border border-white/30 text-gray-700 rounded-xl hover:bg-white/20 transition-colors font-chinese bg-white/50 backdrop-blur-sm",children:"取消"}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-[#cc824d]/90 text-white rounded-xl hover:bg-[#b3723f] transition-colors font-chinese backdrop-blur-sm",children:c==="create"?"創建等級":"更新等級"})]})]})})]})},xA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(null),[l,o]=m.useState(!1),[c,d]=m.useState(""),[x,p]=m.useState("all"),[f,y]=m.useState("all"),[b,v]=m.useState({totalAllocations:0,totalCost:0,totalMembers:0,avgGiftsPerMember:0,topGifts:[],monthlyTrend:[]});m.useEffect(()=>{S(),_(),w()},[]);const S=()=>{t([{id:"alloc-1",memberId:"member-1",memberName:"王小明",memberTier:"gold",orderId:"order-1001",allocatedDate:new Date("2024-01-15"),gifts:[{giftId:"gift-1",quantity:1,unitCost:150,selectionType:"automatic"},{giftId:"gift-2",quantity:1,unitCost:200,selectionType:"manual"}],totalCost:350,status:"shipped",shippedDate:new Date("2024-01-16"),ruleId:"tier-rule-1",campaignId:"campaign-2024-01"},{id:"alloc-2",memberId:"member-2",memberName:"李美麗",memberTier:"silver",orderId:"order-1002",allocatedDate:new Date("2024-01-16"),gifts:[{giftId:"gift-3",quantity:2,unitCost:100,selectionType:"automatic"}],totalCost:200,status:"pending",shippedDate:null,ruleId:"tier-rule-2",campaignId:"campaign-2024-01"},{id:"alloc-3",memberId:"member-3",memberName:"張大華",memberTier:"diamond",orderId:"order-1003",allocatedDate:new Date("2024-01-17"),gifts:[{giftId:"gift-1",quantity:1,unitCost:150,selectionType:"manual"},{giftId:"gift-4",quantity:1,unitCost:300,selectionType:"priority"},{giftId:"gift-5",quantity:1,unitCost:80,selectionType:"bonus"}],totalCost:530,status:"processing",shippedDate:null,ruleId:"tier-rule-3",campaignId:"campaign-2024-01"},{id:"alloc-4",memberId:"member-4",memberName:"陳靜雯",memberTier:"vip",orderId:"order-1004",allocatedDate:new Date("2024-01-18"),gifts:[{giftId:"gift-6",quantity:1,unitCost:500,selectionType:"exclusive"},{giftId:"gift-7",quantity:2,unitCost:120,selectionType:"bonus"}],totalCost:740,status:"shipped",shippedDate:new Date("2024-01-19"),ruleId:"tier-rule-4",campaignId:"campaign-2024-01"},{id:"alloc-5",memberId:"member-5",memberName:"林志明",memberTier:"bronze",orderId:"order-1005",allocatedDate:new Date("2024-01-19"),gifts:[{giftId:"gift-8",quantity:1,unitCost:50,selectionType:"automatic"}],totalCost:50,status:"cancelled",shippedDate:null,ruleId:"tier-rule-1",campaignId:"campaign-2024-01"}])},_=()=>{const O=_r.getAllGifts();a(O)},w=()=>{v({totalAllocations:5,totalCost:1870,totalMembers:5,avgGiftsPerMember:1.8,topGifts:[{giftId:"gift-1",name:"高效保濕面膜",allocations:15,totalCost:2250},{giftId:"gift-2",name:"經典潔面乳",allocations:12,totalCost:2400},{giftId:"gift-3",name:"精華小樣組",allocations:10,totalCost:1e3}],monthlyTrend:[{month:"2023-10",allocations:45,cost:6750},{month:"2023-11",allocations:52,cost:7800},{month:"2023-12",allocations:68,cost:10200},{month:"2024-01",allocations:75,cost:11250}]})},N=O=>{const P=r.find($=>$.id===O);return P?P.name:"未知贈品"},u=O=>({pending:"待處理",processing:"處理中",shipped:"已出貨",delivered:"已送達",cancelled:"已取消"})[O]||O,h=O=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-green-100 text-green-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[O]||"bg-gray-100 text-gray-800",g=O=>({bronze:"bg-orange-100 text-orange-800",silver:"bg-gray-100 text-gray-800",gold:"bg-yellow-100 text-yellow-800",diamond:"bg-purple-100 text-purple-800",vip:"bg-pink-100 text-pink-800"})[O]||"bg-gray-100 text-gray-800",j=O=>({automatic:"自動分配",manual:"手動選擇",priority:"優先選擇",bonus:"額外贈品",exclusive:"專屬贈品"})[O]||O,T=O=>{i(O),o(!0)},C=()=>{const O=s.map(P=>({分配ID:P.id,會員姓名:P.memberName,會員等級:P.memberTier,訂單編號:P.orderId,分配日期:P.allocatedDate.toLocaleDateString(),贈品數量:P.gifts.length,總成本:P.totalCost,狀態:u(P.status)}));console.log("匯出資料:",O),alert("匯出功能已觸發（這裡會產生 CSV 檔案）")},E=s.filter(O=>{const P=O.memberName.toLowerCase().includes(c.toLowerCase())||O.orderId.toLowerCase().includes(c.toLowerCase())||O.id.toLowerCase().includes(c.toLowerCase()),$=x==="all"||O.status===x,I=new Date;let L=!0;if(f==="today")L=O.allocatedDate.toDateString()===I.toDateString();else if(f==="week"){const D=new Date(I.getTime()-6048e5);L=O.allocatedDate>=D}else if(f==="month"){const D=new Date(I.getTime()-2592e6);L=O.allocatedDate>=D}return P&&$&&L}),R=[{value:"all",label:"全部狀態"},{value:"pending",label:"待處理"},{value:"processing",label:"處理中"},{value:"shipped",label:"已出貨"},{value:"delivered",label:"已送達"},{value:"cancelled",label:"已取消"}],k=[{value:"all",label:"全部時間"},{value:"today",label:"今天"},{value:"week",label:"本週"},{value:"month",label:"本月"}];return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-8",children:e.jsxs("button",{onClick:C,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-[#cc824d] to-[#b3723f] text-white rounded-xl hover:shadow-lg transition-all duration-200 font-chinese",children:[e.jsx(vi,{className:"w-5 h-5"}),e.jsx("span",{children:"匯出資料"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/20 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"總分配次數"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.totalAllocations})]})]})}),e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/20 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(We,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"總成本"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["NT$ ",b.totalCost.toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/20 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(na,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"受惠會員"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.totalMembers})]})]})}),e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/20 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(oe,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"平均贈品數"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.avgGiftsPerMember})]})]})})]}),e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/20 p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_t,{value:x,onChange:p,options:R,placeholder:"選擇狀態"})}),e.jsx("div",{children:e.jsx(_t,{value:f,onChange:y,options:k,placeholder:"選擇時間範圍"})})]})}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/20 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-white/20",children:[e.jsx("thead",{className:"bg-white/20",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"會員資訊"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"訂單編號"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"分配日期"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"贈品數量"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"總成本"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-white/20",children:E.map(O=>e.jsxs("tr",{className:"hover:bg-white/20 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx(na,{className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 font-chinese",children:O.memberName}),e.jsx("div",{className:"text-sm text-gray-500",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g(O.memberTier)}`,children:O.memberTier})})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.orderId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ji,{className:"w-4 h-4 text-gray-400 mr-2"}),O.allocatedDate.toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"w-4 h-4 text-[#cc824d] mr-2"}),O.gifts.length," 份"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(We,{className:"w-4 h-4 text-green-600 mr-2"}),"NT$ ",O.totalCost.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${h(O.status)}`,children:u(O.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>T(O),className:"text-[#cc824d] hover:text-[#b3723f] transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})})})]},O.id))})]})}),E.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(oe,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 font-chinese",children:"沒有分配記錄"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 font-chinese",children:"目前沒有符合條件的分配記錄"})]})]})]}),e.jsx(ec,{isOpen:l,onClose:()=>o(!1),title:"分配記錄詳情",size:"max-w-4xl",children:n&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"分配資訊"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"分配ID"}),e.jsx("p",{className:"text-gray-900",children:n.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"會員姓名"}),e.jsx("p",{className:"text-gray-900 font-chinese",children:n.memberName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"會員等級"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${g(n.memberTier)}`,children:n.memberTier})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"訂單編號"}),e.jsx("p",{className:"text-gray-900",children:n.orderId})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"時間軸"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ji,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 font-chinese",children:"分配日期"}),e.jsx("p",{className:"text-gray-900",children:n.allocatedDate.toLocaleString()})]})]}),n.shippedDate&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(tt,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 font-chinese",children:"出貨日期"}),e.jsx("p",{className:"text-gray-900",children:n.shippedDate.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:`w-5 h-5 ${n.status==="delivered"?"text-green-500":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 font-chinese",children:"目前狀態"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${h(n.status)}`,children:u(n.status)})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"贈品明細"}),e.jsx("div",{className:"bg-white/40 rounded-lg border border-white/30 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-white/20",children:[e.jsx("thead",{className:"bg-white/20",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"贈品名稱"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"數量"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"單價"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"小計"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"選擇方式"})]})}),e.jsx("tbody",{className:"divide-y divide-white/10",children:n.gifts.map((O,P)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-chinese",children:N(O.giftId)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:O.quantity}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:["NT$ ",O.unitCost]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:["NT$ ",O.quantity*O.unitCost]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-chinese",children:e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:j(O.selectionType)})})]},P))}),e.jsx("tfoot",{className:"bg-white/20",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-4 py-3 text-sm font-medium text-gray-900 font-chinese",children:"總計"}),e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",children:["NT$ ",n.totalCost]}),e.jsx("td",{className:"px-4 py-3"})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"適用規則"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"規則ID"}),e.jsx("p",{className:"text-gray-900",children:n.ruleId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"活動ID"}),e.jsx("p",{className:"text-gray-900",children:n.campaignId})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold font-chinese mb-4",children:"成本分析"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"贈品成本"}),e.jsxs("p",{className:"text-gray-900",children:["NT$ ",n.totalCost]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 font-chinese",children:"平均單品成本"}),e.jsxs("p",{className:"text-gray-900",children:["NT$ ",Math.round(n.totalCost/n.gifts.reduce((O,P)=>O+P.quantity,0))]})]})]})]})]})]})})]})},hA=()=>{ns();const s=Ga();return(()=>{const r=s.pathname;return r==="/admin/gifts"?"gifts":r.includes("/tier-rules")?"tier-rules":r.includes("/member-benefits")?"member-benefits":r.includes("/allocation-tracking")?"allocation-tracking":"gifts"})(),e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2 !important"},children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200/50",children:e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-[#cc824d] to-[#b3723f] rounded-xl",children:e.jsx(Be,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold font-chinese text-gray-900",children:"贈品管理系統"}),e.jsx("p",{className:"text-gray-600 font-chinese",children:"完整的贈品配置、規則設定與分析追蹤"})]})]})})}),e.jsx("div",{className:"relative",children:e.jsxs(aa,{children:[e.jsx(q,{index:!0,element:e.jsx(dA,{})}),e.jsx(q,{path:"tier-rules",element:e.jsx(mA,{})}),e.jsx(q,{path:"member-benefits",element:e.jsx(uA,{})}),e.jsx(q,{path:"allocation-tracking",element:e.jsx(xA,{})})]})})]})},Rh=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Ue={ACTIVE:"active",INACTIVE:"inactive",PENDING:"pending",SUSPENDED:"suspended",BLACKLISTED:"blacklisted"},Le={A_STRATEGIC:"A",B_PREFERRED:"B",C_QUALIFIED:"C",D_CONDITIONAL:"D",E_UNQUALIFIED:"E"},zs={CORPORATION:"corporation",LIMITED:"limited",PARTNERSHIP:"partnership",SOLE_PROPRIETORSHIP:"sole",FOREIGN:"foreign"},sn={PRIMARY:"primary",SALES:"sales",TECHNICAL:"technical",FINANCE:"finance",LOGISTICS:"logistics",QUALITY:"quality"},pA=[{id:"supplier-001",companyName:"美妝世界股份有限公司",companyNameEn:"Beauty World Corp.",taxId:"12345678",businessLicense:"BL-2023-001",establishedDate:"2015-03-15",companyType:zs.CORPORATION,industry:"化妝品批發",scale:"medium",website:"https://beautyworld.com.tw",description:"專業化妝品供應商，提供各類美妝產品",logo:"/images/suppliers/beauty-world-logo.png",status:Ue.ACTIVE,grade:Le.A_STRATEGIC,overallRating:4.8,createdAt:"2023-01-15T08:00:00Z",updatedAt:"2024-12-01T10:30:00Z"},{id:"supplier-002",companyName:"精品包裝有限公司",companyNameEn:"Premium Packaging Ltd.",taxId:"87654321",businessLicense:"BL-2023-002",establishedDate:"2018-08-20",companyType:zs.LIMITED,industry:"包裝材料",scale:"small",website:"https://premium-pack.com",description:"專業包裝材料供應商，提供精美包裝解決方案",logo:"/images/suppliers/premium-pack-logo.png",status:Ue.ACTIVE,grade:Le.B_PREFERRED,overallRating:4.5,createdAt:"2023-02-20T09:15:00Z",updatedAt:"2024-11-28T14:20:00Z"},{id:"supplier-003",companyName:"綠色環保材料企業社",companyNameEn:"Green Eco Materials",taxId:"11223344",businessLicense:"BL-2023-003",establishedDate:"2020-12-10",companyType:zs.SOLE_PROPRIETORSHIP,industry:"環保材料",scale:"small",website:"https://green-eco.tw",description:"專注於環保材料的供應商，提供可持續包裝解決方案",logo:"/images/suppliers/green-eco-logo.png",status:Ue.ACTIVE,grade:Le.C_QUALIFIED,overallRating:4.2,createdAt:"2023-03-10T11:00:00Z",updatedAt:"2024-11-25T16:45:00Z"}],gA=[{id:"contact-001",supplierId:"supplier-001",contactType:sn.PRIMARY,name:"張美玲",title:"業務經理",department:"業務部",phone:"02-2234-5678",mobile:"0912-345-678",email:"meiling.zhang@beautyworld.com.tw",wechat:"meiling_zhang",line:"meiling123",isPrimary:!0,isActive:!0,notes:"主要業務聯絡人，負責產品報價與訂單處理"},{id:"contact-002",supplierId:"supplier-001",contactType:sn.TECHNICAL,name:"李技師",title:"技術顧問",department:"技術部",phone:"02-2234-5679",mobile:"0987-654-321",email:"tech.li@beautyworld.com.tw",isPrimary:!1,isActive:!0,notes:"技術問題聯絡人"},{id:"contact-003",supplierId:"supplier-002",contactType:sn.SALES,name:"王小明",title:"銷售代表",department:"銷售部",phone:"02-8765-4321",mobile:"0923-456-789",email:"xiaoming.wang@premium-pack.com",isPrimary:!0,isActive:!0,notes:"包裝材料業務負責人"}],fA=[{id:"sp-001",supplierId:"supplier-001",productId:"product-001",supplierProductCode:"BW-LP-001",supplierProductName:"保濕唇膏經典款",supplierPrice:85,currency:"TWD",minOrderQuantity:100,maxOrderQuantity:5e3,leadTimeDays:7,availability:"in_stock",supplierStock:2500,lastPriceUpdate:"2024-11-15T10:00:00Z",isMainSupplier:!0,priority:1,status:"active",notes:"熱銷商品，建議保持充足庫存"},{id:"sp-002",supplierId:"supplier-002",productId:"product-002",supplierProductCode:"PP-BOX-001",supplierProductName:"精美禮品盒",supplierPrice:25,currency:"TWD",minOrderQuantity:200,leadTimeDays:10,availability:"in_stock",supplierStock:1e3,lastPriceUpdate:"2024-11-10T15:30:00Z",isMainSupplier:!0,priority:1,status:"active",notes:"可客製化印刷"}],yA=[{id:"perf-001",supplierId:"supplier-001",evaluationPeriod:{start:"2024-07-01",end:"2024-09-30"},evaluationType:"quarterly",overallRating:4.8,qualityScore:4.9,deliveryScore:4.7,serviceScore:4.8,costScore:4.6,onTimeDeliveryRate:95.5,qualityPassRate:98.2,defectRate:1.8,returnRate:.5,averageLeadTime:6.5,responseTime:2.1,evaluatedBy:"admin-001",status:"completed",createdAt:"2024-10-01T09:00:00Z"},{id:"perf-002",supplierId:"supplier-002",evaluationPeriod:{start:"2024-07-01",end:"2024-09-30"},evaluationType:"quarterly",overallRating:4.5,qualityScore:4.6,deliveryScore:4.3,serviceScore:4.7,costScore:4.4,onTimeDeliveryRate:89.2,qualityPassRate:96.8,defectRate:3.2,returnRate:1.2,averageLeadTime:9.8,responseTime:3.5,evaluatedBy:"admin-001",status:"completed",createdAt:"2024-10-01T10:30:00Z"}];class bA{constructor(){this.storageKey="marelle-suppliers",this.contactsKey="marelle-supplier-contacts",this.productsKey="marelle-supplier-products",this.performanceKey="marelle-supplier-performance",this.initializeData()}initializeData(){localStorage.getItem(this.storageKey)||localStorage.setItem(this.storageKey,JSON.stringify(pA)),localStorage.getItem(this.contactsKey)||localStorage.setItem(this.contactsKey,JSON.stringify(gA)),localStorage.getItem(this.productsKey)||localStorage.setItem(this.productsKey,JSON.stringify(fA)),localStorage.getItem(this.performanceKey)||localStorage.setItem(this.performanceKey,JSON.stringify(yA))}getAllSuppliers(){try{return JSON.parse(localStorage.getItem(this.storageKey)||"[]").map(r=>({...r,contactsCount:this.getSupplierContacts(r.id).length,productsCount:this.getSupplierProducts(r.id).length,latestPerformance:this.getLatestPerformance(r.id)}))}catch(t){return console.error("Error loading suppliers:",t),[]}}getSupplierById(t){return this.getAllSuppliers().find(a=>a.id===t)}createSupplier(t){try{const r=JSON.parse(localStorage.getItem(this.storageKey)||"[]"),a={id:Rh(),...t,status:t.status||Ue.PENDING,grade:t.grade||Le.E_UNQUALIFIED,overallRating:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r.push(a),localStorage.setItem(this.storageKey,JSON.stringify(r)),{success:!0,supplier:a}}catch(r){return console.error("Error creating supplier:",r),{success:!1,error:r.message}}}updateSupplier(t,r){try{const a=JSON.parse(localStorage.getItem(this.storageKey)||"[]"),n=a.findIndex(i=>i.id===t);return n===-1?{success:!1,error:"Supplier not found"}:(a[n]={...a[n],...r,updatedAt:new Date().toISOString()},localStorage.setItem(this.storageKey,JSON.stringify(a)),{success:!0,supplier:a[n]})}catch(a){return console.error("Error updating supplier:",a),{success:!1,error:a.message}}}deleteSupplier(t){try{const a=JSON.parse(localStorage.getItem(this.storageKey)||"[]").filter(n=>n.id!==t);return this.deleteSupplierContacts(t),this.deleteSupplierProducts(t),localStorage.setItem(this.storageKey,JSON.stringify(a)),{success:!0}}catch(r){return console.error("Error deleting supplier:",r),{success:!1,error:r.message}}}getSupplierContacts(t){try{return JSON.parse(localStorage.getItem(this.contactsKey)||"[]").filter(a=>a.supplierId===t)}catch(r){return console.error("Error loading contacts:",r),[]}}createContact(t){try{const r=JSON.parse(localStorage.getItem(this.contactsKey)||"[]"),a={id:Rh(),...t,isActive:!0,createdAt:new Date().toISOString()};return r.push(a),localStorage.setItem(this.contactsKey,JSON.stringify(r)),{success:!0,contact:a}}catch(r){return console.error("Error creating contact:",r),{success:!1,error:r.message}}}updateContact(t,r){try{const a=JSON.parse(localStorage.getItem(this.contactsKey)||"[]"),n=a.findIndex(i=>i.id===t);return n===-1?{success:!1,error:"Contact not found"}:(a[n]={...a[n],...r},localStorage.setItem(this.contactsKey,JSON.stringify(a)),{success:!0,contact:a[n]})}catch(a){return console.error("Error updating contact:",a),{success:!1,error:a.message}}}deleteContact(t){try{const a=JSON.parse(localStorage.getItem(this.contactsKey)||"[]").filter(n=>n.id!==t);return localStorage.setItem(this.contactsKey,JSON.stringify(a)),{success:!0}}catch(r){return console.error("Error deleting contact:",r),{success:!1,error:r.message}}}deleteSupplierContacts(t){try{const a=JSON.parse(localStorage.getItem(this.contactsKey)||"[]").filter(n=>n.supplierId!==t);localStorage.setItem(this.contactsKey,JSON.stringify(a))}catch(r){console.error("Error deleting supplier contacts:",r)}}getSupplierProducts(t){try{return JSON.parse(localStorage.getItem(this.productsKey)||"[]").filter(a=>a.supplierId===t)}catch(r){return console.error("Error loading supplier products:",r),[]}}createSupplierProduct(t){try{const r=JSON.parse(localStorage.getItem(this.productsKey)||"[]"),a={id:Rh(),...t,currency:t.currency||"TWD",availability:t.availability||"in_stock",status:"active",lastPriceUpdate:new Date().toISOString(),createdAt:new Date().toISOString()};return r.push(a),localStorage.setItem(this.productsKey,JSON.stringify(r)),{success:!0,supplierProduct:a}}catch(r){return console.error("Error creating supplier product:",r),{success:!1,error:r.message}}}deleteSupplierProducts(t){try{const a=JSON.parse(localStorage.getItem(this.productsKey)||"[]").filter(n=>n.supplierId!==t);localStorage.setItem(this.productsKey,JSON.stringify(a))}catch(r){console.error("Error deleting supplier products:",r)}}getLatestPerformance(t){try{return JSON.parse(localStorage.getItem(this.performanceKey)||"[]").filter(n=>n.supplierId===t).sort((n,i)=>new Date(i.createdAt)-new Date(n.createdAt))[0]}catch(r){return console.error("Error loading performance:",r),null}}getSupplierPerformances(t){try{return JSON.parse(localStorage.getItem(this.performanceKey)||"[]").filter(a=>a.supplierId===t)}catch(r){return console.error("Error loading performances:",r),[]}}searchSuppliers(t,r={}){let a=this.getAllSuppliers();if(t){const n=t.toLowerCase();a=a.filter(i=>{var l;return i.companyName.toLowerCase().includes(n)||((l=i.companyNameEn)==null?void 0:l.toLowerCase().includes(n))||i.taxId.includes(n)||i.industry.toLowerCase().includes(n)})}return r.status&&(a=a.filter(n=>n.status===r.status)),r.grade&&(a=a.filter(n=>n.grade===r.grade)),r.companyType&&(a=a.filter(n=>n.companyType===r.companyType)),r.minRating&&(a=a.filter(n=>n.overallRating>=r.minRating)),a}getSupplierStatistics(){const t=this.getAllSuppliers();return{total:t.length,active:t.filter(r=>r.status===Ue.ACTIVE).length,pending:t.filter(r=>r.status===Ue.PENDING).length,suspended:t.filter(r=>r.status===Ue.SUSPENDED).length,gradeDistribution:{A:t.filter(r=>r.grade===Le.A_STRATEGIC).length,B:t.filter(r=>r.grade===Le.B_PREFERRED).length,C:t.filter(r=>r.grade===Le.C_QUALIFIED).length,D:t.filter(r=>r.grade===Le.D_CONDITIONAL).length,E:t.filter(r=>r.grade===Le.E_UNQUALIFIED).length},averageRating:t.reduce((r,a)=>r+a.overallRating,0)/t.length||0}}}const Tr=new bA,vA=()=>{var u;const[s,t]=m.useState([]),[r,a]=m.useState(""),[n,i]=m.useState(""),[l,o]=m.useState(""),[c,d]=m.useState(""),[x,p]=m.useState(!1),[f,y]=m.useState({});m.useEffect(()=>{b(),v()},[r,n,l,c]);const b=()=>{const h={status:n,grade:l,companyType:c},g=Tr.searchSuppliers(r,h);t(g)},v=()=>{const h=Tr.getSupplierStatistics();y(h)},S=h=>{if(window.confirm("確定要刪除這個供應商嗎？此操作將同時刪除相關的聯絡人和商品關聯資料。")){const g=Tr.deleteSupplier(h);g.success?(b(),v()):alert("刪除失敗："+g.error)}},_=h=>{const j={[Ue.ACTIVE]:{label:"活躍",className:"bg-green-100 text-green-800"},[Ue.INACTIVE]:{label:"停用",className:"bg-gray-100 text-gray-800"},[Ue.PENDING]:{label:"待審核",className:"bg-yellow-100 text-yellow-800"},[Ue.SUSPENDED]:{label:"暫停",className:"bg-red-100 text-red-800"},[Ue.BLACKLISTED]:{label:"黑名單",className:"bg-red-100 text-red-900"}}[h];return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.className}`,children:j.label})},w=h=>{const j={[Le.A_STRATEGIC]:{label:"A級",className:"bg-purple-100 text-purple-800"},[Le.B_PREFERRED]:{label:"B級",className:"bg-blue-100 text-blue-800"},[Le.C_QUALIFIED]:{label:"C級",className:"bg-green-100 text-green-800"},[Le.D_CONDITIONAL]:{label:"D級",className:"bg-yellow-100 text-yellow-800"},[Le.E_UNQUALIFIED]:{label:"E級",className:"bg-red-100 text-red-800"}}[h];return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.className}`,children:j.label})},N=h=>{const g=Math.floor(h),j=h%1!==0,T=5-g-(j?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(g)].map((C,E)=>e.jsx(Xc,{className:"w-4 h-4 text-yellow-400"},E)),j&&e.jsx(Xc,{className:"w-4 h-4 text-yellow-400 opacity-50"}),[...Array(T)].map((C,E)=>e.jsx(wi,{className:"w-4 h-4 text-gray-300"},E)),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",h.toFixed(1),")"]})]})};return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(tt,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"總供應商"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.total||0})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ml,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"活躍供應商"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.active||0})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(wi,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"平均評分"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.averageRating?f.averageRating.toFixed(1):"0.0"})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Xc,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"A級供應商"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((u=f.gradeDistribution)==null?void 0:u.A)||0})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(ml,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"待審核"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.pending||0})]})]})})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50 mb-6",children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>p(!x),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(gs,{className:"w-5 h-5"}),e.jsx("span",{children:"篩選"})]}),e.jsxs(re,{to:"/admin/suppliers/add",className:"flex items-center space-x-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"新增供應商"})]})]})}),x&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"狀態"}),e.jsxs("select",{value:n,onChange:h=>i(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"",children:"全部狀態"}),e.jsx("option",{value:Ue.ACTIVE,children:"活躍"}),e.jsx("option",{value:Ue.INACTIVE,children:"停用"}),e.jsx("option",{value:Ue.PENDING,children:"待審核"}),e.jsx("option",{value:Ue.SUSPENDED,children:"暫停"}),e.jsx("option",{value:Ue.BLACKLISTED,children:"黑名單"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"分級"}),e.jsxs("select",{value:l,onChange:h=>o(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"",children:"全部分級"}),e.jsx("option",{value:Le.A_STRATEGIC,children:"A級 - 策略性"}),e.jsx("option",{value:Le.B_PREFERRED,children:"B級 - 優選"}),e.jsx("option",{value:Le.C_QUALIFIED,children:"C級 - 合格"}),e.jsx("option",{value:Le.D_CONDITIONAL,children:"D級 - 條件性"}),e.jsx("option",{value:Le.E_UNQUALIFIED,children:"E級 - 不合格"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"公司類型"}),e.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"",children:"全部類型"}),e.jsx("option",{value:zs.CORPORATION,children:"股份有限公司"}),e.jsx("option",{value:zs.LIMITED,children:"有限公司"}),e.jsx("option",{value:zs.PARTNERSHIP,children:"合夥企業"}),e.jsx("option",{value:zs.SOLE_PROPRIETORSHIP,children:"獨資企業"}),e.jsx("option",{value:zs.FOREIGN,children:"外商企業"})]})]})]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"供應商資訊"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"公司類型"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態/分級"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"評分"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"關聯數據"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white/50 divide-y divide-gray-200",children:s.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50/80 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-r from-[#cc824d] to-[#b3723f] flex items-center justify-center",children:e.jsx(tt,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 font-chinese",children:h.companyName}),e.jsxs("div",{className:"text-sm text-gray-500",children:["統編: ",h.taxId," | ",h.industry]}),h.website&&e.jsx("div",{className:"text-sm text-blue-600 hover:text-blue-800",children:e.jsx("a",{href:h.website,target:"_blank",rel:"noopener noreferrer",children:h.website})})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:h.companyType}),e.jsx("div",{className:"text-sm text-gray-500",children:h.scale})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-2",children:[_(h.status),w(h.grade)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N(h.overallRating)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Uo,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:[h.contactsCount," 聯絡人"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ml,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:[h.productsCount," 關聯商品"]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(re,{to:`/admin/suppliers/${h.id}`,className:"text-[#cc824d] hover:text-[#b3723f] transition-colors",title:"查看詳情",children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsx(re,{to:`/admin/suppliers/${h.id}/edit`,className:"text-blue-600 hover:text-blue-800 transition-colors",title:"編輯",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(h.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"刪除",children:e.jsx($e,{className:"w-5 h-5"})})]})})]},h.id))})]})}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"沒有找到供應商"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r||n||l||c?"嘗試調整搜尋條件或篩選器":"開始新增您的第一個供應商"}),!r&&!n&&!l&&!c&&e.jsx("div",{className:"mt-6",children:e.jsxs(re,{to:"/admin/suppliers/add",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-[#cc824d] hover:bg-[#b3723f] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#cc824d]",children:[e.jsx(ge,{className:"-ml-1 mr-2 h-5 w-5"}),"新增供應商"]})})]})]})]})},Jb=({isEdit:s=!1})=>{const{id:t}=Di(),r=ns(),[a,n]=m.useState(!1),[i,l]=m.useState({}),[o,c]=m.useState({companyName:"",companyNameEn:"",taxId:"",businessLicense:"",establishedDate:"",companyType:zs.LIMITED,industry:"",scale:"small",website:"",description:"",status:Ue.PENDING,grade:Le.E_UNQUALIFIED});m.useEffect(()=>{s&&t&&d()},[s,t]);const d=()=>{const b=Tr.getSupplierById(t);b?c({companyName:b.companyName||"",companyNameEn:b.companyNameEn||"",taxId:b.taxId||"",businessLicense:b.businessLicense||"",establishedDate:b.establishedDate||"",companyType:b.companyType||zs.LIMITED,industry:b.industry||"",scale:b.scale||"small",website:b.website||"",description:b.description||"",status:b.status||Ue.PENDING,grade:b.grade||Le.E_UNQUALIFIED}):r("/admin/suppliers")},x=b=>{const{name:v,value:S}=b.target;c(_=>({..._,[v]:S})),i[v]&&l(_=>({..._,[v]:""}))},p=()=>{const b={};return o.companyName.trim()||(b.companyName="公司名稱為必填項目"),o.taxId.trim()?/^\d{8}$/.test(o.taxId)||(b.taxId="統一編號必須為8位數字"):b.taxId="統一編號為必填項目",o.businessLicense.trim()||(b.businessLicense="營業執照號碼為必填項目"),o.industry.trim()||(b.industry="行業別為必填項目"),o.website&&!/^https?:\/\/.+/.test(o.website)&&(b.website="請輸入有效的網址格式（需包含 http:// 或 https://）"),o.establishedDate&&!/^\d{4}-\d{2}-\d{2}$/.test(o.establishedDate)&&(b.establishedDate="請輸入有效的日期格式（YYYY-MM-DD）"),l(b),Object.keys(b).length===0},f=async b=>{if(b.preventDefault(),!!p()){n(!0);try{let v;s?v=Tr.updateSupplier(t,o):v=Tr.createSupplier(o),v.success?r(`/admin/suppliers/${v.supplier.id}`):l({submit:v.error})}catch(v){console.error("Error saving supplier:",v),l({submit:"保存失敗，請稍後再試"})}finally{n(!1)}}},y=()=>{r(s?`/admin/suppliers/${t}`:"/admin/suppliers")};return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(re,{to:s?`/admin/suppliers/${t}`:"/admin/suppliers",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Ko,{className:"w-5 h-5 mr-2"}),s?"返回詳情":"返回列表"]}),e.jsx("div",{className:"border-l border-gray-300 h-6"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 font-chinese",children:s?"編輯供應商":"新增供應商"})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50",children:e.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[i.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(bt,{className:"w-5 h-5 text-red-400 mr-2"}),e.jsx("span",{className:"text-red-800",children:i.submit})]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(ml,{className:"w-5 h-5 mr-2"}),"基本資訊"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700 mb-2",children:["公司名稱 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"companyName",name:"companyName",value:o.companyName,onChange:x,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${i.companyName?"border-red-300":"border-gray-300"}`,placeholder:"請輸入公司中文名稱"}),i.companyName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.companyName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyNameEn",className:"block text-sm font-medium text-gray-700 mb-2",children:"英文名稱"}),e.jsx("input",{type:"text",id:"companyNameEn",name:"companyNameEn",value:o.companyNameEn,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"請輸入公司英文名稱"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"taxId",className:"block text-sm font-medium text-gray-700 mb-2",children:["統一編號 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"taxId",name:"taxId",value:o.taxId,onChange:x,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${i.taxId?"border-red-300":"border-gray-300"}`,placeholder:"請輸入8位數統一編號",maxLength:"8"}),i.taxId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.taxId})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"businessLicense",className:"block text-sm font-medium text-gray-700 mb-2",children:["營業執照號碼 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"businessLicense",name:"businessLicense",value:o.businessLicense,onChange:x,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${i.businessLicense?"border-red-300":"border-gray-300"}`,placeholder:"請輸入營業執照號碼"}),i.businessLicense&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.businessLicense})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"establishedDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"成立日期"}),e.jsx("input",{type:"date",id:"establishedDate",name:"establishedDate",value:o.establishedDate,onChange:x,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${i.establishedDate?"border-red-300":"border-gray-300"}`}),i.establishedDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.establishedDate})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyType",className:"block text-sm font-medium text-gray-700 mb-2",children:"公司類型"}),e.jsxs("select",{id:"companyType",name:"companyType",value:o.companyType,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:zs.LIMITED,children:"有限公司"}),e.jsx("option",{value:zs.CORPORATION,children:"股份有限公司"}),e.jsx("option",{value:zs.PARTNERSHIP,children:"合夥企業"}),e.jsx("option",{value:zs.SOLE_PROPRIETORSHIP,children:"獨資企業"}),e.jsx("option",{value:zs.FOREIGN,children:"外商企業"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"industry",className:"block text-sm font-medium text-gray-700 mb-2",children:["行業別 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"industry",name:"industry",value:o.industry,onChange:x,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${i.industry?"border-red-300":"border-gray-300"}`,placeholder:"例如：化妝品批發、包裝材料等"}),i.industry&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.industry})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scale",className:"block text-sm font-medium text-gray-700 mb-2",children:"公司規模"}),e.jsxs("select",{id:"scale",name:"scale",value:o.scale,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"startup",children:"新創企業"}),e.jsx("option",{value:"small",children:"小型企業"}),e.jsx("option",{value:"medium",children:"中型企業"}),e.jsx("option",{value:"large",children:"大型企業"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-700 mb-2",children:"公司網站"}),e.jsx("input",{type:"url",id:"website",name:"website",value:o.website,onChange:x,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${i.website?"border-red-300":"border-gray-300"}`,placeholder:"https://www.example.com"}),i.website&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.website})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"公司描述"}),e.jsx("textarea",{id:"description",name:"description",rows:4,value:o.description,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"請描述公司的主要業務、產品或服務特色"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"狀態設定"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"供應商狀態"}),e.jsxs("select",{id:"status",name:"status",value:o.status,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:Ue.PENDING,children:"待審核"}),e.jsx("option",{value:Ue.ACTIVE,children:"活躍"}),e.jsx("option",{value:Ue.INACTIVE,children:"停用"}),e.jsx("option",{value:Ue.SUSPENDED,children:"暫停合作"}),e.jsx("option",{value:Ue.BLACKLISTED,children:"黑名單"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"grade",className:"block text-sm font-medium text-gray-700 mb-2",children:"供應商分級"}),e.jsxs("select",{id:"grade",name:"grade",value:o.grade,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:Le.E_UNQUALIFIED,children:"E級 - 不合格"}),e.jsx("option",{value:Le.D_CONDITIONAL,children:"D級 - 條件性"}),e.jsx("option",{value:Le.C_QUALIFIED,children:"C級 - 合格"}),e.jsx("option",{value:Le.B_PREFERRED,children:"B級 - 優選"}),e.jsx("option",{value:Le.A_STRATEGIC,children:"A級 - 策略性"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsxs("button",{type:"button",onClick:y,className:"flex items-center space-x-2 px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(bt,{className:"w-5 h-5"}),e.jsx("span",{children:"取消"})]}),e.jsxs("button",{type:"submit",disabled:a,className:`flex items-center space-x-2 px-6 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors ${a?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx($o,{className:"w-5 h-5"}),e.jsx("span",{children:a?"保存中...":s?"更新":"建立"})]})]})]})})]})},jA=()=>{const{id:s}=Di(),t=ns(),[r,a]=m.useState(null),[n,i]=m.useState([]),[l,o]=m.useState([]),[c,d]=m.useState([]),[x,p]=m.useState("overview"),[f,y]=m.useState(!0);m.useEffect(()=>{b()},[s]);const b=async()=>{try{y(!0);const u=Tr.getSupplierById(s);if(!u){t("/admin/suppliers");return}a(u);const h=Tr.getSupplierContacts(s);i(h);const g=Tr.getSupplierProducts(s);o(g);const j=Tr.getSupplierPerformances(s);d(j)}catch(u){console.error("Error loading supplier data:",u)}finally{y(!1)}},v=()=>{if(window.confirm("確定要刪除這個供應商嗎？此操作將同時刪除相關的聯絡人和商品關聯資料。")){const u=Tr.deleteSupplier(s);u.success?t("/admin/suppliers"):alert("刪除失敗："+u.error)}},S=u=>{const g={[Ue.ACTIVE]:{label:"活躍",className:"bg-green-100 text-green-800"},[Ue.INACTIVE]:{label:"停用",className:"bg-gray-100 text-gray-800"},[Ue.PENDING]:{label:"待審核",className:"bg-yellow-100 text-yellow-800"},[Ue.SUSPENDED]:{label:"暫停",className:"bg-red-100 text-red-800"},[Ue.BLACKLISTED]:{label:"黑名單",className:"bg-red-100 text-red-900"}}[u];return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${g.className}`,children:g.label})},_=u=>{const g={[Le.A_STRATEGIC]:{label:"A級 策略性",className:"bg-purple-100 text-purple-800"},[Le.B_PREFERRED]:{label:"B級 優選",className:"bg-blue-100 text-blue-800"},[Le.C_QUALIFIED]:{label:"C級 合格",className:"bg-green-100 text-green-800"},[Le.D_CONDITIONAL]:{label:"D級 條件性",className:"bg-yellow-100 text-yellow-800"},[Le.E_UNQUALIFIED]:{label:"E級 不合格",className:"bg-red-100 text-red-800"}}[u];return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${g.className}`,children:g.label})},w=u=>{const h=Math.floor(u),g=u%1!==0,j=5-h-(g?1:0);return e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(h)].map((T,C)=>e.jsx(Xc,{className:"w-5 h-5 text-yellow-400"},C)),g&&e.jsx(Xc,{className:"w-5 h-5 text-yellow-400 opacity-50"}),[...Array(j)].map((T,C)=>e.jsx(wi,{className:"w-5 h-5 text-gray-300"},C)),e.jsx("span",{className:"text-lg font-semibold text-gray-900 ml-2",children:u.toFixed(1)})]})},N=u=>{const g={[sn.PRIMARY]:{label:"主要負責人",className:"bg-blue-100 text-blue-800"},[sn.SALES]:{label:"業務聯絡人",className:"bg-green-100 text-green-800"},[sn.TECHNICAL]:{label:"技術聯絡人",className:"bg-purple-100 text-purple-800"},[sn.FINANCE]:{label:"財務聯絡人",className:"bg-yellow-100 text-yellow-800"},[sn.LOGISTICS]:{label:"物流聯絡人",className:"bg-orange-100 text-orange-800"},[sn.QUALITY]:{label:"品管聯絡人",className:"bg-red-100 text-red-800"}}[u];return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${g.className}`,children:g.label})};return f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#cc824d]"})}):r?e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(re,{to:"/admin/suppliers",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Ko,{className:"w-5 h-5 mr-2"}),"返回列表"]}),e.jsx("div",{className:"border-l border-gray-300 h-6"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 font-chinese",children:r.companyName})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(re,{to:`/admin/suppliers/${r.id}/edit`,className:"flex items-center space-x-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(_e,{className:"w-5 h-5"}),e.jsx("span",{children:"編輯"})]}),e.jsxs("button",{onClick:v,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx($e,{className:"w-5 h-5"}),e.jsx("span",{children:"刪除"})]})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-16 w-16 rounded-lg bg-gradient-to-r from-[#cc824d] to-[#b3723f] flex items-center justify-center",children:e.jsx(tt,{className:"w-8 h-8 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 font-chinese",children:r.companyName}),S(r.status),_(r.grade)]}),r.companyNameEn&&e.jsx("p",{className:"text-gray-600 mb-2",children:r.companyNameEn}),e.jsx("p",{className:"text-gray-600 mb-3",children:r.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ml,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:["統編: ",r.taxId]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ir,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:["成立: ",r.establishedDate]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-gray-500",children:["行業: ",r.industry]})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-gray-500",children:["規模: ",r.scale]})})]}),r.website&&e.jsx("div",{className:"mt-3",children:e.jsxs("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 transition-colors",children:[e.jsx(Jo,{className:"w-4 h-4"}),e.jsx("span",{children:r.website})]})})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"整體評分"}),w(r.overallRating)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.length}),e.jsx("div",{className:"text-sm text-blue-800",children:"聯絡人"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.length}),e.jsx("div",{className:"text-sm text-green-800",children:"關聯商品"})]})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"overview",name:"概覽",icon:ml},{id:"contacts",name:"聯絡人",icon:na},{id:"products",name:"關聯商品",icon:tt},{id:"performance",name:"績效評估",icon:oe}].map(u=>{const h=u.icon,g=x===u.id;return e.jsxs("button",{onClick:()=>p(u.id),className:`flex items-center space-x-2 px-4 py-3 font-medium text-sm transition-all duration-200 border-b-2 ${g?"text-[#cc824d] border-[#cc824d]":"text-gray-600 border-transparent hover:text-gray-900 hover:border-gray-300"}`,children:[e.jsx(h,{className:"w-5 h-5"}),e.jsx("span",{className:"font-chinese",children:u.name})]},u.id)})})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50",children:[x==="overview"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"基本資訊"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"公司名稱"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.companyName})]}),r.companyNameEn&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"英文名稱"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.companyNameEn})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"統一編號"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.taxId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"營業執照"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.businessLicense})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"公司類型"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.companyType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"成立日期"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.establishedDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"行業別"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.industry})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"公司規模"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.scale})]})]})]}),r.description&&e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"公司描述"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.description})]})]}),x==="contacts"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"聯絡人管理"}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"新增聯絡人"})]})]}),e.jsxs("div",{className:"space-y-4",children:[n.map(u=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:u.name}),N(u.contactType),u.isPrimary&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"主要聯絡人"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-500",children:"職稱:"}),e.jsx("span",{children:u.title})]}),u.department&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-500",children:"部門:"}),e.jsx("span",{children:u.department})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Uo,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:u.phone})]}),u.mobile&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Uo,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:u.mobile})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xl,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:u.email})]})]}),u.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"備註: "}),e.jsx("span",{className:"text-sm",children:u.notes})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",children:e.jsx($e,{className:"w-5 h-5"})})]})]})},u.id)),n.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(na,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"沒有聯絡人資料"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"開始新增聯絡人資訊"})]})]})]}),x==="products"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"關聯商品"}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"新增關聯"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"商品資訊"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"供貨價格"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"最小訂購量"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"交期"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"庫存狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(u=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.supplierProductName}),e.jsxs("div",{className:"text-sm text-gray-500",children:["代碼: ",u.supplierProductCode]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:["$",u.supplierPrice.toLocaleString()," ",u.currency]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:u.minOrderQuantity.toLocaleString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[u.leadTimeDays," 天"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.availability==="in_stock"?"bg-green-100 text-green-800":u.availability==="limited_stock"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:u.availability==="in_stock"?"有庫存":u.availability==="limited_stock"?"庫存不足":"缺貨"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",children:e.jsx($e,{className:"w-5 h-5"})})]})})]},u.id))})]})}),l.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"沒有關聯商品"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"開始新增商品關聯"})]})]}),x==="performance"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"績效評估歷史"}),r.latestPerformance&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"最新評估結果"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.latestPerformance.overallRating.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"總體評分"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[r.latestPerformance.onTimeDeliveryRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"準時交貨率"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[r.latestPerformance.qualityPassRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"品質合格率"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.latestPerformance.averageLeadTime.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"平均交期(天)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[r.latestPerformance.defectRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"不良品率"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[c.map(u=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900",children:u.evaluationType==="quarterly"?"季度評估":"年度評估"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[u.evaluationPeriod.start," ~ ",u.evaluationPeriod.end]})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:u.status==="completed"?"已完成":"進行中"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"總體評分:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[u.overallRating.toFixed(1),"/5.0"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"品質評分:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[u.qualityScore.toFixed(1),"/5.0"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"交期評分:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[u.deliveryScore.toFixed(1),"/5.0"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"服務評分:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[u.serviceScore.toFixed(1),"/5.0"]})]})]})]},u.id)),c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(oe,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"沒有績效評估記錄"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"開始建立績效評估"})]})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"找不到供應商資料"}),e.jsx(re,{to:"/admin/suppliers",className:"text-[#cc824d] hover:text-[#b3723f] mt-2 inline-block",children:"返回供應商列表"})]})},NA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(!0),[n,i]=m.useState(null);return m.useEffect(()=>{try{console.log("Loading supplier product associations...");const l=Tr.getAllSuppliers();console.log("Loaded suppliers:",l),t(l),a(!1)}catch(l){console.error("Error loading supplier product associations:",l),i(l.message),a(!1)}},[]),r?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-lg text-gray-600",children:"載入商品關聯資料中..."})})}):n?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"text-red-800",children:["載入錯誤: ",n]})})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"商品關聯管理"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"管理供應商與商品的關聯關係"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"總供應商數"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.length})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"商品關聯數"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.reduce((l,o)=>l+(o.productsCount||0),0)})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"活躍關聯"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.filter(l=>l.status==="active").length})]})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"供應商商品關聯"}),s.length>0?e.jsx("div",{className:"space-y-4",children:s.map(l=>{var o;return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:l.companyName}),e.jsx("p",{className:"text-sm text-gray-500",children:l.companyNameEn}),e.jsxs("p",{className:"text-xs text-gray-400",children:["統編: ",l.taxId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["關聯商品: ",l.productsCount||0]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["評分: ",((o=l.overallRating)==null?void 0:o.toFixed(1))||"0.0"," ⭐"]})]})]})},l.id)})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"目前沒有供應商資料"})})]})})]})},wA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(!0),[n,i]=m.useState(null);if(m.useEffect(()=>{try{console.log("Loading supplier performance data...");const o=Tr.getAllSuppliers();console.log("Loaded suppliers for performance:",o),t(o),a(!1)}catch(o){console.error("Error loading supplier performance:",o),i(o.message),a(!1)}},[]),r)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-lg text-gray-600",children:"載入績效評估資料中..."})})});if(n)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"text-red-800",children:["載入錯誤: ",n]})})});const l={totalSuppliers:s.length,averageRating:s.length>0?s.reduce((o,c)=>o+(c.overallRating||0),0)/s.length:0,topPerformers:s.filter(o=>(o.overallRating||0)>=4.5).length,needsImprovement:s.filter(o=>(o.overallRating||0)<3).length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"供應商績效評估"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"查看和管理供應商績效評估資料"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"總供應商"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.totalSuppliers})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"平均評分"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.averageRating.toFixed(1)})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"優秀供應商"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.topPerformers})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"需改善"}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.needsImprovement})]})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"供應商績效概覽"}),s.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"供應商"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"等級"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"綜合評分"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"合作項目"})]})}),e.jsx("tbody",{className:"bg-white/50 divide-y divide-gray-200",children:s.map(o=>{var c,d,x,p;return e.jsxs("tr",{className:"hover:bg-gray-50/80 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.companyName}),e.jsx("div",{className:"text-sm text-gray-500",children:o.companyNameEn})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:(c=o.grade)!=null&&c.includes("A")?"A級":(d=o.grade)!=null&&d.includes("B")?"B級":(x=o.grade)!=null&&x.includes("C")?"C級":"未評級"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:((p=o.overallRating)==null?void 0:p.toFixed(1))||"0.0"}),e.jsx("span",{className:"ml-1",children:"⭐"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:o.status==="active"?"活躍":"非活躍"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[o.contactsCount||0," 聯絡人 / ",o.productsCount||0," 商品"]})]},o.id)})})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"目前沒有績效評估資料"})})]})})]})},_A=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f8f4f0] to-[#e8ddd4]",children:e.jsxs(aa,{children:[e.jsx(q,{index:!0,element:e.jsx(vA,{})}),e.jsx(q,{path:"add",element:e.jsx(Jb,{isEdit:!1})}),e.jsx(q,{path:":id",element:e.jsx(jA,{})}),e.jsx(q,{path:":id/edit",element:e.jsx(Jb,{isEdit:!0})}),e.jsx(q,{path:"products",element:e.jsx(NA,{})}),e.jsx(q,{path:"performance",element:e.jsx(wA,{})})]})}),ev=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Tt={DRAFT:"draft",PENDING_APPROVAL:"pending",APPROVED:"approved",REJECTED:"rejected",SENT_TO_SUPPLIER:"sent",CONFIRMED:"confirmed",IN_PRODUCTION:"production",READY_TO_SHIP:"ready",SHIPPED:"shipped",DELIVERED:"delivered",INSPECTING:"inspecting",COMPLETED:"completed",CANCELLED:"cancelled",PARTIALLY_RECEIVED:"partial"},tv={STANDARD:"standard",URGENT:"urgent",PLANNED:"planned",SAMPLE:"sample",BLANKET:"blanket",MAINTENANCE:"maintenance",CONSIGNMENT:"consignment"},wo={LOW:"low",NORMAL:"normal",HIGH:"high",URGENT:"urgent",CRITICAL:"critical"},sv={CASH_ON_DELIVERY:"cod",NET_30:"net30",NET_60:"net60",NET_90:"net90",ADVANCE_PAYMENT:"advance",PARTIAL_ADVANCE:"partial",LETTER_OF_CREDIT:"lc",BANK_GUARANTEE:"bg"},rv={STANDARD:"standard",EXPRESS:"express",FREIGHT:"freight",PICKUP:"pickup",DROP_SHIPPING:"dropship"},pw={PENDING:"pending",IN_PROGRESS:"progress",PASSED:"passed",FAILED:"failed",PARTIAL:"partial",REWORK:"rework"},Yu={OPERATIONAL:"operational",CAPITAL:"capital",MARKETING:"marketing",MAINTENANCE:"maintenance",EMERGENCY:"emergency"},SA=[{id:"po-001",poNumber:"PO-2024-001",type:tv.STANDARD,status:Tt.CONFIRMED,priority:wo.NORMAL,supplierId:"supplier-001",supplierName:"美妝世界股份有限公司",requesterId:"user-001",requesterName:"張小明",departmentId:"dept-001",departmentName:"商品部",budgetType:Yu.OPERATIONAL,budgetCode:"OP-2024-Q1",totalAmount:85e3,currency:"TWD",taxRate:.05,taxAmount:4250,totalWithTax:89250,paymentTerms:sv.NET_30,shippingMethod:rv.STANDARD,requestedDate:"2024-12-01",expectedDeliveryDate:"2024-12-15",actualDeliveryDate:null,notes:"年度庫存補充採購",internalNotes:"優先處理熱銷商品",createdAt:"2024-11-20T09:00:00Z",updatedAt:"2024-12-01T14:30:00Z",approvedBy:"manager-001",approvedAt:"2024-11-21T10:15:00Z",items:[{id:"poi-001",productId:"prod-001",productName:"玻尿酸精華液",productSku:"HA-SERUM-30ML",specification:"30ml/瓶",unitPrice:500,quantity:100,receivedQuantity:0,totalPrice:5e4,notes:"要求原廠包裝"},{id:"poi-002",productId:"prod-002",productName:"膠原蛋白面膜",productSku:"COL-MASK-BOX",specification:"10片/盒",unitPrice:350,quantity:100,receivedQuantity:0,totalPrice:35e3,notes:"需要中文標籤"}]},{id:"po-002",poNumber:"PO-2024-002",type:tv.URGENT,status:Tt.IN_PRODUCTION,priority:wo.HIGH,supplierId:"supplier-002",supplierName:"精品包裝有限公司",requesterId:"user-002",requesterName:"李美華",departmentId:"dept-002",departmentName:"包裝部",budgetType:Yu.OPERATIONAL,budgetCode:"OP-2024-Q1",totalAmount:45e3,currency:"TWD",taxRate:.05,taxAmount:2250,totalWithTax:47250,paymentTerms:sv.NET_30,shippingMethod:rv.EXPRESS,requestedDate:"2024-12-03",expectedDeliveryDate:"2024-12-10",actualDeliveryDate:null,notes:"聖誕節包裝緊急補貨",internalNotes:"需要加急處理",createdAt:"2024-12-01T15:00:00Z",updatedAt:"2024-12-03T11:20:00Z",approvedBy:"manager-001",approvedAt:"2024-12-01T16:30:00Z",items:[{id:"poi-003",productId:"pack-001",productName:"聖誕禮盒包裝",productSku:"XMAS-BOX-L",specification:"大型禮盒",unitPrice:150,quantity:300,receivedQuantity:0,totalPrice:45e3,notes:"紅色配金色裝飾"}]}],kA=[{id:"suggestion-001",type:"stock_alert",priority:wo.HIGH,productId:"prod-003",productName:"BB霜",currentStock:15,minStock:50,recommendedOrderQuantity:200,estimatedCost:6e4,suggestedSupplierId:"supplier-001",suggestedSupplierName:"美妝世界股份有限公司",reason:"庫存低於安全庫存，建議立即補貨",urgencyLevel:"high",expectedStockoutDate:"2024-12-08",salesTrend:"increasing",seasonalFactor:1.2,createdAt:"2024-12-01T08:00:00Z",isActionTaken:!1},{id:"suggestion-002",type:"supplier_performance",priority:wo.NORMAL,supplierId:"supplier-003",supplierName:"綠色環保材料企業社",issue:"交貨延遲頻繁",recommendation:"建議尋找備用供應商或重新評估合作關係",affectedOrders:["po-003","po-005"],performanceScore:3.2,createdAt:"2024-11-28T10:30:00Z",isActionTaken:!1},{id:"suggestion-003",type:"cost_optimization",priority:wo.NORMAL,category:"化妝品",currentAverageCost:450,optimizedAverageCost:380,potentialSavings:14e3,recommendation:"通過批量採購可降低單位成本約15%",batchSize:500,savingsPercentage:15.5,createdAt:"2024-11-25T14:15:00Z",isActionTaken:!1}],CA=[{id:"inspect-001",purchaseOrderId:"po-001",poNumber:"PO-2024-001",inspectionDate:"2024-12-15",inspectorId:"inspector-001",inspectorName:"品管王小美",status:pw.PASSED,overallRating:4.5,items:[{id:"inspect-item-001",productId:"prod-001",productName:"玻尿酸精華液",orderedQuantity:100,receivedQuantity:100,acceptedQuantity:98,rejectedQuantity:2,rejectionReason:"包裝破損",qualityScore:4.8,notes:"整體品質良好，僅少量包裝問題"}],totalItemsInspected:2,totalAccepted:198,totalRejected:2,overallNotes:"供應商品質穩定，建議繼續合作",actionRequired:!1,completedAt:"2024-12-15T16:30:00Z"}],EA={budgets:[{id:"budget-001",code:"OP-2024-Q1",name:"2024年第一季營運預算",type:Yu.OPERATIONAL,totalAmount:5e5,usedAmount:234500,remainingAmount:265500,utilizationRate:46.9,department:"商品部",startDate:"2024-01-01",endDate:"2024-03-31",status:"active"},{id:"budget-002",code:"MK-2024-Q1",name:"2024年第一季行銷預算",type:Yu.MARKETING,totalAmount:2e5,usedAmount:145e3,remainingAmount:55e3,utilizationRate:72.5,department:"行銷部",startDate:"2024-01-01",endDate:"2024-03-31",status:"active"}],alerts:[{id:"alert-001",budgetId:"budget-002",type:"high_utilization",message:"行銷預算使用率已達72.5%，請注意預算控制",severity:"warning",createdAt:"2024-12-01T09:00:00Z"}]},TA={categories:[{id:"category-001",name:"化妝品",totalSpent:18e4,percentageOfTotal:45.2,averageUnitCost:420,trend:"stable",monthlySpending:[{month:"2024-10",amount:65e3},{month:"2024-11",amount:58e3},{month:"2024-12",amount:57e3}]},{id:"category-002",name:"包裝材料",totalSpent:95e3,percentageOfTotal:23.8,averageUnitCost:120,trend:"increasing",monthlySpending:[{month:"2024-10",amount:28e3},{month:"2024-11",amount:32e3},{month:"2024-12",amount:35e3}]}],suppliers:[{supplierId:"supplier-001",supplierName:"美妝世界股份有限公司",totalSpent:145e3,orderCount:12,averageOrderValue:12083,onTimeDeliveryRate:95.5,qualityRating:4.6},{supplierId:"supplier-002",supplierName:"精品包裝有限公司",totalSpent:89e3,orderCount:8,averageOrderValue:11125,onTimeDeliveryRate:88.2,qualityRating:4.3}]};class DA{constructor(){this.purchaseOrders=[...SA],this.suggestions=[...kA],this.inspectionRecords=[...CA],this.budgetControl={...EA},this.costAnalysis={...TA}}getPurchaseOrders(t={}){let r=[...this.purchaseOrders];if(t.status&&(r=r.filter(a=>a.status===t.status)),t.type&&(r=r.filter(a=>a.type===t.type)),t.supplierId&&(r=r.filter(a=>a.supplierId===t.supplierId)),t.dateFrom&&(r=r.filter(a=>a.createdAt>=t.dateFrom)),t.dateTo&&(r=r.filter(a=>a.createdAt<=t.dateTo)),t.search){const a=t.search.toLowerCase();r=r.filter(n=>n.poNumber.toLowerCase().includes(a)||n.supplierName.toLowerCase().includes(a)||n.notes.toLowerCase().includes(a))}return r}getPurchaseOrderById(t){return this.purchaseOrders.find(r=>r.id===t)}createPurchaseOrder(t){const r={id:ev(),poNumber:this.generatePONumber(),status:Tt.DRAFT,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...t};return this.purchaseOrders.unshift(r),r}updatePurchaseOrder(t,r){const a=this.purchaseOrders.findIndex(n=>n.id===t);return a!==-1?(this.purchaseOrders[a]={...this.purchaseOrders[a],...r,updatedAt:new Date().toISOString()},this.purchaseOrders[a]):null}deletePurchaseOrder(t){const r=this.purchaseOrders.findIndex(a=>a.id===t);return r!==-1?this.purchaseOrders.splice(r,1)[0]:null}generatePONumber(){const t=new Date().getFullYear(),r=this.purchaseOrders.map(n=>n.poNumber).filter(n=>n.startsWith(`PO-${t}-`)).map(n=>parseInt(n.split("-")[2])).sort((n,i)=>i-n),a=r.length>0?r[0]+1:1;return`PO-${t}-${a.toString().padStart(3,"0")}`}getProcurementSuggestions(t={}){let r=[...this.suggestions];return t.type&&(r=r.filter(a=>a.type===t.type)),t.priority&&(r=r.filter(a=>a.priority===t.priority)),t.isActionTaken!==void 0&&(r=r.filter(a=>a.isActionTaken===t.isActionTaken)),r.sort((a,n)=>{const i={critical:5,urgent:4,high:3,normal:2,low:1};return i[n.priority]-i[a.priority]})}markSuggestionAsActionTaken(t){const r=this.suggestions.find(a=>a.id===t);return r&&(r.isActionTaken=!0,r.actionTakenAt=new Date().toISOString()),r}getInspectionRecords(t={}){let r=[...this.inspectionRecords];return t.status&&(r=r.filter(a=>a.status===t.status)),t.purchaseOrderId&&(r=r.filter(a=>a.purchaseOrderId===t.purchaseOrderId)),r}createInspectionRecord(t){const r={id:ev(),createdAt:new Date().toISOString(),...t};return this.inspectionRecords.unshift(r),r}getBudgetInfo(){return this.budgetControl}checkBudgetAvailability(t,r){const a=this.budgetControl.budgets.find(n=>n.code===t);return a?a.remainingAmount<r?{available:!1,reason:"預算不足",remaining:a.remainingAmount,required:r}:{available:!0,remaining:a.remainingAmount-r}:{available:!1,reason:"預算代碼不存在"}}getCostAnalysis(){return this.costAnalysis}getDashboardStats(){const t=new Date,r=`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`,a=this.purchaseOrders.length,n=this.purchaseOrders.filter(x=>[Tt.PENDING_APPROVAL,Tt.SENT_TO_SUPPLIER].includes(x.status)).length,i=this.purchaseOrders.filter(x=>x.status===Tt.COMPLETED).length,l=this.purchaseOrders.filter(x=>x.createdAt.startsWith(r)),o=l.reduce((x,p)=>x+p.totalWithTax,0),c=this.suggestions.filter(x=>x.priority===wo.URGENT&&!x.isActionTaken).length,d=this.inspectionRecords.filter(x=>x.status===pw.PENDING).length;return{totalOrders:a,pendingOrders:n,completedOrders:i,thisMonthSpending:o,urgentSuggestions:c,pendingInspections:d,averageOrderValue:a>0?o/l.length:0,onTimeDeliveryRate:this.calculateOnTimeDeliveryRate()}}calculateOnTimeDeliveryRate(){const t=this.purchaseOrders.filter(a=>a.status===Tt.COMPLETED&&a.actualDeliveryDate);return t.length===0?0:t.filter(a=>a.actualDeliveryDate<=a.expectedDeliveryDate).length/t.length*100}}const ro=new DA,AA=()=>{const[s,t]=m.useState({}),[r,a]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState([]);m.useEffect(()=>{const f=ro.getDashboardStats();t(f);const y=ro.getPurchaseOrders();a(y.slice(0,5));const b=ro.getProcurementSuggestions({priority:"urgent",isActionTaken:!1});i(b.slice(0,3));const v=ro.getInspectionRecords({status:"pending"});o(v.slice(0,3))},[]);const c=({title:f,value:y,subtitle:b,icon:v,color:S,link:_})=>{const w={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600",purple:"bg-purple-100 text-purple-600",indigo:"bg-indigo-100 text-indigo-600"},N=()=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${w[S]||"bg-gray-100 text-gray-600"}`,children:e.jsx(v,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:f}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y}),b&&e.jsx("p",{className:"text-sm text-gray-500",children:b})]})]})});return _?e.jsx(re,{to:_,className:"block",children:e.jsx(N,{})}):e.jsx(N,{})},d=f=>({draft:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",production:"bg-purple-100 text-purple-800",shipped:"bg-indigo-100 text-indigo-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[f]||"bg-gray-100 text-gray-800",x=f=>({draft:"草稿",pending:"待審核",approved:"已核准",confirmed:"已確認",production:"生產中",shipped:"已出貨",completed:"已完成",cancelled:"已取消"})[f]||"未知",p=f=>({low:"text-gray-600",normal:"text-blue-600",high:"text-orange-600",urgent:"text-red-600",critical:"text-red-800"})[f]||"text-gray-600";return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(c,{title:"本月採購額",value:`$${(s.thisMonthSpending||0).toLocaleString()}`,subtitle:"較上月",icon:We,color:"blue",link:"/admin/procurement/analytics"}),e.jsx(c,{title:"待處理訂單",value:s.pendingOrders||0,subtitle:"需要關注",icon:be,color:"yellow",link:"/admin/procurement/orders"}),e.jsx(c,{title:"本月節省",value:`$${(s.costSavings||0).toLocaleString()}`,subtitle:"成本控制",icon:We,color:"green",link:"/admin/procurement/analytics"}),e.jsx(c,{title:"準時交貨率",value:`${(s.onTimeDeliveryRate||0).toFixed(1)}%`,subtitle:"供應商表現",icon:tt,color:"purple",link:"/admin/procurement/analytics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(c,{title:"緊急建議",value:s.urgentSuggestions||0,subtitle:"需要處理",icon:te,color:"red",link:"/admin/procurement/suggestions"}),e.jsx(c,{title:"待驗收項目",value:s.pendingInspections||0,subtitle:"等待確認",icon:Lb,color:"indigo",link:"/admin/procurement/inspection"}),e.jsx(c,{title:"已完成訂單",value:s.completedOrders||0,subtitle:"成功交付",icon:ae,color:"green"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Bt,{className:"w-6 h-6 mr-2"}),"最近採購單"]}),e.jsx(re,{to:"/admin/procurement/orders",className:"text-[#cc824d] hover:text-[#b3723f] text-sm font-medium",children:"查看全部"})]}),e.jsxs("div",{className:"space-y-4",children:[r.map(f=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(re,{to:`/admin/procurement/orders/${f.id}`,className:"text-gray-900 font-medium hover:text-[#cc824d]",children:f.poNumber}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(f.status)}`,children:x(f.status)})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:f.supplierName}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["金額: $",f.totalWithTax.toLocaleString()]}),e.jsx("span",{className:"text-gray-500",children:new Date(f.createdAt).toLocaleDateString()})]})]},f.id)),r.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"暫無最近採購單"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(te,{className:"w-6 h-6 mr-2"}),"緊急建議"]}),e.jsx(re,{to:"/admin/procurement/suggestions",className:"text-[#cc824d] hover:text-[#b3723f] text-sm font-medium",children:"查看全部"})]}),e.jsxs("div",{className:"space-y-4",children:[n.map(f=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-gray-900 font-medium text-sm",children:f.productName||f.supplierName}),e.jsx("span",{className:`text-xs font-medium ${p(f.priority)}`,children:f.priority.toUpperCase()})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:f.reason}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:f.type==="stock_alert"?"庫存警告":"供應商問題"}),e.jsx("span",{children:new Date(f.createdAt).toLocaleDateString()})]})]},f.id)),n.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"暫無緊急建議"})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"快速操作"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(re,{to:"/admin/procurement/orders/add",className:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-lg p-4 text-center hover:bg-white transition-colors",children:[e.jsx(wn,{className:"w-8 h-8 text-[#cc824d] mx-auto mb-2"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"新增採購單"})]}),e.jsxs(re,{to:"/admin/procurement/suggestions",className:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-lg p-4 text-center hover:bg-white transition-colors",children:[e.jsx(te,{className:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"查看建議"})]}),e.jsxs(re,{to:"/admin/procurement/inspection",className:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-lg p-4 text-center hover:bg-white transition-colors",children:[e.jsx(Lb,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"驗收管理"})]}),e.jsxs(re,{to:"/admin/procurement/analytics",className:"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-lg p-4 text-center hover:bg-white transition-colors",children:[e.jsx(We,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"成本分析"})]})]})]})]})},IA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(""),[n,i]=m.useState(""),[l,o]=m.useState(""),[c,d]=m.useState({});m.useEffect(()=>{x(),p()},[r,n,l]);const x=()=>{const b={};r&&(b.search=r),n&&(b.status=n),l&&(b.priority=l);const v=ro.getPurchaseOrders(b);t(v)},p=()=>{const b=ro.getDashboardStats();d(b)},f=b=>{const v={[Tt.DRAFT]:{label:"草稿",className:"bg-gray-100 text-gray-800"},[Tt.PENDING_APPROVAL]:{label:"待審核",className:"bg-yellow-100 text-yellow-800"},[Tt.APPROVED]:{label:"已核准",className:"bg-blue-100 text-blue-800"},[Tt.SENT_TO_SUPPLIER]:{label:"已發送",className:"bg-purple-100 text-purple-800"},[Tt.CONFIRMED]:{label:"已確認",className:"bg-green-100 text-green-800"},[Tt.COMPLETED]:{label:"已完成",className:"bg-green-100 text-green-800"},[Tt.CANCELLED]:{label:"已取消",className:"bg-red-100 text-red-800"}},S=v[b]||v[Tt.DRAFT];return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.className}`,children:S.label})},y=({title:b,value:v,icon:S,color:_})=>{const w={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600"};return e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${w[_]}`,children:e.jsx(S,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:b}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v})]})]})})};return e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"採購單管理"}),e.jsx("p",{className:"text-gray-600",children:"管理和追蹤所有採購訂單"})]}),e.jsxs(re,{to:"/admin/procurement/orders/add",className:"bg-[#cc824d] hover:bg-[#b3723f] text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center",children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),"新增採購單"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(y,{title:"總採購單",value:c.totalOrders||0,icon:Bt,color:"blue"}),e.jsx(y,{title:"待處理",value:c.pendingOrders||0,icon:be,color:"yellow"}),e.jsx(y,{title:"已完成",value:c.completedOrders||0,icon:ae,color:"green"}),e.jsx(y,{title:"本月支出",value:`$${(c.thisMonthSpending||0).toLocaleString()}`,icon:We,color:"green"})]})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50 mb-6",children:e.jsx("div",{className:"flex flex-col lg:flex-row gap-4",children:e.jsx("div",{className:"flex gap-3",children:e.jsxs("select",{value:n,onChange:b=>i(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"所有狀態"}),e.jsx("option",{value:Tt.DRAFT,children:"草稿"}),e.jsx("option",{value:Tt.PENDING_APPROVAL,children:"待審核"}),e.jsx("option",{value:Tt.APPROVED,children:"已核准"}),e.jsx("option",{value:Tt.SENT_TO_SUPPLIER,children:"已發送"}),e.jsx("option",{value:Tt.CONFIRMED,children:"已確認"}),e.jsx("option",{value:Tt.COMPLETED,children:"已完成"})]})})})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"採購單號"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"供應商"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"總金額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"建立日期"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(re,{to:`/admin/procurement/orders/${b.id}`,className:"text-[#cc824d] hover:text-[#b3723f] font-medium",children:b.poNumber})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:b.supplierName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f(b.status)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:["$",b.totalWithTax.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:new Date(b.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(re,{to:`/admin/procurement/orders/${b.id}`,className:"text-[#cc824d] hover:text-[#b3723f]",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx(re,{to:`/admin/procurement/orders/edit/${b.id}`,className:"text-green-600 hover:text-green-900",children:e.jsx(_e,{className:"w-4 h-4"})})]})})]},b.id))})]})}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"沒有找到採購單"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"開始建立第一個採購單吧"})]})]})]})},RA=()=>e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"採購單詳情"}),e.jsx("p",{className:"text-gray-600",children:"採購單詳情頁面開發中..."})]})}),av=()=>e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"新增採購單"}),e.jsx("p",{className:"text-gray-600",children:"新增採購單表單開發中..."})]})}),PA=()=>e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"採購建議"}),e.jsx("p",{className:"text-gray-600",children:"智能採購建議系統開發中..."})]})}),MA=()=>e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"驗收入庫"}),e.jsx("p",{className:"text-gray-600",children:"商品驗收和入庫管理開發中..."})]})}),OA=()=>e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"成本分析"}),e.jsx("p",{className:"text-gray-600",children:"採購成本分析和報表開發中..."})]})}),LA=()=>e.jsxs(aa,{children:[e.jsx(q,{index:!0,element:e.jsx(AA,{})}),e.jsx(q,{path:"orders",element:e.jsx(IA,{})}),e.jsx(q,{path:"orders/:id",element:e.jsx(RA,{})}),e.jsx(q,{path:"orders/add",element:e.jsx(av,{})}),e.jsx(q,{path:"orders/edit/:id",element:e.jsx(av,{})}),e.jsx(q,{path:"suggestions",element:e.jsx(PA,{})}),e.jsx(q,{path:"inspection",element:e.jsx(MA,{})}),e.jsx(q,{path:"analytics",element:e.jsx(OA,{})})]}),Q={FIXED_AMOUNT:"fixed_amount",PERCENTAGE:"percentage",FREE_SHIPPING:"free_shipping",BUY_ONE_GET_ONE:"bogo",BUNDLE_DISCOUNT:"bundle_discount",MEMBER_EXCLUSIVE:"member_exclusive",NEW_USER_BONUS:"new_user_bonus",BIRTHDAY_GIFT:"birthday_gift",CASHBACK:"cashback"},ue={DRAFT:"draft",ACTIVE:"active",PAUSED:"paused",EXPIRED:"expired",DEPLETED:"depleted",CANCELLED:"cancelled"},Rn={AVAILABLE:"available",USED:"used",EXPIRED:"expired",RESERVED:"reserved",CANCELLED:"cancelled"},Xa={MIN_ORDER_AMOUNT:"min_order_amount",MIN_QUANTITY:"min_quantity",MEMBER_LEVEL:"member_level",FIRST_ORDER:"first_order",PRODUCT_CATEGORY:"product_category",BRAND:"brand",DAY_OF_WEEK:"day_of_week",TIME_RANGE:"time_range",LOCATION:"location",PAYMENT_METHOD:"payment_method"},Pn={ALLOW_ALL:"allow_all",SELECTIVE:"selective",EXCLUSIVE:"exclusive",HIERARCHICAL:"hierarchical"},Tm={DIRECT_LINK:"direct_link",QR_CODE:"qr_code",SOCIAL_MEDIA:"social_media",REFERRAL_CODE:"referral_code",GROUP_PURCHASE:"group_purchase"};class FA{constructor(){this.coupons=[],this.userCoupons=[],this.stackingRules=[],this.shareEvents=[],this.usageHistory=[],this.initializeData()}initializeData(){const t=localStorage.getItem("marelle-coupons"),r=localStorage.getItem("marelle-user-coupons"),a=localStorage.getItem("marelle-stacking-rules");t?this.coupons=JSON.parse(t):this.generateSampleCoupons(),r?this.userCoupons=JSON.parse(r):this.generateSampleUserCoupons(),a?this.stackingRules=JSON.parse(a):this.generateSampleStackingRules()}generateSampleCoupons(){const t=[{id:1,code:"WELCOME2024",name:"新會員歡迎禮",description:"新會員專享首單優惠",type:Q.PERCENTAGE,discountConfig:{value:20,maxDiscount:500,minOrderAmount:1e3,calculation:"before_tax"},conditions:[{type:Xa.FIRST_ORDER,operator:"equals",value:!0,description:"僅限首次購買"},{type:Xa.MIN_ORDER_AMOUNT,operator:"gte",value:1e3,description:"最低消費1000元"}],limitations:{totalUsageLimit:1e3,perUserLimit:1,dailyLimit:50},validity:{startDate:new Date("2024-01-01"),endDate:new Date("2024-12-31"),validityType:"fixed_period",expiryWarningDays:7},distribution:{autoIssue:!0,targetAudience:"new_users",issueConditions:["registration"]},stackingRules:{priority:1,stackingType:Pn.SELECTIVE,compatibleTypes:[Q.FREE_SHIPPING]},sharingConfig:{isShareable:!0,shareTypes:[Tm.SOCIAL_MEDIA,Tm.DIRECT_LINK],shareRewards:{sharerReward:{type:"points",value:100},shareeCReward:{type:"coupon",value:50}}},status:ue.ACTIVE,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:2,code:"SPRING20",name:"春季大促",description:"春季商品8折優惠",type:Q.PERCENTAGE,discountConfig:{value:20,minOrderAmount:500,applicableCategories:["skincare","makeup"],calculation:"on_subtotal"},conditions:[{type:Xa.PRODUCT_CATEGORY,operator:"in",value:["skincare","makeup"],description:"適用於保養和彩妝商品"}],limitations:{totalUsageLimit:5e3,perUserLimit:3,dailyLimit:200},validity:{startDate:new Date("2024-03-01"),endDate:new Date("2024-05-31"),validityType:"fixed_period",expiryWarningDays:7},stackingRules:{priority:2,stackingType:Pn.ALLOW_ALL,compatibleTypes:[Q.FREE_SHIPPING,Q.CASHBACK]},sharingConfig:{isShareable:!0,shareTypes:[Tm.SOCIAL_MEDIA,Tm.QR_CODE]},status:ue.ACTIVE,createdAt:new Date("2024-02-15"),updatedAt:new Date("2024-02-15")},{id:3,code:"FREESHIP99",name:"滿千免運",description:"訂單滿1000元免運費",type:Q.FREE_SHIPPING,discountConfig:{value:0,minOrderAmount:1e3,calculation:"on_shipping"},conditions:[{type:Xa.MIN_ORDER_AMOUNT,operator:"gte",value:1e3,description:"訂單金額滿1000元"}],limitations:{perUserLimit:10,dailyLimit:1e3},validity:{startDate:new Date("2024-01-01"),endDate:new Date("2024-12-31"),validityType:"fixed_period"},stackingRules:{priority:3,stackingType:Pn.ALLOW_ALL,compatibleTypes:Object.values(Q)},status:ue.ACTIVE,createdAt:new Date("2024-01-01")},{id:4,code:"BOGO2024",name:"買一送一特惠",description:"指定商品買一送一",type:Q.BUY_ONE_GET_ONE,discountConfig:{value:50,applicableProducts:["prod_001","prod_002","prod_003"],calculation:"on_cheapest"},conditions:[{type:Xa.MIN_QUANTITY,operator:"gte",value:2,description:"至少購買2件指定商品"}],limitations:{totalUsageLimit:500,perUserLimit:2},validity:{startDate:new Date("2024-06-01"),endDate:new Date("2024-06-30"),validityType:"fixed_period"},stackingRules:{priority:4,stackingType:Pn.EXCLUSIVE},status:ue.ACTIVE,createdAt:new Date("2024-05-15")},{id:5,code:"VIP100",name:"VIP會員專享",description:"VIP會員100元折扣券",type:Q.FIXED_AMOUNT,discountConfig:{value:100,minOrderAmount:800,calculation:"on_total"},conditions:[{type:Xa.MEMBER_LEVEL,operator:"gte",value:"vip",description:"僅限VIP會員使用"}],limitations:{perUserLimit:5,dailyLimit:100},validity:{validityType:"permanent"},stackingRules:{priority:5,stackingType:Pn.SELECTIVE,compatibleTypes:[Q.FREE_SHIPPING]},status:ue.ACTIVE,createdAt:new Date("2024-01-01")}];this.coupons=t,this.saveToStorage()}generateSampleUserCoupons(){const t=[];["user_001","user_002","user_003","user_004","user_005"].forEach((a,n)=>{this.coupons.forEach((i,l)=>{if(Math.random()>.3){const o={id:`uc_${n}_${l}`,userId:a,couponId:i.id,couponCode:i.code,status:this.getRandomStatus(),obtainedAt:this.getRandomDate(new Date("2024-01-01"),new Date),expiresAt:this.getRandomExpiryDate(),source:this.getRandomSource(),shareToken:Math.random()>.7?this.generateShareToken():null};o.status===Rn.USED&&(o.usedAt=this.getRandomDate(o.obtainedAt,new Date),o.orderId=`order_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,o.discountAmount=this.calculateRandomDiscount(i)),t.push(o)}})}),this.userCoupons=t}generateSampleStackingRules(){const t=[{id:1,name:"新用戶專屬疊加",priority:1,stackingType:Pn.SELECTIVE,compatibleTypes:[Q.PERCENTAGE,Q.FREE_SHIPPING],incompatibleTypes:[Q.BUY_ONE_GET_ONE],maxStackCount:2,conditions:[{field:"user.isNew",operator:"equals",value:!0}],calculationOrder:"percentage_first",isActive:!0},{id:2,name:"一般疊加規則",priority:2,stackingType:Pn.ALLOW_ALL,compatibleTypes:Object.values(Q),incompatibleTypes:[],maxStackCount:3,calculationOrder:"best_for_customer",isActive:!0},{id:3,name:"互斥規則",priority:3,stackingType:Pn.EXCLUSIVE,compatibleTypes:[Q.BUY_ONE_GET_ONE],incompatibleTypes:Object.values(Q).filter(r=>r!==Q.BUY_ONE_GET_ONE),maxStackCount:1,isActive:!0}];this.stackingRules=t}createCoupon(t){try{const r={id:Date.now(),...t,createdAt:new Date,updatedAt:new Date};return this.coupons.push(r),this.saveToStorage(),{success:!0,coupon:r}}catch(r){return{success:!1,error:r.message}}}getAllCoupons(t={}){let r=[...this.coupons];if(t.status&&(r=r.filter(a=>a.status===t.status)),t.type&&(r=r.filter(a=>a.type===t.type)),t.search){const a=t.search.toLowerCase();r=r.filter(n=>n.name.toLowerCase().includes(a)||n.code.toLowerCase().includes(a)||n.description.toLowerCase().includes(a))}if(t.startDate&&t.endDate){const a=new Date(t.startDate),n=new Date(t.endDate);r=r.filter(i=>{const l=new Date(i.validity.startDate);return l>=a&&l<=n})}return t.sortBy&&r.sort((a,n)=>{const i=this.getNestedValue(a,t.sortBy),l=this.getNestedValue(n,t.sortBy);return t.sortOrder==="desc"?l>i?1:-1:i>l?1:-1}),r}getCouponById(t){return this.coupons.find(r=>r.id===parseInt(t))}updateCoupon(t,r){try{const a=this.coupons.findIndex(n=>n.id===parseInt(t));return a===-1?{success:!1,error:"優惠券不存在"}:(this.coupons[a]={...this.coupons[a],...r,updatedAt:new Date},this.saveToStorage(),{success:!0,coupon:this.coupons[a]})}catch(a){return{success:!1,error:a.message}}}deleteCoupon(t){try{const r=this.coupons.findIndex(a=>a.id===parseInt(t));return r===-1?{success:!1,error:"優惠券不存在"}:(this.coupons.splice(r,1),this.saveToStorage(),{success:!0})}catch(r){return{success:!1,error:r.message}}}getUserCoupons(t,r={}){let a=this.userCoupons.filter(n=>n.userId===t);return r.status&&(a=a.filter(n=>n.status===r.status)),a.map(n=>({...n,coupon:this.getCouponById(n.couponId)}))}issueCouponToUser(t,r,a="manual"){try{const n=this.getCouponById(r);if(!n)return{success:!1,error:"優惠券不存在"};if(n.status!==ue.ACTIVE)return{success:!1,error:"優惠券未啟用"};const i=this.userCoupons.filter(o=>o.userId===t&&o.couponId===r).length;if(n.limitations.perUserLimit&&i>=n.limitations.perUserLimit)return{success:!1,error:"已達到個人使用上限"};const l={id:`uc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:t,couponId:r,couponCode:n.code,status:Rn.AVAILABLE,obtainedAt:new Date,expiresAt:this.calculateExpiryDate(n),source:a};return this.userCoupons.push(l),this.saveToStorage(),{success:!0,userCoupon:l}}catch(n){return{success:!1,error:n.message}}}async calculateStackedDiscount(t,r){try{const a=this.validateCoupons(t,r),n=this.groupCompatibleCoupons(a),l=this.generateStackingCombinations(n).map(c=>this.calculateCombinationDiscount(c,r)),o=this.selectBestCombination(l);return{appliedCoupons:o.coupons,totalDiscount:o.totalDiscount,discountBreakdown:o.breakdown,savingsComparison:this.compareSavings(l),warnings:o.warnings||[]}}catch(a){return{appliedCoupons:[],totalDiscount:0,discountBreakdown:[],warnings:[a.message]}}}validateCoupons(t,r){return t.filter(a=>{const n=this.getCouponById(a.couponId);return!n||n.status!==ue.ACTIVE||a.status!==Rn.AVAILABLE||new Date(a.expiresAt)<new Date?!1:this.checkConditions(n.conditions,r)})}checkConditions(t,r){return!t||t.length===0?!0:t.every(a=>{switch(a.type){case Xa.MIN_ORDER_AMOUNT:return r.subtotal>=a.value;case Xa.MIN_QUANTITY:return r.totalQuantity>=a.value;case Xa.PRODUCT_CATEGORY:return r.items.some(n=>a.value.includes(n.category));default:return!0}})}generateShareLink(t,r,a){var n;try{const i=this.getCouponById(r);if(!i||!((n=i.sharingConfig)!=null&&n.isShareable))throw new Error("此優惠券不支援分享");const l=this.generateShareToken(),o={id:`share_${Date.now()}`,userId:t,couponId:r,shareType:a,shareToken:l,shareLink:`${window.location.origin}/coupon/shared/${l}`,clicksCount:0,conversionsCount:0,status:"active",expiresAt:this.calculateShareExpiry(30),createdAt:new Date};return this.shareEvents.push(o),this.saveToStorage(),{success:!0,shareLink:o.shareLink,qrCode:this.generateQRCodeData(o.shareLink),expiresAt:o.expiresAt}}catch(i){return{success:!1,error:i.message}}}getCouponStatistics(t={}){const r={total:this.coupons.length,active:this.coupons.filter(a=>a.status===ue.ACTIVE).length,expired:this.coupons.filter(a=>a.status===ue.EXPIRED).length,paused:this.coupons.filter(a=>a.status===ue.PAUSED).length,totalIssued:this.userCoupons.length,totalUsed:this.userCoupons.filter(a=>a.status===Rn.USED).length,totalExpired:this.userCoupons.filter(a=>a.status===Rn.EXPIRED).length,usageRate:0,totalDiscount:0,totalShares:this.shareEvents.length,totalClicks:this.shareEvents.reduce((a,n)=>a+n.clicksCount,0)};return r.usageRate=r.totalIssued>0?r.totalUsed/r.totalIssued*100:0,r.totalDiscount=this.userCoupons.filter(a=>a.status===Rn.USED&&a.discountAmount).reduce((a,n)=>a+n.discountAmount,0),r}getRandomStatus(){const t=Object.values(Rn),r=[.6,.2,.1,.05,.05],a=Math.random();let n=0;for(let i=0;i<t.length;i++)if(n+=r[i],a<=n)return t[i];return Rn.AVAILABLE}getRandomDate(t,r){return new Date(t.getTime()+Math.random()*(r.getTime()-t.getTime()))}getRandomExpiryDate(){const t=new Date,r=new Date(t);return r.setDate(t.getDate()+Math.floor(Math.random()*90)+30),r}getRandomSource(){const t=["manual","auto_issue","shared","redeemed","promotion"];return t[Math.floor(Math.random()*t.length)]}generateShareToken(){return`share_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}calculateRandomDiscount(t){return t.type===Q.PERCENTAGE?Math.floor(Math.random()*200)+50:t.type===Q.FIXED_AMOUNT?t.discountConfig.value:0}calculateExpiryDate(t){if(t.validity.validityType==="relative_days"){const a=new Date;return a.setDate(a.getDate()+(t.validity.validityDays||30)),a}else if(t.validity.endDate)return new Date(t.validity.endDate);const r=new Date;return r.setDate(r.getDate()+30),r}calculateShareExpiry(t){const r=new Date;return r.setDate(r.getDate()+t),r}generateQRCodeData(t){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAA..."}getNestedValue(t,r){return r.split(".").reduce((a,n)=>a&&a[n],t)}saveToStorage(){localStorage.setItem("marelle-coupons",JSON.stringify(this.coupons)),localStorage.setItem("marelle-user-coupons",JSON.stringify(this.userCoupons)),localStorage.setItem("marelle-stacking-rules",JSON.stringify(this.stackingRules)),localStorage.setItem("marelle-share-events",JSON.stringify(this.shareEvents))}batchUpdateCoupons(t,r){try{const a=[];return t.forEach(n=>{const i=this.coupons.findIndex(l=>l.id===parseInt(n));i!==-1&&(this.coupons[i]={...this.coupons[i],...r,updatedAt:new Date},a.push(this.coupons[i]))}),this.saveToStorage(),{success:!0,updatedCoupons:a}}catch(a){return{success:!1,error:a.message}}}batchDeleteCoupons(t){try{return this.coupons=this.coupons.filter(r=>!t.includes(r.id)),this.saveToStorage(),{success:!0}}catch(r){return{success:!1,error:r.message}}}}const At=new FA,$A=()=>{var P;const[s,t]=m.useState([]),[r,a]=m.useState(""),[n,i]=m.useState(""),[l,o]=m.useState(!1),[c,d]=m.useState({}),[x,p]=m.useState([]),[f,y]=m.useState(!1),[b,v]=m.useState(!0),[S,_]=m.useState({start:"",end:""});m.useEffect(()=>{w(),N()},[r,n,S]);const w=()=>{v(!0);try{const $={search:"",status:r,type:n,startDate:S.start,endDate:S.end,sortBy:"createdAt",sortOrder:"desc"},I=At.getAllCoupons($);t(I)}catch($){console.error("Error loading coupons:",$)}finally{v(!1)}},N=()=>{const $=At.getCouponStatistics(S);d($)},u=$=>{p(I=>{const L=I.includes($)?I.filter(D=>D!==$):[...I,$];return y(L.length>0),L})},h=()=>{x.length===s.length?(p([]),y(!1)):(p(s.map($=>$.id)),y(!0))},g=$=>{At.batchUpdateCoupons(x,{status:$}).success&&(w(),p([]),y(!1))},j=()=>{window.confirm("確定要刪除選中的優惠券嗎？")&&At.batchDeleteCoupons(x).success&&(w(),p([]),y(!1))},T=$=>{window.confirm("確定要刪除這個優惠券嗎？")&&At.deleteCoupon($).success&&w()},C=$=>{const L={[ue.ACTIVE]:{label:"啟用中",className:"bg-green-100 text-green-800",icon:ae},[ue.DRAFT]:{label:"草稿",className:"bg-gray-100 text-gray-800",icon:be},[ue.PAUSED]:{label:"暫停",className:"bg-yellow-100 text-yellow-800",icon:Ba},[ue.EXPIRED]:{label:"已過期",className:"bg-red-100 text-red-800",icon:te},[ue.DEPLETED]:{label:"已用完",className:"bg-orange-100 text-orange-800",icon:of},[ue.CANCELLED]:{label:"已取消",className:"bg-red-100 text-red-800",icon:te}}[$]||{label:$,className:"bg-gray-100 text-gray-800",icon:be},D=L.icon;return e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${L.className}`,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),L.label]})},E=$=>{const L={[Q.FIXED_AMOUNT]:{label:"固定金額",color:"blue"},[Q.PERCENTAGE]:{label:"百分比",color:"green"},[Q.FREE_SHIPPING]:{label:"免運券",color:"purple"},[Q.BUY_ONE_GET_ONE]:{label:"買一送一",color:"pink"},[Q.BUNDLE_DISCOUNT]:{label:"組合優惠",color:"indigo"},[Q.MEMBER_EXCLUSIVE]:{label:"會員專屬",color:"yellow"},[Q.NEW_USER_BONUS]:{label:"新會員",color:"cyan"},[Q.BIRTHDAY_GIFT]:{label:"生日禮",color:"rose"},[Q.CASHBACK]:{label:"現金回饋",color:"emerald"}}[$]||{label:$,color:"gray"};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-${L.color}-100 text-${L.color}-800`,children:L.label})},R=$=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format($),k=$=>$?new Date($).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}):"-",O=$=>{const I=At.getUserCoupons("all",{couponId:$.id}),L=I.length,D=I.filter(M=>M.status==="used").length;return L>0?(D/L*100).toFixed(1):0};return b?e.jsx("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-lg text-gray-600",children:"載入優惠券資料中..."})})}):e.jsxs("div",{className:"bg-[#fdf8f2] min-h-screen p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"優惠券管理"}),e.jsx("p",{className:"text-gray-600 mt-2 font-chinese",children:"管理所有優惠券、疊加規則和分享設定"})]}),e.jsxs(re,{to:"/admin/coupons/new",className:"inline-flex items-center space-x-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"新增優惠券"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"總優惠券數"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c.total||0})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(_a,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"啟用中"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c.active||0})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(ae,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"使用率"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[((P=c.usageRate)==null?void 0:P.toFixed(1))||0,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(oe,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"總折扣金額"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:R(c.totalDiscount||0)})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx(We,{className:"w-6 h-6 text-orange-600"})})]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50 mb-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:()=>o(!l),className:"flex items-center space-x-2 px-4 py-2 bg-white/80 border border-gray-300 text-gray-700 rounded-lg hover:bg-[#fdf8f2]/30 transition-colors",children:[e.jsx(gs,{className:"w-5 h-5"}),e.jsx("span",{children:"篩選"})]})})}),l&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"狀態"}),e.jsx(xe,{options:[{value:"",label:"全部狀態"},{value:ue.ACTIVE,label:"啟用中"},{value:ue.DRAFT,label:"草稿"},{value:ue.PAUSED,label:"暫停"},{value:ue.EXPIRED,label:"已過期"},{value:ue.DEPLETED,label:"已用完"},{value:ue.CANCELLED,label:"已取消"}],value:r,onChange:a,placeholder:"選擇狀態",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"類型"}),e.jsx(xe,{options:[{value:"",label:"全部類型"},{value:Q.FIXED_AMOUNT,label:"固定金額"},{value:Q.PERCENTAGE,label:"百分比"},{value:Q.FREE_SHIPPING,label:"免運券"},{value:Q.BUY_ONE_GET_ONE,label:"買一送一"},{value:Q.MEMBER_EXCLUSIVE,label:"會員專屬"},{value:Q.NEW_USER_BONUS,label:"新會員優惠"}],value:n,onChange:i,placeholder:"選擇類型",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"開始日期"}),e.jsx("input",{type:"date",value:S.start,onChange:$=>_(I=>({...I,start:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"結束日期"}),e.jsx("input",{type:"date",value:S.end,onChange:$=>_(I=>({...I,end:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]})})]}),f&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-blue-700",children:["已選擇 ",x.length," 個優惠券"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>g(ue.ACTIVE),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"批量啟用"}),e.jsx("button",{onClick:()=>g(ue.PAUSED),className:"px-3 py-1 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm",children:"批量暫停"}),e.jsx("button",{onClick:j,className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"批量刪除"}),e.jsx("button",{onClick:()=>{p([]),y(!1)},className:"px-3 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm",children:"取消選擇"})]})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200/50 overflow-visible",children:[e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-[#fdf8f2]/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:x.length===s.length&&s.length>0,onChange:h,className:"rounded border-gray-300 text-[#cc824d] focus:ring-[#cc824d]"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"優惠券資訊"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"類型"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"折扣"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"有效期"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"使用率"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white/50 divide-y divide-gray-200",children:s.map($=>{var I;return e.jsxs("tr",{className:"hover:bg-[#fdf8f2]/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:x.includes($.id),onChange:()=>u($.id),className:"rounded border-gray-300 text-[#cc824d] focus:ring-[#cc824d]"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#cc824d] to-[#b3723f] rounded-lg flex items-center justify-center",children:e.jsx(Be,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.name}),e.jsx("div",{className:"text-sm text-gray-500 font-mono",children:$.code}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:$.description})]})]})}),e.jsx("td",{className:"px-6 py-4",children:E($.type)}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm",children:$.type===Q.PERCENTAGE?`${$.discountConfig.value}%`:$.type===Q.FIXED_AMOUNT?R($.discountConfig.value):$.type===Q.FREE_SHIPPING?"免運費":"優惠"}),$.discountConfig.minOrderAmount&&e.jsxs("div",{className:"text-xs text-gray-500",children:["滿 ",R($.discountConfig.minOrderAmount)]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm",children:$.validity.validityType==="permanent"?e.jsx("span",{className:"text-green-600",children:"永久有效"}):e.jsxs("div",{children:[e.jsx("div",{children:k($.validity.startDate)}),e.jsxs("div",{className:"text-gray-500",children:["至 ",k($.validity.endDate)]})]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[O($),"%"]})}),e.jsx("td",{className:"px-6 py-4",children:C($.status)}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(re,{to:`/admin/coupons/${$.id}`,className:"p-2 text-gray-400 hover:text-[#cc824d] transition-colors",title:"查看詳情",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx(re,{to:`/admin/coupons/${$.id}/edit`,className:"p-2 text-gray-400 hover:text-[#cc824d] transition-colors",title:"編輯",children:e.jsx(_e,{className:"w-4 h-4"})}),((I=$.sharingConfig)==null?void 0:I.isShareable)&&e.jsx("button",{className:"p-2 text-gray-400 hover:text-[#cc824d] transition-colors",title:"分享管理",children:e.jsx(ow,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T($.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"刪除",children:e.jsx($e,{className:"w-4 h-4"})})]})})]},$.id)})})]})}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"沒有優惠券"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:searchQuery||r||n?"沒有符合篩選條件的優惠券":"開始建立您的第一個優惠券吧！"}),!searchQuery&&!r&&!n&&e.jsx("div",{className:"mt-6",children:e.jsxs(re,{to:"/admin/coupons/new",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-[#cc824d] hover:bg-[#b3723f]",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"新增優惠券"]})})]})]})]})},VA=()=>{var N;const{id:s}=Di(),t=ns(),[r,a]=m.useState(null),[n,i]=m.useState([]),[l,o]=m.useState(null),[c,d]=m.useState(!0),[x,p]=m.useState("details");m.useEffect(()=>{(()=>{const h=At.getCouponById(s);h&&(a(h),i(At.getCouponUsageHistory(s)),o(At.getCouponSharingStats(s))),d(!1)})()},[s]);const f=u=>{At.updateCoupon(s,{status:u})&&a({...r,status:u})},y=()=>{const u=At.cloneCoupon(s);u&&t(`/admin/coupons/${u.id}/edit`)},b=u=>{const h=At.generateShareUrl(s,u);h&&(window.open(h,"_blank"),At.recordCouponShare(s,u),o(At.getCouponSharingStats(s)))},v=u=>({[ue.DRAFT]:"bg-gray-100 text-gray-700",[ue.ACTIVE]:"bg-green-100 text-green-700",[ue.PAUSED]:"bg-yellow-100 text-yellow-700",[ue.EXPIRED]:"bg-red-100 text-red-700",[ue.EXHAUSTED]:"bg-orange-100 text-orange-700"})[u]||"bg-gray-100 text-gray-700",S=u=>({[Q.FIXED_AMOUNT]:"bg-blue-100 text-blue-700",[Q.PERCENTAGE]:"bg-purple-100 text-purple-700",[Q.FREE_SHIPPING]:"bg-green-100 text-green-700",[Q.BOGO]:"bg-pink-100 text-pink-700",[Q.BUNDLE]:"bg-indigo-100 text-indigo-700"})[u]||"bg-gray-100 text-gray-700",_=u=>{switch(u.type){case Q.FIXED_AMOUNT:return`$${u.value}`;case Q.PERCENTAGE:return`${u.value}%`;case Q.FREE_SHIPPING:return"免運費";case Q.BOGO:return`買${u.conditions.buy_quantity}送${u.conditions.get_quantity}`;default:return u.value}},w=({tabKey:u,label:h,isActive:g,onClick:j})=>e.jsx("button",{onClick:()=>j(u),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${g?"bg-[#cc824d] text-white":"bg-white/80 text-gray-600 hover:bg-[#cc824d]/10"}`,children:h});return c?e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-8"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})})})}):r?e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/admin/coupons"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),e.jsx("p",{className:"text-gray-600",children:r.code})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${v(r.status)}`,children:r.status}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S(r.type)}`,children:r.type})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{tabKey:"details",label:"基本資訊",isActive:x==="details",onClick:p}),e.jsx(w,{tabKey:"usage",label:"使用記錄",isActive:x==="usage",onClick:p}),e.jsx(w,{tabKey:"sharing",label:"分享統計",isActive:x==="sharing",onClick:p}),e.jsx(w,{tabKey:"lifecycle",label:"生命週期",isActive:x==="lifecycle",onClick:p})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[x==="details"&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"優惠券詳情"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"基本資訊"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"優惠券名稱"}),e.jsx("p",{className:"font-medium",children:r.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"優惠券代碼"}),e.jsx("p",{className:"font-medium font-mono",children:r.code})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"優惠類型"}),e.jsx("p",{className:"font-medium",children:r.type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"優惠值"}),e.jsx("p",{className:"font-medium text-[#cc824d]",children:_(r)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"描述"}),e.jsx("p",{className:"text-gray-700",children:r.description})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"使用條件"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"最低消費金額"}),e.jsxs("p",{className:"font-medium",children:["$",r.conditions.min_amount]})]}),r.conditions.max_discount&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"最高折扣"}),e.jsxs("p",{className:"font-medium",children:["$",r.conditions.max_discount]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"使用限制"}),e.jsx("p",{className:"font-medium",children:r.usage_limit===-1?"無限制":`限${r.usage_limit}次`})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"每人限用"}),e.jsx("p",{className:"font-medium",children:r.user_limit===-1?"無限制":`${r.user_limit}次`})]}),((N=r.conditions.applicable_products)==null?void 0:N.length)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"適用商品"}),e.jsx("p",{className:"font-medium",children:r.conditions.applicable_products.join(", ")})]})]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"有效期間"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"開始時間"}),e.jsx("p",{className:"font-medium",children:new Date(r.start_date).toLocaleString("zh-TW")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"結束時間"}),e.jsx("p",{className:"font-medium",children:new Date(r.end_date).toLocaleString("zh-TW")})]})]})]})]}),x==="usage"&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"使用記錄"}),n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("p",{className:"text-gray-500",children:"暫無使用記錄"})]}):e.jsx("div",{className:"space-y-4",children:n.map((u,h)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"font-medium",children:["訂單 #",u.order_id]}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(u.used_at).toLocaleString("zh-TW")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"客戶:"}),e.jsx("span",{className:"ml-2",children:u.customer_email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"折扣金額:"}),e.jsxs("span",{className:"ml-2 text-[#cc824d] font-medium",children:["$",u.discount_amount]})]})]})]},h))})]}),x==="sharing"&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"分享統計"}),l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.total_shares}),e.jsx("div",{className:"text-sm text-blue-600",children:"總分享次數"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[l.conversion_rate,"%"]}),e.jsx("div",{className:"text-sm text-green-600",children:"轉換率"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.viral_coefficient}),e.jsx("div",{className:"text-sm text-purple-600",children:"病毒係數"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"分享平台統計"}),e.jsx("div",{className:"space-y-3",children:Object.entries(l.platform_breakdown).map(([u,h])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"capitalize",children:u}),e.jsxs("span",{className:"font-medium",children:[h," 次"]})]},u))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"快速分享"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>b("facebook"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Facebook"}),e.jsx("button",{onClick:()=>b("line"),className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"LINE"}),e.jsx("button",{onClick:()=>b("email"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Email"})]})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"暫無分享數據"})})]}),x==="lifecycle"&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"生命週期管理"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"當前狀態"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${v(r.status)}`,children:r.status}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[r.status===ue.DRAFT&&"優惠券尚未發布，需要啟用才能使用",r.status===ue.ACTIVE&&"優惠券正在運行中，用戶可以正常使用",r.status===ue.PAUSED&&"優惠券已暫停，暫時無法使用",r.status===ue.EXPIRED&&"優惠券已過期，無法繼續使用",r.status===ue.EXHAUSTED&&"優惠券使用次數已達上限"]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"狀態操作"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[r.status===ue.DRAFT&&e.jsx("button",{onClick:()=>f(ue.ACTIVE),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"啟用優惠券"}),r.status===ue.ACTIVE&&e.jsx("button",{onClick:()=>f(ue.PAUSED),className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors",children:"暫停優惠券"}),r.status===ue.PAUSED&&e.jsx("button",{onClick:()=>f(ue.ACTIVE),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"恢復優惠券"}),e.jsx("button",{onClick:y,className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"複製優惠券"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"使用統計"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.usage_count}),e.jsx("div",{className:"text-sm text-blue-600",children:"已使用次數"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.usage_limit===-1?"∞":r.usage_limit-r.usage_count}),e.jsx("div",{className:"text-sm text-green-600",children:"剩餘次數"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[r.usage_limit===-1?"0":(r.usage_count/r.usage_limit*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-purple-600",children:"使用率"})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"快速操作"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>t(`/admin/coupons/${s}/edit`),className:"w-full bg-[#cc824d] text-white py-2 px-4 rounded-lg hover:bg-[#b3723f] transition-colors",children:"編輯優惠券"}),e.jsx("button",{onClick:y,className:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors",children:"複製優惠券"}),r.status===ue.ACTIVE&&e.jsx("button",{onClick:()=>f(ue.PAUSED),className:"w-full bg-yellow-600 text-white py-2 px-4 rounded-lg hover:bg-yellow-700 transition-colors",children:"暫停優惠券"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"效果摘要"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"使用次數"}),e.jsx("span",{className:"font-medium",children:r.usage_count})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"分享次數"}),e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.total_shares)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"轉換率"}),e.jsxs("span",{className:"font-medium",children:[(l==null?void 0:l.conversion_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"總節省金額"}),e.jsxs("span",{className:"font-medium text-[#cc824d]",children:["$",n.reduce((u,h)=>u+h.discount_amount,0)]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"有效期資訊"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"開始時間"}),e.jsx("p",{className:"font-medium text-sm",children:new Date(r.start_date).toLocaleDateString("zh-TW")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"結束時間"}),e.jsx("p",{className:"font-medium text-sm",children:new Date(r.end_date).toLocaleDateString("zh-TW")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"剩餘時間"}),e.jsx("p",{className:"font-medium text-sm",children:new Date(r.end_date)>new Date?`${Math.ceil((new Date(r.end_date)-new Date)/(1e3*60*60*24))} 天`:"已過期"})]})]})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"優惠券不存在"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"找不到指定的優惠券資料"}),e.jsx("button",{onClick:()=>t("/admin/coupons"),className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"返回優惠券列表"})]})})})},nv=()=>{const{id:s}=Di(),t=ns(),r=!!s,[a,n]=m.useState({name:"",code:"",description:"",type:Q.FIXED_AMOUNT,value:"",start_date:"",end_date:"",usage_limit:"",user_limit:"",status:ue.DRAFT,conditions:{min_amount:"",max_discount:"",applicable_products:[],applicable_categories:[],user_groups:[],buy_quantity:"",get_quantity:""},stacking_rules:{can_stack:!1,stack_with_types:[],priority:1,max_stack_count:1}}),[i,l]=m.useState({}),[o,c]=m.useState(!1),[d,x]=m.useState([]),[p,f]=m.useState([]);m.useEffect(()=>{if(x([{id:"product1",name:"玫瑰精華面膜"},{id:"product2",name:"薰衣草舒緩霜"},{id:"product3",name:"維他命C精華液"},{id:"product4",name:"蜂蜜修護乳霜"},{id:"product5",name:"綠茶潔面慕斯"}]),f([{id:"skincare",name:"護膚品"},{id:"makeup",name:"彩妝"},{id:"fragrance",name:"香氛"},{id:"bodycare",name:"身體護理"}]),r)y();else{const C=new Date;C.setDate(C.getDate()+1);const E=new Date;E.setMonth(E.getMonth()+1),n(R=>({...R,start_date:C.toISOString().slice(0,16),end_date:E.toISOString().slice(0,16),code:b()}))}},[s,r]);const y=()=>{const C=At.getCouponById(s);C&&n({...C,start_date:new Date(C.start_date).toISOString().slice(0,16),end_date:new Date(C.end_date).toISOString().slice(0,16),value:C.value.toString(),usage_limit:C.usage_limit===-1?"":C.usage_limit.toString(),user_limit:C.user_limit===-1?"":C.user_limit.toString(),conditions:{...C.conditions,min_amount:C.conditions.min_amount.toString(),max_discount:C.conditions.max_discount?C.conditions.max_discount.toString():"",buy_quantity:C.conditions.buy_quantity?C.conditions.buy_quantity.toString():"",get_quantity:C.conditions.get_quantity?C.conditions.get_quantity.toString():""}})},b=()=>{const C="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let E="";for(let R=0;R<8;R++)E+=C.charAt(Math.floor(Math.random()*C.length));return E},v=()=>{const C={};return a.name.trim()||(C.name="請輸入優惠券名稱"),a.code.trim()?/^[A-Z0-9]{3,20}$/.test(a.code)||(C.code="優惠券代碼只能包含大寫字母和數字，長度3-20位"):C.code="請輸入優惠券代碼",a.description.trim()||(C.description="請輸入優惠券描述"),(!a.value||parseFloat(a.value)<=0)&&(C.value="請輸入有效的優惠值"),a.type===Q.PERCENTAGE&&parseFloat(a.value)>100&&(C.value="百分比折扣不能超過100%"),a.start_date||(C.start_date="請選擇開始時間"),a.end_date||(C.end_date="請選擇結束時間"),a.start_date&&a.end_date&&new Date(a.start_date)>=new Date(a.end_date)&&(C.end_date="結束時間必須晚於開始時間"),(!a.conditions.min_amount||parseFloat(a.conditions.min_amount)<0)&&(C.min_amount="請輸入有效的最低消費金額"),a.type===Q.BOGO&&((!a.conditions.buy_quantity||parseInt(a.conditions.buy_quantity)<=0)&&(C.buy_quantity="請輸入有效的購買數量"),(!a.conditions.get_quantity||parseInt(a.conditions.get_quantity)<=0)&&(C.get_quantity="請輸入有效的贈送數量")),l(C),Object.keys(C).length===0},S=async C=>{if(C.preventDefault(),!!v()){c(!0);try{const E={...a,value:parseFloat(a.value),start_date:new Date(a.start_date).toISOString(),end_date:new Date(a.end_date).toISOString(),usage_limit:a.usage_limit?parseInt(a.usage_limit):-1,user_limit:a.user_limit?parseInt(a.user_limit):-1,conditions:{...a.conditions,min_amount:parseFloat(a.conditions.min_amount),max_discount:a.conditions.max_discount?parseFloat(a.conditions.max_discount):null,buy_quantity:a.conditions.buy_quantity?parseInt(a.conditions.buy_quantity):null,get_quantity:a.conditions.get_quantity?parseInt(a.conditions.get_quantity):null}};let R;r?R=At.updateCoupon(s,E):R=At.createCoupon(E),R?t("/admin/coupons"):l({submit:"保存失敗，請重試"})}catch(E){l({submit:"保存失敗："+E.message})}finally{c(!1)}}},_=(C,E)=>{n(R=>({...R,[C]:E})),i[C]&&l(R=>({...R,[C]:""}))},w=(C,E)=>{n(R=>({...R,conditions:{...R.conditions,[C]:E}})),i[C]&&l(R=>({...R,[C]:""}))},N=(C,E)=>{n(R=>({...R,stacking_rules:{...R.stacking_rules,[C]:E}}))},u=(C,E)=>C.includes(E)?C.filter(R=>R!==E):[...C,E],h=({label:C,name:E,type:R="text",value:k,onChange:O,error:P,required:$=!1,...I})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[C,$&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:R,name:E,value:k,onChange:L=>O(E,L.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${P?"border-red-500":"border-gray-300"}`,...I}),P&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:P})]}),g=({label:C,name:E,value:R,onChange:k,options:O,error:P,required:$=!1})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[C,$&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("select",{name:E,value:R,onChange:I=>k(E,I.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${P?"border-red-500":"border-gray-300"}`,children:O.map(I=>e.jsx("option",{value:I.value,children:I.label},I.value))}),P&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:P})]}),j=({label:C,name:E,value:R,onChange:k,error:O,required:P=!1,...$})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[C,P&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{name:E,value:R,onChange:I=>k(E,I.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent ${O?"border-red-500":"border-gray-300"}`,rows:3,...$}),O&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:O})]}),T=({label:C,options:E,selectedValues:R,onChange:k})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:C}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:E.map(O=>e.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R.includes(O.id),onChange:()=>k(u(R,O.id)),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx("span",{className:"text-sm",children:O.name})]},O.id))})]});return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/admin/coupons"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r?"編輯優惠券":"新增優惠券"}),e.jsx("p",{className:"text-gray-600",children:r?"修改優惠券設定和條件":"創建新的優惠券"})]})]})})}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"基本資訊"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{label:"優惠券名稱",name:"name",value:a.name,onChange:_,error:i.name,required:!0,placeholder:"例：新年特惠"}),e.jsx(h,{label:"優惠券代碼",name:"code",value:a.code,onChange:_,error:i.code,required:!0,placeholder:"例：NY2024",style:{textTransform:"uppercase"}}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(j,{label:"優惠券描述",name:"description",value:a.description,onChange:_,error:i.description,required:!0,placeholder:"描述優惠券的用途和特色"})}),e.jsx(g,{label:"優惠券類型",name:"type",value:a.type,onChange:_,error:i.type,required:!0,options:[{value:Q.FIXED_AMOUNT,label:"固定金額折扣"},{value:Q.PERCENTAGE,label:"百分比折扣"},{value:Q.FREE_SHIPPING,label:"免運費"},{value:Q.BOGO,label:"買N送N"},{value:Q.BUNDLE,label:"組合優惠"}]}),e.jsx(h,{label:a.type===Q.PERCENTAGE?"折扣百分比 (%)":a.type===Q.FREE_SHIPPING?"免運門檻":"折扣金額",name:"value",type:"number",value:a.value,onChange:_,error:i.value,required:!0,min:"0",max:a.type===Q.PERCENTAGE?"100":void 0,step:a.type===Q.PERCENTAGE?"0.1":"1"}),e.jsx(g,{label:"優惠券狀態",name:"status",value:a.status,onChange:_,options:[{value:ue.DRAFT,label:"草稿"},{value:ue.ACTIVE,label:"啟用"},{value:ue.PAUSED,label:"暫停"}]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"時間設定"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{label:"開始時間",name:"start_date",type:"datetime-local",value:a.start_date,onChange:_,error:i.start_date,required:!0}),e.jsx(h,{label:"結束時間",name:"end_date",type:"datetime-local",value:a.end_date,onChange:_,error:i.end_date,required:!0})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"使用限制"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{label:"總使用次數限制",name:"usage_limit",type:"number",value:a.usage_limit,onChange:_,placeholder:"留空表示無限制",min:"1"}),e.jsx(h,{label:"每人使用次數限制",name:"user_limit",type:"number",value:a.user_limit,onChange:_,placeholder:"留空表示無限制",min:"1"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"使用條件"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{label:"最低消費金額",name:"min_amount",type:"number",value:a.conditions.min_amount,onChange:(C,E)=>w("min_amount",E),error:i.min_amount,required:!0,min:"0",step:"0.01"}),(a.type===Q.PERCENTAGE||a.type===Q.FIXED_AMOUNT)&&e.jsx(h,{label:"最高折扣金額",name:"max_discount",type:"number",value:a.conditions.max_discount,onChange:(C,E)=>w("max_discount",E),placeholder:"留空表示無限制",min:"0",step:"0.01"})]}),a.type===Q.BOGO&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{label:"購買數量",name:"buy_quantity",type:"number",value:a.conditions.buy_quantity,onChange:(C,E)=>w("buy_quantity",E),error:i.buy_quantity,required:!0,min:"1"}),e.jsx(h,{label:"贈送數量",name:"get_quantity",type:"number",value:a.conditions.get_quantity,onChange:(C,E)=>w("get_quantity",E),error:i.get_quantity,required:!0,min:"1"})]}),e.jsx(T,{label:"適用商品",options:d,selectedValues:a.conditions.applicable_products,onChange:C=>w("applicable_products",C)}),e.jsx(T,{label:"適用分類",options:p,selectedValues:a.conditions.applicable_categories,onChange:C=>w("applicable_categories",C)})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"疊加規則"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"can_stack",checked:a.stacking_rules.can_stack,onChange:C=>N("can_stack",C.target.checked),className:"mr-3 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx("label",{htmlFor:"can_stack",className:"text-sm font-medium text-gray-700",children:"允許與其他優惠券疊加使用"})]}),a.stacking_rules.can_stack&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-[#cc824d]/20",children:[e.jsx(T,{label:"可疊加的優惠券類型",options:[{id:Q.FIXED_AMOUNT,name:"固定金額折扣"},{id:Q.PERCENTAGE,name:"百分比折扣"},{id:Q.FREE_SHIPPING,name:"免運費"}],selectedValues:a.stacking_rules.stack_with_types,onChange:C=>N("stack_with_types",C)}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(h,{label:"優先級 (1-10)",name:"priority",type:"number",value:a.stacking_rules.priority,onChange:(C,E)=>N("priority",parseInt(E)),min:"1",max:"10"}),e.jsx(h,{label:"最大疊加數量",name:"max_stack_count",type:"number",value:a.stacking_rules.max_stack_count,onChange:(C,E)=>N("max_stack_count",parseInt(E)),min:"1",max:"5"})]})]})]})]}),i.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-700",children:i.submit})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>t("/admin/coupons"),className:"px-6 py-3 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"取消"}),e.jsx("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"保存中...":r?"更新優惠券":"創建優惠券"})]})})]})]})})},UA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(null),[n,i]=m.useState({can_stack:!1,stack_with_types:[],priority:1,max_stack_count:1,exclusive_with:[],global_rules:{max_total_discount_percentage:50,min_order_value_for_stacking:100,allow_same_type_stacking:!1}}),[l,o]=m.useState([]),[c,d]=m.useState(null);m.useEffect(()=>{x(),p()},[]);const x=()=>{const N=At.getAllCoupons();t(N)},p=()=>{o([{id:1,name:"百分比折扣 + 免運費",coupons:["SAVE20","FREESHIP"],order_value:150,expected_result:"可疊加",description:"20%折扣券與免運費券疊加使用"},{id:2,name:"兩個固定金額折扣",coupons:["SAVE50","SAVE30"],order_value:200,expected_result:"不可疊加",description:"同類型優惠券不允許疊加"},{id:3,name:"超過最大折扣限制",coupons:["SAVE30","SAVE40"],order_value:100,expected_result:"部分可用",description:"總折扣超過50%限制"},{id:4,name:"低於最低訂單金額",coupons:["SAVE20","FREESHIP"],order_value:80,expected_result:"不可疊加",description:"訂單金額低於疊加最低要求"}])},f=N=>{a(N),i(N.stacking_rules||{can_stack:!1,stack_with_types:[],priority:1,max_stack_count:1,exclusive_with:[],global_rules:{max_total_discount_percentage:50,min_order_value_for_stacking:100,allow_same_type_stacking:!1}})},y=(N,u)=>{i(h=>({...h,[N]:u}))},b=(N,u)=>{i(h=>({...h,global_rules:{...h.global_rules,[N]:u}}))},v=()=>{if(!r)return;const N={...r,stacking_rules:n};At.updateCoupon(r.id,N)?(x(),alert("疊加規則已保存！")):alert("保存失敗，請重試")},S=N=>{const u={scenario_id:N.id,can_stack:!0,applied_coupons:N.coupons,total_discount:0,discount_breakdown:[],warnings:[],errors:[]},h=N.coupons.map(E=>s.find(R=>R.code===E)).filter(Boolean);N.order_value<n.global_rules.min_order_value_for_stacking&&(u.can_stack=!1,u.errors.push("訂單金額低於疊加最低要求"));const g=h.map(E=>E.type);g.length!==new Set(g).size&&!n.global_rules.allow_same_type_stacking&&(u.can_stack=!1,u.errors.push("同類型優惠券不允許疊加"));let T=0;h.forEach(E=>{let R=0;E.type===Q.PERCENTAGE?R=N.order_value*(E.value/100):E.type===Q.FIXED_AMOUNT&&(R=E.value),T+=R,u.discount_breakdown.push({coupon_code:E.code,coupon_type:E.type,discount_amount:R})}),u.total_discount=T;const C=T/N.order_value*100;return C>n.global_rules.max_total_discount_percentage&&u.warnings.push(`總折扣 ${C.toFixed(1)}% 超過限制 ${n.global_rules.max_total_discount_percentage}%`),u},_=()=>{const N=l.map(u=>({scenario:u,result:S(u)}));d(N)},w=({type:N})=>{const u={[Q.FIXED_AMOUNT]:"bg-blue-100 text-blue-800",[Q.PERCENTAGE]:"bg-green-100 text-green-800",[Q.FREE_SHIPPING]:"bg-purple-100 text-purple-800",[Q.BOGO]:"bg-orange-100 text-orange-800",[Q.BUNDLE]:"bg-pink-100 text-pink-800"},h={[Q.FIXED_AMOUNT]:"固定金額",[Q.PERCENTAGE]:"百分比",[Q.FREE_SHIPPING]:"免運費",[Q.BOGO]:"買N送N",[Q.BUNDLE]:"組合優惠"};return e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${u[N]}`,children:h[N]})};return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"疊加規則管理"}),e.jsx("p",{className:"text-gray-600",children:"管理優惠券疊加規則和測試疊加效果"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"選擇優惠券"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.map(N=>{var u,h;return e.jsxs("div",{onClick:()=>f(N),className:`p-4 border rounded-lg cursor-pointer transition-all ${(r==null?void 0:r.id)===N.id?"border-[#cc824d] bg-[#cc824d]/10":"border-gray-200 hover:border-[#cc824d]/50 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:N.name}),e.jsx(w,{type:N.type})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:N.code}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["疊加: ",(u=N.stacking_rules)!=null&&u.can_stack?"允許":"不允許"]}),((h=N.stacking_rules)==null?void 0:h.can_stack)&&e.jsxs("span",{className:"text-xs text-[#cc824d]",children:["優先級: ",N.stacking_rules.priority]})]})]},N.id)})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"疊加規則設定"}),r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:r.code}),e.jsx(w,{type:r.type})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"can_stack",checked:n.can_stack,onChange:N=>y("can_stack",N.target.checked),className:"mr-3 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx("label",{htmlFor:"can_stack",className:"font-medium text-gray-700",children:"允許疊加使用"})]}),n.can_stack&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-[#cc824d]/20",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"可疊加的優惠券類型"}),e.jsx("div",{className:"space-y-2",children:Object.values(Q).map(N=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.stack_with_types.includes(N),onChange:u=>{const h=u.target.checked?[...n.stack_with_types,N]:n.stack_with_types.filter(g=>g!==N);y("stack_with_types",h)},className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx(w,{type:N})]},N))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"優先級 (1-10)"}),e.jsx("input",{type:"number",min:"1",max:"10",value:n.priority,onChange:N=>y("priority",parseInt(N.target.value)),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大疊加數量"}),e.jsx("input",{type:"number",min:"1",max:"5",value:n.max_stack_count,onChange:N=>y("max_stack_count",parseInt(N.target.value)),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"全域疊加規則"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"最大總折扣百分比 (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:n.global_rules.max_total_discount_percentage,onChange:N=>b("max_total_discount_percentage",parseInt(N.target.value)),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"疊加最低訂單金額"}),e.jsx("input",{type:"number",min:"0",value:n.global_rules.min_order_value_for_stacking,onChange:N=>b("min_order_value_for_stacking",parseInt(N.target.value)),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"allow_same_type",checked:n.global_rules.allow_same_type_stacking,onChange:N=>b("allow_same_type_stacking",N.target.checked),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx("label",{htmlFor:"allow_same_type",className:"text-sm text-gray-600",children:"允許同類型優惠券疊加"})]})]})]})]})]}),e.jsx("button",{onClick:v,className:"w-full bg-[#cc824d] text-white py-3 rounded-lg hover:bg-[#b3723f] transition-colors",children:"保存疊加規則"})]}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("p",{children:"請選擇一個優惠券來設定疊加規則"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"疊加測試"}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors text-sm",children:"執行測試"})]}),e.jsx("div",{className:"space-y-4 mb-6",children:l.map(N=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:N.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:N.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:N.coupons.map(u=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:u},u))}),e.jsxs("p",{className:"text-sm text-gray-500",children:["訂單金額: $",N.order_value," | 預期: ",N.expected_result]})]},N.id))}),c&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"測試結果"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:c.map(({scenario:N,result:u})=>e.jsxs("div",{className:`p-3 rounded-lg border ${u.can_stack?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:N.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${u.can_stack?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.can_stack?"可疊加":"不可疊加"})]}),u.total_discount>0&&e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["總折扣: $",u.total_discount.toFixed(2)]}),u.warnings.length>0&&e.jsx("div",{className:"text-xs text-orange-600 mb-1",children:u.warnings.map((h,g)=>e.jsxs("p",{children:["⚠️ ",h]},g))}),u.errors.length>0&&e.jsx("div",{className:"text-xs text-red-600",children:u.errors.map((h,g)=>e.jsxs("p",{children:["❌ ",h]},g))})]},N.id))})]})]})]})]})})},BA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(null),[n,i]=m.useState({enabled:!1,platforms:{facebook:!1,instagram:!1,line:!1,email:!1,sms:!1},share_reward:{enabled:!1,type:"percentage",value:0,max_shares:-1,reward_per_successful_referral:!0},custom_message:"",share_link_template:"",tracking:{track_shares:!0,track_conversions:!0,attribution_window:30}}),[l,o]=m.useState({}),[c,d]=m.useState("");m.useEffect(()=>{x(),p()},[]);const x=()=>{const u=At.getAllCoupons();t(u)},p=()=>{o({total_shares:1247,platform_breakdown:{facebook:456,instagram:321,line:289,email:156,sms:25},conversion_rate:12.5,total_conversions:156,top_sharers:[{user_id:"user001",name:"張小美",shares:23,conversions:5},{user_id:"user002",name:"李小花",shares:18,conversions:4},{user_id:"user003",name:"王小雅",shares:15,conversions:3}]})},f=u=>{a(u);const h=u.sharing_settings||{enabled:!1,platforms:{facebook:!1,instagram:!1,line:!1,email:!1,sms:!1},share_reward:{enabled:!1,type:"percentage",value:0,max_shares:-1,reward_per_successful_referral:!0},custom_message:`🎉 快來使用我的專屬優惠券 ${u.code}！享受 ${u.type==="percentage"?u.value+"%":"$"+u.value} 優惠！`,share_link_template:`https://marelle.com/coupon/${u.code}?ref={user_id}`,tracking:{track_shares:!0,track_conversions:!0,attribution_window:30}};i(h),y(u)},y=u=>{`${u.code}`,d(`data:image/svg+xml;base64,${btoa(`
      <svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
        <rect width="200" height="200" fill="white"/>
        <rect x="20" y="20" width="160" height="160" fill="none" stroke="black" stroke-width="2"/>
        <text x="100" y="100" text-anchor="middle" font-family="Arial" font-size="12">QR Code</text>
        <text x="100" y="120" text-anchor="middle" font-family="Arial" font-size="8">${u.code}</text>
      </svg>
    `)}`)},b=(u,h)=>{i(g=>{const j={...g},T=u.split(".");let C=j;for(let E=0;E<T.length-1;E++)C=C[T[E]];return C[T[T.length-1]]=h,j})},v=()=>{if(!r)return;const u={...r,sharing_settings:n};At.updateCoupon(r.id,u)?(x(),alert("分享設定已保存！")):alert("保存失敗，請重試")},S=()=>{if(!r)return{};const h=`https://marelle.com/coupon/${r.code}`,g=encodeURIComponent(n.custom_message);return{facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(h)}&quote=${g}`,line:`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(h)}&text=${g}`,email:`mailto:?subject=${encodeURIComponent("Marelle 優惠券分享")}&body=${g}%0A%0A${encodeURIComponent(h)}`,copy:h}},_=u=>{navigator.clipboard.writeText(u).then(()=>{alert("已複製到剪貼板！")})},w=()=>{if(!c)return;const u=document.createElement("a");u.download=`${r.code}_qrcode.svg`,u.href=c,u.click()},N=({platform:u,label:h,icon:g})=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:g}),e.jsx("span",{className:"font-medium text-gray-700",children:h})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.platforms[u],onChange:j=>b(`platforms.${u}`,j.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#cc824d]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#cc824d]"})]})]});return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"分享管理"}),e.jsx("p",{className:"text-gray-600",children:"設定優惠券分享功能和追蹤分享效果"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"選擇優惠券"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.map(u=>{var h,g;return e.jsxs("div",{onClick:()=>f(u),className:`p-4 border rounded-lg cursor-pointer transition-all ${(r==null?void 0:r.id)===u.id?"border-[#cc824d] bg-[#cc824d]/10":"border-gray-200 hover:border-[#cc824d]/50 hover:bg-gray-50"}`,children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:u.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.code}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["分享: ",(h=u.sharing_settings)!=null&&h.enabled?"已啟用":"未啟用"]}),((g=u.sharing_settings)==null?void 0:g.enabled)&&e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})]})]},u.id)})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"分享設定"}),r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:r.code}),e.jsx("span",{className:"px-2 py-1 bg-[#cc824d]/10 text-[#cc824d] text-xs rounded-full",children:r.type==="percentage"?`${r.value}% 折扣`:`$${r.value} 折扣`})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"啟用分享功能"}),e.jsx("p",{className:"text-sm text-gray-600",children:"允許用戶分享此優惠券"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.enabled,onChange:u=>b("enabled",u.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#cc824d]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#cc824d]"})]})]}),n.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"分享平台"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{platform:"facebook",label:"Facebook",icon:"📘"}),e.jsx(N,{platform:"instagram",label:"Instagram",icon:"📷"}),e.jsx(N,{platform:"line",label:"LINE",icon:"💬"}),e.jsx(N,{platform:"email",label:"電子郵件",icon:"📧"}),e.jsx(N,{platform:"sms",label:"簡訊",icon:"💬"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"分享獎勵"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.share_reward.enabled,onChange:u=>b("share_reward.enabled",u.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#cc824d]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#cc824d]"})]})]}),n.share_reward.enabled&&e.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-[#cc824d]/20",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"獎勵類型"}),e.jsxs("select",{value:n.share_reward.type,onChange:u=>b("share_reward.type",u.target.value),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"percentage",children:"百分比折扣"}),e.jsx("option",{value:"fixed_amount",children:"固定金額"}),e.jsx("option",{value:"points",children:"點數"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"獎勵值"}),e.jsx("input",{type:"number",min:"0",value:n.share_reward.value,onChange:u=>b("share_reward.value",parseFloat(u.target.value)),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大分享次數"}),e.jsx("input",{type:"number",min:"-1",value:n.share_reward.max_shares,onChange:u=>b("share_reward.max_shares",parseInt(u.target.value)),placeholder:"-1 表示無限制",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"reward_per_referral",checked:n.share_reward.reward_per_successful_referral,onChange:u=>b("share_reward.reward_per_successful_referral",u.target.checked),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx("label",{htmlFor:"reward_per_referral",className:"text-sm text-gray-600",children:"僅在成功推薦時給予獎勵"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"自訂分享訊息"}),e.jsx("textarea",{value:n.custom_message,onChange:u=>b("custom_message",u.target.value),placeholder:"輸入分享時顯示的訊息...",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",rows:3}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["可使用變數: ","{user_name}",", ","{coupon_code}",", ","{discount_value}"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"追蹤設定"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"追蹤分享次數"}),e.jsx("input",{type:"checkbox",checked:n.tracking.track_shares,onChange:u=>b("tracking.track_shares",u.target.checked),className:"text-[#cc824d] focus:ring-[#cc824d]"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"追蹤轉換率"}),e.jsx("input",{type:"checkbox",checked:n.tracking.track_conversions,onChange:u=>b("tracking.track_conversions",u.target.checked),className:"text-[#cc824d] focus:ring-[#cc824d]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"歸因視窗 (天)"}),e.jsx("input",{type:"number",min:"1",max:"90",value:n.tracking.attribution_window,onChange:u=>b("tracking.attribution_window",parseInt(u.target.value)),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]})]})]}),e.jsx("button",{onClick:v,className:"w-full bg-[#cc824d] text-white py-3 rounded-lg hover:bg-[#b3723f] transition-colors",children:"保存分享設定"})]}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),e.jsx("p",{children:"請選擇一個優惠券來設定分享功能"})]})]}),e.jsxs("div",{className:"space-y-6",children:[r&&n.enabled&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"分享工具"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block p-4 bg-white rounded-lg border",children:c&&e.jsx("img",{src:c,alt:"QR Code",className:"w-32 h-32 mx-auto"})}),e.jsx("button",{onClick:w,className:"mt-2 text-sm text-[#cc824d] hover:text-[#b3723f]",children:"下載 QR Code"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"快速分享"}),e.jsx("div",{className:"space-y-2",children:Object.entries(S()).map(([u,h])=>e.jsx("button",{onClick:()=>u==="copy"?_(h):window.open(h,"_blank"),className:"w-full p-3 text-left border rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:u==="copy"?"複製連結":u}),e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})},u))})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"分享統計"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-[#cc824d]",children:l.total_shares}),e.jsx("p",{className:"text-sm text-gray-600",children:"總分享次數"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[l.conversion_rate,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"轉換率"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"平台分析"}),e.jsx("div",{className:"space-y-2",children:Object.entries(l.platform_breakdown||{}).map(([u,h])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 capitalize",children:u}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full",style:{width:`${h/l.total_shares*100}%`}})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 w-8",children:h})]})]},u))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"熱門分享者"}),e.jsx("div",{className:"space-y-2",children:(l.top_sharers||[]).map((u,h)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-[#cc824d] text-white text-xs rounded-full flex items-center justify-center",children:h+1}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[u.shares," 次分享"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[u.conversions," 次轉換"]})]})]},u.user_id))})]})]})]})]})]})]})})},zA=()=>e.jsxs(aa,{children:[e.jsx(q,{index:!0,element:e.jsx($A,{})}),e.jsx(q,{path:"new",element:e.jsx(nv,{})}),e.jsx(q,{path:":id",element:e.jsx(VA,{})}),e.jsx(q,{path:":id/edit",element:e.jsx(nv,{})}),e.jsx(q,{path:"stacking-rules",element:e.jsx(UA,{})}),e.jsx(q,{path:"sharing",element:e.jsx(BA,{})})]}),Oe={CONVENIENCE_STORE:"convenience_store",HOME_DELIVERY:"home_delivery",POST_OFFICE:"post_office",EXPRESS:"express",PICKUP:"pickup"},H={CREATED:"created",PICKED_UP:"picked_up",IN_TRANSIT:"in_transit",OUT_FOR_DELIVERY:"out_for_delivery",DELIVERED:"delivered",READY_FOR_PICKUP:"ready_for_pickup",PICKED_UP_BY_CUSTOMER:"picked_up_by_customer",FAILED_DELIVERY:"failed_delivery",RETURNED:"returned",CANCELLED:"cancelled"},er={WEIGHT:"weight",VOLUME:"volume",AMOUNT:"amount",QUANTITY:"quantity",FIXED:"fixed"},$n={CONVENIENCE_STORE:"convenience_store",HOME_PICKUP:"home_pickup",POST_OFFICE:"post_office"},Vn={CUSTOMER_PAYS:"customer_pays",MERCHANT_PAYS:"merchant_pays",CONDITIONAL:"conditional"};class WA{constructor(){this.shipments=[],this.shippingRates=[],this.returns=[],this.trackingHistory=[],this.analytics={},this.initializeData()}initializeData(){const t=localStorage.getItem("marelle-shipments"),r=localStorage.getItem("marelle-shipping-rates"),a=localStorage.getItem("marelle-returns");t?this.shipments=JSON.parse(t):this.generateSampleShipments(),r?this.shippingRates=JSON.parse(r):this.generateSampleShippingRates(),a?this.returns=JSON.parse(a):this.generateSampleReturns(),this.generateAnalytics()}generateSampleShipments(){const t=[{id:"ship_001",orderId:"order_001",orderNumber:"M2024091601",logisticsType:Oe.HOME_DELIVERY,status:H.IN_TRANSIT,trackingNumber:"TW240916001",senderInfo:{name:"Marelle Beauty",phone:"02-2345-6789",address:"台北市信義區松高路123號"},receiverInfo:{name:"陳小美",phone:"0912-345-678",email:"chen@example.com",address:"台北市大安區復興南路456號"},packageInfo:{weight:1.2,volume:.015,items:[{name:"玫瑰精華面膜",quantity:2},{name:"薰衣草舒緩霜",quantity:1}]},shippingFee:120,estimatedDelivery:new Date("2024-09-18").toISOString(),actualDelivery:null,createdAt:new Date("2024-09-16T10:30:00").toISOString(),updatedAt:new Date("2024-09-16T14:20:00").toISOString()},{id:"ship_002",orderId:"order_002",orderNumber:"M2024091602",logisticsType:Oe.CONVENIENCE_STORE,status:H.READY_FOR_PICKUP,trackingNumber:"CV240916002",senderInfo:{name:"Marelle Beauty",phone:"02-2345-6789",address:"台北市信義區松高路123號"},receiverInfo:{name:"王小雅",phone:"0987-654-321",email:"wang@example.com",storeInfo:{id:"7-11_001",name:"統一超商復興門市",address:"台北市大安區復興南路789號",phone:"02-2708-1234"}},packageInfo:{weight:.8,volume:.01,items:[{name:"維他命C精華液",quantity:1},{name:"蜂蜜修護乳霜",quantity:1}]},shippingFee:60,estimatedDelivery:new Date("2024-09-17").toISOString(),actualDelivery:null,createdAt:new Date("2024-09-16T09:15:00").toISOString(),updatedAt:new Date("2024-09-16T16:45:00").toISOString()},{id:"ship_003",orderId:"order_003",orderNumber:"M2024091603",logisticsType:Oe.EXPRESS,status:H.DELIVERED,trackingNumber:"EX240915001",senderInfo:{name:"Marelle Beauty",phone:"02-2345-6789",address:"台北市信義區松高路123號"},receiverInfo:{name:"李小花",phone:"0956-789-012",email:"lee@example.com",address:"新北市板橋區文化路321號"},packageInfo:{weight:2.1,volume:.025,items:[{name:"綠茶潔面慕斯",quantity:3},{name:"玫瑰精華面膜",quantity:2}]},shippingFee:150,estimatedDelivery:new Date("2024-09-16").toISOString(),actualDelivery:new Date("2024-09-16T11:30:00").toISOString(),createdAt:new Date("2024-09-15T14:20:00").toISOString(),updatedAt:new Date("2024-09-16T11:30:00").toISOString()}];this.shipments=t,this.saveToStorage()}generateSampleShippingRates(){const t=[{id:"rate_001",name:"一般宅配",logisticsTypes:[Oe.HOME_DELIVERY],calculationMethod:er.WEIGHT,baseRate:80,tiers:[{min:0,max:1,rate:80},{min:1,max:3,rate:120},{min:3,max:5,rate:160},{min:5,max:999,rate:200}],freeShippingThreshold:1e3,isActive:!0,createdAt:new Date().toISOString()},{id:"rate_002",name:"超商取貨",logisticsTypes:[Oe.CONVENIENCE_STORE],calculationMethod:er.FIXED,baseRate:60,tiers:[{min:0,max:999,rate:60}],freeShippingThreshold:800,isActive:!0,createdAt:new Date().toISOString()},{id:"rate_003",name:"快遞配送",logisticsTypes:[Oe.EXPRESS],calculationMethod:er.WEIGHT,baseRate:150,tiers:[{min:0,max:1,rate:150},{min:1,max:3,rate:180},{min:3,max:5,rate:220},{min:5,max:999,rate:280}],freeShippingThreshold:1500,isActive:!0,createdAt:new Date().toISOString()}];this.shippingRates=t,this.saveToStorage()}generateSampleReturns(){const t=[{id:"return_001",orderId:"order_001",shipmentId:"ship_001",returnMethod:$n.HOME_PICKUP,reason:"商品瑕疵",status:"processing",returnTrackingNumber:"RT240916001",shippingFee:120,feeResponsibility:Vn.MERCHANT_PAYS,items:[{name:"玫瑰精華面膜",quantity:1,reason:"包裝破損"}],customerInfo:{name:"陳小美",phone:"0912-345-678",address:"台北市大安區復興南路456號"},expectedReturnDate:new Date("2024-09-18").toISOString(),actualReturnDate:null,refundAmount:850,createdAt:new Date("2024-09-16T15:30:00").toISOString(),updatedAt:new Date("2024-09-16T15:30:00").toISOString()},{id:"return_002",orderId:"order_004",shipmentId:"ship_004",returnMethod:$n.CONVENIENCE_STORE,reason:"不符合期待",status:"completed",returnTrackingNumber:"RT240915001",shippingFee:60,feeResponsibility:Vn.CUSTOMER_PAYS,items:[{name:"維他命C精華液",quantity:1,reason:"不適合膚質"}],customerInfo:{name:"張小華",phone:"0923-456-789"},expectedReturnDate:new Date("2024-09-16").toISOString(),actualReturnDate:new Date("2024-09-16T09:20:00").toISOString(),refundAmount:1140,createdAt:new Date("2024-09-15T11:15:00").toISOString(),updatedAt:new Date("2024-09-16T10:30:00").toISOString()}];this.returns=t,this.saveToStorage()}generateAnalytics(){this.analytics={deliveryPerformance:{averageDeliveryTime:1.8,onTimeDeliveryRate:92.5,failedDeliveryRate:2.1,customerSatisfactionScore:4.6},costAnalysis:{totalShippingCosts:156420,averageCostPerOrder:118,freeShippingImpact:23.5,returnShippingCosts:8940},methodPreferences:{convenienceStorePickup:45,homeDelivery:38,expressDelivery:12,postOfficeDelivery:5},regionalAnalysis:[{region:"台北市",orderVolume:856,averageDeliveryTime:1.2,shippingCostPerOrder:95},{region:"新北市",orderVolume:623,averageDeliveryTime:1.5,shippingCostPerOrder:108},{region:"桃園市",orderVolume:412,averageDeliveryTime:1.8,shippingCostPerOrder:125},{region:"台中市",orderVolume:387,averageDeliveryTime:2.1,shippingCostPerOrder:135}]}}saveToStorage(){localStorage.setItem("marelle-shipments",JSON.stringify(this.shipments)),localStorage.setItem("marelle-shipping-rates",JSON.stringify(this.shippingRates)),localStorage.setItem("marelle-returns",JSON.stringify(this.returns))}getAllShipments(){return this.shipments}getShipmentById(t){return this.shipments.find(r=>r.id===t)}getShipmentByOrderId(t){return this.shipments.find(r=>r.orderId===t)}createShipment(t){try{const r={id:`ship_${Date.now()}`,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.shipments.unshift(r),this.saveToStorage(),r}catch(r){return console.error("Error creating shipment:",r),null}}updateShipment(t,r){try{const a=this.shipments.findIndex(n=>n.id===t);return a===-1?!1:(this.shipments[a]={...this.shipments[a],...r,updatedAt:new Date().toISOString()},this.saveToStorage(),this.shipments[a])}catch(a){return console.error("Error updating shipment:",a),!1}}updateShipmentStatus(t,r,a="",n=""){try{if(!this.getShipmentById(t))return!1;const l=this.updateShipment(t,{status:r});return this.addTrackingHistory(t,r,a,n),l}catch(i){return console.error("Error updating shipment status:",i),!1}}deleteShipment(t){try{const r=this.shipments.findIndex(a=>a.id===t);return r===-1?!1:(this.shipments.splice(r,1),this.saveToStorage(),!0)}catch(r){return console.error("Error deleting shipment:",r),!1}}getAllShippingRates(){return this.shippingRates}getShippingRateById(t){return this.shippingRates.find(r=>r.id===t)}createShippingRate(t){try{const r={id:`rate_${Date.now()}`,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.shippingRates.unshift(r),this.saveToStorage(),r}catch(r){return console.error("Error creating shipping rate:",r),null}}updateShippingRate(t,r){try{const a=this.shippingRates.findIndex(n=>n.id===t);return a===-1?!1:(this.shippingRates[a]={...this.shippingRates[a],...r,updatedAt:new Date().toISOString()},this.saveToStorage(),this.shippingRates[a])}catch(a){return console.error("Error updating shipping rate:",a),!1}}calculateShippingFee(t,r,a=0){const n=this.shippingRates.filter(l=>l.isActive&&l.logisticsTypes.includes(t));if(n.length===0)return{fee:0,reason:"無適用運費設定"};const i=n[0];if(i.freeShippingThreshold&&a>=i.freeShippingThreshold)return{fee:0,reason:"滿額免運"};if(i.calculationMethod===er.FIXED)return{fee:i.baseRate,reason:"固定費用"};if(i.calculationMethod===er.WEIGHT){const l=i.tiers.find(o=>r>=o.min&&r<o.max);if(l)return{fee:l.rate,reason:`重量 ${r}kg`}}return{fee:i.baseRate,reason:"基本費率"}}getAllReturns(){return this.returns}getReturnById(t){return this.returns.find(r=>r.id===t)}createReturn(t){try{const r={id:`return_${Date.now()}`,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.returns.unshift(r),this.saveToStorage(),r}catch(r){return console.error("Error creating return:",r),null}}updateReturn(t,r){try{const a=this.returns.findIndex(n=>n.id===t);return a===-1?!1:(this.returns[a]={...this.returns[a],...r,updatedAt:new Date().toISOString()},this.saveToStorage(),this.returns[a])}catch(a){return console.error("Error updating return:",a),!1}}addTrackingHistory(t,r,a="",n=""){this.trackingHistory||(this.trackingHistory=[]);const i={id:`track_${Date.now()}`,shipmentId:t,status:r,location:a,description:n,timestamp:new Date().toISOString()};return this.trackingHistory.unshift(i),i}getTrackingHistory(t){return this.trackingHistory?this.trackingHistory.filter(r=>r.shipmentId===t):[]}getLogisticsAnalytics(){return this.analytics}getShipmentStatusStats(){const t={};return Object.values(H).forEach(r=>{t[r]=this.shipments.filter(a=>a.status===r).length}),t}getShippingRevenueStats(){const t=this.shipments.reduce((a,n)=>a+n.shippingFee,0),r=this.shipments.length>0?t/this.shipments.length:0;return{totalRevenue:t,avgRevenuePerOrder:r,totalOrders:this.shipments.length}}getLogisticsTypeStats(){const t={};return Object.values(Oe).forEach(r=>{t[r]=this.shipments.filter(a=>a.logisticsType===r).length}),t}searchShipments(t){if(!t)return this.shipments;const r=t.toLowerCase();return this.shipments.filter(a=>a.orderNumber.toLowerCase().includes(r)||a.trackingNumber.toLowerCase().includes(r)||a.receiverInfo.name.toLowerCase().includes(r)||a.receiverInfo.phone.includes(r))}filterShipmentsByStatus(t){return!t||t==="all"?this.shipments:this.shipments.filter(r=>r.status===t)}filterShipmentsByType(t){return!t||t==="all"?this.shipments:this.shipments.filter(r=>r.logisticsType===t)}filterShipmentsByDateRange(t,r){return this.shipments.filter(a=>{const n=new Date(a.createdAt);return n>=new Date(t)&&n<=new Date(r)})}getAnalytics(){const t=this.shipments.length,r=this.returns.length,a=this.shipments.reduce((v,S)=>v+(S.shippingFee||0),0),n=this.shipments.filter(v=>v.status===H.DELIVERED||v.status===H.PICKED_UP_BY_CUSTOMER).length,i=t>0?n/t:0,l=this.shipments.filter(v=>v.actualDelivery&&v.createdAt),o=l.length>0?l.reduce((v,S)=>{const _=new Date(S.actualDelivery)-new Date(S.createdAt);return v+_/(1e3*60*60*24)},0)/l.length:2.5,c=t>0?r/t:0,d=[{category:"基本運費",amount:a*.6,percentage:.6},{category:"包裝費用",amount:a*.15,percentage:.15},{category:"保險費用",amount:a*.1,percentage:.1},{category:"手續費",amount:a*.1,percentage:.1},{category:"其他費用",amount:a*.05,percentage:.05}],x={};this.shipments.forEach(v=>{const S=v.logisticsType;x[S]||(x[S]={count:0,name:this.getLogisticsTypeDisplayName(S)}),x[S].count++});const p=Object.values(x).map(v=>({...v,percentage:t>0?v.count/t:0})),f={onTimeDeliveryRate:"94.2%",customerSatisfaction:"4.7★",avgProcessingTime:8,costPerDelivery:`$${Math.round(a/Math.max(t,1))}`},y={cost:[{date:"09/10",value:12e3},{date:"09/11",value:15e3},{date:"09/12",value:11e3},{date:"09/13",value:18e3},{date:"09/14",value:16e3},{date:"09/15",value:14e3},{date:"09/16",value:a}],volume:[{date:"09/10",value:45},{date:"09/11",value:52},{date:"09/12",value:38},{date:"09/13",value:68},{date:"09/14",value:55},{date:"09/15",value:42},{date:"09/16",value:t}],efficiency:[{date:"09/10",value:92},{date:"09/11",value:95},{date:"09/12",value:88},{date:"09/13",value:97},{date:"09/14",value:93},{date:"09/15",value:91},{date:"09/16",value:Math.round(i*100)}]},b=p.map(v=>({method:v.name,orderCount:v.count,totalCost:a*v.percentage,avgCost:v.count>0?a*v.percentage/v.count:0,successRate:.9+Math.random()*.09}));return{totalShippingCost:a,deliverySuccessRate:i,averageDeliveryTime:Math.round(o*10)/10,returnRate:c,costBreakdown:d,deliveryMethodStats:p,efficiencyMetrics:f,trends:y,detailedStats:b}}getLogisticsTypeDisplayName(t){return{[Oe.CONVENIENCE_STORE]:"超商取貨",[Oe.HOME_DELIVERY]:"宅配到府",[Oe.POST_OFFICE]:"郵局配送",[Oe.EXPRESS]:"快遞",[Oe.PICKUP]:"自取"}[t]||t}}const ms=new WA,GA=()=>{var v,S,_,w,N,u,h,g;const[s,t]=m.useState({}),[r,a]=m.useState({}),[n,i]=m.useState([]),[l,o]=m.useState([]);m.useEffect(()=>{c()},[]);const c=()=>{const j=ms.getShipmentStatusStats(),T=ms.getShippingRevenueStats(),C=ms.getLogisticsTypeStats(),E=ms.getLogisticsAnalytics();t({...j,...T,typeStats:C}),a(E);const R=ms.getAllShipments();i(R.slice(0,5)),d(R,E)},d=(j,T)=>{var O;const C=[],E=j.filter(P=>P.status===H.FAILED_DELIVERY);E.length>0&&C.push({type:"error",title:"配送失敗警告",message:`有 ${E.length} 筆配送失敗，需要處理`,count:E.length});const R=new Date,k=j.filter(P=>!P.estimatedDelivery||P.status===H.DELIVERED?!1:new Date(P.estimatedDelivery)<R);k.length>0&&C.push({type:"warning",title:"逾期配送",message:`有 ${k.length} 筆配送已逾期`,count:k.length}),((O=T.deliveryPerformance)==null?void 0:O.onTimeDeliveryRate)<90&&C.push({type:"warning",title:"準時率偏低",message:`本月準時率為 ${T.deliveryPerformance.onTimeDeliveryRate}%，低於標準`,count:1}),o(C)},x=j=>({[H.CREATED]:"bg-gray-100 text-gray-800",[H.PICKED_UP]:"bg-blue-100 text-blue-800",[H.IN_TRANSIT]:"bg-yellow-100 text-yellow-800",[H.OUT_FOR_DELIVERY]:"bg-orange-100 text-orange-800",[H.DELIVERED]:"bg-green-100 text-green-800",[H.READY_FOR_PICKUP]:"bg-purple-100 text-purple-800",[H.PICKED_UP_BY_CUSTOMER]:"bg-green-100 text-green-800",[H.FAILED_DELIVERY]:"bg-red-100 text-red-800",[H.RETURNED]:"bg-gray-100 text-gray-800",[H.CANCELLED]:"bg-gray-100 text-gray-800"})[j]||"bg-gray-100 text-gray-800",p=j=>({[H.CREATED]:"已建立",[H.PICKED_UP]:"已取貨",[H.IN_TRANSIT]:"運送中",[H.OUT_FOR_DELIVERY]:"派送中",[H.DELIVERED]:"已送達",[H.READY_FOR_PICKUP]:"可取貨",[H.PICKED_UP_BY_CUSTOMER]:"已取貨",[H.FAILED_DELIVERY]:"派送失敗",[H.RETURNED]:"已退回",[H.CANCELLED]:"已取消"})[j]||j,f=j=>({[Oe.CONVENIENCE_STORE]:"超商取貨",[Oe.HOME_DELIVERY]:"宅配到府",[Oe.POST_OFFICE]:"郵局配送",[Oe.EXPRESS]:"快遞",[Oe.PICKUP]:"自取"})[j]||j,y=j=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(j),b=({title:j,value:T,subtitle:C,icon:E,trend:R,trendValue:k})=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:j}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T}),C&&e.jsx("p",{className:"text-sm text-gray-500",children:C})]}),E&&e.jsx("div",{className:"p-3 bg-[#cc824d]/10 rounded-xl",children:E})]}),R&&e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsxs("span",{className:`text-sm font-medium ${R==="up"?"text-green-600":R==="down"?"text-red-600":"text-gray-600"}`,children:[R==="up"?"↗":R==="down"?"↘":"→"," ",k]}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs 上個月"})]})]});return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"物流總覽"}),e.jsx("p",{className:"text-gray-600",children:"配送狀態、效能指標和即時追蹤"})]}),l.length>0&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"⚠️ 重要警示"}),e.jsx("div",{className:"space-y-3",children:l.map((j,T)=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${j.type==="error"?"bg-red-50 border-red-400 text-red-700":"bg-yellow-50 border-yellow-400 text-yellow-700"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:j.title}),e.jsx("p",{className:"text-sm mt-1",children:j.message})]}),e.jsx("span",{className:"bg-white px-2 py-1 rounded-full text-xs font-medium",children:j.count})]})},T))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(b,{title:"總配送數",value:s.totalOrders||0,subtitle:"本月累計",icon:e.jsx("svg",{className:"w-6 h-6 text-[#cc824d]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),trend:"up",trendValue:"+12.5%"}),e.jsx(b,{title:"運送中",value:s[H.IN_TRANSIT]||0,subtitle:"需要追蹤",icon:e.jsx("svg",{className:"w-6 h-6 text-[#cc824d]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx(b,{title:"準時率",value:`${((v=r.deliveryPerformance)==null?void 0:v.onTimeDeliveryRate)||0}%`,subtitle:"本月表現",icon:e.jsx("svg",{className:"w-6 h-6 text-[#cc824d]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),trend:((S=r.deliveryPerformance)==null?void 0:S.onTimeDeliveryRate)>=90?"up":"down",trendValue:"2.3%"}),e.jsx(b,{title:"運費收入",value:y(s.totalRevenue||0),subtitle:"本月累計",icon:e.jsx("svg",{className:"w-6 h-6 text-[#cc824d]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),trend:"up",trendValue:"+8.1%"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"配送狀態分佈"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(s).map(([j,T])=>Object.values(H).includes(j)?e.jsxs("div",{className:"text-center p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium mb-2 ${x(j)}`,children:p(j)}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T})]},j):null)})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"效能指標"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"平均配送時間"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[((_=r.deliveryPerformance)==null?void 0:_.averageDeliveryTime)||0," 天"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full",style:{width:`${Math.min((((w=r.deliveryPerformance)==null?void 0:w.averageDeliveryTime)||0)*20,100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"客戶滿意度"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[((N=r.deliveryPerformance)==null?void 0:N.customerSatisfactionScore)||0,"/5"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${(((u=r.deliveryPerformance)==null?void 0:u.customerSatisfactionScore)||0)/5*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"失敗率"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[((h=r.deliveryPerformance)==null?void 0:h.failedDeliveryRate)||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${((g=r.deliveryPerformance)==null?void 0:g.failedDeliveryRate)||0}%`}})})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"最近配送單"}),e.jsx("button",{className:"text-[#cc824d] hover:text-[#b3723f] font-medium",children:"查看全部 →"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"訂單編號"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"收件人"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"配送方式"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"預計送達"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"運費"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.orderNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:j.trackingNumber})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:j.receiverInfo.name}),e.jsx("div",{className:"text-sm text-gray-500",children:j.receiverInfo.phone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:f(j.logisticsType)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x(j.status)}`,children:p(j.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.estimatedDelivery?new Date(j.estimatedDelivery).toLocaleDateString("zh-TW"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y(j.shippingFee)})]},j.id))})]})})]}),e.jsxs("div",{className:"mt-6 bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"配送方式偏好"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(s.typeStats||{}).map(([j,T])=>{const C=Object.values(s.typeStats||{}).reduce((R,k)=>R+k,0),E=C>0?(T/C*100).toFixed(1):0;return e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-[#cc824d] mb-1",children:T}),e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:f(j)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E,"%"]})]},j)})})]})]})})},HA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState("all"),[l,o]=m.useState("all"),[c,d]=m.useState(""),[x,p]=m.useState([]),[f,y]=m.useState(!1),[b,v]=m.useState(!1);m.useEffect(()=>{S()},[]),m.useEffect(()=>{_()},[s,n,l,c]);const S=()=>{const k=ms.getAllShipments();t(k)},_=()=>{let k=[...s];if(n!=="all"&&(k=k.filter(O=>O.status===n)),l!=="all"&&(k=k.filter(O=>O.logisticsType===l)),c){const O=new Date(c);k=k.filter(P=>new Date(P.createdAt).toDateString()===O.toDateString())}a(k)},w=k=>{p(O=>{const P=O.includes(k)?O.filter($=>$!==k):[...O,k];return y(P.length>0),P})},N=()=>{if(x.length===r.length)p([]),y(!1);else{const k=r.map(O=>O.id);p(k),y(!0)}},u=async k=>{v(!0);try{for(const O of x)await ms.updateShipmentStatus(O,k,"",`批量更新為${T(k)}`);S(),p([]),y(!1),alert(`成功更新 ${x.length} 筆配送狀態`)}catch(O){alert("批量更新失敗："+O.message)}finally{v(!1)}},h=async(k,O)=>{v(!0);try{ms.updateShipmentStatus(k,O,"",`手動更新為${T(O)}`)?(S(),alert("狀態更新成功")):alert("狀態更新失敗")}catch(P){alert("更新失敗："+P.message)}finally{v(!1)}},g=()=>{if(x.length===0){alert("請選擇要列印的配送單");return}const k=x.map(O=>r.find(P=>P.id===O));alert(`準備列印 ${k.length} 張配送標籤:
${k.map(O=>O.orderNumber).join(", ")}`)},j=k=>({[H.CREATED]:"bg-gray-100 text-gray-800",[H.PICKED_UP]:"bg-blue-100 text-blue-800",[H.IN_TRANSIT]:"bg-yellow-100 text-yellow-800",[H.OUT_FOR_DELIVERY]:"bg-orange-100 text-orange-800",[H.DELIVERED]:"bg-green-100 text-green-800",[H.READY_FOR_PICKUP]:"bg-purple-100 text-purple-800",[H.PICKED_UP_BY_CUSTOMER]:"bg-green-100 text-green-800",[H.FAILED_DELIVERY]:"bg-red-100 text-red-800",[H.RETURNED]:"bg-gray-100 text-gray-800",[H.CANCELLED]:"bg-gray-100 text-gray-800"})[k]||"bg-gray-100 text-gray-800",T=k=>({[H.CREATED]:"已建立",[H.PICKED_UP]:"已取貨",[H.IN_TRANSIT]:"運送中",[H.OUT_FOR_DELIVERY]:"派送中",[H.DELIVERED]:"已送達",[H.READY_FOR_PICKUP]:"可取貨",[H.PICKED_UP_BY_CUSTOMER]:"已取貨",[H.FAILED_DELIVERY]:"派送失敗",[H.RETURNED]:"已退回",[H.CANCELLED]:"已取消"})[k]||k,C=k=>({[Oe.CONVENIENCE_STORE]:"超商取貨",[Oe.HOME_DELIVERY]:"宅配到府",[Oe.POST_OFFICE]:"郵局配送",[Oe.EXPRESS]:"快遞",[Oe.PICKUP]:"自取"})[k]||k,E=k=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(k),R=k=>({[H.CREATED]:[H.PICKED_UP,H.CANCELLED],[H.PICKED_UP]:[H.IN_TRANSIT,H.RETURNED],[H.IN_TRANSIT]:[H.OUT_FOR_DELIVERY,H.READY_FOR_PICKUP],[H.OUT_FOR_DELIVERY]:[H.DELIVERED,H.FAILED_DELIVERY],[H.READY_FOR_PICKUP]:[H.PICKED_UP_BY_CUSTOMER,H.RETURNED],[H.FAILED_DELIVERY]:[H.OUT_FOR_DELIVERY,H.RETURNED]})[k]||[];return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"配送管理"}),e.jsx("p",{className:"text-gray-600",children:"管理所有配送單、批量操作和狀態追蹤"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(re,{to:"/admin/logistics/shipments/new",className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"+ 新增配送單"}),f&&e.jsxs("button",{onClick:g,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:["列印標籤 (",x.length,")"]})]})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"狀態"}),e.jsx(xe,{options:[{value:"all",label:"全部狀態"},...Object.values(H).map(k=>({value:k,label:T(k)}))],value:n,onChange:i,placeholder:"選擇狀態",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"配送方式"}),e.jsx(xe,{options:[{value:"all",label:"全部方式"},...Object.values(Oe).map(k=>({value:k,label:C(k)}))],value:l,onChange:o,placeholder:"選擇配送方式",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"建立日期"}),e.jsx("input",{type:"date",value:c,onChange:k=>d(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center text-sm text-gray-600",children:[e.jsxs("span",{children:["顯示 ",r.length," 筆配送單 (共 ",s.length," 筆)"]}),(searchTerm||n!=="all"||l!=="all"||c)&&e.jsx("button",{onClick:()=>{setSearchTerm(""),i("all"),o("all"),d("")},className:"text-[#cc824d] hover:text-[#b3723f] font-medium",children:"清除篩選"})]})]}),f&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["已選擇 ",x.length," 筆配送單"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(H.PICKED_UP),disabled:b,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",children:"標記為已取貨"}),e.jsx("button",{onClick:()=>u(H.IN_TRANSIT),disabled:b,className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700 disabled:opacity-50",children:"標記為運送中"}),e.jsx("button",{onClick:()=>u(H.DELIVERED),disabled:b,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50",children:"標記為已送達"})]}),e.jsx("button",{onClick:()=>{p([]),y(!1)},className:"text-gray-500 hover:text-gray-700",children:"取消選擇"})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg overflow-visible",children:[e.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:x.length===r.length&&r.length>0,onChange:N,className:"text-[#cc824d] focus:ring-[#cc824d]"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"訂單資訊"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"收件人"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"配送方式"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"預計送達"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"運費"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:x.includes(k.id),onChange:()=>w(k.id),className:"text-[#cc824d] focus:ring-[#cc824d]"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.orderNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:k.trackingNumber}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(k.createdAt).toLocaleDateString("zh-TW")})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:k.receiverInfo.name}),e.jsx("div",{className:"text-sm text-gray-500",children:k.receiverInfo.phone}),k.receiverInfo.address&&e.jsx("div",{className:"text-xs text-gray-400 max-w-xs truncate",children:k.receiverInfo.address}),k.receiverInfo.storeInfo&&e.jsx("div",{className:"text-xs text-gray-400",children:k.receiverInfo.storeInfo.name})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:"text-sm text-gray-900",children:C(k.logisticsType)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[k.packageInfo.weight,"kg / ",k.packageInfo.volume,"m³"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j(k.status)}`,children:T(k.status)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[k.estimatedDelivery?new Date(k.estimatedDelivery).toLocaleDateString("zh-TW"):"-",k.actualDelivery&&e.jsxs("div",{className:"text-xs text-green-600",children:["已送達: ",new Date(k.actualDelivery).toLocaleDateString("zh-TW")]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E(k.shippingFee)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{options:[{value:k.status,label:T(k.status)},...R(k.status).map(O=>({value:O,label:`更新為: ${T(O)}`}))],value:k.status,onChange:O=>h(k.id,O),disabled:b,placeholder:"選擇狀態",className:"min-w-[120px] text-xs"}),e.jsx(re,{to:`/admin/logistics/shipments/${k.id}`,className:"text-[#cc824d] hover:text-[#b3723f]",children:"詳情"})]})})]},k.id))})]})}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"沒有找到配送單"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:searchTerm||n!=="all"||l!=="all"||c?"請調整篩選條件或建立新的配送單":"開始建立您的第一筆配送單吧！"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#cc824d]",children:r.filter(k=>k.status===H.IN_TRANSIT).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"運送中"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(k=>k.status===H.DELIVERED).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"已送達"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.filter(k=>k.status===H.FAILED_DELIVERY).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"配送失敗"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.filter(k=>k.status===H.READY_FOR_PICKUP).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"可取貨"})]})]})]})})},qA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(null),[n,i]=m.useState(!1),[l,o]=m.useState(!1),[c,d]=m.useState({name:"",logisticsTypes:[],calculationMethod:er.WEIGHT,baseRate:0,tiers:[{min:0,max:1,rate:80}],freeShippingThreshold:"",isActive:!0}),[x,p]=m.useState({logisticsType:Oe.HOME_DELIVERY,weight:1,orderAmount:500,result:null});m.useEffect(()=>{f()},[]);const f=()=>{const E=ms.getAllShippingRates();t(E)},y=()=>{d({name:"",logisticsTypes:[],calculationMethod:er.WEIGHT,baseRate:0,tiers:[{min:0,max:1,rate:80}],freeShippingThreshold:"",isActive:!0}),o(!1),i(!0)},b=E=>{d({...E,freeShippingThreshold:E.freeShippingThreshold||""}),a(E),o(!0),i(!0)},v=(E,R)=>{d(k=>({...k,[E]:R}))},S=E=>{d(R=>({...R,logisticsTypes:R.logisticsTypes.includes(E)?R.logisticsTypes.filter(k=>k!==E):[...R.logisticsTypes,E]}))},_=(E,R,k)=>{d(O=>({...O,tiers:O.tiers.map((P,$)=>$===E?{...P,[R]:parseFloat(k)||0}:P)}))},w=()=>{const E=c.tiers[c.tiers.length-1];d(R=>({...R,tiers:[...R.tiers,{min:E.max,max:E.max+2,rate:E.rate+40}]}))},N=E=>{c.tiers.length>1&&d(R=>({...R,tiers:R.tiers.filter((k,O)=>O!==E)}))},u=E=>{if(E.preventDefault(),!c.name.trim()){alert("請輸入運費設定名稱");return}if(c.logisticsTypes.length===0){alert("請選擇至少一種物流方式");return}const R={...c,baseRate:parseFloat(c.baseRate),freeShippingThreshold:c.freeShippingThreshold?parseFloat(c.freeShippingThreshold):null};let k;l?k=ms.updateShippingRate(r.id,R):k=ms.createShippingRate(R),k?(f(),i(!1),a(null),alert(l?"運費設定更新成功":"運費設定創建成功")):alert("操作失敗，請重試")},h=E=>{confirm(`確定要刪除運費設定「${E.name}」嗎？`)&&alert("刪除功能待實現")},g=()=>{const E=ms.calculateShippingFee(x.logisticsType,x.weight,x.orderAmount);p(R=>({...R,result:E}))},j=E=>({[Oe.CONVENIENCE_STORE]:"超商取貨",[Oe.HOME_DELIVERY]:"宅配到府",[Oe.POST_OFFICE]:"郵局配送",[Oe.EXPRESS]:"快遞",[Oe.PICKUP]:"自取"})[E]||E,T=E=>({[er.WEIGHT]:"重量計費",[er.VOLUME]:"體積計費",[er.AMOUNT]:"金額計費",[er.QUANTITY]:"數量計費",[er.FIXED]:"固定費用"})[E]||E,C=E=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(E);return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"運費設定管理"}),e.jsx("p",{className:"text-gray-600",children:"管理多維度運費計算規則、重量體積計費"})]}),e.jsx("button",{onClick:y,className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"+ 新增運費設定"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"運費設定列表"}),e.jsx("div",{className:"space-y-4",children:s.map(E=>e.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${(r==null?void 0:r.id)===E.id?"border-[#cc824d] bg-[#cc824d]/5":"border-gray-200 hover:border-[#cc824d]/50"}`,onClick:()=>a(E),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:E.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${E.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.isActive?"啟用":"停用"})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"適用方式:"})," "," ",E.logisticsTypes.map(R=>j(R)).join(", ")]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"計費方式:"})," ",T(E.calculationMethod)]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"基本費率:"})," ",C(E.baseRate),E.freeShippingThreshold&&e.jsxs("span",{className:"ml-4",children:[e.jsx("span",{className:"font-medium",children:"免運門檻:"})," ",C(E.freeShippingThreshold)]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:R=>{R.stopPropagation(),b(E)},className:"text-[#cc824d] hover:text-[#b3723f] text-sm",children:"編輯"}),e.jsx("button",{onClick:R=>{R.stopPropagation(),h(E)},className:"text-red-600 hover:text-red-700 text-sm",children:"刪除"})]})]}),E.tiers&&E.tiers.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"費率階層:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.tiers.slice(0,3).map((R,k)=>e.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[R.min,"-",R.max,"kg: ",C(R.rate)]},k)),E.tiers.length>3&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",E.tiers.length-3," more"]})]})]})]},E.id))}),s.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"尚無運費設定"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"建立您的第一個運費計算規則"})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"運費計算器"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"配送方式"}),e.jsx("select",{value:x.logisticsType,onChange:E=>p(R=>({...R,logisticsType:E.target.value})),className:"glass-select w-full font-chinese",children:Object.values(Oe).map(E=>e.jsx("option",{value:E,children:j(E)},E))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"重量 (kg)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",value:x.weight,onChange:E=>p(R=>({...R,weight:parseFloat(E.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"訂單金額"}),e.jsx("input",{type:"number",min:"0",value:x.orderAmount,onChange:E=>p(R=>({...R,orderAmount:parseFloat(E.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsx("button",{onClick:g,className:"w-full bg-[#cc824d] text-white py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"計算運費"}),x.result&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"計算結果"}),e.jsx("div",{className:"text-2xl font-bold text-[#cc824d] mb-1",children:C(x.result.fee)}),e.jsx("div",{className:"text-sm text-gray-600",children:x.result.reason})]})]})]}),r&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"運費設定詳情"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"名稱:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:r.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"狀態:"}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${r.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.isActive?"啟用":"停用"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"計費方式:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:T(r.calculationMethod)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"基本費率:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:C(r.baseRate)})]}),r.freeShippingThreshold&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"免運門檻:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:C(r.freeShippingThreshold)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"適用方式:"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:r.logisticsTypes.map(E=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:j(E)},E))})]}),r.tiers&&r.tiers.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"費率階層:"}),e.jsx("div",{className:"mt-2 space-y-1",children:r.tiers.map((E,R)=>e.jsxs("div",{className:"flex justify-between text-sm bg-gray-50 px-3 py-2 rounded",children:[e.jsxs("span",{children:[E.min," - ",E.max," kg"]}),e.jsx("span",{className:"font-medium",children:C(E.rate)})]},R))})]})]})]})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:u,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:l?"編輯運費設定":"新增運費設定"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"設定名稱 *"}),e.jsx("input",{type:"text",value:c.name,onChange:E=>v("name",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"例：一般宅配",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"適用物流方式 *"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.values(Oe).map(E=>e.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.logisticsTypes.includes(E),onChange:()=>S(E),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx("span",{className:"text-sm",children:j(E)})]},E))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"計費方式"}),e.jsx("select",{value:c.calculationMethod,onChange:E=>v("calculationMethod",E.target.value),className:"glass-select w-full font-chinese",children:Object.values(er).map(E=>e.jsx("option",{value:E,children:T(E)},E))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"基本費率"}),e.jsx("input",{type:"number",min:"0",step:"1",value:c.baseRate,onChange:E=>v("baseRate",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"免運門檻 (可選)"}),e.jsx("input",{type:"number",min:"0",step:"1",value:c.freeShippingThreshold,onChange:E=>v("freeShippingThreshold",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"留空表示無免運門檻"})]}),c.calculationMethod===er.WEIGHT&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"費率階層"}),e.jsx("button",{type:"button",onClick:w,className:"text-[#cc824d] hover:text-[#b3723f] text-sm",children:"+ 新增階層"})]}),e.jsx("div",{className:"space-y-3",children:c.tiers.map((E,R)=>e.jsxs("div",{className:"grid grid-cols-4 gap-3 items-center",children:[e.jsx("div",{children:e.jsx("input",{type:"number",step:"0.1",min:"0",value:E.min,onChange:k=>_(R,"min",k.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"最小值"})}),e.jsx("div",{children:e.jsx("input",{type:"number",step:"0.1",min:"0",value:E.max,onChange:k=>_(R,"max",k.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"最大值"})}),e.jsx("div",{children:e.jsx("input",{type:"number",min:"0",step:"1",value:E.rate,onChange:k=>_(R,"rate",k.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"費率"})}),e.jsx("div",{children:c.tiers.length>1&&e.jsx("button",{type:"button",onClick:()=>N(R),className:"text-red-600 hover:text-red-700 text-sm",children:"刪除"})})]},R))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:c.isActive,onChange:E=>v("isActive",E.target.checked),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"啟用此運費設定"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"取消"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:l?"更新":"創建"})]})]})})})]})})},YA=()=>{var _,w;const[s,t]=m.useState(""),[r,a]=m.useState(null),[n,i]=m.useState([]),[l,o]=m.useState(null),[c,d]=m.useState("");m.useEffect(()=>{x()},[]);const x=()=>{const u=ms.getAllShipments().filter(h=>h.status===H.PICKED_UP||h.status===H.IN_TRANSIT||h.status===H.OUT_FOR_DELIVERY||h.status===H.DELIVERED||h.status===H.READY_FOR_PICKUP);i(u)},p=N=>{if(N.preventDefault(),!s.trim()){alert("請輸入追蹤號碼");return}const u=n.find(h=>h.trackingNumber===s);u?(a(u),o(u)):(alert("找不到對應的追蹤號碼"),a(null))},f=N=>{if(N.preventDefault(),!c.trim()){alert("請輸入追蹤號碼");return}const u=n.find(h=>h.trackingNumber===c);u?o(u):alert("找不到對應的追蹤號碼")},y=N=>({[H.CREATED]:"bg-yellow-100 text-yellow-800",[H.PICKED_UP]:"bg-blue-100 text-blue-800",[H.IN_TRANSIT]:"bg-indigo-100 text-indigo-800",[H.OUT_FOR_DELIVERY]:"bg-orange-100 text-orange-800",[H.DELIVERED]:"bg-green-100 text-green-800",[H.READY_FOR_PICKUP]:"bg-purple-100 text-purple-800",[H.PICKED_UP_BY_CUSTOMER]:"bg-green-100 text-green-800",[H.FAILED_DELIVERY]:"bg-red-100 text-red-800",[H.RETURNED]:"bg-gray-100 text-gray-800",[H.CANCELLED]:"bg-gray-100 text-gray-800"})[N]||"bg-gray-100 text-gray-800",b=N=>({[H.CREATED]:"已建立",[H.PICKED_UP]:"已取貨",[H.IN_TRANSIT]:"運送中",[H.OUT_FOR_DELIVERY]:"配送中",[H.DELIVERED]:"已送達",[H.READY_FOR_PICKUP]:"可取貨",[H.PICKED_UP_BY_CUSTOMER]:"客戶已取貨",[H.FAILED_DELIVERY]:"配送失敗",[H.RETURNED]:"已退回",[H.CANCELLED]:"已取消"})[N]||N,v=N=>new Date(N).toLocaleString("zh-TW"),S=N=>[{name:"訂單處理",status:"completed",time:N.createdAt},{name:"已取貨",status:N.status===H.CREATED?"pending":"completed",time:N.status!==H.CREATED?N.createdAt:null},{name:"運送中",status:N.status===H.IN_TRANSIT||N.status===H.OUT_FOR_DELIVERY||N.status===H.DELIVERED||N.status===H.READY_FOR_PICKUP||N.status===H.PICKED_UP_BY_CUSTOMER?"completed":N.status===H.PICKED_UP?"current":"pending",time:N.status===H.IN_TRANSIT?N.updatedAt:null},{name:N.logisticsType==="convenience_store"?"到店待取":"配送中",status:N.status===H.OUT_FOR_DELIVERY||N.status===H.DELIVERED||N.status===H.READY_FOR_PICKUP||N.status===H.PICKED_UP_BY_CUSTOMER?"completed":N.status===H.IN_TRANSIT?"current":"pending",time:N.status===H.READY_FOR_PICKUP||N.status===H.OUT_FOR_DELIVERY?N.updatedAt:null},{name:N.logisticsType==="convenience_store"?"客戶已取貨":"已送達",status:N.status===H.DELIVERED||N.status===H.PICKED_UP_BY_CUSTOMER?"completed":N.status===H.OUT_FOR_DELIVERY||N.status===H.READY_FOR_PICKUP?"current":"pending",time:N.actualDelivery||(N.status===H.DELIVERED||N.status===H.PICKED_UP_BY_CUSTOMER?N.updatedAt:null)}];return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"物流追蹤系統"}),e.jsx("p",{className:"text-gray-600",children:"即時物流狀態追蹤、客戶查詢介面"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"管理員追蹤查詢"}),e.jsx("form",{onSubmit:p,className:"mb-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:s,onChange:N=>t(N.target.value),placeholder:"請輸入追蹤號碼",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"}),e.jsx("button",{type:"submit",className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"查詢"})]})}),r&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:["追蹤號碼: ",r.trackingNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["訂單編號: ",r.orderId]})]}),e.jsx("span",{className:`px-3 py-1 text-sm rounded-full ${y(r.status)}`,children:b(r.status)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"收件人:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.receiverInfo.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"配送地址:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.receiverInfo.address||((_=r.receiverInfo.storeInfo)==null?void 0:_.address)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"預計送達:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.estimatedDelivery?v(r.estimatedDelivery):"計算中"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"總重量:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[r.packageInfo.weight," kg"]})]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"可追蹤訂單列表"}),e.jsx("div",{className:"space-y-4",children:n.map(N=>e.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${(l==null?void 0:l.id)===N.id?"border-[#cc824d] bg-[#cc824d]/5":"border-gray-200 hover:border-[#cc824d]/50"}`,onClick:()=>o(N),children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:N.trackingNumber}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y(N.status)}`,children:b(N.status)})]}),e.jsxs("div",{className:"text-sm text-gray-600 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"訂單:"})," ",N.orderNumber]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"收件人:"})," ",N.receiverInfo.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"建立時間:"})," ",v(N.createdAt)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"預計送達:"})," ",v(N.estimatedDelivery)]})]})]})})},N.id))}),n.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"暫無可追蹤訂單"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"已發貨的訂單將在此顯示"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"客戶查詢介面"}),e.jsx("form",{onSubmit:f,className:"mb-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:c,onChange:N=>d(N.target.value),placeholder:"請輸入追蹤號碼",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"}),e.jsx("button",{type:"submit",className:"w-full bg-[#cc824d] text-white py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"查詢物流狀態"})]})}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"• 請輸入商家提供的追蹤號碼"}),e.jsx("p",{children:"• 物流資訊每 30 分鐘更新一次"}),e.jsx("p",{children:"• 如有疑問請聯繫客服"})]})]}),l&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"配送進度"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"追蹤號碼:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:l.trackingNumber})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"當前狀態:"}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${y(l.status)}`,children:b(l.status)})]})]}),e.jsx("div",{className:"space-y-4",children:S(l).map((N,u)=>e.jsxs("div",{className:"flex items-start",children:[e.jsxs("div",{className:"flex flex-col items-center mr-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full border-2 ${N.status==="completed"?"bg-green-500 border-green-500":N.status==="current"?"bg-[#cc824d] border-[#cc824d]":"bg-gray-200 border-gray-300"}`}),u<S(l).length-1&&e.jsx("div",{className:`w-0.5 h-8 ${N.status==="completed"?"bg-green-200":"bg-gray-200"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${N.status==="completed"?"text-green-700":N.status==="current"?"text-[#cc824d]":"text-gray-500"}`,children:N.name}),N.time&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:v(N.time)})]})]},u))}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"收件人:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:l.receiverInfo.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"配送地址:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:l.receiverInfo.address||((w=l.receiverInfo.storeInfo)==null?void 0:w.address)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"聯絡電話:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:l.receiverInfo.phone})]}),l.estimatedDelivery&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"預計送達:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:v(l.estimatedDelivery)})]})]})})]})]})]})]})})},ZA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(null),[n,i]=m.useState(!1),[l,o]=m.useState({orderId:"",trackingNumber:"",method:$n.CONVENIENCE_STORE,reason:"",feePolicy:Vn.CUSTOMER_PAYS,status:"pending",refundAmount:0,notes:""}),[c,d]=m.useState(!1);m.useEffect(()=>{x()},[]);const x=()=>{const u=ms.getAllReturns();t(u)},p=()=>{o({orderId:"",trackingNumber:"",method:$n.CONVENIENCE_STORE,reason:"",feePolicy:Vn.CUSTOMER_PAYS,status:"pending",refundAmount:0,notes:""}),d(!1),i(!0)},f=u=>{o({...u}),a(u),d(!0),i(!0)},y=(u,h)=>{o(g=>({...g,[u]:h}))},b=u=>{if(u.preventDefault(),!l.orderId.trim()||!l.trackingNumber.trim()){alert("請填寫訂單編號和追蹤號碼");return}let h;c?h=ms.updateReturn(l.id,l):h=ms.createReturn(l),h?(x(),i(!1),a(null),alert(c?"退貨申請更新成功":"退貨申請創建成功")):alert("操作失敗，請重試")},v=u=>{confirm(`確定要刪除退貨申請「${u.orderId}」嗎？`)&&alert("刪除功能待實現")},S=u=>({[$n.CONVENIENCE_STORE]:"超商退貨",[$n.HOME_PICKUP]:"宅配收件",[$n.POST_OFFICE]:"郵局寄回"})[u]||u,_=u=>({[Vn.CUSTOMER_PAYS]:"買家負擔",[Vn.MERCHANT_PAYS]:"賣家負擔",[Vn.CONDITIONAL]:"條件式負擔"})[u]||u,w=u=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[u]||"bg-gray-100 text-gray-800",N=u=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(u);return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"退貨管理系統"}),e.jsx("p",{className:"text-gray-600",children:"處理退貨申請、逆物流、費用計算、退款流程、庫存回收"})]}),e.jsx("button",{onClick:p,className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"+ 新增退貨申請"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"退貨申請列表"}),e.jsx("div",{className:"space-y-4",children:s.map(u=>e.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${(r==null?void 0:r.id)===u.id?"border-[#cc824d] bg-[#cc824d]/5":"border-gray-200 hover:border-[#cc824d]/50"}`,onClick:()=>a(u),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:["訂單編號: ",u.orderId]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${w(u.status)}`,children:u.status==="pending"?"待處理":u.status==="processing"?"處理中":u.status==="completed"?"已完成":"已拒絕"})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"退貨方式:"})," ",S(u.method)]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"費用政策:"})," ",_(u.feePolicy)]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"退款金額:"})," ",N(u.refundAmount)]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:h=>{h.stopPropagation(),f(u)},className:"text-[#cc824d] hover:text-[#b3723f] text-sm",children:"編輯"}),e.jsx("button",{onClick:h=>{h.stopPropagation(),v(u)},className:"text-red-600 hover:text-red-700 text-sm",children:"刪除"})]})]}),u.reason&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"退貨原因:"})," ",u.reason]})]},u.id))}),s.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"尚無退貨申請"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"建立您的第一個退貨申請"})]})]})}),e.jsx("div",{className:"space-y-6",children:r&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"退貨詳情"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"訂單編號:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:r.orderId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"追蹤號碼:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:r.trackingNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"退貨方式:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:S(r.method)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"費用政策:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:_(r.feePolicy)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"退款金額:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:N(r.refundAmount)})]}),r.reason&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"退貨原因:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:r.reason})]}),r.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"備註:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900",children:r.notes})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"狀態:"}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${w(r.status)}`,children:r.status==="pending"?"待處理":r.status==="processing"?"處理中":r.status==="completed"?"已完成":"已拒絕"})]})]})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:c?"編輯退貨申請":"新增退貨申請"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"訂單編號 *"}),e.jsx("input",{type:"text",value:l.orderId,onChange:u=>y("orderId",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"追蹤號碼 *"}),e.jsx("input",{type:"text",value:l.trackingNumber,onChange:u=>y("trackingNumber",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"退貨方式"}),e.jsx(xe,{options:Object.values($n).map(u=>({value:u,label:S(u)})),value:l.method,onChange:u=>y("method",u),placeholder:"選擇退貨方式",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"費用政策"}),e.jsx(xe,{options:Object.values(Vn).map(u=>({value:u,label:_(u)})),value:l.feePolicy,onChange:u=>y("feePolicy",u),placeholder:"選擇費用政策",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"退款金額"}),e.jsx("input",{type:"number",min:"0",step:"1",value:l.refundAmount,onChange:u=>y("refundAmount",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"退貨原因"}),e.jsx("input",{type:"text",value:l.reason,onChange:u=>y("reason",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"備註"}),e.jsx("input",{type:"text",value:l.notes,onChange:u=>y("notes",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"狀態"}),e.jsx(xe,{options:[{value:"pending",label:"待處理"},{value:"processing",label:"處理中"},{value:"completed",label:"已完成"},{value:"rejected",label:"已拒絕"}],value:l.status,onChange:u=>y("status",u),placeholder:"選擇狀態",className:"w-full"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"取消"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:c?"更新":"創建"})]})]})})})]})})},QA=()=>{var d;const[s,t]=m.useState(null),[r,a]=m.useState("7days"),[n,i]=m.useState("cost");m.useEffect(()=>{l()},[r]);const l=()=>{const x=ms.getAnalytics();t(x)},o=x=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(x),c=x=>`${(x*100).toFixed(1)}%`;return s?e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"物流分析報表"}),e.jsx("p",{className:"text-gray-600",children:"詳細數據分析、成本分析、效率報表、趨勢圖表"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(xe,{options:[{value:"7days",label:"最近7天"},{value:"30days",label:"最近30天"},{value:"90days",label:"最近90天"},{value:"1year",label:"最近一年"}],value:r,onChange:a,placeholder:"選擇時間範圍",className:"min-w-[140px]"}),e.jsx("button",{className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"匯出報表"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"總運費成本"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o(s.totalShippingCost)})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-green-100 text-green-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"配送成功率"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c(s.deliverySuccessRate)})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-yellow-100 text-yellow-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"平均配送時間"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.averageDeliveryTime,"天"]})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-red-100 text-red-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"退貨率"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c(s.returnRate)})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"成本分析"}),e.jsx("div",{className:"space-y-4",children:s.costBreakdown.map((x,p)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:x.category}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",c(x.percentage),")"]})]}),e.jsx("span",{className:"font-bold text-gray-900",children:o(x.amount)})]},p))}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"總計"}),e.jsx("span",{className:"text-lg font-bold text-[#cc824d]",children:o(s.costBreakdown.reduce((x,p)=>x+p.amount,0))})]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"配送方式統計"}),e.jsx("div",{className:"space-y-4",children:s.deliveryMethodStats.map((x,p)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900",children:x.name}),e.jsxs("span",{className:"text-gray-500",children:[x.count," 筆 (",c(x.percentage),")"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full transition-all duration-300",style:{width:`${x.percentage*100}%`}})})]},p))})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"效率報表"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.efficiencyMetrics.onTimeDeliveryRate}),e.jsx("p",{className:"text-sm text-gray-600",children:"準時送達率"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.efficiencyMetrics.customerSatisfaction}),e.jsx("p",{className:"text-sm text-gray-600",children:"客戶滿意度"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[s.efficiencyMetrics.avgProcessingTime,"小時"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"平均處理時間"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:s.efficiencyMetrics.costPerDelivery}),e.jsx("p",{className:"text-sm text-gray-600",children:"單筆配送成本"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"趨勢分析"}),e.jsx("div",{className:"mb-4",children:e.jsx(xe,{options:[{value:"cost",label:"成本趨勢"},{value:"volume",label:"出貨量趨勢"},{value:"efficiency",label:"效率趨勢"}],value:n,onChange:i,placeholder:"選擇指標",className:"min-w-[140px]"})}),e.jsx("div",{className:"space-y-3",children:(d=s.trends[n])==null?void 0:d.map((x,p)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-16 text-xs text-gray-500",children:x.date}),e.jsx("div",{className:"flex-1 mx-3",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full transition-all duration-300",style:{width:`${x.value/Math.max(...s.trends[n].map(f=>f.value))*100}%`}})})}),e.jsx("span",{className:"w-16 text-xs text-gray-900 text-right",children:x.value})]},p))})]})]}),e.jsxs("div",{className:"mt-6 bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"詳細數據"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"配送方式"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"訂單數量"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"總成本"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"平均成本"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"成功率"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.detailedStats.map((x,p)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x.method}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.orderCount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o(x.totalCost)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o(x.avgCost)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c(x.successRate)})]},p))})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsx("div",{children:e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})})})},XA=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(null),[n,i]=m.useState(!1),[l,o]=m.useState(!1),[c,d]=m.useState({name:"",type:"courier",contactInfo:{phone:"",email:"",address:""},serviceAreas:[],pricing:{baseRate:0,weightRate:0,volumeRate:0},performance:{rating:0,onTimeRate:0,damageRate:0},isActive:!0});m.useEffect(()=>{x()},[]);const x=()=>{t([{id:"provider_001",name:"順豐速運",type:"express",contactInfo:{phone:"02-2345-6789",email:"contact@sf-express.com",address:"台北市信義區松仁路123號"},serviceAreas:["台北市","新北市","桃園市","台中市"],pricing:{baseRate:120,weightRate:15,volumeRate:8},performance:{rating:4.8,onTimeRate:.95,damageRate:.02},isActive:!0,createdAt:"2024-01-15T10:00:00Z"},{id:"provider_002",name:"黑貓宅急便",type:"courier",contactInfo:{phone:"02-3456-7890",email:"service@blackcat.com",address:"台北市中山區民生東路456號"},serviceAreas:["全台服務"],pricing:{baseRate:100,weightRate:12,volumeRate:6},performance:{rating:4.6,onTimeRate:.92,damageRate:.03},isActive:!0,createdAt:"2024-02-01T14:30:00Z"}])},p=()=>{d({name:"",type:"courier",contactInfo:{phone:"",email:"",address:""},serviceAreas:[],pricing:{baseRate:0,weightRate:0,volumeRate:0},performance:{rating:0,onTimeRate:0,damageRate:0},isActive:!0}),o(!1),i(!0)},f=u=>{d({...u}),a(u),o(!0),i(!0)},y=(u,h)=>{if(u.includes(".")){const[g,j]=u.split(".");d(T=>({...T,[g]:{...T[g],[j]:h}}))}else d(g=>({...g,[u]:h}))},b=u=>{if(u.preventDefault(),!c.name.trim()){alert("請輸入物流商名稱");return}console.log("Submitting provider data:",c),i(!1),alert(l?"物流商更新成功":"物流商創建成功")},v=u=>{confirm(`確定要刪除物流商「${u.name}」嗎？`)&&alert("刪除功能待實現")},S=u=>({courier:"宅配服務",express:"快遞服務",post:"郵政服務",logistics:"物流公司"})[u]||u,_=u=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(u),w=u=>`${(u*100).toFixed(1)}%`,N=u=>`${u.toFixed(1)}★`;return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"物流商管理"}),e.jsx("p",{className:"text-gray-600",children:"管理配送夥伴資訊、服務範圍、價格協商、績效評估"})]}),e.jsx("button",{onClick:p,className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b3723f] transition-colors",children:"+ 新增物流商"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"物流商列表"}),e.jsx("div",{className:"space-y-4",children:s.map(u=>e.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${(r==null?void 0:r.id)===u.id?"border-[#cc824d] bg-[#cc824d]/5":"border-gray-200 hover:border-[#cc824d]/50"}`,onClick:()=>a(u),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:u.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${u.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:u.isActive?"啟用":"停用"})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"服務類型:"})," ",S(u.type)]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"基本費率:"})," ",_(u.pricing.baseRate),e.jsxs("span",{className:"ml-4",children:[e.jsx("span",{className:"font-medium",children:"重量費率:"})," ",_(u.pricing.weightRate),"/kg"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"評分:"})," ",N(u.performance.rating),e.jsxs("span",{className:"ml-4",children:[e.jsx("span",{className:"font-medium",children:"準時率:"})," ",w(u.performance.onTimeRate)]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:h=>{h.stopPropagation(),f(u)},className:"text-[#cc824d] hover:text-[#b3723f] text-sm",children:"編輯"}),e.jsx("button",{onClick:h=>{h.stopPropagation(),v(u)},className:"text-red-600 hover:text-red-700 text-sm",children:"刪除"})]})]}),u.serviceAreas&&u.serviceAreas.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"服務範圍:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[u.serviceAreas.slice(0,3).map((h,g)=>e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:h},g)),u.serviceAreas.length>3&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",u.serviceAreas.length-3," more"]})]})]})]},u.id))}),s.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"尚無物流商"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"建立您的第一個物流合作夥伴"})]})]})}),e.jsx("div",{className:"space-y-6",children:r&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"物流商詳情"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"基本資訊"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"名稱:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"類型:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:S(r.type)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"狀態:"}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${r.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.isActive?"啟用":"停用"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"聯絡資訊"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"電話:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.contactInfo.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"信箱:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.contactInfo.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"地址:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.contactInfo.address})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"價格資訊"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"基本費率:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:_(r.pricing.baseRate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"重量費率:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[_(r.pricing.weightRate),"/kg"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"體積費率:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[_(r.pricing.volumeRate),"/m³"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"績效指標"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"服務評分"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:N(r.performance.rating)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"準時送達率"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:w(r.performance.onTimeRate)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"貨損率"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:w(r.performance.damageRate)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"服務範圍"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.serviceAreas.map((u,h)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:u},h))})]})]})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:l?"編輯物流商":"新增物流商"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"基本資訊"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"物流商名稱 *"}),e.jsx("input",{type:"text",value:c.name,onChange:u=>y("name",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"服務類型"}),e.jsxs("select",{value:c.type,onChange:u=>y("type",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"courier",children:"宅配服務"}),e.jsx("option",{value:"express",children:"快遞服務"}),e.jsx("option",{value:"post",children:"郵政服務"}),e.jsx("option",{value:"logistics",children:"物流公司"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"聯絡資訊"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"電話"}),e.jsx("input",{type:"text",value:c.contactInfo.phone,onChange:u=>y("contactInfo.phone",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"信箱"}),e.jsx("input",{type:"email",value:c.contactInfo.email,onChange:u=>y("contactInfo.email",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"地址"}),e.jsx("input",{type:"text",value:c.contactInfo.address,onChange:u=>y("contactInfo.address",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"價格資訊"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"基本費率"}),e.jsx("input",{type:"number",min:"0",step:"1",value:c.pricing.baseRate,onChange:u=>y("pricing.baseRate",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"重量費率 (/kg)"}),e.jsx("input",{type:"number",min:"0",step:"1",value:c.pricing.weightRate,onChange:u=>y("pricing.weightRate",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"體積費率 (/m³)"}),e.jsx("input",{type:"number",min:"0",step:"1",value:c.pricing.volumeRate,onChange:u=>y("pricing.volumeRate",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:c.isActive,onChange:u=>y("isActive",u.target.checked),className:"mr-2 text-[#cc824d] focus:ring-[#cc824d]"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"啟用此物流商"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"取消"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:l?"更新":"創建"})]})]})})})]})})},KA=()=>e.jsxs(aa,{children:[e.jsx(q,{index:!0,element:e.jsx(GA,{})}),e.jsx(q,{path:"shipments",element:e.jsx(HA,{})}),e.jsx(q,{path:"shipping-rates",element:e.jsx(qA,{})}),e.jsx(q,{path:"tracking",element:e.jsx(YA,{})}),e.jsx(q,{path:"returns",element:e.jsx(ZA,{})}),e.jsx(q,{path:"analytics",element:e.jsx(QA,{})}),e.jsx(q,{path:"providers",element:e.jsx(XA,{})})]}),gw=m.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"}),Ex=m.createContext({}),Tx=m.createContext(null),Dx=typeof document<"u",uf=Dx?m.useLayoutEffect:m.useEffect,fw=m.createContext({strict:!1}),xf=s=>s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),JA="framerAppearId",yw="data-"+xf(JA);function e9(s,t,r,a){const{visualElement:n}=m.useContext(Ex),i=m.useContext(fw),l=m.useContext(Tx),o=m.useContext(gw).reducedMotion,c=m.useRef();a=a||i.renderer,!c.current&&a&&(c.current=a(s,{visualState:t,parent:n,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:o}));const d=c.current;m.useInsertionEffect(()=>{d&&d.update(r,l)});const x=m.useRef(!!(r[yw]&&!window.HandoffComplete));return uf(()=>{d&&(d.render(),x.current&&d.animationState&&d.animationState.animateChanges())}),m.useEffect(()=>{d&&(d.updateFeatures(),!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(x.current=!1,window.HandoffComplete=!0))}),d}function ao(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function t9(s,t,r){return m.useCallback(a=>{a&&s.mount&&s.mount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):ao(r)&&(r.current=a))},[t])}function Ad(s){return typeof s=="string"||Array.isArray(s)}function Ax(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const hf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pf=["initial",...hf];function Ix(s){return Ax(s.animate)||pf.some(t=>Ad(s[t]))}function bw(s){return!!(Ix(s)||s.variants)}function s9(s,t){if(Ix(s)){const{initial:r,animate:a}=s;return{initial:r===!1||Ad(r)?r:void 0,animate:Ad(a)?a:void 0}}return s.inherit!==!1?t:{}}function r9(s){const{initial:t,animate:r}=s9(s,m.useContext(Ex));return m.useMemo(()=>({initial:t,animate:r}),[iv(t),iv(r)])}function iv(s){return Array.isArray(s)?s.join(" "):s}const lv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Id={};for(const s in lv)Id[s]={isEnabled:t=>lv[s].some(r=>!!t[r])};function a9(s){for(const t in s)Id[t]={...Id[t],...s[t]}}const gf=m.createContext({}),vw=m.createContext({}),n9=Symbol.for("motionComponentSymbol");function i9({preloadedFeatures:s,createVisualElement:t,useRender:r,useVisualState:a,Component:n}){s&&a9(s);function i(o,c){let d;const x={...m.useContext(gw),...o,layoutId:l9(o)},{isStatic:p}=x,f=r9(o),y=a(o,p);if(!p&&Dx){f.visualElement=e9(n,y,x,t);const b=m.useContext(vw),v=m.useContext(fw).strict;f.visualElement&&(d=f.visualElement.loadFeatures(x,v,s,b))}return m.createElement(Ex.Provider,{value:f},d&&f.visualElement?m.createElement(d,{visualElement:f.visualElement,...x}):null,r(n,o,t9(y,f.visualElement,c),y,p,f.visualElement))}const l=m.forwardRef(i);return l[n9]=n,l}function l9({layoutId:s}){const t=m.useContext(gf).id;return t&&s!==void 0?t+"-"+s:s}function o9(s){function t(a,n={}){return i9(s(a,n))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(a,n)=>(r.has(n)||r.set(n,t(n)),r.get(n))})}const c9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ff(s){return typeof s!="string"||s.includes("-")?!1:!!(c9.indexOf(s)>-1||/[A-Z]/.test(s))}const Zu={};function d9(s){Object.assign(Zu,s)}const Hd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],El=new Set(Hd);function jw(s,{layout:t,layoutId:r}){return El.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!Zu[s]||s==="opacity")}const pr=s=>!!(s&&s.getVelocity),m9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},u9=Hd.length;function x9(s,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},a,n){let i="";for(let l=0;l<u9;l++){const o=Hd[l];if(s[o]!==void 0){const c=m9[o]||o;i+=`${c}(${s[o]}) `}}return t&&!s.z&&(i+="translateZ(0)"),i=i.trim(),n?i=n(s,a?"":i):r&&a&&(i="none"),i}const Nw=s=>t=>typeof t=="string"&&t.startsWith(s),ww=Nw("--"),jp=Nw("var(--"),h9=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,p9=(s,t)=>t&&typeof s=="number"?t.transform(s):s,_i=(s,t,r)=>Math.min(Math.max(r,s),t),Tl={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Kc={...Tl,transform:s=>_i(0,1,s)},Dm={...Tl,default:1},Jc=s=>Math.round(s*1e5)/1e5,Rx=/(-)?([\d]*\.?[\d])+/g,_w=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,g9=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function qd(s){return typeof s=="string"}const Yd=s=>({test:t=>qd(t)&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),On=Yd("deg"),za=Yd("%"),me=Yd("px"),f9=Yd("vh"),y9=Yd("vw"),ov={...za,parse:s=>za.parse(s)/100,transform:s=>za.transform(s*100)},cv={...Tl,transform:Math.round},Sw={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,size:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,rotate:On,rotateX:On,rotateY:On,rotateZ:On,scale:Dm,scaleX:Dm,scaleY:Dm,scaleZ:Dm,skew:On,skewX:On,skewY:On,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:Kc,originX:ov,originY:ov,originZ:me,zIndex:cv,fillOpacity:Kc,strokeOpacity:Kc,numOctaves:cv};function yf(s,t,r,a){const{style:n,vars:i,transform:l,transformOrigin:o}=s;let c=!1,d=!1,x=!0;for(const p in t){const f=t[p];if(ww(p)){i[p]=f;continue}const y=Sw[p],b=p9(f,y);if(El.has(p)){if(c=!0,l[p]=b,!x)continue;f!==(y.default||0)&&(x=!1)}else p.startsWith("origin")?(d=!0,o[p]=b):n[p]=b}if(t.transform||(c||a?n.transform=x9(s.transform,r,x,a):n.transform&&(n.transform="none")),d){const{originX:p="50%",originY:f="50%",originZ:y=0}=o;n.transformOrigin=`${p} ${f} ${y}`}}const bf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kw(s,t,r){for(const a in t)!pr(t[a])&&!jw(a,r)&&(s[a]=t[a])}function b9({transformTemplate:s},t,r){return m.useMemo(()=>{const a=bf();return yf(a,t,{enableHardwareAcceleration:!r},s),Object.assign({},a.vars,a.style)},[t])}function v9(s,t,r){const a=s.style||{},n={};return kw(n,a,s),Object.assign(n,b9(s,t,r)),s.transformValues?s.transformValues(n):n}function j9(s,t,r){const a={},n=v9(s,t,r);return s.drag&&s.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(a.tabIndex=0),a.style=n,a}const N9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qu(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||N9.has(s)}let Cw=s=>!Qu(s);function w9(s){s&&(Cw=t=>t.startsWith("on")?!Qu(t):s(t))}try{w9(require("@emotion/is-prop-valid").default)}catch{}function _9(s,t,r){const a={};for(const n in s)n==="values"&&typeof s.values=="object"||(Cw(n)||r===!0&&Qu(n)||!t&&!Qu(n)||s.draggable&&n.startsWith("onDrag"))&&(a[n]=s[n]);return a}function dv(s,t,r){return typeof s=="string"?s:me.transform(t+r*s)}function S9(s,t,r){const a=dv(t,s.x,s.width),n=dv(r,s.y,s.height);return`${a} ${n}`}const k9={offset:"stroke-dashoffset",array:"stroke-dasharray"},C9={offset:"strokeDashoffset",array:"strokeDasharray"};function E9(s,t,r=1,a=0,n=!0){s.pathLength=1;const i=n?k9:C9;s[i.offset]=me.transform(-a);const l=me.transform(t),o=me.transform(r);s[i.array]=`${l} ${o}`}function vf(s,{attrX:t,attrY:r,attrScale:a,originX:n,originY:i,pathLength:l,pathSpacing:o=1,pathOffset:c=0,...d},x,p,f){if(yf(s,d,x,f),p){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:y,style:b,dimensions:v}=s;y.transform&&(v&&(b.transform=y.transform),delete y.transform),v&&(n!==void 0||i!==void 0||b.transform)&&(b.transformOrigin=S9(v,n!==void 0?n:.5,i!==void 0?i:.5)),t!==void 0&&(y.x=t),r!==void 0&&(y.y=r),a!==void 0&&(y.scale=a),l!==void 0&&E9(y,l,o,c,!1)}const Ew=()=>({...bf(),attrs:{}}),jf=s=>typeof s=="string"&&s.toLowerCase()==="svg";function T9(s,t,r,a){const n=m.useMemo(()=>{const i=Ew();return vf(i,t,{enableHardwareAcceleration:!1},jf(a),s.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(s.style){const i={};kw(i,s.style,s),n.style={...i,...n.style}}return n}function D9(s=!1){return(r,a,n,{latestValues:i},l)=>{const c=(ff(r)?T9:j9)(a,i,l,r),x={..._9(a,typeof r=="string",s),...c,ref:n},{children:p}=a,f=m.useMemo(()=>pr(p)?p.get():p,[p]);return m.createElement(r,{...x,children:f})}}function Tw(s,{style:t,vars:r},a,n){Object.assign(s.style,t,n&&n.getProjectionStyles(a));for(const i in r)s.style.setProperty(i,r[i])}const Dw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Aw(s,t,r,a){Tw(s,t,void 0,a);for(const n in t.attrs)s.setAttribute(Dw.has(n)?n:xf(n),t.attrs[n])}function Nf(s,t){const{style:r}=s,a={};for(const n in r)(pr(r[n])||t.style&&pr(t.style[n])||jw(n,s))&&(a[n]=r[n]);return a}function Iw(s,t){const r=Nf(s,t);for(const a in s)if(pr(s[a])||pr(t[a])){const n=Hd.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[n]=s[a]}return r}function wf(s,t,r,a={},n={}){return typeof t=="function"&&(t=t(r!==void 0?r:s.custom,a,n)),typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:s.custom,a,n)),t}function Rw(s){const t=m.useRef(null);return t.current===null&&(t.current=s()),t.current}const Xu=s=>Array.isArray(s),A9=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),I9=s=>Xu(s)?s[s.length-1]||0:s;function ru(s){const t=pr(s)?s.get():s;return A9(t)?t.toValue():t}function R9({scrapeMotionValuesFromProps:s,createRenderState:t,onMount:r},a,n,i){const l={latestValues:P9(a,n,i,s),renderState:t()};return r&&(l.mount=o=>r(a,o,l)),l}const Pw=s=>(t,r)=>{const a=m.useContext(Ex),n=m.useContext(Tx),i=()=>R9(s,t,a,n);return r?i():Rw(i)};function P9(s,t,r,a){const n={},i=a(s,{});for(const f in i)n[f]=ru(i[f]);let{initial:l,animate:o}=s;const c=Ix(s),d=bw(s);t&&d&&!c&&s.inherit!==!1&&(l===void 0&&(l=t.initial),o===void 0&&(o=t.animate));let x=r?r.initial===!1:!1;x=x||l===!1;const p=x?o:l;return p&&typeof p!="boolean"&&!Ax(p)&&(Array.isArray(p)?p:[p]).forEach(y=>{const b=wf(s,y);if(!b)return;const{transitionEnd:v,transition:S,..._}=b;for(const w in _){let N=_[w];if(Array.isArray(N)){const u=x?N.length-1:0;N=N[u]}N!==null&&(n[w]=N)}for(const w in v)n[w]=v[w]}),n}const St=s=>s;class mv{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function M9(s){let t=new mv,r=new mv,a=0,n=!1,i=!1;const l=new WeakSet,o={schedule:(c,d=!1,x=!1)=>{const p=x&&n,f=p?t:r;return d&&l.add(c),f.add(c)&&p&&n&&(a=t.order.length),c},cancel:c=>{r.remove(c),l.delete(c)},process:c=>{if(n){i=!0;return}if(n=!0,[t,r]=[r,t],r.clear(),a=t.order.length,a)for(let d=0;d<a;d++){const x=t.order[d];x(c),l.has(x)&&(o.schedule(x),s())}n=!1,i&&(i=!1,o.process(c))}};return o}const Am=["prepare","read","update","preRender","render","postRender"],O9=40;function L9(s,t){let r=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=Am.reduce((p,f)=>(p[f]=M9(()=>r=!0),p),{}),l=p=>i[p].process(n),o=()=>{const p=performance.now();r=!1,n.delta=a?1e3/60:Math.max(Math.min(p-n.timestamp,O9),1),n.timestamp=p,n.isProcessing=!0,Am.forEach(l),n.isProcessing=!1,r&&t&&(a=!1,s(o))},c=()=>{r=!0,a=!0,n.isProcessing||s(o)};return{schedule:Am.reduce((p,f)=>{const y=i[f];return p[f]=(b,v=!1,S=!1)=>(r||c(),y.schedule(b,v,S)),p},{}),cancel:p=>Am.forEach(f=>i[f].cancel(p)),state:n,steps:i}}const{schedule:rt,cancel:_n,state:Ss,steps:Ph}=L9(typeof requestAnimationFrame<"u"?requestAnimationFrame:St,!0),F9={useVisualState:Pw({scrapeMotionValuesFromProps:Iw,createRenderState:Ew,onMount:(s,t,{renderState:r,latestValues:a})=>{rt.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),rt.render(()=>{vf(r,a,{enableHardwareAcceleration:!1},jf(t.tagName),s.transformTemplate),Aw(t,r)})}})},$9={useVisualState:Pw({scrapeMotionValuesFromProps:Nf,createRenderState:bf})};function V9(s,{forwardMotionProps:t=!1},r,a){return{...ff(s)?F9:$9,preloadedFeatures:r,useRender:D9(t),createVisualElement:a,Component:s}}function cn(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}const Mw=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1;function Px(s,t="page"){return{point:{x:s[t+"X"],y:s[t+"Y"]}}}const U9=s=>t=>Mw(t)&&s(t,Px(t));function xn(s,t,r,a){return cn(s,t,U9(r),a)}const B9=(s,t)=>r=>t(s(r)),xi=(...s)=>s.reduce(B9);function Ow(s){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=s,r):!1}}const uv=Ow("dragHorizontal"),xv=Ow("dragVertical");function Lw(s){let t=!1;if(s==="y")t=xv();else if(s==="x")t=uv();else{const r=uv(),a=xv();r&&a?t=()=>{r(),a()}:(r&&r(),a&&a())}return t}function Fw(){const s=Lw(!0);return s?(s(),!1):!0}class Ii{constructor(t){this.isMounted=!1,this.node=t}update(){}}function hv(s,t){const r="pointer"+(t?"enter":"leave"),a="onHover"+(t?"Start":"End"),n=(i,l)=>{if(i.pointerType==="touch"||Fw())return;const o=s.getProps();s.animationState&&o.whileHover&&s.animationState.setActive("whileHover",t),o[a]&&rt.update(()=>o[a](i,l))};return xn(s.current,r,n,{passive:!s.getProps()[a]})}class z9 extends Ii{mount(){this.unmount=xi(hv(this.node,!0),hv(this.node,!1))}unmount(){}}class W9 extends Ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xi(cn(this.node.current,"focus",()=>this.onFocus()),cn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const $w=(s,t)=>t?s===t?!0:$w(s,t.parentElement):!1;function Mh(s,t){if(!t)return;const r=new PointerEvent("pointer"+s);t(r,Px(r))}class G9 extends Ii{constructor(){super(...arguments),this.removeStartListeners=St,this.removeEndListeners=St,this.removeAccessibleListeners=St,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const a=this.node.getProps(),i=xn(window,"pointerup",(o,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:x,globalTapTarget:p}=this.node.getProps();rt.update(()=>{!p&&!$w(this.node.current,o.target)?x&&x(o,c):d&&d(o,c)})},{passive:!(a.onTap||a.onPointerUp)}),l=xn(window,"pointercancel",(o,c)=>this.cancelPress(o,c),{passive:!(a.onTapCancel||a.onPointerCancel)});this.removeEndListeners=xi(i,l),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const l=o=>{o.key!=="Enter"||!this.checkPressEnd()||Mh("up",(c,d)=>{const{onTap:x}=this.node.getProps();x&&rt.update(()=>x(c,d))})};this.removeEndListeners(),this.removeEndListeners=cn(this.node.current,"keyup",l),Mh("down",(o,c)=>{this.startPress(o,c)})},r=cn(this.node.current,"keydown",t),a=()=>{this.isPressing&&Mh("cancel",(i,l)=>this.cancelPress(i,l))},n=cn(this.node.current,"blur",a);this.removeAccessibleListeners=xi(r,n)}}startPress(t,r){this.isPressing=!0;const{onTapStart:a,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),a&&rt.update(()=>a(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Fw()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:a}=this.node.getProps();a&&rt.update(()=>a(t,r))}mount(){const t=this.node.getProps(),r=xn(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),a=cn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=xi(r,a)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Np=new WeakMap,Oh=new WeakMap,H9=s=>{const t=Np.get(s.target);t&&t(s)},q9=s=>{s.forEach(H9)};function Y9({root:s,...t}){const r=s||document;Oh.has(r)||Oh.set(r,{});const a=Oh.get(r),n=JSON.stringify(t);return a[n]||(a[n]=new IntersectionObserver(q9,{root:s,...t})),a[n]}function Z9(s,t,r){const a=Y9(t);return Np.set(s,r),a.observe(s),()=>{Np.delete(s),a.unobserve(s)}}const Q9={some:0,all:1};class X9 extends Ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:n="some",once:i}=t,l={root:r?r.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:Q9[n]},o=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:x,onViewportLeave:p}=this.node.getProps(),f=d?x:p;f&&f(c)};return Z9(this.node.current,l,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(K9(t,r))&&this.startObserver()}unmount(){}}function K9({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const J9={inView:{Feature:X9},tap:{Feature:G9},focus:{Feature:W9},hover:{Feature:z9}};function Vw(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}function e7(s){const t={};return s.values.forEach((r,a)=>t[a]=r.get()),t}function t7(s){const t={};return s.values.forEach((r,a)=>t[a]=r.getVelocity()),t}function Mx(s,t,r){const a=s.getProps();return wf(a,t,r!==void 0?r:a.custom,e7(s),t7(s))}let s7=St,_f=St;const hi=s=>s*1e3,hn=s=>s/1e3,r7={current:!1},Uw=s=>Array.isArray(s)&&typeof s[0]=="number";function Bw(s){return!!(!s||typeof s=="string"&&zw[s]||Uw(s)||Array.isArray(s)&&s.every(Bw))}const Tc=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,zw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Tc([0,.65,.55,1]),circOut:Tc([.55,0,1,.45]),backIn:Tc([.31,.01,.66,-.59]),backOut:Tc([.33,1.53,.69,.99])};function Ww(s){if(s)return Uw(s)?Tc(s):Array.isArray(s)?s.map(Ww):zw[s]}function a7(s,t,r,{delay:a=0,duration:n,repeat:i=0,repeatType:l="loop",ease:o,times:c}={}){const d={[t]:r};c&&(d.offset=c);const x=Ww(o);return Array.isArray(x)&&(d.easing=x),s.animate(d,{delay:a,duration:n,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"})}function n7(s,{repeat:t,repeatType:r="loop"}){const a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const Gw=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,i7=1e-7,l7=12;function o7(s,t,r,a,n){let i,l,o=0;do l=t+(r-t)/2,i=Gw(l,a,n)-s,i>0?r=l:t=l;while(Math.abs(i)>i7&&++o<l7);return l}function Zd(s,t,r,a){if(s===t&&r===a)return St;const n=i=>o7(i,0,1,s,r);return i=>i===0||i===1?i:Gw(n(i),t,a)}const c7=Zd(.42,0,1,1),d7=Zd(0,0,.58,1),Hw=Zd(.42,0,.58,1),m7=s=>Array.isArray(s)&&typeof s[0]!="number",qw=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,Yw=s=>t=>1-s(1-t),Sf=s=>1-Math.sin(Math.acos(s)),Zw=Yw(Sf),u7=qw(Sf),Qw=Zd(.33,1.53,.69,.99),kf=Yw(Qw),x7=qw(kf),h7=s=>(s*=2)<1?.5*kf(s):.5*(2-Math.pow(2,-10*(s-1))),p7={linear:St,easeIn:c7,easeInOut:Hw,easeOut:d7,circIn:Sf,circInOut:u7,circOut:Zw,backIn:kf,backInOut:x7,backOut:Qw,anticipate:h7},pv=s=>{if(Array.isArray(s)){_f(s.length===4);const[t,r,a,n]=s;return Zd(t,r,a,n)}else if(typeof s=="string")return p7[s];return s},Cf=(s,t)=>r=>!!(qd(r)&&g9.test(r)&&r.startsWith(s)||t&&Object.prototype.hasOwnProperty.call(r,t)),Xw=(s,t,r)=>a=>{if(!qd(a))return a;const[n,i,l,o]=a.match(Rx);return{[s]:parseFloat(n),[t]:parseFloat(i),[r]:parseFloat(l),alpha:o!==void 0?parseFloat(o):1}},g7=s=>_i(0,255,s),Lh={...Tl,transform:s=>Math.round(g7(s))},tl={test:Cf("rgb","red"),parse:Xw("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+Lh.transform(s)+", "+Lh.transform(t)+", "+Lh.transform(r)+", "+Jc(Kc.transform(a))+")"};function f7(s){let t="",r="",a="",n="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),n=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),n=s.substring(4,5),t+=t,r+=r,a+=a,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const wp={test:Cf("#"),parse:f7,transform:tl.transform},no={test:Cf("hsl","hue"),parse:Xw("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+za.transform(Jc(t))+", "+za.transform(Jc(r))+", "+Jc(Kc.transform(a))+")"},Fs={test:s=>tl.test(s)||wp.test(s)||no.test(s),parse:s=>tl.test(s)?tl.parse(s):no.test(s)?no.parse(s):wp.parse(s),transform:s=>qd(s)?s:s.hasOwnProperty("red")?tl.transform(s):no.transform(s)},gt=(s,t,r)=>-r*s+r*t+s;function Fh(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function y7({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let n=0,i=0,l=0;if(!t)n=i=l=r;else{const o=r<.5?r*(1+t):r+t-r*t,c=2*r-o;n=Fh(c,o,s+1/3),i=Fh(c,o,s),l=Fh(c,o,s-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:a}}const $h=(s,t,r)=>{const a=s*s;return Math.sqrt(Math.max(0,r*(t*t-a)+a))},b7=[wp,tl,no],v7=s=>b7.find(t=>t.test(s));function gv(s){const t=v7(s);let r=t.parse(s);return t===no&&(r=y7(r)),r}const Kw=(s,t)=>{const r=gv(s),a=gv(t),n={...r};return i=>(n.red=$h(r.red,a.red,i),n.green=$h(r.green,a.green,i),n.blue=$h(r.blue,a.blue,i),n.alpha=gt(r.alpha,a.alpha,i),tl.transform(n))};function j7(s){var t,r;return isNaN(s)&&qd(s)&&(((t=s.match(Rx))===null||t===void 0?void 0:t.length)||0)+(((r=s.match(_w))===null||r===void 0?void 0:r.length)||0)>0}const Jw={regex:h9,countKey:"Vars",token:"${v}",parse:St},e5={regex:_w,countKey:"Colors",token:"${c}",parse:Fs.parse},t5={regex:Rx,countKey:"Numbers",token:"${n}",parse:Tl.parse};function Vh(s,{regex:t,countKey:r,token:a,parse:n}){const i=s.tokenised.match(t);i&&(s["num"+r]=i.length,s.tokenised=s.tokenised.replace(t,a),s.values.push(...i.map(n)))}function Ku(s){const t=s.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Vh(r,Jw),Vh(r,e5),Vh(r,t5),r}function s5(s){return Ku(s).values}function r5(s){const{values:t,numColors:r,numVars:a,tokenised:n}=Ku(s),i=t.length;return l=>{let o=n;for(let c=0;c<i;c++)c<a?o=o.replace(Jw.token,l[c]):c<a+r?o=o.replace(e5.token,Fs.transform(l[c])):o=o.replace(t5.token,Jc(l[c]));return o}}const N7=s=>typeof s=="number"?0:s;function w7(s){const t=s5(s);return r5(s)(t.map(N7))}const Si={test:j7,parse:s5,createTransformer:r5,getAnimatableNone:w7},a5=(s,t)=>r=>`${r>0?t:s}`;function n5(s,t){return typeof s=="number"?r=>gt(s,t,r):Fs.test(s)?Kw(s,t):s.startsWith("var(")?a5(s,t):l5(s,t)}const i5=(s,t)=>{const r=[...s],a=r.length,n=s.map((i,l)=>n5(i,t[l]));return i=>{for(let l=0;l<a;l++)r[l]=n[l](i);return r}},_7=(s,t)=>{const r={...s,...t},a={};for(const n in r)s[n]!==void 0&&t[n]!==void 0&&(a[n]=n5(s[n],t[n]));return n=>{for(const i in a)r[i]=a[i](n);return r}},l5=(s,t)=>{const r=Si.createTransformer(t),a=Ku(s),n=Ku(t);return a.numVars===n.numVars&&a.numColors===n.numColors&&a.numNumbers>=n.numNumbers?xi(i5(a.values,n.values),r):a5(s,t)},Rd=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a},fv=(s,t)=>r=>gt(s,t,r);function S7(s){return typeof s=="number"?fv:typeof s=="string"?Fs.test(s)?Kw:l5:Array.isArray(s)?i5:typeof s=="object"?_7:fv}function k7(s,t,r){const a=[],n=r||S7(s[0]),i=s.length-1;for(let l=0;l<i;l++){let o=n(s[l],s[l+1]);if(t){const c=Array.isArray(t)?t[l]||St:t;o=xi(c,o)}a.push(o)}return a}function o5(s,t,{clamp:r=!0,ease:a,mixer:n}={}){const i=s.length;if(_f(i===t.length),i===1)return()=>t[0];s[0]>s[i-1]&&(s=[...s].reverse(),t=[...t].reverse());const l=k7(t,a,n),o=l.length,c=d=>{let x=0;if(o>1)for(;x<s.length-2&&!(d<s[x+1]);x++);const p=Rd(s[x],s[x+1],d);return l[x](p)};return r?d=>c(_i(s[0],s[i-1],d)):c}function C7(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const n=Rd(0,t,a);s.push(gt(r,1,n))}}function E7(s){const t=[0];return C7(t,s.length-1),t}function T7(s,t){return s.map(r=>r*t)}function D7(s,t){return s.map(()=>t||Hw).splice(0,s.length-1)}function Ju({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const n=m7(a)?a.map(pv):pv(a),i={done:!1,value:t[0]},l=T7(r&&r.length===t.length?r:E7(t),s),o=o5(l,t,{ease:Array.isArray(n)?n:D7(t,n)});return{calculatedDuration:s,next:c=>(i.value=o(c),i.done=c>=s,i)}}function c5(s,t){return t?s*(1e3/t):0}const A7=5;function d5(s,t,r){const a=Math.max(t-A7,0);return c5(r-s(a),t-a)}const Uh=.001,I7=.01,yv=10,R7=.05,P7=1;function M7({duration:s=800,bounce:t=.25,velocity:r=0,mass:a=1}){let n,i;s7(s<=hi(yv));let l=1-t;l=_i(R7,P7,l),s=_i(I7,yv,hn(s)),l<1?(n=d=>{const x=d*l,p=x*s,f=x-r,y=_p(d,l),b=Math.exp(-p);return Uh-f/y*b},i=d=>{const p=d*l*s,f=p*r+r,y=Math.pow(l,2)*Math.pow(d,2)*s,b=Math.exp(-p),v=_p(Math.pow(d,2),l);return(-n(d)+Uh>0?-1:1)*((f-y)*b)/v}):(n=d=>{const x=Math.exp(-d*s),p=(d-r)*s+1;return-Uh+x*p},i=d=>{const x=Math.exp(-d*s),p=(r-d)*(s*s);return x*p});const o=5/s,c=L7(n,i,o);if(s=hi(s),isNaN(c))return{stiffness:100,damping:10,duration:s};{const d=Math.pow(c,2)*a;return{stiffness:d,damping:l*2*Math.sqrt(a*d),duration:s}}}const O7=12;function L7(s,t,r){let a=r;for(let n=1;n<O7;n++)a=a-s(a)/t(a);return a}function _p(s,t){return s*Math.sqrt(1-t*t)}const F7=["duration","bounce"],$7=["stiffness","damping","mass"];function bv(s,t){return t.some(r=>s[r]!==void 0)}function V7(s){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...s};if(!bv(s,$7)&&bv(s,F7)){const r=M7(s);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function m5({keyframes:s,restDelta:t,restSpeed:r,...a}){const n=s[0],i=s[s.length-1],l={done:!1,value:n},{stiffness:o,damping:c,mass:d,duration:x,velocity:p,isResolvedFromDuration:f}=V7({...a,velocity:-hn(a.velocity||0)}),y=p||0,b=c/(2*Math.sqrt(o*d)),v=i-n,S=hn(Math.sqrt(o/d)),_=Math.abs(v)<5;r||(r=_?.01:2),t||(t=_?.005:.5);let w;if(b<1){const N=_p(S,b);w=u=>{const h=Math.exp(-b*S*u);return i-h*((y+b*S*v)/N*Math.sin(N*u)+v*Math.cos(N*u))}}else if(b===1)w=N=>i-Math.exp(-S*N)*(v+(y+S*v)*N);else{const N=S*Math.sqrt(b*b-1);w=u=>{const h=Math.exp(-b*S*u),g=Math.min(N*u,300);return i-h*((y+b*S*v)*Math.sinh(g)+N*v*Math.cosh(g))/N}}return{calculatedDuration:f&&x||null,next:N=>{const u=w(N);if(f)l.done=N>=x;else{let h=y;N!==0&&(b<1?h=d5(w,N,u):h=0);const g=Math.abs(h)<=r,j=Math.abs(i-u)<=t;l.done=g&&j}return l.value=l.done?i:u,l}}}function vv({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:l,min:o,max:c,restDelta:d=.5,restSpeed:x}){const p=s[0],f={done:!1,value:p},y=T=>o!==void 0&&T<o||c!==void 0&&T>c,b=T=>o===void 0?c:c===void 0||Math.abs(o-T)<Math.abs(c-T)?o:c;let v=r*t;const S=p+v,_=l===void 0?S:l(S);_!==S&&(v=_-p);const w=T=>-v*Math.exp(-T/a),N=T=>_+w(T),u=T=>{const C=w(T),E=N(T);f.done=Math.abs(C)<=d,f.value=f.done?_:E};let h,g;const j=T=>{y(f.value)&&(h=T,g=m5({keyframes:[f.value,b(f.value)],velocity:d5(N,T,f.value),damping:n,stiffness:i,restDelta:d,restSpeed:x}))};return j(0),{calculatedDuration:null,next:T=>{let C=!1;return!g&&h===void 0&&(C=!0,u(T),j(T)),h!==void 0&&T>h?g.next(T-h):(!C&&u(T),f)}}}const U7=s=>{const t=({timestamp:r})=>s(r);return{start:()=>rt.update(t,!0),stop:()=>_n(t),now:()=>Ss.isProcessing?Ss.timestamp:performance.now()}},jv=2e4;function Nv(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<jv;)t+=r,a=s.next(t);return t>=jv?1/0:t}const B7={decay:vv,inertia:vv,tween:Ju,keyframes:Ju,spring:m5};function ex({autoplay:s=!0,delay:t=0,driver:r=U7,keyframes:a,type:n="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:o="loop",onPlay:c,onStop:d,onComplete:x,onUpdate:p,...f}){let y=1,b=!1,v,S;const _=()=>{S=new Promise(V=>{v=V})};_();let w;const N=B7[n]||Ju;let u;N!==Ju&&typeof a[0]!="number"&&(u=o5([0,100],a,{clamp:!1}),a=[0,100]);const h=N({...f,keyframes:a});let g;o==="mirror"&&(g=N({...f,keyframes:[...a].reverse(),velocity:-(f.velocity||0)}));let j="idle",T=null,C=null,E=null;h.calculatedDuration===null&&i&&(h.calculatedDuration=Nv(h));const{calculatedDuration:R}=h;let k=1/0,O=1/0;R!==null&&(k=R+l,O=k*(i+1)-l);let P=0;const $=V=>{if(C===null)return;y>0&&(C=Math.min(C,V)),y<0&&(C=Math.min(V-O/y,C)),T!==null?P=T:P=Math.round(V-C)*y;const B=P-t*(y>=0?1:-1),z=y>=0?B<0:B>O;P=Math.max(B,0),j==="finished"&&T===null&&(P=O);let F=P,W=h;if(i){const U=Math.min(P,O)/k;let ie=Math.floor(U),ce=U%1;!ce&&U>=1&&(ce=1),ce===1&&ie--,ie=Math.min(ie,i+1),!!(ie%2)&&(o==="reverse"?(ce=1-ce,l&&(ce-=l/k)):o==="mirror"&&(W=g)),F=_i(0,1,ce)*k}const Y=z?{done:!1,value:a[0]}:W.next(F);u&&(Y.value=u(Y.value));let{done:ne}=Y;!z&&R!==null&&(ne=y>=0?P>=O:P<=0);const ve=T===null&&(j==="finished"||j==="running"&&ne);return p&&p(Y.value),ve&&D(),Y},I=()=>{w&&w.stop(),w=void 0},L=()=>{j="idle",I(),v(),_(),C=E=null},D=()=>{j="finished",x&&x(),I(),v()},M=()=>{if(b)return;w||(w=r($));const V=w.now();c&&c(),T!==null?C=V-T:(!C||j==="finished")&&(C=V),j==="finished"&&_(),E=C,T=null,j="running",w.start()};s&&M();const A={then(V,B){return S.then(V,B)},get time(){return hn(P)},set time(V){V=hi(V),P=V,T!==null||!w||y===0?T=V:C=w.now()-V/y},get duration(){const V=h.calculatedDuration===null?Nv(h):h.calculatedDuration;return hn(V)},get speed(){return y},set speed(V){V===y||!w||(y=V,A.time=hn(P))},get state(){return j},play:M,pause:()=>{j="paused",T=P},stop:()=>{b=!0,j!=="idle"&&(j="idle",d&&d(),L())},cancel:()=>{E!==null&&$(E),L()},complete:()=>{j="finished"},sample:V=>(C=0,$(V))};return A}function z7(s){let t;return()=>(t===void 0&&(t=s()),t)}const W7=z7(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),G7=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Im=10,H7=2e4,q7=(s,t)=>t.type==="spring"||s==="backgroundColor"||!Bw(t.ease);function Y7(s,t,{onUpdate:r,onComplete:a,...n}){if(!(W7()&&G7.has(t)&&!n.repeatDelay&&n.repeatType!=="mirror"&&n.damping!==0&&n.type!=="inertia"))return!1;let l=!1,o,c,d=!1;const x=()=>{c=new Promise(N=>{o=N})};x();let{keyframes:p,duration:f=300,ease:y,times:b}=n;if(q7(t,n)){const N=ex({...n,repeat:0,delay:0});let u={done:!1,value:p[0]};const h=[];let g=0;for(;!u.done&&g<H7;)u=N.sample(g),h.push(u.value),g+=Im;b=void 0,p=h,f=g-Im,y="linear"}const v=a7(s.owner.current,t,p,{...n,duration:f,ease:y,times:b}),S=()=>{d=!1,v.cancel()},_=()=>{d=!0,rt.update(S),o(),x()};return v.onfinish=()=>{d||(s.set(n7(p,n)),a&&a(),_())},{then(N,u){return c.then(N,u)},attachTimeline(N){return v.timeline=N,v.onfinish=null,St},get time(){return hn(v.currentTime||0)},set time(N){v.currentTime=hi(N)},get speed(){return v.playbackRate},set speed(N){v.playbackRate=N},get duration(){return hn(f)},play:()=>{l||(v.play(),_n(S))},pause:()=>v.pause(),stop:()=>{if(l=!0,v.playState==="idle")return;const{currentTime:N}=v;if(N){const u=ex({...n,autoplay:!1});s.setWithVelocity(u.sample(N-Im).value,u.sample(N).value,Im)}_()},complete:()=>{d||v.finish()},cancel:_}}function Z7({keyframes:s,delay:t,onUpdate:r,onComplete:a}){const n=()=>(r&&r(s[s.length-1]),a&&a(),{time:0,speed:1,duration:0,play:St,pause:St,stop:St,then:i=>(i(),Promise.resolve()),cancel:St,complete:St});return t?ex({keyframes:[0,1],duration:0,delay:t,onComplete:n}):n()}const Q7={type:"spring",stiffness:500,damping:25,restSpeed:10},X7=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),K7={type:"keyframes",duration:.8},J7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eI=(s,{keyframes:t})=>t.length>2?K7:El.has(s)?s.startsWith("scale")?X7(t[1]):Q7:J7,Sp=(s,t)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Si.test(t)||t==="0")&&!t.startsWith("url(")),tI=new Set(["brightness","contrast","saturate","opacity"]);function sI(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(Rx)||[];if(!a)return s;const n=r.replace(a,"");let i=tI.has(t)?1:0;return a!==r&&(i*=100),t+"("+i+n+")"}const rI=/([a-z-]*)\(.*?\)/g,kp={...Si,getAnimatableNone:s=>{const t=s.match(rI);return t?t.map(sI).join(" "):s}},aI={...Sw,color:Fs,backgroundColor:Fs,outlineColor:Fs,fill:Fs,stroke:Fs,borderColor:Fs,borderTopColor:Fs,borderRightColor:Fs,borderBottomColor:Fs,borderLeftColor:Fs,filter:kp,WebkitFilter:kp},Ef=s=>aI[s];function u5(s,t){let r=Ef(s);return r!==kp&&(r=Si),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const x5=s=>/^0[^.\s]+$/.test(s);function nI(s){if(typeof s=="number")return s===0;if(s!==null)return s==="none"||s==="0"||x5(s)}function iI(s,t,r,a){const n=Sp(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const l=a.from!==void 0?a.from:s.get();let o;const c=[];for(let d=0;d<i.length;d++)i[d]===null&&(i[d]=d===0?l:i[d-1]),nI(i[d])&&c.push(d),typeof i[d]=="string"&&i[d]!=="none"&&i[d]!=="0"&&(o=i[d]);if(n&&c.length&&o)for(let d=0;d<c.length;d++){const x=c[d];i[x]=u5(t,o)}return i}function lI({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:l,repeatDelay:o,from:c,elapsed:d,...x}){return!!Object.keys(x).length}function Tf(s,t){return s[t]||s.default||s}const oI={skipAnimations:!1},Df=(s,t,r,a={})=>n=>{const i=Tf(a,s)||{},l=i.delay||a.delay||0;let{elapsed:o=0}=a;o=o-hi(l);const c=iI(t,s,r,i),d=c[0],x=c[c.length-1],p=Sp(s,d),f=Sp(s,x);let y={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-o,onUpdate:b=>{t.set(b),i.onUpdate&&i.onUpdate(b)},onComplete:()=>{n(),i.onComplete&&i.onComplete()}};if(lI(i)||(y={...y,...eI(s,y)}),y.duration&&(y.duration=hi(y.duration)),y.repeatDelay&&(y.repeatDelay=hi(y.repeatDelay)),!p||!f||r7.current||i.type===!1||oI.skipAnimations)return Z7(y);if(!a.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const b=Y7(t,s,y);if(b)return b}return ex(y)};function tx(s){return!!(pr(s)&&s.add)}const h5=s=>/^\-?\d*\.?\d+$/.test(s);function Af(s,t){s.indexOf(t)===-1&&s.push(t)}function If(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}class Rf{constructor(){this.subscriptions=[]}add(t){return Af(this.subscriptions,t),()=>If(this.subscriptions,t)}notify(t,r,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,a);else for(let i=0;i<n;i++){const l=this.subscriptions[i];l&&l(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const cI=s=>!isNaN(parseFloat(s));class dI{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(a,n=!0)=>{this.prev=this.current,this.current=a;const{delta:i,timestamp:l}=Ss;this.lastUpdated!==l&&(this.timeDelta=i,this.lastUpdated=l,rt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>rt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:a})=>{a!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=cI(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Rf);const a=this.events[t].add(r);return t==="change"?()=>{a(),rt.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,a){this.set(r),this.prev=t,this.timeDelta=a}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?c5(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bo(s,t){return new dI(s,t)}const p5=s=>t=>t.test(s),mI={test:s=>s==="auto",parse:s=>s},g5=[Tl,me,za,On,y9,f9,mI],gc=s=>g5.find(p5(s)),uI=[...g5,Fs,Si],xI=s=>uI.find(p5(s));function hI(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,Bo(r))}function pI(s,t){const r=Mx(s,t);let{transitionEnd:a={},transition:n={},...i}=r?s.makeTargetAnimatable(r,!1):{};i={...i,...a};for(const l in i){const o=I9(i[l]);hI(s,l,o)}}function gI(s,t,r){var a,n;const i=Object.keys(t).filter(o=>!s.hasValue(o)),l=i.length;if(l)for(let o=0;o<l;o++){const c=i[o],d=t[c];let x=null;Array.isArray(d)&&(x=d[0]),x===null&&(x=(n=(a=r[c])!==null&&a!==void 0?a:s.readValue(c))!==null&&n!==void 0?n:t[c]),x!=null&&(typeof x=="string"&&(h5(x)||x5(x))?x=parseFloat(x):!xI(x)&&Si.test(d)&&(x=u5(c,d)),s.addValue(c,Bo(x,{owner:s})),r[c]===void 0&&(r[c]=x),x!==null&&s.setBaseTarget(c,x))}}function fI(s,t){return t?(t[s]||t.default||t).from:void 0}function yI(s,t,r){const a={};for(const n in s){const i=fI(n,t);if(i!==void 0)a[n]=i;else{const l=r.getValue(n);l&&(a[n]=l.get())}}return a}function bI({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function vI(s,t){const r=s.get();if(Array.isArray(t)){for(let a=0;a<t.length;a++)if(t[a]!==r)return!0}else return r!==t}function f5(s,t,{delay:r=0,transitionOverride:a,type:n}={}){let{transition:i=s.getDefaultTransition(),transitionEnd:l,...o}=s.makeTargetAnimatable(t);const c=s.getValue("willChange");a&&(i=a);const d=[],x=n&&s.animationState&&s.animationState.getState()[n];for(const p in o){const f=s.getValue(p),y=o[p];if(!f||y===void 0||x&&bI(x,p))continue;const b={delay:r,elapsed:0,...Tf(i||{},p)};if(window.HandoffAppearAnimations){const _=s.getProps()[yw];if(_){const w=window.HandoffAppearAnimations(_,p,f,rt);w!==null&&(b.elapsed=w,b.isHandoff=!0)}}let v=!b.isHandoff&&!vI(f,y);if(b.type==="spring"&&(f.getVelocity()||b.velocity)&&(v=!1),f.animation&&(v=!1),v)continue;f.start(Df(p,f,y,s.shouldReduceMotion&&El.has(p)?{type:!1}:b));const S=f.animation;tx(c)&&(c.add(p),S.then(()=>c.remove(p))),d.push(S)}return l&&Promise.all(d).then(()=>{l&&pI(s,l)}),d}function Cp(s,t,r={}){const a=Mx(s,t,r.custom);let{transition:n=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(n=r.transitionOverride);const i=a?()=>Promise.all(f5(s,a,r)):()=>Promise.resolve(),l=s.variantChildren&&s.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:x,staggerDirection:p}=n;return jI(s,t,d+c,x,p,r)}:()=>Promise.resolve(),{when:o}=n;if(o){const[c,d]=o==="beforeChildren"?[i,l]:[l,i];return c().then(()=>d())}else return Promise.all([i(),l(r.delay)])}function jI(s,t,r=0,a=0,n=1,i){const l=[],o=(s.variantChildren.size-1)*a,c=n===1?(d=0)=>d*a:(d=0)=>o-d*a;return Array.from(s.variantChildren).sort(NI).forEach((d,x)=>{d.notify("AnimationStart",t),l.push(Cp(d,t,{...i,delay:r+c(x)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(l)}function NI(s,t){return s.sortNodePosition(t)}function wI(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const n=t.map(i=>Cp(s,i,r));a=Promise.all(n)}else if(typeof t=="string")a=Cp(s,t,r);else{const n=typeof t=="function"?Mx(s,t,r.custom):t;a=Promise.all(f5(s,n,r))}return a.then(()=>s.notify("AnimationComplete",t))}const _I=[...hf].reverse(),SI=hf.length;function kI(s){return t=>Promise.all(t.map(({animation:r,options:a})=>wI(s,r,a)))}function CI(s){let t=kI(s);const r=TI();let a=!0;const n=(c,d)=>{const x=Mx(s,d);if(x){const{transition:p,transitionEnd:f,...y}=x;c={...c,...y,...f}}return c};function i(c){t=c(s)}function l(c,d){const x=s.getProps(),p=s.getVariantContext(!0)||{},f=[],y=new Set;let b={},v=1/0;for(let _=0;_<SI;_++){const w=_I[_],N=r[w],u=x[w]!==void 0?x[w]:p[w],h=Ad(u),g=w===d?N.isActive:null;g===!1&&(v=_);let j=u===p[w]&&u!==x[w]&&h;if(j&&a&&s.manuallyAnimateOnMount&&(j=!1),N.protectedKeys={...b},!N.isActive&&g===null||!u&&!N.prevProp||Ax(u)||typeof u=="boolean")continue;let C=EI(N.prevProp,u)||w===d&&N.isActive&&!j&&h||_>v&&h,E=!1;const R=Array.isArray(u)?u:[u];let k=R.reduce(n,{});g===!1&&(k={});const{prevResolvedValues:O={}}=N,P={...O,...k},$=I=>{C=!0,y.has(I)&&(E=!0,y.delete(I)),N.needsAnimating[I]=!0};for(const I in P){const L=k[I],D=O[I];if(b.hasOwnProperty(I))continue;let M=!1;Xu(L)&&Xu(D)?M=!Vw(L,D):M=L!==D,M?L!==void 0?$(I):y.add(I):L!==void 0&&y.has(I)?$(I):N.protectedKeys[I]=!0}N.prevProp=u,N.prevResolvedValues=k,N.isActive&&(b={...b,...k}),a&&s.blockInitialAnimation&&(C=!1),C&&(!j||E)&&f.push(...R.map(I=>({animation:I,options:{type:w,...c}})))}if(y.size){const _={};y.forEach(w=>{const N=s.getBaseTarget(w);N!==void 0&&(_[w]=N)}),f.push({animation:_})}let S=!!f.length;return a&&(x.initial===!1||x.initial===x.animate)&&!s.manuallyAnimateOnMount&&(S=!1),a=!1,S?t(f):Promise.resolve()}function o(c,d,x){var p;if(r[c].isActive===d)return Promise.resolve();(p=s.variantChildren)===null||p===void 0||p.forEach(y=>{var b;return(b=y.animationState)===null||b===void 0?void 0:b.setActive(c,d)}),r[c].isActive=d;const f=l(x,c);for(const y in r)r[y].protectedKeys={};return f}return{animateChanges:l,setActive:o,setAnimateFunction:i,getState:()=>r}}function EI(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!Vw(t,s):!1}function Ui(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TI(){return{animate:Ui(!0),whileInView:Ui(),whileHover:Ui(),whileTap:Ui(),whileDrag:Ui(),whileFocus:Ui(),exit:Ui()}}class DI extends Ii{constructor(t){super(t),t.animationState||(t.animationState=CI(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Ax(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let AI=0;class II extends Ii{constructor(){super(...arguments),this.id=AI++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t,{custom:a??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const RI={animation:{Feature:DI},exit:{Feature:II}},wv=(s,t)=>Math.abs(s-t);function PI(s,t){const r=wv(s.x,t.x),a=wv(s.y,t.y);return Math.sqrt(r**2+a**2)}class y5{constructor(t,r,{transformPagePoint:a,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=zh(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,y=PI(p.offset,{x:0,y:0})>=3;if(!f&&!y)return;const{point:b}=p,{timestamp:v}=Ss;this.history.push({...b,timestamp:v});const{onStart:S,onMove:_}=this.handlers;f||(S&&S(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,p)},this.handlePointerMove=(p,f)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Bh(f,this.transformPagePoint),rt.update(this.updatePoint,!0)},this.handlePointerUp=(p,f)=>{this.end();const{onEnd:y,onSessionEnd:b,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=zh(p.type==="pointercancel"?this.lastMoveEventInfo:Bh(f,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,S),b&&b(p,S)},!Mw(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=a,this.contextWindow=n||window;const l=Px(t),o=Bh(l,this.transformPagePoint),{point:c}=o,{timestamp:d}=Ss;this.history=[{...c,timestamp:d}];const{onSessionStart:x}=r;x&&x(t,zh(o,this.history)),this.removeListeners=xi(xn(this.contextWindow,"pointermove",this.handlePointerMove),xn(this.contextWindow,"pointerup",this.handlePointerUp),xn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),_n(this.updatePoint)}}function Bh(s,t){return t?{point:t(s.point)}:s}function _v(s,t){return{x:s.x-t.x,y:s.y-t.y}}function zh({point:s},t){return{point:s,delta:_v(s,b5(t)),offset:_v(s,MI(t)),velocity:OI(t,.1)}}function MI(s){return s[0]}function b5(s){return s[s.length-1]}function OI(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const n=b5(s);for(;r>=0&&(a=s[r],!(n.timestamp-a.timestamp>hi(t)));)r--;if(!a)return{x:0,y:0};const i=hn(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const l={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function $r(s){return s.max-s.min}function Ep(s,t=0,r=.01){return Math.abs(s-t)<=r}function Sv(s,t,r,a=.5){s.origin=a,s.originPoint=gt(t.min,t.max,s.origin),s.scale=$r(r)/$r(t),(Ep(s.scale,1,1e-4)||isNaN(s.scale))&&(s.scale=1),s.translate=gt(r.min,r.max,s.origin)-s.originPoint,(Ep(s.translate)||isNaN(s.translate))&&(s.translate=0)}function ed(s,t,r,a){Sv(s.x,t.x,r.x,a?a.originX:void 0),Sv(s.y,t.y,r.y,a?a.originY:void 0)}function kv(s,t,r){s.min=r.min+t.min,s.max=s.min+$r(t)}function LI(s,t,r){kv(s.x,t.x,r.x),kv(s.y,t.y,r.y)}function Cv(s,t,r){s.min=t.min-r.min,s.max=s.min+$r(t)}function td(s,t,r){Cv(s.x,t.x,r.x),Cv(s.y,t.y,r.y)}function FI(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?gt(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?gt(r,s,a.max):Math.min(s,r)),s}function Ev(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function $I(s,{top:t,left:r,bottom:a,right:n}){return{x:Ev(s.x,r,n),y:Ev(s.y,t,a)}}function Tv(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function VI(s,t){return{x:Tv(s.x,t.x),y:Tv(s.y,t.y)}}function UI(s,t){let r=.5;const a=$r(s),n=$r(t);return n>a?r=Rd(t.min,t.max-a,s.min):a>n&&(r=Rd(s.min,s.max-n,t.min)),_i(0,1,r)}function BI(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const Tp=.35;function zI(s=Tp){return s===!1?s=0:s===!0&&(s=Tp),{x:Dv(s,"left","right"),y:Dv(s,"top","bottom")}}function Dv(s,t,r){return{min:Av(s,t),max:Av(s,r)}}function Av(s,t){return typeof s=="number"?s:s[t]||0}const Iv=()=>({translate:0,scale:1,origin:0,originPoint:0}),io=()=>({x:Iv(),y:Iv()}),Rv=()=>({min:0,max:0}),Ot=()=>({x:Rv(),y:Rv()});function Gr(s){return[s("x"),s("y")]}function v5({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function WI({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function GI(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function Wh(s){return s===void 0||s===1}function Dp({scale:s,scaleX:t,scaleY:r}){return!Wh(s)||!Wh(t)||!Wh(r)}function qi(s){return Dp(s)||j5(s)||s.z||s.rotate||s.rotateX||s.rotateY}function j5(s){return Pv(s.x)||Pv(s.y)}function Pv(s){return s&&s!=="0%"}function sx(s,t,r){const a=s-r,n=t*a;return r+n}function Mv(s,t,r,a,n){return n!==void 0&&(s=sx(s,n,a)),sx(s,r,a)+t}function Ap(s,t=0,r=1,a,n){s.min=Mv(s.min,t,r,a,n),s.max=Mv(s.max,t,r,a,n)}function N5(s,{x:t,y:r}){Ap(s.x,t.translate,t.scale,t.originPoint),Ap(s.y,r.translate,r.scale,r.originPoint)}function HI(s,t,r,a=!1){const n=r.length;if(!n)return;t.x=t.y=1;let i,l;for(let o=0;o<n;o++){i=r[o],l=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&lo(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,N5(s,l)),a&&qi(i.latestValues)&&lo(s,i.latestValues))}t.x=Ov(t.x),t.y=Ov(t.y)}function Ov(s){return Number.isInteger(s)||s>1.0000000000001||s<.999999999999?s:1}function Un(s,t){s.min=s.min+t,s.max=s.max+t}function Lv(s,t,[r,a,n]){const i=t[n]!==void 0?t[n]:.5,l=gt(s.min,s.max,i);Ap(s,t[r],t[a],l,t.scale)}const qI=["x","scaleX","originX"],YI=["y","scaleY","originY"];function lo(s,t){Lv(s.x,t,qI),Lv(s.y,t,YI)}function w5(s,t){return v5(GI(s.getBoundingClientRect(),t))}function ZI(s,t,r){const a=w5(s,r),{scroll:n}=t;return n&&(Un(a.x,n.offset.x),Un(a.y,n.offset.y)),a}const _5=({current:s})=>s?s.ownerDocument.defaultView:null,QI=new WeakMap;class XI{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ot(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const n=x=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Px(x,"page").point)},i=(x,p)=>{const{drag:f,dragPropagation:y,onDragStart:b}=this.getProps();if(f&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Lw(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gr(S=>{let _=this.getAxisMotionValue(S).get()||0;if(za.test(_)){const{projection:w}=this.visualElement;if(w&&w.layout){const N=w.layout.layoutBox[S];N&&(_=$r(N)*(parseFloat(_)/100))}}this.originPoint[S]=_}),b&&rt.update(()=>b(x,p),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(x,p)=>{const{dragPropagation:f,dragDirectionLock:y,onDirectionLock:b,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:S}=p;if(y&&this.currentDirection===null){this.currentDirection=KI(S),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",p.point,S),this.updateAxis("y",p.point,S),this.visualElement.render(),v&&v(x,p)},o=(x,p)=>this.stop(x,p),c=()=>Gr(x=>{var p;return this.getAnimationState(x)==="paused"&&((p=this.getAxisMotionValue(x).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new y5(t,{onSessionStart:n,onStart:i,onMove:l,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:_5(this.visualElement)})}stop(t,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:n}=r;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&rt.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:n}=this.getProps();if(!a||!Rm(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let l=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(l=FI(l,this.constraints[t],this.elastic[t])),i.set(l)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&ao(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&n?this.constraints=$I(n.layoutBox,r):this.constraints=!1,this.elastic=zI(a),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Gr(l=>{this.getAxisMotionValue(l)&&(this.constraints[l]=BI(n.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ao(t))return!1;const a=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=ZI(a,n.root,this.visualElement.getTransformPagePoint());let l=VI(n.layout.layoutBox,i);if(r){const o=r(WI(l));this.hasMutatedConstraints=!!o,o&&(l=v5(o))}return l}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},d=Gr(x=>{if(!Rm(x,r,this.currentDirection))return;let p=c&&c[x]||{};l&&(p={min:0,max:0});const f=n?200:1e6,y=n?40:1e7,b={type:"inertia",velocity:a?t[x]:0,bounceStiffness:f,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(x,b)});return Promise.all(d).then(o)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return a.start(Df(t,a,0,r))}stopAnimation(){Gr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Gr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),a=this.visualElement.getProps(),n=a[r];return n||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Gr(r=>{const{drag:a}=this.getProps();if(!Rm(r,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(r);if(n&&n.layout){const{min:l,max:o}=n.layout.layoutBox[r];i.set(t[r]-gt(l,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!ao(r)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Gr(l=>{const o=this.getAxisMotionValue(l);if(o){const c=o.get();n[l]=UI({min:c,max:c},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Gr(l=>{if(!Rm(l,t,null))return;const o=this.getAxisMotionValue(l),{min:c,max:d}=this.constraints[l];o.set(gt(c,d,n[l]))})}addListeners(){if(!this.visualElement.current)return;QI.set(this.visualElement,this);const t=this.visualElement.current,r=xn(t,"pointerdown",c=>{const{drag:d,dragListener:x=!0}=this.getProps();d&&x&&this.start(c)}),a=()=>{const{dragConstraints:c}=this.getProps();ao(c)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),a();const l=cn(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Gr(x=>{const p=this.getAxisMotionValue(x);p&&(this.originPoint[x]+=c[x].translate,p.set(p.get()+c[x].translate))}),this.visualElement.render())});return()=>{l(),r(),i(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:l=Tp,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:l,dragMomentum:o}}}function Rm(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function KI(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class JI extends Ii{constructor(t){super(t),this.removeGroupControls=St,this.removeListeners=St,this.controls=new XI(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||St}unmount(){this.removeGroupControls(),this.removeListeners()}}const Fv=s=>(t,r)=>{s&&rt.update(()=>s(t,r))};class eR extends Ii{constructor(){super(...arguments),this.removePointerDownListener=St}onPointerDown(t){this.session=new y5(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_5(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:Fv(t),onStart:Fv(r),onMove:a,onEnd:(i,l)=>{delete this.session,n&&rt.update(()=>n(i,l))}}}mount(){this.removePointerDownListener=xn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function tR(){const s=m.useContext(Tx);if(s===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:a}=s,n=m.useId();return m.useEffect(()=>a(n),[]),!t&&r?[!1,()=>r&&r(n)]:[!0]}const au={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $v(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const fc={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(me.test(s))s=parseFloat(s);else return s;const r=$v(s,t.target.x),a=$v(s,t.target.y);return`${r}% ${a}%`}},sR={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,n=Si.parse(s);if(n.length>5)return a;const i=Si.createTransformer(s),l=typeof n[0]!="number"?1:0,o=r.x.scale*t.x,c=r.y.scale*t.y;n[0+l]/=o,n[1+l]/=c;const d=gt(o,c,.5);return typeof n[2+l]=="number"&&(n[2+l]/=d),typeof n[3+l]=="number"&&(n[3+l]/=d),i(n)}};class rR extends Md.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=t;d9(aR),i&&(r.group&&r.group.add(i),a&&a.register&&n&&a.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),au.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:n,isPresent:i}=this.props,l=a.projection;return l&&(l.isPresent=i,n||t.layoutDependency!==r||r===void 0?l.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?l.promote():l.relegate()||rt.postRender(()=>{const o=l.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function S5(s){const[t,r]=tR(),a=m.useContext(gf);return Md.createElement(rR,{...s,layoutGroup:a,switchLayoutGroup:m.useContext(vw),isPresent:t,safeToRemove:r})}const aR={borderRadius:{...fc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fc,borderTopRightRadius:fc,borderBottomLeftRadius:fc,borderBottomRightRadius:fc,boxShadow:sR},k5=["TopLeft","TopRight","BottomLeft","BottomRight"],nR=k5.length,Vv=s=>typeof s=="string"?parseFloat(s):s,Uv=s=>typeof s=="number"||me.test(s);function iR(s,t,r,a,n,i){n?(s.opacity=gt(0,r.opacity!==void 0?r.opacity:1,lR(a)),s.opacityExit=gt(t.opacity!==void 0?t.opacity:1,0,oR(a))):i&&(s.opacity=gt(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,a));for(let l=0;l<nR;l++){const o=`border${k5[l]}Radius`;let c=Bv(t,o),d=Bv(r,o);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Uv(c)===Uv(d)?(s[o]=Math.max(gt(Vv(c),Vv(d),a),0),(za.test(d)||za.test(c))&&(s[o]+="%")):s[o]=d}(t.rotate||r.rotate)&&(s.rotate=gt(t.rotate||0,r.rotate||0,a))}function Bv(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const lR=C5(0,.5,Zw),oR=C5(.5,.95,St);function C5(s,t,r){return a=>a<s?0:a>t?1:r(Rd(s,t,a))}function zv(s,t){s.min=t.min,s.max=t.max}function zr(s,t){zv(s.x,t.x),zv(s.y,t.y)}function Wv(s,t,r,a,n){return s-=t,s=sx(s,1/r,a),n!==void 0&&(s=sx(s,1/n,a)),s}function cR(s,t=0,r=1,a=.5,n,i=s,l=s){if(za.test(t)&&(t=parseFloat(t),t=gt(l.min,l.max,t/100)-l.min),typeof t!="number")return;let o=gt(i.min,i.max,a);s===i&&(o-=t),s.min=Wv(s.min,t,r,o,n),s.max=Wv(s.max,t,r,o,n)}function Gv(s,t,[r,a,n],i,l){cR(s,t[r],t[a],t[n],t.scale,i,l)}const dR=["x","scaleX","originX"],mR=["y","scaleY","originY"];function Hv(s,t,r,a){Gv(s.x,t,dR,r?r.x:void 0,a?a.x:void 0),Gv(s.y,t,mR,r?r.y:void 0,a?a.y:void 0)}function qv(s){return s.translate===0&&s.scale===1}function E5(s){return qv(s.x)&&qv(s.y)}function uR(s,t){return s.x.min===t.x.min&&s.x.max===t.x.max&&s.y.min===t.y.min&&s.y.max===t.y.max}function T5(s,t){return Math.round(s.x.min)===Math.round(t.x.min)&&Math.round(s.x.max)===Math.round(t.x.max)&&Math.round(s.y.min)===Math.round(t.y.min)&&Math.round(s.y.max)===Math.round(t.y.max)}function Yv(s){return $r(s.x)/$r(s.y)}class xR{constructor(){this.members=[]}add(t){Af(this.members,t),t.scheduleRender()}remove(t){if(If(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let a;for(let n=r;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zv(s,t,r){let a="";const n=s.x.translate/t.x,i=s.y.translate/t.y;if((n||i)&&(a=`translate3d(${n}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:d,rotateY:x}=r;c&&(a+=`rotate(${c}deg) `),d&&(a+=`rotateX(${d}deg) `),x&&(a+=`rotateY(${x}deg) `)}const l=s.x.scale*t.x,o=s.y.scale*t.y;return(l!==1||o!==1)&&(a+=`scale(${l}, ${o})`),a||"none"}const hR=(s,t)=>s.depth-t.depth;class pR{constructor(){this.children=[],this.isDirty=!1}add(t){Af(this.children,t),this.isDirty=!0}remove(t){If(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(hR),this.isDirty=!1,this.children.forEach(t)}}function gR(s,t){const r=performance.now(),a=({timestamp:n})=>{const i=n-r;i>=t&&(_n(a),s(i-t))};return rt.read(a,!0),()=>_n(a)}function fR(s){window.MotionDebug&&window.MotionDebug.record(s)}function yR(s){return s instanceof SVGElement&&s.tagName!=="svg"}function bR(s,t,r){const a=pr(s)?s:Bo(s);return a.start(Df("",a,t,r)),a.animation}const Qv=["","X","Y","Z"],vR={visibility:"hidden"},Xv=1e3;let jR=0;const Yi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function D5({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(l={},o=t==null?void 0:t()){this.id=jR++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yi.totalNodes=Yi.resolvedTargetDeltas=Yi.recalculatedProjection=0,this.nodes.forEach(_R),this.nodes.forEach(TR),this.nodes.forEach(DR),this.nodes.forEach(SR),fR(Yi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new pR)}addEventListener(l,o){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Rf),this.eventHandlers.get(l).add(o)}notifyListeners(l,...o){const c=this.eventHandlers.get(l);c&&c.notify(...o)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=yR(l),this.instance=l;const{layoutId:c,layout:d,visualElement:x}=this.options;if(x&&!x.current&&x.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(d||c)&&(this.isLayoutDirty=!0),s){let p;const f=()=>this.root.updateBlockedByResize=!1;s(l,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=gR(f,250),au.hasAnimatedSinceResize&&(au.hasAnimatedSinceResize=!1,this.nodes.forEach(Jv))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&x&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:f,hasRelativeTargetChanged:y,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||x.getDefaultTransition()||MR,{onLayoutAnimationStart:S,onLayoutAnimationComplete:_}=x.getProps(),w=!this.targetLayout||!T5(this.targetLayout,b)||y,N=!f&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,N);const u={...Tf(v,"layout"),onPlay:S,onComplete:_};(x.shouldReduceMotion||this.options.layoutRoot)&&(u.delay=0,u.type=!1),this.startAnimation(u)}else f||Jv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_n(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(AR),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const p=this.path[x];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Kv);return}this.isUpdating||this.nodes.forEach(CR),this.isUpdating=!1,this.nodes.forEach(ER),this.nodes.forEach(NR),this.nodes.forEach(wR),this.clearAllSnapshots();const o=performance.now();Ss.delta=_i(0,1e3/60,o-Ss.timestamp),Ss.timestamp=o,Ss.isProcessing=!0,Ph.update.process(Ss),Ph.preRender.process(Ss),Ph.render.process(Ss),Ss.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(kR),this.sharedNodes.forEach(IR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ot(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:l,isRoot:a(this.instance),offset:r(this.instance)})}resetTransform(){if(!n)return;const l=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!E5(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,x=d!==this.prevTransformTemplateValue;l&&(o||qi(this.latestValues)||x)&&(n(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return l&&(c=this.removeTransform(c)),OR(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Ot();const o=l.measureViewportBox(),{scroll:c}=this.root;return c&&(Un(o.x,c.offset.x),Un(o.y,c.offset.y)),o}removeElementScroll(l){const o=Ot();zr(o,l);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:x,options:p}=d;if(d!==this.root&&x&&p.layoutScroll){if(x.isRoot){zr(o,l);const{scroll:f}=this.root;f&&(Un(o.x,-f.offset.x),Un(o.y,-f.offset.y))}Un(o.x,x.offset.x),Un(o.y,x.offset.y)}}return o}applyTransform(l,o=!1){const c=Ot();zr(c,l);for(let d=0;d<this.path.length;d++){const x=this.path[d];!o&&x.options.layoutScroll&&x.scroll&&x!==x.root&&lo(c,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),qi(x.latestValues)&&lo(c,x.latestValues)}return qi(this.latestValues)&&lo(c,this.latestValues),c}removeTransform(l){const o=Ot();zr(o,l);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!qi(d.latestValues))continue;Dp(d.latestValues)&&d.updateSnapshot();const x=Ot(),p=d.measurePageBox();zr(x,p),Hv(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,x)}return qi(this.latestValues)&&Hv(o,this.latestValues),o}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ss.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:p,layoutId:f}=this.options;if(!(!this.layout||!(p||f))){if(this.resolvedRelativeTargetAt=Ss.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ot(),this.relativeTargetOrigin=Ot(),td(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ot(),this.targetWithTransforms=Ot()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zr(this.target,this.layout.layoutBox),N5(this.target,this.targetDelta)):zr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ot(),this.relativeTargetOrigin=Ot(),td(this.relativeTargetOrigin,this.target,y.target),zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Dp(this.parent.latestValues)||j5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ss.timestamp&&(d=!1),d)return;const{layout:x,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||p))return;zr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,y=this.treeScale.y;HI(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:b}=o;if(!b){this.projectionTransform&&(this.projectionDelta=io(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=io(),this.projectionDeltaWithTransform=io());const v=this.projectionTransform;ed(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=Zv(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Yi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),l){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(l,o=!1){const c=this.snapshot,d=c?c.latestValues:{},x={...this.latestValues},p=io();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=Ot(),y=c?c.source:void 0,b=this.layout?this.layout.source:void 0,v=y!==b,S=this.getStack(),_=!S||S.members.length<=1,w=!!(v&&!_&&this.options.crossfade===!0&&!this.path.some(PR));this.animationProgress=0;let N;this.mixTargetDelta=u=>{const h=u/1e3;ej(p.x,l.x,h),ej(p.y,l.y,h),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(td(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RR(this.relativeTarget,this.relativeTargetOrigin,f,h),N&&uR(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Ot()),zr(N,this.relativeTarget)),v&&(this.animationValues=x,iR(x,d,this.latestValues,h,w,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=h},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_n(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rt.update(()=>{au.hasAnimatedSinceResize=!0,this.currentAnimation=bR(0,Xv,{...l,onUpdate:o=>{this.mixTargetDelta(o),l.onUpdate&&l.onUpdate(o)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Xv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:o,target:c,layout:d,latestValues:x}=l;if(!(!o||!c||!d)){if(this!==l&&this.layout&&d&&A5(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Ot();const p=$r(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+p;const f=$r(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+f}zr(o,c),lo(o,x),ed(this.projectionDeltaWithTransform,this.layoutCorrected,o,x)}}registerSharedNode(l,o){this.sharedNodes.has(l)||this.sharedNodes.set(l,new xR),this.sharedNodes.get(l).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:o,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetRotation(){const{visualElement:l}=this.options;if(!l)return;let o=!1;const{latestValues:c}=l;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(o=!0),!o)return;const d={};for(let x=0;x<Qv.length;x++){const p="rotate"+Qv[x];c[p]&&(d[p]=c[p],l.setStaticValue(p,0))}l.render();for(const x in d)l.setStaticValue(x,d[x]);l.scheduleRender()}getProjectionStyles(l){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return vR;const d={visibility:""},x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=ru(l==null?void 0:l.pointerEvents)||"",d.transform=x?x(this.latestValues,""):"none",d;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=ru(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!qi(this.latestValues)&&(v.transform=x?x({},""):"none",this.hasProjected=!1),v}const f=p.animationValues||p.latestValues;this.applyTransformsToTarget(),d.transform=Zv(this.projectionDeltaWithTransform,this.treeScale,f),x&&(d.transform=x(f,d.transform));const{x:y,y:b}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${b.origin*100}% 0`,p.animationValues?d.opacity=p===this?(c=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=p===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Zu){if(f[v]===void 0)continue;const{correct:S,applyTo:_}=Zu[v],w=d.transform==="none"?f[v]:S(f[v],p);if(_){const N=_.length;for(let u=0;u<N;u++)d[_[u]]=w}else d[v]=w}return this.options.layoutId&&(d.pointerEvents=p===this?ru(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var o;return(o=l.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(Kv),this.root.sharedNodes.clear()}}}function NR(s){s.updateLayout()}function wR(s){var t;const r=((t=s.resumeFrom)===null||t===void 0?void 0:t.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&r&&s.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=s.layout,{animationType:i}=s.options,l=r.source!==s.layout.source;i==="size"?Gr(p=>{const f=l?r.measuredBox[p]:r.layoutBox[p],y=$r(f);f.min=a[p].min,f.max=f.min+y}):A5(i,r.layoutBox,a)&&Gr(p=>{const f=l?r.measuredBox[p]:r.layoutBox[p],y=$r(a[p]);f.max=f.min+y,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[p].max=s.relativeTarget[p].min+y)});const o=io();ed(o,a,r.layoutBox);const c=io();l?ed(c,s.applyTransform(n,!0),r.measuredBox):ed(c,a,r.layoutBox);const d=!E5(o);let x=!1;if(!s.resumeFrom){const p=s.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:f,layout:y}=p;if(f&&y){const b=Ot();td(b,r.layoutBox,f.layoutBox);const v=Ot();td(v,a,y.layoutBox),T5(b,v)||(x=!0),p.options.layoutRoot&&(s.relativeTarget=v,s.relativeTargetOrigin=b,s.relativeParent=p)}}}s.notifyListeners("didUpdate",{layout:a,snapshot:r,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeTargetChanged:x})}else if(s.isLead()){const{onExitComplete:a}=s.options;a&&a()}s.options.transition=void 0}function _R(s){Yi.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function SR(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function kR(s){s.clearSnapshot()}function Kv(s){s.clearMeasurements()}function CR(s){s.isLayoutDirty=!1}function ER(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function Jv(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function TR(s){s.resolveTargetDelta()}function DR(s){s.calcProjection()}function AR(s){s.resetRotation()}function IR(s){s.removeLeadSnapshot()}function ej(s,t,r){s.translate=gt(t.translate,0,r),s.scale=gt(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function tj(s,t,r,a){s.min=gt(t.min,r.min,a),s.max=gt(t.max,r.max,a)}function RR(s,t,r,a){tj(s.x,t.x,r.x,a),tj(s.y,t.y,r.y,a)}function PR(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const MR={duration:.45,ease:[.4,0,.1,1]},sj=s=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(s),rj=sj("applewebkit/")&&!sj("chrome/")?Math.round:St;function aj(s){s.min=rj(s.min),s.max=rj(s.max)}function OR(s){aj(s.x),aj(s.y)}function A5(s,t,r){return s==="position"||s==="preserve-aspect"&&!Ep(Yv(t),Yv(r),.2)}const LR=D5({attachResizeListener:(s,t)=>cn(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gh={current:void 0},I5=D5({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Gh.current){const s=new LR({});s.mount(window),s.setOptions({layoutScroll:!0}),Gh.current=s}return Gh.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),FR={pan:{Feature:eR},drag:{Feature:JI,ProjectionNode:I5,MeasureLayout:S5}},$R=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function VR(s){const t=$R.exec(s);if(!t)return[,];const[,r,a]=t;return[r,a]}function Ip(s,t,r=1){const[a,n]=VR(s);if(!a)return;const i=window.getComputedStyle(t).getPropertyValue(a);if(i){const l=i.trim();return h5(l)?parseFloat(l):l}else return jp(n)?Ip(n,t,r+1):n}function UR(s,{...t},r){const a=s.current;if(!(a instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),s.values.forEach(n=>{const i=n.get();if(!jp(i))return;const l=Ip(i,a);l&&n.set(l)});for(const n in t){const i=t[n];if(!jp(i))continue;const l=Ip(i,a);l&&(t[n]=l,r||(r={}),r[n]===void 0&&(r[n]=i))}return{target:t,transitionEnd:r}}const BR=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),R5=s=>BR.has(s),zR=s=>Object.keys(s).some(R5),nj=s=>s===Tl||s===me,ij=(s,t)=>parseFloat(s.split(", ")[t]),lj=(s,t)=>(r,{transform:a})=>{if(a==="none"||!a)return 0;const n=a.match(/^matrix3d\((.+)\)$/);if(n)return ij(n[1],t);{const i=a.match(/^matrix\((.+)\)$/);return i?ij(i[1],s):0}},WR=new Set(["x","y","z"]),GR=Hd.filter(s=>!WR.has(s));function HR(s){const t=[];return GR.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t.length&&s.render(),t}const zo={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:lj(4,13),y:lj(5,14)};zo.translateX=zo.x;zo.translateY=zo.y;const qR=(s,t,r)=>{const a=t.measureViewportBox(),n=t.current,i=getComputedStyle(n),{display:l}=i,o={};l==="none"&&t.setStaticValue("display",s.display||"block"),r.forEach(d=>{o[d]=zo[d](a,i)}),t.render();const c=t.measureViewportBox();return r.forEach(d=>{const x=t.getValue(d);x&&x.jump(o[d]),s[d]=zo[d](c,i)}),s},YR=(s,t,r={},a={})=>{t={...t},a={...a};const n=Object.keys(t).filter(R5);let i=[],l=!1;const o=[];if(n.forEach(c=>{const d=s.getValue(c);if(!s.hasValue(c))return;let x=r[c],p=gc(x);const f=t[c];let y;if(Xu(f)){const b=f.length,v=f[0]===null?1:0;x=f[v],p=gc(x);for(let S=v;S<b&&f[S]!==null;S++)y?_f(gc(f[S])===y):y=gc(f[S])}else y=gc(f);if(p!==y)if(nj(p)&&nj(y)){const b=d.get();typeof b=="string"&&d.set(parseFloat(b)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&y===me&&(t[c]=f.map(parseFloat))}else p!=null&&p.transform&&(y!=null&&y.transform)&&(x===0||f===0)?x===0?d.set(y.transform(x)):t[c]=p.transform(f):(l||(i=HR(s),l=!0),o.push(c),a[c]=a[c]!==void 0?a[c]:t[c],d.jump(f))}),o.length){const c=o.indexOf("height")>=0?window.pageYOffset:null,d=qR(t,s,o);return i.length&&i.forEach(([x,p])=>{s.getValue(x).set(p)}),s.render(),Dx&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:a}}else return{target:t,transitionEnd:a}};function ZR(s,t,r,a){return zR(t)?YR(s,t,r,a):{target:t,transitionEnd:a}}const QR=(s,t,r,a)=>{const n=UR(s,t,a);return t=n.target,a=n.transitionEnd,ZR(s,t,r,a)},Rp={current:null},P5={current:!1};function XR(){if(P5.current=!0,!!Dx)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>Rp.current=s.matches;s.addListener(t),t()}else Rp.current=!1}function KR(s,t,r){const{willChange:a}=t;for(const n in t){const i=t[n],l=r[n];if(pr(i))s.addValue(n,i),tx(a)&&a.add(n);else if(pr(l))s.addValue(n,Bo(i,{owner:s})),tx(a)&&a.remove(n);else if(l!==i)if(s.hasValue(n)){const o=s.getValue(n);!o.hasAnimated&&o.set(i)}else{const o=s.getStaticValue(n);s.addValue(n,Bo(o!==void 0?o:i,{owner:s}))}}for(const n in r)t[n]===void 0&&s.removeValue(n);return t}const oj=new WeakMap,M5=Object.keys(Id),JR=M5.length,cj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],eP=pf.length;class tP{constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:n,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>rt.render(this.render,!1,!0);const{latestValues:o,renderState:c}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=r.initial?{...o}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=l,this.isControllingVariants=Ix(r),this.isVariantNode=bw(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...x}=this.scrapeMotionValuesFromProps(r,{});for(const p in x){const f=x[p];o[p]!==void 0&&pr(f)&&(f.set(o[p],!1),tx(d)&&d.add(p))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,oj.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),P5.current||XR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oj.delete(this.current),this.projection&&this.projection.unmount(),_n(this.notifyUpdate),_n(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const a=El.has(t),n=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&rt.update(this.notifyUpdate,!1,!0),a&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{n(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},a,n,i){let l,o;for(let c=0;c<JR;c++){const d=M5[c],{isEnabled:x,Feature:p,ProjectionNode:f,MeasureLayout:y}=Id[d];f&&(l=f),x(r)&&(!this.features[d]&&p&&(this.features[d]=new p(this)),y&&(o=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&l){this.projection=new l(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:x,dragConstraints:p,layoutScroll:f,layoutRoot:y}=r;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!x||p&&ao(p),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:y})}return o}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ot()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<cj.length;a++){const n=cj[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i=t["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=KR(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const a=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(a.initial=this.props.initial),a}const r={};for(let a=0;a<eP;a++){const n=pf[a],i=this.props[n];(Ad(i)||i===!1)&&(r[n]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=Bo(r,{owner:this}),this.addValue(t,a)),a}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:a}=this.props,n=typeof a=="string"||typeof a=="object"?(r=wf(this.props,a))===null||r===void 0?void 0:r[t]:void 0;if(a&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!pr(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Rf),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class O5 extends tP{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...a},{transformValues:n},i){let l=yI(a,t||{},this);if(n&&(r&&(r=n(r)),a&&(a=n(a)),l&&(l=n(l))),i){gI(this,a,l);const o=QR(this,a,l,r);r=o.transitionEnd,a=o.target}return{transition:t,transitionEnd:r,...a}}}function sP(s){return window.getComputedStyle(s)}class rP extends O5{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(El.has(r)){const a=Ef(r);return a&&a.default||0}else{const a=sP(t),n=(ww(r)?a.getPropertyValue(r):a[r])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:r}){return w5(t,r)}build(t,r,a,n){yf(t,r,a,n.transformTemplate)}scrapeMotionValuesFromProps(t,r){return Nf(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pr(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,a,n){Tw(t,r,a,n)}}class aP extends O5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(El.has(r)){const a=Ef(r);return a&&a.default||0}return r=Dw.has(r)?r:xf(r),t.getAttribute(r)}measureInstanceViewportBox(){return Ot()}scrapeMotionValuesFromProps(t,r){return Iw(t,r)}build(t,r,a,n){vf(t,r,a,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,a,n){Aw(t,r,a,n)}mount(t){this.isSVGTag=jf(t.tagName),super.mount(t)}}const nP=(s,t)=>ff(s)?new aP(t,{enableHardwareAcceleration:!1}):new rP(t,{enableHardwareAcceleration:!0}),iP={layout:{ProjectionNode:I5,MeasureLayout:S5}},lP={...RI,...J9,...FR,...iP},K=o9((s,t)=>V9(s,t,lP,nP));function L5(){const s=m.useRef(!1);return uf(()=>(s.current=!0,()=>{s.current=!1}),[]),s}function oP(){const s=L5(),[t,r]=m.useState(0),a=m.useCallback(()=>{s.current&&r(t+1)},[t]);return[m.useCallback(()=>rt.postRender(a),[a]),t]}class cP extends m.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function dP({children:s,isPresent:t}){const r=m.useId(),a=m.useRef(null),n=m.useRef({width:0,height:0,top:0,left:0});return m.useInsertionEffect(()=>{const{width:i,height:l,top:o,left:c}=n.current;if(t||!a.current||!i||!l)return;a.current.dataset.motionPopId=r;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${l}px !important;
            top: ${o}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),m.createElement(cP,{isPresent:t,childRef:a,sizeRef:n},m.cloneElement(s,{ref:a}))}const Hh=({children:s,initial:t,isPresent:r,onExitComplete:a,custom:n,presenceAffectsLayout:i,mode:l})=>{const o=Rw(mP),c=m.useId(),d=m.useMemo(()=>({id:c,initial:t,isPresent:r,custom:n,onExitComplete:x=>{o.set(x,!0);for(const p of o.values())if(!p)return;a&&a()},register:x=>(o.set(x,!1),()=>o.delete(x))}),i?void 0:[r]);return m.useMemo(()=>{o.forEach((x,p)=>o.set(p,!1))},[r]),m.useEffect(()=>{!r&&!o.size&&a&&a()},[r]),l==="popLayout"&&(s=m.createElement(dP,{isPresent:r},s)),m.createElement(Tx.Provider,{value:d},s)};function mP(){return new Map}function uP(s){return m.useEffect(()=>()=>s(),[])}const Zi=s=>s.key||"";function xP(s,t){s.forEach(r=>{const a=Zi(r);t.set(a,r)})}function hP(s){const t=[];return m.Children.forEach(s,r=>{m.isValidElement(r)&&t.push(r)}),t}const Ox=({children:s,custom:t,initial:r=!0,onExitComplete:a,exitBeforeEnter:n,presenceAffectsLayout:i=!0,mode:l="sync"})=>{const o=m.useContext(gf).forceRender||oP()[0],c=L5(),d=hP(s);let x=d;const p=m.useRef(new Map).current,f=m.useRef(x),y=m.useRef(new Map).current,b=m.useRef(!0);if(uf(()=>{b.current=!1,xP(d,y),f.current=x}),uP(()=>{b.current=!0,y.clear(),p.clear()}),b.current)return m.createElement(m.Fragment,null,x.map(w=>m.createElement(Hh,{key:Zi(w),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:l},w)));x=[...x];const v=f.current.map(Zi),S=d.map(Zi),_=v.length;for(let w=0;w<_;w++){const N=v[w];S.indexOf(N)===-1&&!p.has(N)&&p.set(N,void 0)}return l==="wait"&&p.size&&(x=[]),p.forEach((w,N)=>{if(S.indexOf(N)!==-1)return;const u=y.get(N);if(!u)return;const h=v.indexOf(N);let g=w;if(!g){const j=()=>{p.delete(N);const T=Array.from(y.keys()).filter(C=>!S.includes(C));if(T.forEach(C=>y.delete(C)),f.current=d.filter(C=>{const E=Zi(C);return E===N||T.includes(E)}),!p.size){if(c.current===!1)return;o(),a&&a()}};g=m.createElement(Hh,{key:Zi(u),isPresent:!1,onExitComplete:j,custom:t,presenceAffectsLayout:i,mode:l},u),p.set(N,g)}x.splice(h,0,g)}),x=x.map(w=>{const N=w.key;return p.has(N)?w:m.createElement(Hh,{key:Zi(w),isPresent:!0,presenceAffectsLayout:i,mode:l},w)}),m.createElement(m.Fragment,null,p.size?x:x.map(w=>m.cloneElement(w)))},ir=()=>Math.random().toString(36).substr(2,9),pP={PAGE_VIEW:"page_view",CATEGORY_INTERACTION:"category_interaction",PRODUCT_INTERACTION:"product_interaction",SHOPPING_BEHAVIOR:"shopping_behavior",SEARCH_BEHAVIOR:"search_behavior",SOCIAL_BEHAVIOR:"social_behavior",CUSTOMER_SERVICE:"customer_service"},gP={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet"},fP={NEW_USERS:"new_users",RETURNING_USERS:"returning_users",VIP_USERS:"vip_users",PRICE_CONSCIOUS:"price_conscious",BRAND_LOYAL:"brand_loyal",FREQUENT_BUYERS:"frequent_buyers"},F5=()=>{const s=[],t=[{id:"cat-1",name:"臉部保養",path:["美妝","臉部保養"]},{id:"cat-2",name:"彩妝",path:["美妝","彩妝"]},{id:"cat-3",name:"身體護理",path:["美妝","身體護理"]},{id:"cat-4",name:"香水",path:["美妝","香水"]},{id:"cat-5",name:"工具配件",path:["美妝","工具配件"]}],r=["click","view","hover","filter","sort"],a=Object.values(gP),n=Array.from({length:50},()=>`user-${ir()}`);for(let i=0;i<1e3;i++){const l=new Date(Date.now()-Math.random()*7*24*60*60*1e3),o=t[Math.floor(Math.random()*t.length)],c=n[Math.floor(Math.random()*n.length)],d=a[Math.floor(Math.random()*a.length)],x=`session-${ir()}`;s.push({eventId:ir(),eventType:pP.CATEGORY_INTERACTION,timestamp:l,sessionId:x,userId:c,deviceInfo:{deviceType:d,browser:["Chrome","Safari","Firefox","Edge"][Math.floor(Math.random()*4)],operatingSystem:d==="mobile"?"iOS":"Windows",screenResolution:d==="mobile"?"375x812":"1920x1080"},eventData:{categoryId:o.id,categoryName:o.name,categoryPath:o.path,action:r[Math.floor(Math.random()*r.length)],clickData:{clickCount:Math.floor(Math.random()*10)+1,totalClickCount:Math.floor(Math.random()*100)+1,clickPosition:{x:Math.floor(Math.random()*1200),y:Math.floor(Math.random()*800)}},dwellTimeData:{currentDwellTime:Math.floor(Math.random()*300)+10,averageDwellTime:Math.floor(Math.random()*120)+30,totalDwellTime:Math.floor(Math.random()*3600)+300},fromSource:["menu","banner","search","recommendation"][Math.floor(Math.random()*4)]},trackingMetadata:{dataSource:"js_tracker",consentLevel:"analytics",privacyMode:!1}})}return s.sort((i,l)=>new Date(l.timestamp)-new Date(i.timestamp))},yP=()=>({currentActiveUsers:Math.floor(Math.random()*200)+50,activeUsersByDevice:{desktop:Math.floor(Math.random()*80)+20,mobile:Math.floor(Math.random()*100)+25,tablet:Math.floor(Math.random()*30)+5},topCategories:[{categoryId:"cat-1",categoryName:"臉部保養",activeUsers:45,clicksPerMinute:23},{categoryId:"cat-2",categoryName:"彩妝",activeUsers:38,clicksPerMinute:19},{categoryId:"cat-3",categoryName:"身體護理",activeUsers:28,clicksPerMinute:15},{categoryId:"cat-4",categoryName:"香水",activeUsers:22,clicksPerMinute:12},{categoryId:"cat-5",categoryName:"工具配件",activeUsers:18,clicksPerMinute:8}],recentEvents:F5().slice(0,10)}),bP=()=>[{id:"cat-1",name:"臉部保養",path:["美妝","臉部保養"]},{id:"cat-2",name:"彩妝",path:["美妝","彩妝"]},{id:"cat-3",name:"身體護理",path:["美妝","身體護理"]},{id:"cat-4",name:"香水",path:["美妝","香水"]},{id:"cat-5",name:"工具配件",path:["美妝","工具配件"]}].map(t=>({categoryId:t.id,categoryName:t.name,categoryPath:t.path,realTimeMetrics:{currentActiveUsers:Math.floor(Math.random()*50)+5,clicksPerMinute:Math.floor(Math.random()*30)+2,averageDwellTime:Math.floor(Math.random()*180)+20,bounceRate:Math.random()*.4+.1,conversionRate:Math.random()*.1+.02},historicalStats:{clickStats:{totalClicks:Math.floor(Math.random()*1e4)+1e3,uniqueClickers:Math.floor(Math.random()*500)+100,averageClicksPerUser:Math.random()*10+2,clickGrowthRate:Math.random()*.2-.1,clicksByDevice:{desktop:Math.floor(Math.random()*4e3)+500,mobile:Math.floor(Math.random()*5e3)+600,tablet:Math.floor(Math.random()*1e3)+100}},dwellTimeStats:{totalDwellTime:Math.floor(Math.random()*1e5)+1e4,averageDwellTime:Math.floor(Math.random()*120)+30,medianDwellTime:Math.floor(Math.random()*90)+25,dwellTimeByDevice:{desktop:Math.floor(Math.random()*150)+40,mobile:Math.floor(Math.random()*80)+20,tablet:Math.floor(Math.random()*100)+35}},conversionStats:{viewToCartRate:Math.random()*.15+.02,viewToPurchaseRate:Math.random()*.08+.01,cartToPurchaseRate:Math.random()*.3+.4,averageOrderValue:Math.floor(Math.random()*3e3)+500,revenueGenerated:Math.floor(Math.random()*1e5)+1e4}},temporalAnalysis:{hourlyPattern:Array.from({length:24},(r,a)=>({hour:a,activity:Math.random()*100,clicks:Math.floor(Math.random()*50)})),weeklyPattern:["週一","週二","週三","週四","週五","週六","週日"].map(r=>({day:r,activity:Math.random()*100,clicks:Math.floor(Math.random()*200)+50}))}})),vP=()=>Object.values(fP).map(t=>({segmentId:t,segmentName:{new_users:"新用戶",returning_users:"回訪用戶",vip_users:"VIP用戶",price_conscious:"價格敏感用戶",brand_loyal:"品牌忠誠用戶",frequent_buyers:"高頻購買用戶"}[t],userCount:Math.floor(Math.random()*1e3)+100,behaviorMetrics:{averageSessionDuration:Math.floor(Math.random()*600)+120,averagePageViews:Math.floor(Math.random()*10)+2,bounceRate:Math.random()*.5+.1,conversionRate:Math.random()*.15+.02,averageOrderValue:Math.floor(Math.random()*2e3)+300},categoryPreferences:[{categoryId:"cat-1",preferenceScore:Math.random()},{categoryId:"cat-2",preferenceScore:Math.random()},{categoryId:"cat-3",preferenceScore:Math.random()},{categoryId:"cat-4",preferenceScore:Math.random()},{categoryId:"cat-5",preferenceScore:Math.random()}].sort((r,a)=>a.preferenceScore-r.preferenceScore)})),jP=()=>({cookieConsent:{totalConsents:Math.floor(Math.random()*5e3)+1e3,consentRate:Math.random()*.3+.6,categoryConsents:{necessary:1,analytics:Math.random()*.4+.5,marketing:Math.random()*.3+.3,personalization:Math.random()*.4+.4},recentConsents:Array.from({length:10},()=>({userId:`user-${ir()}`,timestamp:new Date(Date.now()-Math.random()*24*60*60*1e3),consents:{necessary:!0,analytics:Math.random()>.3,marketing:Math.random()>.5,personalization:Math.random()>.4},ipAddress:`${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.xxx.xxx`}))},dataRequests:{totalRequests:Math.floor(Math.random()*50)+10,requestTypes:{dataExport:Math.floor(Math.random()*20)+5,dataDeletion:Math.floor(Math.random()*15)+3,consentWithdrawal:Math.floor(Math.random()*10)+2},recentRequests:Array.from({length:5},()=>({requestId:ir(),userId:`user-${ir()}`,requestType:["dataExport","dataDeletion","consentWithdrawal"][Math.floor(Math.random()*3)],status:["pending","processing","completed"][Math.floor(Math.random()*3)],timestamp:new Date(Date.now()-Math.random()*7*24*60*60*1e3)}))},complianceStatus:{gdprCompliant:!0,ccpaCompliant:!0,lastAuditDate:new Date(Date.now()-30*24*60*60*1e3),dataRetentionPolicy:"2年",automatedDeletion:!0}}),NP=()=>({realtimeAnomalies:[{id:ir(),type:"traffic_spike",severity:"medium",description:"來自特定IP的異常高流量",timestamp:new Date(Date.now()-Math.random()*60*60*1e3),affectedMetric:"page_views",threshold:1e3,currentValue:1547},{id:ir(),type:"unusual_behavior",severity:"low",description:"用戶停留時間異常短",timestamp:new Date(Date.now()-Math.random()*2*60*60*1e3),affectedMetric:"avg_session_duration",threshold:30,currentValue:12}],suspiciousActivities:[{id:ir(),userId:`user-${ir()}`,activityType:"rapid_clicking",description:"短時間內大量點擊行為",riskScore:.7,timestamp:new Date(Date.now()-Math.random()*3*60*60*1e3)}]}),As={getRealTimeActivity:()=>new Promise(s=>{setTimeout(()=>s(yP()),300)}),getUserBehaviorEvents:(s={})=>new Promise(t=>{let a=F5();if(s.eventType&&(a=a.filter(n=>n.eventType===s.eventType)),s.deviceType&&(a=a.filter(n=>n.deviceInfo.deviceType===s.deviceType)),s.dateRange){const{startDate:n,endDate:i}=s.dateRange;a=a.filter(l=>{const o=new Date(l.timestamp);return o>=n&&o<=i})}setTimeout(()=>t(a),500)}),getCategoryAnalytics:()=>new Promise(s=>{setTimeout(()=>s(bP()),400)}),getUserSegmentData:()=>new Promise(s=>{setTimeout(()=>s(vP()),350)}),getPrivacySettings:()=>new Promise(s=>{setTimeout(()=>s(jP()),300)}),getAnomalyData:()=>new Promise(s=>{setTimeout(()=>s(NP()),250)}),trackEvent:s=>new Promise(t=>{const r={...s,eventId:ir(),timestamp:new Date};console.log("追蹤事件:",r),setTimeout(()=>t({success:!0,eventId:r.eventId}),100)}),updatePrivacyConsent:(s,t)=>new Promise(r=>{console.log("更新隱私權同意:",{userId:s,consents:t}),setTimeout(()=>r({success:!0}),200)}),processDataRequest:(s,t)=>new Promise(r=>{const a=ir();console.log("處理數據請求:",{requestType:s,userId:t,requestId:a}),setTimeout(()=>r({success:!0,requestId:a,estimatedCompletionTime:new Date(Date.now()+24*60*60*1e3)}),300)}),getUserJourneyAnalysis:s=>new Promise(t=>{const r={userId:s,totalSessions:Math.floor(Math.random()*20)+5,averageSessionDuration:Math.floor(Math.random()*600)+180,commonPaths:[["首頁","臉部保養","精華液","商品詳情"],["首頁","彩妝","口紅","購物車"],["搜尋","香水","商品詳情","結帳"]],conversionFunnel:{steps:["瀏覽","加入購物車","結帳","完成購買"],values:[100,45,32,28]}};setTimeout(()=>t(r),400)}),generateReport:(s,t)=>new Promise(r=>{const a={reportId:ir(),reportType:s,dateRange:t,generatedAt:new Date,summary:{totalEvents:Math.floor(Math.random()*5e4)+1e4,uniqueUsers:Math.floor(Math.random()*5e3)+1e3,topCategory:"臉部保養",conversionRate:(Math.random()*.1+.02).toFixed(3)},downloadUrl:`/api/reports/${ir()}.pdf`};setTimeout(()=>r(a),800)})},wP=()=>{var y,b,v;const[s,t]=m.useState(null),[r,a]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState(!0);m.useEffect(()=>{c();const S=setInterval(d,3e4);return()=>clearInterval(S)},[]);const c=async()=>{try{o(!0);const[S,_,w]=await Promise.all([As.getRealTimeActivity(),As.getCategoryAnalytics(),As.getAnomalyData()]);t(S),a(_.slice(0,5)),i(w.realtimeAnomalies)}catch(S){console.error("載入儀表板數據失敗:",S)}finally{o(!1)}},d=async()=>{try{const S=await As.getRealTimeActivity();t(S)}catch(S){console.error("更新實時數據失敗:",S)}},x=S=>S>=1e3?(S/1e3).toFixed(1)+"K":S.toString(),p=S=>{const _=Math.floor(S/60),w=S%60;return`${_}:${w.toString().padStart(2,"0")}`},f={desktop:wC,mobile:ul,tablet:FC};return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"用戶追蹤總覽"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"即時監控用戶行為與網站活動"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"即時更新"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"目前活躍用戶"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600 mt-2",children:(s==null?void 0:s.currentActiveUsers)||0}),e.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center",children:[e.jsx(Re,{className:"w-3 h-3 mr-1"}),"+12% 比昨天"]})]}),e.jsx(dt,{className:"w-12 h-12 text-primary-500 opacity-20"})]})}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"頁面瀏覽量"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:x(((y=s==null?void 0:s.topCategories)==null?void 0:y.reduce((S,_)=>S+_.clicksPerMinute*60,0))||0)}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1 flex items-center",children:[e.jsx(Ee,{className:"w-3 h-3 mr-1"}),"每小時"]})]}),e.jsx(oe,{className:"w-12 h-12 text-blue-500 opacity-20"})]})}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"平均停留時間"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:p(145)}),e.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center",children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),"比平均高 8%"]})]}),e.jsx(be,{className:"w-12 h-12 text-green-500 opacity-20"})]})}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"互動事件"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:x(((b=s==null?void 0:s.topCategories)==null?void 0:b.reduce((S,_)=>S+_.clicksPerMinute,0))||0)}),e.jsxs("p",{className:"text-xs text-purple-600 mt-1 flex items-center",children:[e.jsx(Wu,{className:"w-3 h-3 mr-1"}),"每分鐘"]})]}),e.jsx(Wu,{className:"w-12 h-12 text-purple-500 opacity-20"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"設備使用分佈"}),e.jsx("div",{className:"space-y-4",children:Object.entries((s==null?void 0:s.activeUsersByDevice)||{}).map(([S,_])=>{const w=Object.values((s==null?void 0:s.activeUsersByDevice)||{}).reduce((h,g)=>h+g,0),N=w>0?(_/w*100).toFixed(1):0,u=f[S];return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-700 capitalize",children:S==="mobile"?"手機":S==="desktop"?"桌機":"平板"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-500",style:{width:`${N}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-600 w-12",children:[N,"%"]})]})]},S)})})]}),e.jsxs(K.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"熱門類別"}),e.jsx("div",{className:"space-y-3",children:(v=s==null?void 0:s.topCategories)==null?void 0:v.map((S,_)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:_+1}),e.jsx("span",{className:"font-medium text-gray-700",children:S.categoryName})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[S.activeUsers," 用戶"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[S.clicksPerMinute," 點擊/分"]})]})]},S.categoryId))})]})]}),e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"類別表現統計"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"類別名稱"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"活躍用戶"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"平均停留時間"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"跳出率"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"轉換率"})]})}),e.jsx("tbody",{children:r.map(S=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-white/30 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"font-medium text-gray-900",children:S.categoryName})}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:S.realTimeMetrics.currentActiveUsers})}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-900",children:p(S.realTimeMetrics.averageDwellTime)}),e.jsxs("td",{className:"py-3 px-4 text-right text-gray-900",children:[(S.realTimeMetrics.bounceRate*100).toFixed(1),"%"]}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S.realTimeMetrics.conversionRate>.05?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:[(S.realTimeMetrics.conversionRate*100).toFixed(2),"%"]})})]},S.categoryId))})]})})]}),n.length>0&&e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(te,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"即時警報"})]}),e.jsx("div",{className:"space-y-3",children:n.map(S=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${S.severity==="high"?"border-red-500 bg-red-50":S.severity==="medium"?"border-yellow-500 bg-yellow-50":"border-blue-500 bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:S.description}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[S.affectedMetric,": ",S.currentValue," (閾值: ",S.threshold,")"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(S.timestamp).toLocaleString()})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.severity==="high"?"bg-red-200 text-red-800":S.severity==="medium"?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800"}`,children:S.severity==="high"?"高":S.severity==="medium"?"中":"低"})]})},S.id))})]})]})},_P=()=>{var v,S,_,w,N,u,h,g,j,T,C,E;const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState({eventType:"",deviceType:"",dateRange:{startDate:new Date(Date.now()-7*24*60*60*1e3),endDate:new Date}}),[c,d]=m.useState("overview");m.useEffect(()=>{x()},[l]);const x=async()=>{try{i(!0);const[R,k]=await Promise.all([As.getUserBehaviorEvents(l),As.getCategoryAnalytics()]);t(R),a(k)}catch(R){console.error("載入分析數據失敗:",R)}finally{i(!1)}},p=m.useMemo(()=>{if(!s.length)return{};const R={},k={},O=Array(24).fill(0);let P=0,$=s.length;return s.forEach(L=>{var A,V,B,z,F,W;if((A=L.eventData)!=null&&A.categoryId){const Y=L.eventData.categoryId;R[Y]||(R[Y]={categoryId:Y,categoryName:L.eventData.categoryName,clicks:0,totalDwellTime:0,uniqueUsers:new Set}),R[Y].clicks+=((V=L.eventData.clickData)==null?void 0:V.clickCount)||1,R[Y].totalDwellTime+=((B=L.eventData.dwellTimeData)==null?void 0:B.currentDwellTime)||0,R[Y].uniqueUsers.add(L.userId)}const D=(z=L.deviceInfo)==null?void 0:z.deviceType;D&&(k[D]=(k[D]||0)+1);const M=new Date(L.timestamp).getHours();O[M]++,(W=(F=L.eventData)==null?void 0:F.dwellTimeData)!=null&&W.currentDwellTime&&(P+=L.eventData.dwellTimeData.currentDwellTime)}),{categoryClicks:Object.values(R).map(L=>({...L,uniqueUsers:L.uniqueUsers.size,avgDwellTime:L.totalDwellTime/L.clicks||0})).sort((L,D)=>D.clicks-L.clicks),deviceStats:k,hourlyActivity:O,averageDwellTime:P/$||0,totalEvents:$}},[s]),f=R=>{if(R<60)return`${Math.round(R)}秒`;const k=Math.floor(R/60),O=Math.round(R%60);return`${k}分${O}秒`},y=async()=>{try{const R=await As.generateReport("behavior_analysis",l.dateRange);console.log("報告已生成:",R),alert(`報告已生成！報告ID: ${R.reportId}`)}catch(R){console.error("生成報告失敗:",R)}},b=[{id:"overview",name:"總覽",icon:_l},{id:"categories",name:"類別分析",icon:gs},{id:"patterns",name:"行為模式",icon:Fb},{id:"timeline",name:"時間分佈",icon:be}];return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"用戶行為分析"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"深度分析用戶行為模式與類別偏好"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:x,className:"flex items-center space-x-2 px-4 py-2 bg-white/70 backdrop-blur-sm border border-white/20 rounded-lg text-gray-700 hover:bg-white/90 transition-all",children:[e.jsx(ps,{className:"w-4 h-4"}),e.jsx("span",{children:"重新整理"})]}),e.jsxs("button",{onClick:y,className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(Fb,{className:"w-4 h-4"}),e.jsx("span",{children:"匯出報告"})]})]})]}),e.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(gs,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"篩選條件"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"事件類型"}),e.jsxs("select",{value:l.eventType,onChange:R=>o(k=>({...k,eventType:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"全部類型"}),e.jsx("option",{value:"category_interaction",children:"類別互動"}),e.jsx("option",{value:"product_interaction",children:"商品互動"}),e.jsx("option",{value:"search_behavior",children:"搜尋行為"}),e.jsx("option",{value:"shopping_behavior",children:"購物行為"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"設備類型"}),e.jsxs("select",{value:l.deviceType,onChange:R=>o(k=>({...k,deviceType:R.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"全部設備"}),e.jsx("option",{value:"desktop",children:"桌機"}),e.jsx("option",{value:"mobile",children:"手機"}),e.jsx("option",{value:"tablet",children:"平板"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"時間範圍"}),e.jsxs("select",{onChange:R=>{const k=parseInt(R.target.value);o(O=>({...O,dateRange:{startDate:new Date(Date.now()-k*24*60*60*1e3),endDate:new Date}}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"7",children:"過去 7 天"}),e.jsx("option",{value:"14",children:"過去 14 天"}),e.jsx("option",{value:"30",children:"過去 30 天"}),e.jsx("option",{value:"90",children:"過去 90 天"})]})]})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:b.map(R=>{const k=R.icon;return e.jsxs("button",{onClick:()=>d(R.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${c===R.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:R.name})]},R.id)})})}),e.jsxs("div",{className:"space-y-6",children:[c==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"總事件數"}),e.jsx("p",{className:"text-2xl font-bold text-primary-600 mt-2",children:((v=p.totalEvents)==null?void 0:v.toLocaleString())||0})]}),e.jsx(Wu,{className:"w-8 h-8 text-primary-500 opacity-30"})]})}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"平均停留時間"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:f(p.averageDwellTime||0)})]}),e.jsx(be,{className:"w-8 h-8 text-blue-500 opacity-30"})]})}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"熱門類別"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-2",children:((_=(S=p.categoryClicks)==null?void 0:S[0])==null?void 0:_.categoryName)||"-"})]}),e.jsx(gs,{className:"w-8 h-8 text-green-500 opacity-30"})]})}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"主要設備"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-2",children:((w=Object.entries(p.deviceStats||{}).sort((R,k)=>k[1]-R[1])[0])==null?void 0:w[0])==="mobile"?"手機":((N=Object.entries(p.deviceStats||{}).sort((R,k)=>k[1]-R[1])[0])==null?void 0:N[0])==="desktop"?"桌機":((u=Object.entries(p.deviceStats||{}).sort((R,k)=>k[1]-R[1])[0])==null?void 0:u[0])||"-"})]}),e.jsx(_l,{className:"w-8 h-8 text-purple-500 opacity-30"})]})})]}),e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"設備使用分佈"}),e.jsx("div",{className:"space-y-4",children:Object.entries(p.deviceStats||{}).map(([R,k])=>{const O=Object.values(p.deviceStats||{}).reduce(($,I)=>$+I,0),P=O>0?(k/O*100).toFixed(1):0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"font-medium text-gray-700 capitalize",children:R==="mobile"?"手機":R==="desktop"?"桌機":R==="tablet"?"平板":R}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",k," 事件)"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-500",style:{width:`${P}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-600 w-12",children:[P,"%"]})]})]},R)})})]})]}),c==="categories"&&e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"類別互動分析"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"點擊次數排行"}),e.jsx("div",{className:"space-y-3",children:(h=p.categoryClicks)==null?void 0:h.slice(0,10).map((R,k)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:k+1}),e.jsx("span",{className:"font-medium text-gray-700",children:R.categoryName})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[R.clicks," 次"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[R.uniqueUsers," 用戶"]})]})]},R.categoryId))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"平均停留時間"}),e.jsx("div",{className:"space-y-3",children:(g=p.categoryClicks)==null?void 0:g.slice(0,10).map((R,k)=>{var O;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/50 rounded-lg",children:[e.jsx("span",{className:"font-medium text-gray-700",children:R.categoryName}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:f(R.avgDwellTime)}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-1 mt-1",children:e.jsx("div",{className:"bg-blue-500 h-1 rounded-full",style:{width:`${Math.min(100,R.avgDwellTime/Math.max(...((O=p.categoryClicks)==null?void 0:O.map(P=>P.avgDwellTime))||[1])*100)}%`}})})]})]},R.categoryId)})})]})]})]}),c==="patterns"&&e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"行為模式分析"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"最近用戶行為"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.slice(0,20).map(R=>{var k,O,P;return e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-white/50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:((k=R.eventData)==null?void 0:k.categoryName)||"未知類別"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((O=R.eventData)==null?void 0:O.action)||R.eventType," • ",(P=R.deviceInfo)==null?void 0:P.deviceType]}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(R.timestamp).toLocaleString()})]})]},R.eventId)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"行為類型分佈"}),e.jsx("div",{className:"space-y-4",children:Object.entries(s.reduce((R,k)=>{var P;const O=((P=k.eventData)==null?void 0:P.action)||k.eventType;return R[O]=(R[O]||0)+1,R},{})).map(([R,k])=>{const O=(k/s.length*100).toFixed(1);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:R}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded-full",style:{width:`${O}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500 w-12",children:[O,"%"]})]})]},R)})})]})]})]}),c==="timeline"&&e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"時間分佈分析"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"24小時活動分佈"}),e.jsx("div",{className:"grid grid-cols-12 gap-2",children:(j=p.hourlyActivity)==null?void 0:j.map((R,k)=>{const O=Math.max(...p.hourlyActivity||[1]),P=O>0?R/O*100:0;return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-primary-500 rounded-t transition-all duration-500 mb-1",style:{height:`${Math.max(4,P)}px`},title:`${k}:00 - ${R} 事件`}),e.jsx("span",{className:"text-xs text-gray-500",children:k})]},k)})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsx("span",{children:"0:00"}),e.jsx("span",{children:"6:00"}),e.jsx("span",{children:"12:00"}),e.jsx("span",{children:"18:00"}),e.jsx("span",{children:"23:00"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"活動高峰時段"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{name:"晨間高峰",time:"08:00-10:00",value:((T=p.hourlyActivity)==null?void 0:T.slice(8,11).reduce((R,k)=>R+k,0))||0},{name:"午間高峰",time:"12:00-14:00",value:((C=p.hourlyActivity)==null?void 0:C.slice(12,15).reduce((R,k)=>R+k,0))||0},{name:"晚間高峰",time:"19:00-22:00",value:((E=p.hourlyActivity)==null?void 0:E.slice(19,23).reduce((R,k)=>R+k,0))||0}].map(R=>e.jsxs("div",{className:"bg-white/50 rounded-lg p-4 text-center",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:R.name}),e.jsx("p",{className:"text-sm text-gray-600",children:R.time}),e.jsx("p",{className:"text-2xl font-bold text-primary-600 mt-2",children:R.value}),e.jsx("p",{className:"text-xs text-gray-500",children:"事件數"})]},R.name))})]})]})]})]})},SP=()=>{var g,j,T;const[s,t]=m.useState(null),[r,a]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState(!0),[c,d]=m.useState([]),[x,p]=m.useState(!0);m.useEffect(()=>{if(f(),l){const C=setInterval(y,1e4),E=setInterval(b,5e3),R=setInterval(v,3e4);return()=>{clearInterval(C),clearInterval(E),clearInterval(R)}}},[l]);const f=async()=>{try{p(!0);const[C,E]=await Promise.all([As.getRealTimeActivity(),As.getAnomalyData()]);t(C),a(E.realtimeAnomalies),i(C.recentEvents||[]),S()}catch(C){console.error("載入實時數據失敗:",C)}finally{p(!1)}},y=async()=>{try{const C=await As.getRealTimeActivity();t(C)}catch(C){console.error("更新實時數據失敗:",C)}},b=async()=>{try{const E=(await As.getUserBehaviorEvents({limit:10})).slice(0,Math.floor(Math.random()*3)+1);i(R=>[...E,...R.slice(0,20)])}catch(C){console.error("更新活動流失敗:",C)}},v=async()=>{try{const C=await As.getAnomalyData();a(C.realtimeAnomalies);const E=C.realtimeAnomalies.filter(R=>R.severity==="high");if(E.length>0){const R={id:Date.now(),type:"critical",title:"檢測到高風險異常",message:`發現 ${E.length} 個高嚴重性異常`,timestamp:new Date,read:!1};d(k=>[R,...k.slice(0,9)])}}catch(C){console.error("檢查異常失敗:",C)}},S=()=>{const C=[{id:1,type:"info",title:"活動高峰期",message:"用戶活動量比平時高 25%",timestamp:new Date(Date.now()-3e5),read:!1},{id:2,type:"warning",title:"異常流量",message:"檢測到來自特定地區的異常流量",timestamp:new Date(Date.now()-9e5),read:!0}];d(C)},_=C=>{d(E=>E.map(R=>R.id===C?{...R,read:!0}:R))},w=()=>{d([])},N=C=>{const E=Date.now()-new Date(C).getTime(),R=Math.floor(E/6e4);if(R<1)return"剛才";if(R<60)return`${R}分鐘前`;const k=Math.floor(R/60);return k<24?`${k}小時前`:`${Math.floor(k/24)}天前`},u=C=>{switch(C){case"critical":return e.jsx(te,{className:"w-5 h-5 text-red-500"});case"warning":return e.jsx(te,{className:"w-5 h-5 text-yellow-500"});case"info":return e.jsx(jn,{className:"w-5 h-5 text-blue-500"});default:return e.jsx(jn,{className:"w-5 h-5 text-gray-500"})}},h=C=>{switch(C){case"critical":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}};return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"實時活動監控"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"即時監控用戶活動、異常檢測與安全警報"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>o(!l),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border transition-colors ${l?"bg-red-100 border-red-300 text-red-700 hover:bg-red-200":"bg-green-100 border-green-300 text-green-700 hover:bg-green-200"}`,children:[l?e.jsx(Ba,{className:"w-4 h-4"}):e.jsx(rr,{className:"w-4 h-4"}),e.jsx("span",{children:l?"暫停監控":"開始監控"})]}),e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg ${l?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l?"bg-green-500 animate-pulse":"bg-gray-400"}`}),e.jsx("span",{className:"text-sm font-medium",children:l?"監控中":"已暫停"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(K.div,{initial:{scale:.95},animate:{scale:1},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"活躍用戶"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600 mt-2",children:(s==null?void 0:s.currentActiveUsers)||0}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"即時統計"})]}),e.jsx(dt,{className:"w-12 h-12 text-primary-500 opacity-20"})]})},s==null?void 0:s.currentActiveUsers),e.jsx(K.div,{initial:{scale:.95},animate:{scale:1},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"每分鐘點擊"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:((g=s==null?void 0:s.topCategories)==null?void 0:g.reduce((C,E)=>C+E.clicksPerMinute,0))||0}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"點擊/分鐘"})]}),e.jsx(Wu,{className:"w-12 h-12 text-blue-500 opacity-20"})]})},(j=s==null?void 0:s.topCategories)==null?void 0:j.reduce((C,E)=>C+E.clicksPerMinute,0)),e.jsx(K.div,{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"異常事件"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:r.length}),e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:[r.filter(C=>C.severity==="high").length," 高風險"]})]}),e.jsx(te,{className:"w-12 h-12 text-yellow-500 opacity-20"})]})}),e.jsx(K.div,{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"系統狀態"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:"正常"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"所有服務運行中"})]}),e.jsx(qs,{className:"w-12 h-12 text-green-500 opacity-20"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg h-96",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"實時活動流"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"即時更新"})]})]}),e.jsx("div",{className:"h-80 overflow-y-auto space-y-2",children:n.map((C,E)=>{var R,k,O,P,$,I;return e.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-start space-x-3 p-3 bg-white/50 rounded-lg hover:bg-white/70 transition-colors",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:["用戶在 ",((R=C.eventData)==null?void 0:R.categoryName)||"未知類別"," 進行 ",((k=C.eventData)==null?void 0:k.action)||"操作"]}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:N(C.timestamp)})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["設備: ",((O=C.deviceInfo)==null?void 0:O.deviceType)||"未知"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["瀏覽器: ",((P=C.deviceInfo)==null?void 0:P.browser)||"未知"]}),((I=($=C.eventData)==null?void 0:$.dwellTimeData)==null?void 0:I.currentDwellTime)&&e.jsxs("span",{className:"text-xs text-gray-500",children:["停留: ",Math.round(C.eventData.dwellTimeData.currentDwellTime),"秒"]})]})]})]},`${C.eventId}-${E}`)})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"系統警報"}),c.length>0&&e.jsx("button",{onClick:w,className:"text-xs text-gray-500 hover:text-gray-700",children:"清除全部"})]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:c.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"沒有未讀警報"}):c.map(C=>e.jsx(K.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`p-3 rounded-lg border cursor-pointer transition-colors ${h(C.type)} ${C.read?"opacity-60":""}`,onClick:()=>_(C.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[u(C.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C.title}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:C.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N(C.timestamp)})]}),!C.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})},C.id))})]}),e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"異常檢測"}),e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(qs,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"未檢測到異常"})]}):r.map(C=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${C.severity==="high"?"border-red-500 bg-red-50":C.severity==="medium"?"border-yellow-500 bg-yellow-50":"border-blue-500 bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C.description}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["當前值: ",C.currentValue," (閾值: ",C.threshold,")"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N(C.timestamp)})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.severity==="high"?"bg-red-200 text-red-800":C.severity==="medium"?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800"}`,children:C.severity==="high"?"高":C.severity==="medium"?"中":"低"})]})},C.id))})]})]})]}),e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"類別活動熱度"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:(T=s==null?void 0:s.topCategories)==null?void 0:T.map((C,E)=>e.jsxs(K.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:E*.1},className:"bg-white/50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-500 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-2",children:E+1}),e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:C.categoryName}),e.jsx("p",{className:"text-lg font-bold text-primary-600 mt-1",children:C.activeUsers}),e.jsx("p",{className:"text-xs text-gray-500",children:"活躍用戶"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-primary-500 h-1 rounded-full transition-all duration-1000",style:{width:`${Math.min(100,C.clicksPerMinute/Math.max(...s.topCategories.map(R=>R.clicksPerMinute))*100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[C.clicksPerMinute," 點擊/分鐘"]})]})]},C.categoryId))})]})]})},kP=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(null),[n,i]=m.useState(!0),[l,o]=m.useState("overview"),[c,d]=m.useState(null);m.useEffect(()=>{x()},[]),m.useEffect(()=>{r&&p(r.segmentId)},[r]);const x=async()=>{try{i(!0);const _=await As.getUserSegmentData();t(_),_.length>0&&a(_[0])}catch(_){console.error("載入分群數據失敗:",_)}finally{i(!1)}},p=async _=>{try{const w={segmentId:_,recentActivity:Array.from({length:10},()=>({userId:`user-${Math.random().toString(36).substr(2,9)}`,action:["瀏覽商品","加入購物車","完成購買","搜尋","查看類別"][Math.floor(Math.random()*5)],timestamp:new Date(Date.now()-Math.random()*24*60*60*1e3),value:Math.floor(Math.random()*1e3)})),demographicBreakdown:{ageGroups:[{range:"18-25",percentage:25,count:250},{range:"26-35",percentage:35,count:350},{range:"36-45",percentage:25,count:250},{range:"46+",percentage:15,count:150}],genderDistribution:[{gender:"女性",percentage:68,count:680},{gender:"男性",percentage:32,count:320}]},behaviorPatterns:{preferredShoppingTime:[{time:"早上 (8-12)",percentage:20},{time:"下午 (12-18)",percentage:45},{time:"晚上 (18-24)",percentage:35}],devicePreference:[{device:"手機",percentage:60},{device:"桌機",percentage:30},{device:"平板",percentage:10}]}};d(w)}catch(w){console.error("載入分群詳情失敗:",w)}},f=_=>({new_users:e.jsx(Ys,{className:"w-5 h-5"}),returning_users:e.jsx(Re,{className:"w-5 h-5"}),vip_users:e.jsx(_a,{className:"w-5 h-5"}),price_conscious:e.jsx(We,{className:"w-5 h-5"}),brand_loyal:e.jsx(dt,{className:"w-5 h-5"}),frequent_buyers:e.jsx(wn,{className:"w-5 h-5"})})[_]||e.jsx(dt,{className:"w-5 h-5"}),y=_=>({new_users:"bg-green-500",returning_users:"bg-blue-500",vip_users:"bg-purple-500",price_conscious:"bg-yellow-500",brand_loyal:"bg-pink-500",frequent_buyers:"bg-indigo-500"})[_]||"bg-gray-500",b=_=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(_),v=_=>(_*100).toFixed(1)+"%",S=[{id:"overview",name:"總覽",icon:_l},{id:"behavior",name:"行為分析",icon:Ee},{id:"preferences",name:"偏好分析",icon:gs},{id:"personalization",name:"個人化設定",icon:zu}];return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"用戶分群管理"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"分析用戶行為模式並創建個人化體驗"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(Ys,{className:"w-4 h-4"}),e.jsx("span",{children:"創建新分群"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((_,w)=>e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.1},onClick:()=>a(_),className:`bg-white/70 backdrop-blur-sm rounded-xl p-6 border cursor-pointer transition-all ${(r==null?void 0:r.segmentId)===_.segmentId?"border-primary-500 shadow-lg scale-105":"border-white/20 shadow-md hover:shadow-lg hover:scale-102"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${y(_.segmentId)} rounded-lg flex items-center justify-center text-white`,children:f(_.segmentId)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:_.segmentName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[_.userCount.toLocaleString()," 用戶"]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均會話時長"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Math.floor(_.behaviorMetrics.averageSessionDuration/60),":",(_.behaviorMetrics.averageSessionDuration%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"轉換率"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:v(_.behaviorMetrics.conversionRate)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均訂單價值"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:b(_.behaviorMetrics.averageOrderValue)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"熱門類別"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:_.categoryPreferences.slice(0,3).map((N,u)=>{const h={"cat-1":"臉部保養","cat-2":"彩妝","cat-3":"身體護理","cat-4":"香水","cat-5":"工具配件"};return e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 text-xs rounded-full",children:h[N.categoryId]||N.categoryId},u)})})]})]},_.segmentId))}),r&&e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl border border-white/20 shadow-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 ${y(r.segmentId)} rounded-lg flex items-center justify-center text-white`,children:f(r.segmentId)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r.segmentName}),e.jsxs("p",{className:"text-gray-600",children:[r.userCount.toLocaleString()," 名用戶"]})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:S.map(_=>{const w=_.icon;return e.jsxs("button",{onClick:()=>o(_.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${l===_.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:_.name})]},_.id)})})}),e.jsxs("div",{className:"p-6",children:[l==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"跳出率"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:v(r.behaviorMetrics.bounceRate)})]}),e.jsx(Ee,{className:"w-8 h-8 text-blue-500 opacity-30"})]})}),e.jsx("div",{className:"bg-white/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"頁面瀏覽"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:r.behaviorMetrics.averagePageViews.toFixed(1)})]}),e.jsx(_l,{className:"w-8 h-8 text-green-500 opacity-30"})]})}),e.jsx("div",{className:"bg-white/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"轉換率"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:v(r.behaviorMetrics.conversionRate)})]}),e.jsx(Re,{className:"w-8 h-8 text-purple-500 opacity-30"})]})}),e.jsx("div",{className:"bg-white/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"平均訂單"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:b(r.behaviorMetrics.averageOrderValue)})]}),e.jsx(We,{className:"w-8 h-8 text-orange-500 opacity-30"})]})})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"年齡分佈"}),e.jsx("div",{className:"space-y-3",children:c.demographicBreakdown.ageGroups.map(_=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[_.range," 歲"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded-full",style:{width:`${_.percentage}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[_.percentage,"%"]})]})]},_.range))})]}),e.jsxs("div",{className:"bg-white/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"設備偏好"}),e.jsx("div",{className:"space-y-3",children:c.behaviorPatterns.devicePreference.map(_=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:_.device}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${_.percentage}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[_.percentage,"%"]})]})]},_.device))})]})]})]}),l==="behavior"&&c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"最近用戶活動"}),e.jsx("div",{className:"bg-white/50 rounded-lg p-4",children:e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:c.recentActivity.map((_,w)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["用戶 ",_.userId.slice(-6)," ",_.action]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(_.timestamp).toLocaleString()})]},w))})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"購物時段偏好"}),e.jsx("div",{className:"bg-white/50 rounded-lg p-4",children:e.jsx("div",{className:"space-y-3",children:c.behaviorPatterns.preferredShoppingTime.map(_=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:_.time}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${_.percentage}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[_.percentage,"%"]})]})]},_.time))})})]})]}),l==="preferences"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"類別偏好排序"}),e.jsx("div",{className:"bg-white/50 rounded-lg p-4",children:e.jsx("div",{className:"space-y-3",children:r.categoryPreferences.map((_,w)=>{const N={"cat-1":"臉部保養","cat-2":"彩妝","cat-3":"身體護理","cat-4":"香水","cat-5":"工具配件"};return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/70 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:w+1}),e.jsx("span",{className:"font-medium text-gray-700",children:N[_.categoryId]||_.categoryId})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded-full",style:{width:`${_.preferenceScore*100}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[(_.preferenceScore*100).toFixed(0),"%"]})]})]},_.categoryId)})})})]})}),l==="personalization"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"個人化策略設定"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/70 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:"智能商品推薦"}),e.jsx("p",{className:"text-sm text-gray-600",children:"基於此分群的偏好自動推薦商品"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500",defaultChecked:!0})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/70 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:"個人化電子報"}),e.jsx("p",{className:"text-sm text-gray-600",children:"發送針對此分群的專屬優惠和內容"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500",defaultChecked:!0})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/70 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:"動態價格顯示"}),e.jsx("p",{className:"text-sm text-gray-600",children:"根據用戶行為調整價格顯示策略"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/70 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:"個人化首頁"}),e.jsx("p",{className:"text-sm text-gray-600",children:"自訂首頁內容和類別排序"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500",defaultChecked:!0})})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{className:"w-full px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"儲存個人化設定"})})]})})]})]})]})},CP=()=>{const[s,t]=m.useState(null),[r,a]=m.useState(!0),[n,i]=m.useState("consent"),[l,o]=m.useState({necessary:!0,analytics:!0,marketing:!1,personalization:!0});m.useEffect(()=>{c()},[]);const c=async()=>{try{a(!0);const v=await As.getPrivacySettings();t(v)}catch(v){console.error("載入隱私權設定失敗:",v)}finally{a(!1)}},d=async(v,S="demo-user")=>{try{const _=await As.processDataRequest(v,S);alert(`${v==="dataExport"?"數據導出":"數據刪除"}請求已提交！請求ID: ${_.requestId}`)}catch(_){console.error("處理數據請求失敗:",_),alert("處理請求時發生錯誤")}},x=async()=>{try{await As.updatePrivacyConsent("demo-user",l),alert("Cookie 設定已更新！")}catch(v){console.error("更新 Cookie 設定失敗:",v),alert("更新設定時發生錯誤")}},p=v=>{switch(v){case"completed":return"text-green-600 bg-green-100";case"processing":return"text-blue-600 bg-blue-100";case"pending":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},f=v=>{switch(v){case"completed":return e.jsx(ae,{className:"w-4 h-4"});case"processing":return e.jsx(be,{className:"w-4 h-4"});case"pending":return e.jsx(te,{className:"w-4 h-4"});default:return e.jsx(Zs,{className:"w-4 h-4"})}},y=v=>new Date(v).toLocaleDateString("zh-TW",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=[{id:"consent",name:"Cookie 同意",icon:qs},{id:"requests",name:"數據請求",icon:Bt},{id:"compliance",name:"合規狀態",icon:ae},{id:"settings",name:"隱私設定",icon:ar}];return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"隱私權設定管理"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"管理用戶同意、數據保護與 GDPR 合規"})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-100 text-green-800 rounded-lg",children:[e.jsx(qs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"GDPR 合規"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"總同意數"}),e.jsx("p",{className:"text-3xl font-bold text-primary-600 mt-2",children:(s==null?void 0:s.cookieConsent.totalConsents.toLocaleString())||0}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["同意率 ",(((s==null?void 0:s.cookieConsent.consentRate)||0)*100).toFixed(1),"%"]})]}),e.jsx(na,{className:"w-12 h-12 text-primary-500 opacity-20"})]})}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"數據請求"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:(s==null?void 0:s.dataRequests.totalRequests)||0}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"本月處理中"})]}),e.jsx(Bt,{className:"w-12 h-12 text-blue-500 opacity-20"})]})}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"分析追蹤"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600 mt-2",children:[(((s==null?void 0:s.cookieConsent.categoryConsents.analytics)||0)*100).toFixed(0),"%"]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"同意分析追蹤"})]}),e.jsx(Ee,{className:"w-12 h-12 text-green-500 opacity-20"})]})}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"行銷追蹤"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:[(((s==null?void 0:s.cookieConsent.categoryConsents.marketing)||0)*100).toFixed(0),"%"]}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"同意行銷追蹤"})]}),e.jsx(qs,{className:"w-12 h-12 text-purple-500 opacity-20"})]})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:b.map(v=>{const S=v.icon;return e.jsxs("button",{onClick:()=>i(v.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${n===v.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:v.name})]},v.id)})})}),e.jsxs("div",{className:"space-y-6",children:[n==="consent"&&e.jsx(e.Fragment,{children:e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cookie 同意分類統計"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:Object.entries((s==null?void 0:s.cookieConsent.categoryConsents)||{}).map(([v,S])=>{const _={necessary:"必要 Cookie",analytics:"分析 Cookie",marketing:"行銷 Cookie",personalization:"個人化 Cookie"};return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:_[v]||v}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${v==="necessary"?"bg-green-500":v==="analytics"?"bg-blue-500":v==="marketing"?"bg-purple-500":"bg-orange-500"}`,style:{width:`${S*100}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[(S*100).toFixed(1),"%"]})]})]},v)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"最近同意記錄"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s==null?void 0:s.cookieConsent.recentConsents.slice(0,10).map((v,S)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/50 rounded",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["用戶 ",v.userId.slice(-8)]}),e.jsx("p",{className:"text-xs text-gray-500",children:y(v.timestamp)})]}),e.jsx("div",{className:"flex space-x-1",children:Object.entries(v.consents).map(([_,w])=>e.jsx("div",{className:`w-2 h-2 rounded-full ${w?"bg-green-500":"bg-red-500"}`,title:`${_}: ${w?"同意":"拒絕"}`},_))})]},S))})]})]})]})}),n==="requests"&&e.jsx(e.Fragment,{children:e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"數據請求處理"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>d("dataExport"),className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[e.jsx(vi,{className:"w-4 h-4"}),e.jsx("span",{children:"測試導出請求"})]}),e.jsxs("button",{onClick:()=>d("dataDeletion"),className:"flex items-center space-x-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{children:"測試刪除請求"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:Object.entries((s==null?void 0:s.dataRequests.requestTypes)||{}).map(([v,S])=>{const _={dataExport:"數據導出",dataDeletion:"數據刪除",consentWithdrawal:"撤回同意"};return e.jsxs("div",{className:"bg-white/50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary-600",children:S}),e.jsx("p",{className:"text-sm text-gray-600",children:_[v]||v})]},v)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"最近處理記錄"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"請求ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"用戶ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"請求類型"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"狀態"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"時間"})]})}),e.jsx("tbody",{children:s==null?void 0:s.dataRequests.recentRequests.map(v=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-white/30",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:v.requestId}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:v.userId.slice(-8)}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:{dataExport:"數據導出",dataDeletion:"數據刪除",consentWithdrawal:"撤回同意"}[v.requestType]||v.requestType}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${p(v.status)}`,children:[f(v.status),e.jsx("span",{children:{pending:"等待中",processing:"處理中",completed:"已完成"}[v.status]||v.status})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:y(v.timestamp)})]},v.requestId))})]})})]})]})}),n==="compliance"&&e.jsx(e.Fragment,{children:e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"GDPR 合規狀態"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-900",children:"GDPR 合規"})]}),e.jsx("span",{className:"text-green-600 font-medium",children:"完全合規"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-900",children:"CCPA 合規"})]}),e.jsx("span",{className:"text-green-600 font-medium",children:"完全合規"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(be,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"最後審計"})]}),e.jsx("span",{className:"text-blue-600 font-medium",children:y(s==null?void 0:s.complianceStatus.lastAuditDate)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-900",children:"自動化刪除"})]}),e.jsx("span",{className:"text-green-600 font-medium",children:s!=null&&s.complianceStatus.automatedDeletion?"已啟用":"未啟用"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"資料保存政策"}),e.jsx("div",{className:"bg-white/50 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"個人資料保存期限"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s==null?void 0:s.complianceStatus.dataRetentionPolicy})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"行為追蹤資料"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"1年"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cookie 數據"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"30天"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"分析報告"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"匿名永久保存"})]})]})})]})]})]})}),n==="settings"&&e.jsx(e.Fragment,{children:e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"預設 Cookie 設定"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"必要 Cookie"}),e.jsx("p",{className:"text-sm text-gray-600",children:"網站基本功能運作所需"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.necessary,disabled:!0,className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"必需"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"分析 Cookie"}),e.jsx("p",{className:"text-sm text-gray-600",children:"幫助我們了解網站使用情況"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:l.analytics,onChange:v=>o(S=>({...S,analytics:v.target.checked})),className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"行銷 Cookie"}),e.jsx("p",{className:"text-sm text-gray-600",children:"用於顯示相關廣告內容"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:l.marketing,onChange:v=>o(S=>({...S,marketing:v.target.checked})),className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"個人化 Cookie"}),e.jsx("p",{className:"text-sm text-gray-600",children:"提供個人化購物體驗"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:l.personalization,onChange:v=>o(S=>({...S,personalization:v.target.checked})),className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500"})})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex space-x-4",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"儲存設定"}),e.jsx("button",{onClick:()=>o({necessary:!0,analytics:!0,marketing:!1,personalization:!0}),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"重設為預設值"})]})]})})]})]})},Ge={PENDING:"pending",IN_PROGRESS:"in_progress",COMPLETED:"completed",CANCELLED:"cancelled",OVERDUE:"overdue"},Yt={LOW:"low",MEDIUM:"medium",HIGH:"high",URGENT:"urgent",CRITICAL:"critical"},ut={INVENTORY_RESTOCK:"inventory_restock",INVENTORY_AUDIT:"inventory_audit",LOW_STOCK_ALERT:"low_stock_alert",ORDER_PROCESSING:"order_processing",ORDER_REVIEW:"order_review",REFUND_PROCESSING:"refund_processing",CUSTOMER_INQUIRY:"customer_inquiry",COMPLAINT_HANDLING:"complaint_handling",QUALITY_ASSURANCE:"quality_assurance",PAYMENT_VERIFICATION:"payment_verification",INVOICE_PROCESSING:"invoice_processing",FINANCIAL_REVIEW:"financial_review",PROMOTION_REVIEW:"promotion_review",CONTENT_APPROVAL:"content_approval",CAMPAIGN_SETUP:"campaign_setup",SUPPLIER_EVALUATION:"supplier_evaluation",PURCHASE_ORDER_REVIEW:"purchase_order_review",VENDOR_COMMUNICATION:"vendor_communication",SYSTEM_MAINTENANCE:"system_maintenance",DATA_BACKUP:"data_backup",SECURITY_REVIEW:"security_review"},_o={LOW:"low",MEDIUM:"medium",HIGH:"high",CRITICAL:"critical"},Ve={PENDING:"pending",IN_PROGRESS:"in_progress",APPROVED:"approved",REJECTED:"rejected",CANCELLED:"cancelled"};class EP{constructor(){this.tasks=this.generateTasks(),this.approvalWorkflows=this.generateApprovalWorkflows(),this.approvalInstances=this.generateApprovalInstances(),this.operationalMetrics=this.generateOperationalMetrics(),this.alerts=this.generateAlerts(),this.reminders=this.generateReminders(),this.users=this.generateUsers(),this.initializeRealTimeUpdates()}generateTasks(){const t=[],r=Object.values(ut),a=Object.values(Ge),n=Object.values(Yt),i=Object.values(_o);for(let l=1;l<=150;l++){const o=new Date(Date.now()-Math.random()*30*24*60*60*1e3),c=new Date(o.getTime()+Math.random()*14*24*60*60*1e3),d=a[Math.floor(Math.random()*a.length)];t.push({id:l,title:this.generateTaskTitle(r[Math.floor(Math.random()*r.length)]),description:this.generateTaskDescription(),task_type:r[Math.floor(Math.random()*r.length)],status:d,priority:n[Math.floor(Math.random()*n.length)],business_impact:i[Math.floor(Math.random()*i.length)],assigned_to:Math.random()>.3?Math.floor(Math.random()*10)+1:null,created_by:Math.floor(Math.random()*10)+1,created_at:o,due_date:c,started_at:d!==Ge.PENDING?new Date(o.getTime()+Math.random()*24*60*60*1e3):null,completed_at:d===Ge.COMPLETED?new Date(c.getTime()-Math.random()*48*60*60*1e3):null,estimated_hours:Math.floor(Math.random()*40)+1,actual_hours:d===Ge.COMPLETED?Math.floor(Math.random()*35)+1:null,related_entity_type:this.getRelatedEntityType(),related_entity_id:Math.floor(Math.random()*1e3)+1,notes:[],attachments:[],auto_generated:Math.random()>.7,generation_rule_id:Math.random()>.7?Math.floor(Math.random()*5)+1:null,updated_at:new Date})}return t}generateTaskTitle(t){const a={[ut.INVENTORY_RESTOCK]:["補充香水庫存","補充面霜庫存","補充口紅庫存","補充精華液庫存"],[ut.INVENTORY_AUDIT]:["Q1庫存盤點","月度庫存檢查","年度庫存審計","不定期庫存抽查"],[ut.LOW_STOCK_ALERT]:["香奈兒香水庫存不足","SK-II面霜庫存預警","雅詩蘭黛精華庫存警報"],[ut.ORDER_PROCESSING]:["處理訂單 #12345","處理大宗訂單 #67890","處理VIP客戶訂單"],[ut.ORDER_REVIEW]:["審核高額訂單","審核異常訂單","審核退換貨申請"],[ut.REFUND_PROCESSING]:["處理退款申請","處理產品瑕疵退款","處理運送問題退款"],[ut.CUSTOMER_INQUIRY]:["客戶產品諮詢","客戶配送查詢","客戶帳戶問題"],[ut.COMPLAINT_HANDLING]:["處理產品投訴","處理服務投訴","處理配送投訴"],[ut.QUALITY_ASSURANCE]:["品質檢查報告","供應商品質評估","客戶滿意度調查"],[ut.PAYMENT_VERIFICATION]:["驗證大額付款","驗證信用卡交易","驗證銀行轉帳"],[ut.INVOICE_PROCESSING]:["處理供應商發票","處理月度帳單","處理退款發票"],[ut.FINANCIAL_REVIEW]:["月度財務審核","季度損益審查","年度預算檢討"],[ut.PROMOTION_REVIEW]:["審核週年慶活動","審核新品促銷","審核會員優惠"],[ut.CONTENT_APPROVAL]:["審核產品文案","審核行銷素材","審核網站內容"],[ut.CAMPAIGN_SETUP]:["設定聖誕節活動","設定母親節促銷","設定夏季特賣"],[ut.SUPPLIER_EVALUATION]:["評估新供應商","年度供應商考核","供應商績效檢討"],[ut.PURCHASE_ORDER_REVIEW]:["審核採購單","審核大宗採購","審核緊急採購"],[ut.VENDOR_COMMUNICATION]:["與供應商溝通交期","協調產品規格","討論價格調整"],[ut.SYSTEM_MAINTENANCE]:["系統安全更新","資料庫維護","伺服器效能優化"],[ut.DATA_BACKUP]:["每日資料備份","週度完整備份","災難復原測試"],[ut.SECURITY_REVIEW]:["安全漏洞檢查","存取權限審核","防火牆規則更新"]}[t]||["一般任務"];return a[Math.floor(Math.random()*a.length)]}generateTaskDescription(){const t=["需要在指定時間內完成此項目，請注意相關細節和要求。","此任務涉及多個部門協調，請確保溝通順暢。","重要客戶相關事項，請優先處理並保持高品質服務。","定期例行作業，請按照標準作業程序執行。","緊急事項，需要立即關注和處理。","季度重點項目，關係到部門KPI達成。","新流程試行，請詳細記錄執行過程和結果。","客戶滿意度相關，請確保服務品質。"];return t[Math.floor(Math.random()*t.length)]}getRelatedEntityType(){const t=["product","order","customer","supplier","promotion","invoice"];return t[Math.floor(Math.random()*t.length)]}generateApprovalWorkflows(){return[{id:1,workflow_name:"採購單簽核流程",module:"procurement",entity_type:"purchase_order",description:"所有採購單都需要經過此簽核流程",trigger_conditions:[{field:"total_amount",operator:">",value:1e4}],approval_steps:[{step_order:1,step_name:"部門主管簽核",step_type:"role_based",approvers:[{approver_type:"role",role_name:"department_manager"}],approval_logic:"any_one",required_approvals:1,sla_hours:24,allow_delegation:!0,require_comments:!1,attachment_required:!1},{step_order:2,step_name:"財務主管簽核",step_type:"role_based",approvers:[{approver_type:"role",role_name:"finance_manager"}],approval_logic:"any_one",required_approvals:1,sla_hours:48,skip_conditions:[{field:"total_amount",operator:"<",value:5e4}],allow_delegation:!0,require_comments:!0,attachment_required:!1},{step_order:3,step_name:"總經理簽核",step_type:"role_based",approvers:[{approver_type:"role",role_name:"general_manager"}],approval_logic:"any_one",required_approvals:1,sla_hours:72,skip_conditions:[{field:"total_amount",operator:"<",value:1e5}],allow_delegation:!1,require_comments:!0,attachment_required:!1}],notification_settings:{notify_on_submit:!0,notify_on_approve:!0,notify_on_reject:!0,reminder_frequency_hours:12,escalation_after_hours:48},is_active:!0,created_at:new Date("2024-01-01"),updated_at:new Date},{id:2,workflow_name:"退款簽核流程",module:"orders",entity_type:"refund_request",description:"客戶退款申請簽核流程",trigger_conditions:[{field:"refund_amount",operator:">",value:5e3}],approval_steps:[{step_order:1,step_name:"客服主管簽核",step_type:"role_based",approvers:[{approver_type:"role",role_name:"customer_service_manager"}],approval_logic:"any_one",required_approvals:1,sla_hours:8,allow_delegation:!0,require_comments:!0,attachment_required:!1}],notification_settings:{notify_on_submit:!0,notify_on_approve:!0,notify_on_reject:!0,reminder_frequency_hours:4,escalation_after_hours:12},is_active:!0,created_at:new Date("2024-01-01"),updated_at:new Date},{id:3,workflow_name:"促銷活動簽核流程",module:"marketing",entity_type:"promotion",description:"行銷促銷活動審核流程",trigger_conditions:[{field:"discount_percentage",operator:">",value:30}],approval_steps:[{step_order:1,step_name:"行銷主管簽核",step_type:"role_based",approvers:[{approver_type:"role",role_name:"marketing_manager"}],approval_logic:"any_one",required_approvals:1,sla_hours:24,allow_delegation:!0,require_comments:!1,attachment_required:!0},{step_order:2,step_name:"業務總監簽核",step_type:"role_based",approvers:[{approver_type:"role",role_name:"sales_director"}],approval_logic:"any_one",required_approvals:1,sla_hours:48,allow_delegation:!1,require_comments:!0,attachment_required:!1}],notification_settings:{notify_on_submit:!0,notify_on_approve:!0,notify_on_reject:!0,reminder_frequency_hours:8,escalation_after_hours:24},is_active:!0,created_at:new Date("2024-01-01"),updated_at:new Date}]}generateApprovalInstances(){const t=[],r=this.approvalWorkflows,a=Object.values(Ve);for(let n=1;n<=50;n++){const i=r[Math.floor(Math.random()*r.length)],l=new Date(Date.now()-Math.random()*15*24*60*60*1e3),o=a[Math.floor(Math.random()*a.length)];t.push({id:n,workflow_id:i.id,entity_type:i.entity_type,entity_id:Math.floor(Math.random()*1e3)+1,submitted_by:Math.floor(Math.random()*10)+1,submitted_at:l,submission_notes:this.generateSubmissionNotes(i.entity_type),current_step:Math.floor(Math.random()*i.approval_steps.length)+1,overall_status:o,approval_history:this.generateApprovalHistory(n,i),due_date:new Date(l.getTime()+3*24*60*60*1e3),completed_at:o===Ve.APPROVED||o===Ve.REJECTED?new Date(l.getTime()+Math.random()*72*60*60*1e3):null,total_processing_time:o===Ve.APPROVED||o===Ve.REJECTED?Math.floor(Math.random()*4320)+60:null,priority:Object.values(Yt)[Math.floor(Math.random()*Object.values(Yt).length)],business_impact:Object.values(_o)[Math.floor(Math.random()*Object.values(_o).length)],risk_level:["low","medium","high"][Math.floor(Math.random()*3)],created_at:l,updated_at:new Date})}return t}generateSubmissionNotes(t){const a={purchase_order:["緊急採購需求","季度例行採購","新品上市採購","庫存補充採購"],refund_request:["產品品質問題","配送延遲","客戶不滿意","尺寸不合適"],promotion:["季節性促銷","清庫存活動","新客戶優惠","會員專屬優惠"]}[t]||["一般申請"];return a[Math.floor(Math.random()*a.length)]}generateApprovalHistory(t,r){var i,l;const a=[],n=["approve","reject","request_info","delegate"];for(let o=0;o<Math.floor(Math.random()*3)+1;o++)a.push({id:t*10+o,approval_instance_id:t,step_number:o+1,approver_id:Math.floor(Math.random()*10)+1,approver_name:this.generateUserName(),approver_role:((l=(i=r.approval_steps[o])==null?void 0:i.approvers[0])==null?void 0:l.role_name)||"manager",action:n[Math.floor(Math.random()*n.length)],decision_date:new Date(Date.now()-Math.random()*48*60*60*1e3),comments:this.generateApprovalComments(),attachments:[],processing_time_minutes:Math.floor(Math.random()*480)+15,created_at:new Date(Date.now()-Math.random()*48*60*60*1e3)});return a}generateUserName(){const t=["王小明","李美麗","張志偉","陳淑芬","林大維","黃怡君","吳建國","蔡雅婷","劉志強","鄭美玲"];return t[Math.floor(Math.random()*t.length)]}generateApprovalComments(){const t=["同意此申請，請按流程進行","金額合理，核准執行","需要補充更多資訊","建議降低預算後重新申請","緊急需求，加速處理","符合公司政策，准予執行","需要主管進一步確認","條件符合，同意核准"];return t[Math.floor(Math.random()*t.length)]}generateOperationalMetrics(){return{real_time_metrics:{current_timestamp:new Date,orders_today:{total_orders:Math.floor(Math.random()*150)+50,pending_orders:Math.floor(Math.random()*20)+5,processing_orders:Math.floor(Math.random()*30)+10,shipped_orders:Math.floor(Math.random()*80)+20,revenue_today:Math.floor(Math.random()*5e5)+1e5,avg_order_value:Math.floor(Math.random()*3e3)+1e3},inventory_alerts:{low_stock_items:Math.floor(Math.random()*15)+3,out_of_stock_items:Math.floor(Math.random()*5)+1,overstock_items:Math.floor(Math.random()*8)+2,total_inventory_value:Math.floor(Math.random()*5e6)+2e6},customer_service:{open_tickets:Math.floor(Math.random()*25)+10,overdue_tickets:Math.floor(Math.random()*5)+1,avg_response_time_minutes:Math.floor(Math.random()*120)+30,customer_satisfaction_today:(Math.random()*1+4).toFixed(1)},website_performance:{current_visitors:Math.floor(Math.random()*500)+100,conversion_rate_today:(Math.random()*3+2).toFixed(2),bounce_rate_today:(Math.random()*20+30).toFixed(2),page_load_time_avg:(Math.random()*2+1).toFixed(2),uptime_percentage:(Math.random()*1+99).toFixed(2)},financial_summary:{revenue_today:Math.floor(Math.random()*5e5)+1e5,profit_today:Math.floor(Math.random()*15e4)+3e4,outstanding_payments:Math.floor(Math.random()*2e5)+5e4,overdue_invoices:Math.floor(Math.random()*10)+2,cash_flow_status:["positive","negative","neutral"][Math.floor(Math.random()*3)]}},operational_efficiency:{processing_efficiency:{orders_processed_per_hour:Math.floor(Math.random()*20)+10,avg_order_processing_time_minutes:Math.floor(Math.random()*30)+15,orders_requiring_manual_review_percentage:(Math.random()*10+5).toFixed(1),automatic_processing_rate:(Math.random()*20+75).toFixed(1)},inventory_efficiency:{inventory_turnover_rate:(Math.random()*3+4).toFixed(1),stockout_rate_percentage:(Math.random()*3+1).toFixed(1),excess_inventory_percentage:(Math.random()*5+2).toFixed(1),inventory_accuracy_rate:(Math.random()*2+98).toFixed(1)},service_efficiency:{first_contact_resolution_rate:(Math.random()*15+80).toFixed(1),avg_ticket_resolution_time_hours:(Math.random()*12+4).toFixed(1),agent_utilization_rate:(Math.random()*15+80).toFixed(1),customer_effort_score:(Math.random()*1+4).toFixed(1)},supply_chain_efficiency:{supplier_on_time_delivery_rate:(Math.random()*10+90).toFixed(1),procurement_cycle_time_days:Math.floor(Math.random()*5)+7,supplier_defect_rate:(Math.random()*2+.5).toFixed(2),inventory_receiving_accuracy:(Math.random()*2+98).toFixed(1)}},anomaly_monitoring:{active_anomalies:this.generateActiveAnomalies(),system_health:{database_response_time:Math.floor(Math.random()*100)+50,api_response_time:Math.floor(Math.random()*200)+100,error_rate_percentage:(Math.random()*1+.1).toFixed(2),queue_processing_status:["healthy","warning","critical"][Math.floor(Math.random()*3)]},business_health:{conversion_rate_status:["normal","below_average","concerning"][Math.floor(Math.random()*3)],customer_satisfaction_trend:["improving","stable","declining"][Math.floor(Math.random()*3)],inventory_health_score:Math.floor(Math.random()*20)+80,financial_health_score:Math.floor(Math.random()*15)+85}},alert_system:{critical_alerts:this.generateCriticalAlerts(),trending_issues:this.generateTrendingIssues()}}}generateActiveAnomalies(){const t=[],r=["訂單轉換率","庫存週轉率","客戶回應時間","系統錯誤率","網站載入速度"],a=["low","medium","high","critical"],n=["open","investigating","resolved"];for(let i=0;i<Math.floor(Math.random()*5)+2;i++)t.push({anomaly_id:i+1,metric_name:r[Math.floor(Math.random()*r.length)],severity:a[Math.floor(Math.random()*a.length)],detected_at:new Date(Date.now()-Math.random()*24*60*60*1e3),description:"偵測到指標異常波動，建議進行進一步調查",recommended_action:"檢查相關系統狀態並分析根本原因",status:n[Math.floor(Math.random()*n.length)]});return t}generateCriticalAlerts(){const t=[],r=["庫存不足","系統異常","訂單積壓","客戶投訴","財務異常"],a=Object.values(Yt);for(let n=0;n<Math.floor(Math.random()*3)+1;n++)t.push({alert_id:n+1,alert_type:r[Math.floor(Math.random()*r.length)],priority:a[Math.floor(Math.random()*a.length)],message:"系統偵測到需要立即關注的狀況",affected_area:"營運管理",estimated_impact:"可能影響客戶體驗和營收",suggested_actions:["立即檢查相關數據","聯繫相關負責人","啟動緊急應變程序"],created_at:new Date(Date.now()-Math.random()*2*60*60*1e3),acknowledged_by:Math.random()>.5?Math.floor(Math.random()*10)+1:null,resolved_at:Math.random()>.7?new Date:null});return t}generateAlerts(){return{critical:this.generateCriticalAlerts(),anomalies:this.generateActiveAnomalies(),trending_issues:this.generateTrendingIssues()}}generateTrendingIssues(){const t=[],r=["配送延遲增加","退款申請上升","客服回應時間延長","庫存週轉下降","轉換率波動"],a=["increasing","stable","decreasing"],n=["low","medium","high"];for(let i=0;i<Math.floor(Math.random()*4)+2;i++)t.push({issue_pattern:r[Math.floor(Math.random()*r.length)],occurrence_count:Math.floor(Math.random()*20)+5,trend_direction:a[Math.floor(Math.random()*a.length)],risk_assessment:n[Math.floor(Math.random()*n.length)],prevention_recommendations:["加強監控機制","優化作業流程","提供員工培訓","改善系統效能"]});return t}generateReminders(){const t=[];for(let r=1;r<=20;r++)t.push({reminder_id:r,title:this.generateReminderTitle(),description:"系統自動生成的提醒事項",reminder_type:["task_deadline","approval_pending","inventory_alert","system_maintenance"][Math.floor(Math.random()*4)],priority:Object.values(Yt)[Math.floor(Math.random()*Object.values(Yt).length)],target_user_id:Math.floor(Math.random()*10)+1,related_entity_type:"task",related_entity_id:Math.floor(Math.random()*150)+1,scheduled_time:new Date(Date.now()+Math.random()*48*60*60*1e3),is_sent:Math.random()>.3,is_acknowledged:Math.random()>.5,notification_channels:["email","in_app","push"],created_at:new Date(Date.now()-Math.random()*24*60*60*1e3)});return t}generateReminderTitle(){const t=["任務即將到期提醒","簽核審批待處理","庫存預警通知","系統維護提醒","客戶回覆期限提醒","月度報告繳交提醒","供應商付款提醒","員工績效評估提醒"];return t[Math.floor(Math.random()*t.length)]}generateUsers(){const t=[],r=["admin","manager","employee","supervisor"],a=["營運部","行銷部","財務部","客服部","資訊部"];for(let n=1;n<=10;n++)t.push({id:n,name:this.generateUserName(),email:`user${n}@marelle.com`,role:r[Math.floor(Math.random()*r.length)],department:a[Math.floor(Math.random()*a.length)],is_active:!0,last_login:new Date(Date.now()-Math.random()*24*60*60*1e3),created_at:new Date("2024-01-01")});return t}initializeRealTimeUpdates(){setInterval(()=>{this.updateRealTimeMetrics()},6e4),setInterval(()=>{this.checkForAnomalies()},3e5)}updateRealTimeMetrics(){const t=this.operationalMetrics.real_time_metrics;t.orders_today.total_orders+=Math.floor(Math.random()*3),t.orders_today.revenue_today+=Math.floor(Math.random()*5e3),t.website_performance.current_visitors+=Math.floor(Math.random()*20)-10,t.website_performance.current_visitors<50&&(t.website_performance.current_visitors=50),t.current_timestamp=new Date}checkForAnomalies(){if(Math.random()>.7){const t={anomaly_id:this.operationalMetrics.anomaly_monitoring.active_anomalies.length+1,metric_name:"系統效能",severity:"medium",detected_at:new Date,description:"偵測到系統回應時間異常",recommended_action:"檢查伺服器狀態",status:"open"};this.operationalMetrics.anomaly_monitoring.active_anomalies.push(t)}}getTasks(t={}){let r=[...this.tasks];return t.status&&(r=r.filter(a=>t.status.includes(a.status))),t.priority&&(r=r.filter(a=>t.priority.includes(a.priority))),t.task_type&&(r=r.filter(a=>t.task_type.includes(a.task_type))),t.assigned_to&&(r=r.filter(a=>a.assigned_to===t.assigned_to)),{tasks:r,total:r.length,summary:this.getTaskSummary(r)}}getTaskSummary(t=this.tasks){const r={total:t.length,by_status:{},by_priority:{},overdue:0,due_today:0},a=new Date;return a.setHours(23,59,59,999),t.forEach(n=>{if(r.by_status[n.status]=(r.by_status[n.status]||0)+1,r.by_priority[n.priority]=(r.by_priority[n.priority]||0)+1,n.due_date&&n.status!==Ge.COMPLETED){const i=new Date(n.due_date);i<new Date?r.overdue++:i<=a&&r.due_today++}}),r}updateTaskStatus(t,r,a=null){const n=this.tasks.find(i=>i.id===t);return n?(n.status=r,n.updated_at=new Date,r===Ge.COMPLETED?n.completed_at=new Date:r===Ge.IN_PROGRESS&&!n.started_at&&(n.started_at=new Date),a&&n.notes.push({note:a,created_by:1,created_at:new Date}),n):null}assignTask(t,r,a=null,n=null,i=null){const l=this.tasks.find(o=>o.id===t);return l?(l.assigned_to=r,l.updated_at=new Date,a&&(l.priority=a),n&&(l.due_date=new Date(n)),i&&l.notes.push({note:i,created_by:1,created_at:new Date}),l):null}getApprovalInstances(t={}){let r=[...this.approvalInstances];if(t.workflow_type){const a=this.approvalWorkflows.filter(n=>n.entity_type===t.workflow_type).map(n=>n.id);r=r.filter(n=>a.includes(n.workflow_id))}return t.status&&(r=r.filter(a=>t.status.includes(a.overall_status))),t.priority&&(r=r.filter(a=>t.priority.includes(a.priority))),{instances:r,total:r.length,summary:this.getApprovalSummary(r)}}getApprovalSummary(t=this.approvalInstances){const r={total:t.length,by_status:{},overdue:0,due_today:0,avg_processing_time:0},a=new Date;a.setHours(23,59,59,999);let n=0,i=0;return t.forEach(l=>{if(r.by_status[l.overall_status]=(r.by_status[l.overall_status]||0)+1,l.due_date&&l.overall_status===Ve.PENDING){const o=new Date(l.due_date);o<new Date?r.overdue++:o<=a&&r.due_today++}l.total_processing_time&&(n+=l.total_processing_time,i++)}),i>0&&(r.avg_processing_time=Math.round(n/i)),r}getOperationalMetrics(){return this.operationalMetrics}getDashboardSummary(){const t=this.getTaskSummary(),r=this.getApprovalSummary(),a=this.operationalMetrics;return{tasks:t,approvals:r,metrics:{orders_today:a.real_time_metrics.orders_today.total_orders,revenue_today:a.real_time_metrics.orders_today.revenue_today,active_alerts:a.alert_system.critical_alerts.length,system_health:a.anomaly_monitoring.system_health.queue_processing_status},last_updated:new Date}}getReminders(t=null){let r=[...this.reminders];return t&&(r=r.filter(a=>a.target_user_id===t)),r.sort((a,n)=>new Date(a.scheduled_time)-new Date(n.scheduled_time))}acknowledgeReminder(t){const r=this.reminders.find(a=>a.reminder_id===t);return r?(r.is_acknowledged=!0,r):null}getUsers(){return this.users}getUserById(t){return this.users.find(r=>r.id===t)}getAlerts(){return this.alerts}getCriticalAlerts(){return this.alerts.critical}getAnomalies(){return this.alerts.anomalies}getTrendingIssues(){return this.alerts.trending_issues}}const Fa=new EP,TP=()=>{var p;const[s,t]=m.useState(null),[r,a]=m.useState(new Date),[n,i]=m.useState(30);m.useEffect(()=>{l();const f=setInterval(()=>{l()},n*1e3);return()=>clearInterval(f)},[n]);const l=()=>{const f=Fa.getDashboardSummary(),y=Fa.getOperationalMetrics(),b=Fa.getTasks(),v=Fa.getApprovalInstances();t({summary:f,metrics:y,tasks:b.summary,approvals:v.summary}),a(new Date)};if(!s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-amber-600"})});const{summary:o,metrics:c,tasks:d,approvals:x}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"營運儀表板"}),e.jsx("p",{className:"text-gray-600",children:"即時監控系統狀態和營運指標"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["最後更新: ",r.toLocaleTimeString()]}),e.jsxs("button",{onClick:l,className:"flex items-center px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"刷新"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(Pm,{title:"今日訂單",value:c.real_time_metrics.orders_today.total_orders,subValue:`NT$ ${c.real_time_metrics.orders_today.revenue_today.toLocaleString()}`,icon:wn,color:"blue",trend:c.real_time_metrics.orders_today.total_orders>80?"up":"down",percentage:12.5}),e.jsx(Pm,{title:"待辦任務",value:((p=d.by_status)==null?void 0:p.pending)||0,subValue:`${d.overdue} 逾期`,icon:be,color:"amber",trend:d.overdue>5?"down":"up",percentage:8.2}),e.jsx(Pm,{title:"系統警報",value:c.alert_system.critical_alerts.length,subValue:"需要關注",icon:te,color:"red",trend:c.alert_system.critical_alerts.length>2?"down":"up",percentage:5.1}),e.jsx(Pm,{title:"客戶滿意度",value:c.real_time_metrics.customer_service.customer_satisfaction_today,subValue:"今日平均",icon:dt,color:"green",trend:"up",percentage:3.7,isDecimal:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(DP,{tasks:d}),e.jsx(AP,{approvals:x}),e.jsx(IP,{metrics:c.operational_efficiency})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(RP,{systemHealth:c.anomaly_monitoring.system_health}),e.jsx(PP,{inventory:c.real_time_metrics.inventory_alerts}),e.jsx(MP,{alerts:c.alert_system.critical_alerts}),e.jsx(OP,{anomalies:c.anomaly_monitoring.active_anomalies})]})]})]})},Pm=({title:s,value:t,subValue:r,icon:a,color:n,trend:i,percentage:l,isDecimal:o=!1})=>{const c={blue:"from-blue-500 to-blue-600",amber:"from-amber-500 to-amber-600",red:"from-red-500 to-red-600",green:"from-green-500 to-green-600"};return e.jsxs(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-r ${c[n]} text-white`,children:e.jsx(a,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[i==="up"?e.jsx(Re,{className:"h-4 w-4 text-green-500"}):e.jsx(wa,{className:"h-4 w-4 text-red-500"}),e.jsxs("span",{className:`text-sm font-medium ${i==="up"?"text-green-600":"text-red-600"}`,children:[l,"%"]})]})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:s}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:o?t:t.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-500",children:r})]})},DP=({tasks:s})=>{var t,r,a;return e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"任務概況"}),e.jsx(oe,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((t=s.by_status)==null?void 0:t.pending)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"待處理"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:((r=s.by_status)==null?void 0:r.in_progress)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"進行中"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:((a=s.by_status)==null?void 0:a.completed)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"已完成"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.overdue}),e.jsx("div",{className:"text-sm text-gray-500",children:"逾期"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"優先級分布"}),e.jsx("div",{className:"space-y-2",children:Object.entries(s.by_priority||{}).map(([n,i])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:n}),e.jsx("span",{className:"text-sm font-medium",children:i})]},n))})]})]})},AP=({approvals:s})=>{var t,r;return e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"簽核流程"}),e.jsx(ae,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:((t=s.by_status)==null?void 0:t.pending)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"待簽核"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:((r=s.by_status)==null?void 0:r.approved)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"已核准"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.overdue}),e.jsx("div",{className:"text-sm text-gray-500",children:"逾期"})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"平均處理時間"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.avg_processing_time/60)," 小時"]})]})})]})},IP=({metrics:s})=>e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"營運效率"}),e.jsx(kr,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"處理效率"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"每小時處理訂單"}),e.jsx("span",{className:"text-sm font-medium",children:s.processing_efficiency.orders_processed_per_hour})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均處理時間"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.processing_efficiency.avg_order_processing_time_minutes," 分鐘"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"自動化比率"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.processing_efficiency.automatic_processing_rate,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"庫存效率"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"庫存週轉率"}),e.jsx("span",{className:"text-sm font-medium",children:s.inventory_efficiency.inventory_turnover_rate})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"缺貨率"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.inventory_efficiency.stockout_rate_percentage,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"庫存準確率"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.inventory_efficiency.inventory_accuracy_rate,"%"]})]})]})]})]})]}),RP=({systemHealth:s})=>e.jsxs(K.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"系統健康"}),e.jsx(kx,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"資料庫回應"}),e.jsxs("span",{className:`text-sm font-medium ${s.database_response_time<100?"text-green-600":"text-amber-600"}`,children:[s.database_response_time,"ms"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"API 回應"}),e.jsxs("span",{className:`text-sm font-medium ${s.api_response_time<200?"text-green-600":"text-amber-600"}`,children:[s.api_response_time,"ms"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"錯誤率"}),e.jsxs("span",{className:`text-sm font-medium ${parseFloat(s.error_rate_percentage)<1?"text-green-600":"text-red-600"}`,children:[s.error_rate_percentage,"%"]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"佇列狀態"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.queue_processing_status==="healthy"?"bg-green-100 text-green-700":s.queue_processing_status==="warning"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:s.queue_processing_status==="healthy"?"正常":s.queue_processing_status==="warning"?"警告":"嚴重"})]})})]})]}),PP=({inventory:s})=>e.jsxs(K.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"庫存警報"}),e.jsx(te,{className:"h-5 w-5 text-amber-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"庫存不足"}),e.jsx("span",{className:"text-sm font-medium text-amber-600",children:s.low_stock_items})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"缺貨商品"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:s.out_of_stock_items})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"過量庫存"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:s.overstock_items})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["NT$ ",s.total_inventory_value.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-500",children:"總庫存價值"})]})})]})]}),MP=({alerts:s})=>e.jsxs(K.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"最新警報"}),e.jsx(jn,{className:"h-5 w-5 text-red-500"})]}),e.jsxs("div",{className:"space-y-3",children:[s.slice(0,3).map((t,r)=>e.jsx("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800",children:t.alert_type}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:t.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(t.created_at).toLocaleTimeString()})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.priority==="critical"?"bg-red-100 text-red-700":t.priority==="high"?"bg-orange-100 text-orange-700":"bg-amber-100 text-amber-700"}`,children:t.priority})]})},t.alert_id)),s.length===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx(ae,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"目前沒有警報"})]})]})]}),OP=({anomalies:s})=>e.jsxs(K.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"異常監控"}),e.jsx(te,{className:"h-5 w-5 text-orange-500"})]}),e.jsxs("div",{className:"space-y-3",children:[s.slice(0,3).map((t,r)=>e.jsx("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-800",children:t.metric_name}),e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:t.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(t.detected_at).toLocaleTimeString()})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.severity==="critical"?"bg-red-100 text-red-700":t.severity==="high"?"bg-orange-100 text-orange-700":t.severity==="medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:t.severity})]})},t.anomaly_id)),s.length===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx(ae,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"系統運行正常"})]})]})]}),LP=()=>{const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(null),[c,d]=m.useState(!1),[x,p]=m.useState(!1),[f,y]=m.useState(new Set),[b,v]=m.useState({status:[],priority:[],task_type:[],assigned_to:null,search:""}),[S,_]=m.useState("due_date"),[w,N]=m.useState("asc"),[u,h]=m.useState(1),[g]=m.useState(10);m.useEffect(()=>{j()},[]),m.useEffect(()=>{T()},[s,b,S,w]);const j=async()=>{i(!0);try{const L=Fa.getTasks();t(L.tasks)}catch(L){console.error("Error loading tasks:",L)}finally{i(!1)}},T=()=>{let L=[...s];b.search&&(L=L.filter(D=>D.title.toLowerCase().includes(b.search.toLowerCase())||D.description.toLowerCase().includes(b.search.toLowerCase()))),b.status.length>0&&(L=L.filter(D=>b.status.includes(D.status))),b.priority.length>0&&(L=L.filter(D=>b.priority.includes(D.priority))),b.task_type.length>0&&(L=L.filter(D=>b.task_type.includes(D.task_type))),b.assigned_to&&(L=L.filter(D=>D.assigned_to===b.assigned_to)),L.sort((D,M)=>{let A=D[S],V=M[S];return(S==="due_date"||S==="created_at")&&(A=A?new Date(A):new Date(0),V=V?new Date(V):new Date(0)),A<V?w==="asc"?-1:1:A>V?w==="asc"?1:-1:0}),a(L),h(1)},C=async(L,D,M=null)=>{try{const A=Fa.updateTaskStatus(L,D,M);A&&t(V=>V.map(B=>B.id===L?A:B))}catch(A){console.error("Error updating task status:",A)}},E=async(L,D,M=null,A=null,V=null)=>{try{const B=Fa.assignTask(L,D,M,A,V);B&&(t(z=>z.map(F=>F.id===L?B:F)),p(!1),o(null))}catch(B){console.error("Error assigning task:",B)}},R=async L=>{const D=Array.from(f);switch(L){case"complete":for(const M of D)await C(M,Ge.COMPLETED);break;case"cancel":for(const M of D)await C(M,Ge.CANCELLED);break}y(new Set)},k=L=>{const D=new Set(f);D.has(L)?D.delete(L):D.add(L),y(D)},O=Math.ceil(r.length/g),P=(u-1)*g,$=P+g,I=r.slice(P,$);return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-amber-600"})}):e.jsxs("div",{children:[e.jsx(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"任務管理"}),e.jsx("p",{className:"text-gray-600",children:"管理和追蹤系統任務和工作項目"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:j,className:"flex items-center px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"重新載入"]})})]})}),e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[e.jsx(qh,{label:"狀態",options:Object.values(Ge),selected:b.status,onChange:L=>v({...b,status:L}),getLabel:L=>L.replace("_"," ")}),e.jsx(qh,{label:"優先級",options:Object.values(Yt),selected:b.priority,onChange:L=>v({...b,priority:L}),getLabel:L=>L}),e.jsx(qh,{label:"任務類型",options:Object.values(ut),selected:b.task_type,onChange:L=>v({...b,task_type:L}),getLabel:L=>L.replace("_"," ")})]}),f.size>0&&e.jsxs(K.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("span",{className:"text-sm text-blue-800",children:["已選擇 ",f.size," 個任務"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>R("complete"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"標記完成"}),e.jsx("button",{onClick:()=>R("cancel"),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"取消任務"}),e.jsx("button",{onClick:()=>y(new Set),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700",children:"清除選擇"})]})]})]}),e.jsx(FP,{tasks:r}),e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-md rounded-xl border border-white/20 shadow-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["任務列表 (",r.length,")"]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(VP,{sortBy:S,sortOrder:w,onSortChange:(L,D)=>{_(L),N(D)}})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",className:"rounded",checked:f.size===I.length&&I.length>0,onChange:L=>{L.target.checked?y(new Set(I.map(D=>D.id))):y(new Set)}})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"任務"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"優先級"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"指派者"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"到期日"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white/30 divide-y divide-gray-200",children:e.jsx(Ox,{children:I.map((L,D)=>e.jsx($P,{task:L,index:D,isSelected:f.has(L.id),onToggleSelect:()=>k(L.id),onStatusChange:(M,A)=>C(L.id,M,A),onAssign:()=>{o(L),p(!0)},onViewDetails:()=>{o(L),d(!0)}},L.id))})})]})}),O>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50/50",children:e.jsx(UP,{currentPage:u,totalPages:O,onPageChange:h})})]}),e.jsx(BP,{task:l,isOpen:c,onClose:()=>{d(!1),o(null)},onStatusChange:(L,D)=>{C(l.id,L,D),d(!1),o(null)}}),e.jsx(zP,{task:l,isOpen:x,onClose:()=>{p(!1),o(null)},onAssign:E})]})},FP=({tasks:s})=>{const t={total:s.length,pending:s.filter(r=>r.status===Ge.PENDING).length,inProgress:s.filter(r=>r.status===Ge.IN_PROGRESS).length,completed:s.filter(r=>r.status===Ge.COMPLETED).length,overdue:s.filter(r=>r.status!==Ge.COMPLETED&&r.due_date&&new Date(r.due_date)<new Date).length};return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"總任務"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:t.pending}),e.jsx("div",{className:"text-sm text-gray-600",children:"待處理"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.inProgress}),e.jsx("div",{className:"text-sm text-gray-600",children:"進行中"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.completed}),e.jsx("div",{className:"text-sm text-gray-600",children:"已完成"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.overdue}),e.jsx("div",{className:"text-sm text-gray-600",children:"逾期"})]})]})},$P=({task:s,index:t,isSelected:r,onToggleSelect:a,onStatusChange:n,onAssign:i,onViewDetails:l})=>{var d,x;const[o,c]=m.useState(!1);return e.jsxs(K.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:t*.05},className:`hover:bg-gray-50/50 ${r?"bg-blue-50/50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",className:"rounded",checked:r,onChange:a})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[s.status&&e.jsx("div",{className:"mt-1",children:s.status===Ge.COMPLETED?e.jsx(ae,{className:"h-5 w-5 text-green-500"}):s.status===Ge.IN_PROGRESS?e.jsx(ps,{className:"h-5 w-5 text-blue-500"}):s.due_date&&new Date(s.due_date)<new Date?e.jsx(te,{className:"h-5 w-5 text-red-500"}):e.jsx(be,{className:"h-5 w-5 text-amber-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.title}),e.jsx("div",{className:"text-sm text-gray-500 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800",children:(d=s.task_type)==null?void 0:d.replace("_"," ")}),s.business_impact&&e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${s.business_impact===_o.CRITICAL?"bg-red-100 text-red-800":s.business_impact===_o.HIGH?"bg-orange-100 text-orange-800":s.business_impact===_o.MEDIUM?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"}`,children:s.business_impact})]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.status===Ge.COMPLETED?"bg-green-100 text-green-800":s.status===Ge.IN_PROGRESS?"bg-blue-100 text-blue-800":s.status===Ge.CANCELLED?"bg-gray-100 text-gray-800":s.due_date&&new Date(s.due_date)<new Date?"bg-red-100 text-red-800":"bg-amber-100 text-amber-800"}`,children:(x=s.status)==null?void 0:x.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${s.priority===Yt.CRITICAL?"bg-red-100 text-red-800 border-red-200":s.priority===Yt.URGENT?"bg-orange-100 text-orange-800 border-orange-200":s.priority===Yt.HIGH?"bg-amber-100 text-amber-800 border-amber-200":s.priority===Yt.MEDIUM?"bg-blue-100 text-blue-800 border-blue-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:s.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(na,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.assigned_to?`用戶 ${s.assigned_to}`:"未指派"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ir,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:`text-sm ${s.due_date&&new Date(s.due_date)<new Date&&s.status!==Ge.COMPLETED?"text-red-600 font-medium":"text-gray-900"}`,children:s.due_date?new Date(s.due_date).toLocaleDateString("zh-TW"):"-"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(!o),className:"text-gray-400 hover:text-gray-600",children:e.jsx(KC,{className:"h-5 w-5"})}),o&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>{l(),c(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"查看詳情"}),e.jsx("button",{onClick:()=>{i(),c(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"重新指派"}),s.status!==Ge.COMPLETED&&e.jsx("button",{onClick:()=>{n(Ge.COMPLETED),c(!1)},className:"block w-full text-left px-4 py-2 text-sm text-green-700 hover:bg-green-50",children:"標記完成"}),s.status===Ge.PENDING&&e.jsx("button",{onClick:()=>{n(Ge.IN_PROGRESS),c(!1)},className:"block w-full text-left px-4 py-2 text-sm text-blue-700 hover:bg-blue-50",children:"開始執行"})]})})]})})]})},qh=({label:s,options:t,selected:r,onChange:a,getLabel:n})=>{const[i,l]=m.useState(!1),[o,c]=m.useState({top:0,left:0,width:0}),d=m.useRef(null),x=()=>{if(d.current){const f=d.current.getBoundingClientRect();c({top:f.bottom+2,left:f.left,width:f.width})}},p=()=>{i||x(),l(!i)};return e.jsxs("div",{ref:d,className:"relative",children:[e.jsxs("button",{onClick:p,className:"flex items-center justify-between w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("span",{children:r.length>0?`${s} (${r.length})`:s}),e.jsx(Ds,{className:"h-4 w-4"})]}),i&&Zo.createPortal(e.jsx("div",{className:"glass-dropdown fixed z-[99999]",style:{top:`${o.top}px`,left:`${o.left}px`,width:`${o.width}px`,zIndex:99999},children:e.jsx("div",{className:"max-h-60 overflow-auto",children:t.map(f=>e.jsx("label",{className:"glass-dropdown-option cursor-pointer",children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("input",{type:"checkbox",checked:r.includes(f),onChange:y=>{y.target.checked?a([...r,f]):a(r.filter(b=>b!==f))},className:"rounded mr-3"}),e.jsx("span",{className:"text-sm",children:n?n(f):f})]})},f))})}),document.body)]})},VP=({sortBy:s,sortOrder:t,onSortChange:r})=>{const[a,n]=m.useState(!1),i=[{field:"due_date",label:"到期日"},{field:"created_at",label:"建立日期"},{field:"priority",label:"優先級"},{field:"status",label:"狀態"}];return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!a),className:"flex items-center px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50",children:[e.jsx(gs,{className:"h-4 w-4 mr-1"}),"排序",e.jsx(Ds,{className:"h-4 w-4 ml-1"})]}),a&&e.jsx("div",{className:"absolute right-0 z-10 w-40 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",children:e.jsx("div",{className:"p-1",children:i.map(l=>e.jsx("button",{onClick:()=>{s===l.field?r(l.field,t==="asc"?"desc":"asc"):r(l.field,"asc"),n(!1)},className:`w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 ${s===l.field?"bg-amber-50 text-amber-700":"text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:l.label}),s===l.field&&e.jsx("span",{className:"text-xs",children:t==="asc"?"↑":"↓"})]})},l.field))})})]})},UP=({currentPage:s,totalPages:t,onPageChange:r})=>{const a=[];let i=Math.max(1,s-Math.floor(2.5)),l=Math.min(t,i+5-1);l-i+1<5&&(i=Math.max(1,l-5+1));for(let o=i;o<=l;o++)a.push(o);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["顯示第 ",(s-1)*10+1," - ",Math.min(s*10,t*10)," 項"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>r(s-1),disabled:s===1,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"上一頁"}),a.map(o=>e.jsx("button",{onClick:()=>r(o),className:`px-3 py-1 text-sm border rounded ${s===o?"bg-amber-600 text-white border-amber-600":"border-gray-300 hover:bg-gray-50"}`,children:o},o)),e.jsx("button",{onClick:()=>r(s+1),disabled:s===t,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"下一頁"})]})]})},BP=({task:s,isOpen:t,onClose:r,onStatusChange:a})=>{var n,i;return!t||!s?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"任務詳情"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Zs,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"狀態"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.status===Ge.COMPLETED?"bg-green-100 text-green-800":s.status===Ge.IN_PROGRESS?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800"}`,children:(n=s.status)==null?void 0:n.replace("_"," ")})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"優先級"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.priority===Yt.CRITICAL?"bg-red-100 text-red-800":s.priority===Yt.HIGH?"bg-orange-100 text-orange-800":"bg-amber-100 text-amber-800"}`,children:s.priority})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"任務類型"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(i=s.task_type)==null?void 0:i.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"業務影響"}),e.jsx("p",{className:"mt-1 text-gray-900",children:s.business_impact})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"建立日期"}),e.jsx("p",{className:"mt-1 text-gray-900",children:new Date(s.created_at).toLocaleDateString("zh-TW")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"到期日"}),e.jsx("p",{className:"mt-1 text-gray-900",children:s.due_date?new Date(s.due_date).toLocaleDateString("zh-TW"):"-"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"關閉"}),s.status!==Ge.COMPLETED&&e.jsx("button",{onClick:()=>a(Ge.COMPLETED),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"標記完成"})]})]})]})})},zP=({task:s,isOpen:t,onClose:r,onAssign:a})=>{const[n,i]=m.useState({assigned_to:"",priority:"",due_date:"",notes:""});if(m.useEffect(()=>{s&&i({assigned_to:s.assigned_to||"",priority:s.priority||"",due_date:s.due_date?new Date(s.due_date).toISOString().split("T")[0]:"",notes:""})},[s]),!t||!s)return null;const l=o=>{o.preventDefault(),a(s.id,parseInt(n.assigned_to),n.priority,n.due_date?new Date(n.due_date):null,n.notes||null)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"指派任務"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Zs,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"指派給"}),e.jsxs("select",{value:n.assigned_to,onChange:o=>i({...n,assigned_to:o.target.value}),className:"glass-select w-full font-chinese",required:!0,children:[e.jsx("option",{value:"",children:"選擇用戶"}),[...Array(10)].map((o,c)=>e.jsxs("option",{value:c+1,children:["用戶 ",c+1]},c+1))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"優先級"}),e.jsxs("select",{value:n.priority,onChange:o=>i({...n,priority:o.target.value}),className:"glass-select w-full font-chinese",children:[e.jsx("option",{value:"",children:"選擇優先級"}),Object.values(Yt).map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"到期日"}),e.jsx("input",{type:"date",value:n.due_date,onChange:o=>i({...n,due_date:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"備註"}),e.jsx("textarea",{value:n.notes,onChange:o=>i({...n,notes:o.target.value}),placeholder:"新增備註...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"取消"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"指派任務"})]})]})]})})},WP=()=>{const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState(!0),[c,d]=m.useState(null),[x,p]=m.useState(!1),[f,y]=m.useState("pending"),[b,v]=m.useState({workflow_type:"",status:[],priority:[],search:""});m.useEffect(()=>{S()},[]),m.useEffect(()=>{_()},[s,b,f]);const S=async()=>{o(!0);try{const u=Fa.getApprovalInstances(),h=Fa.approvalWorkflows;t(u.instances),a(h)}catch(u){console.error("Error loading approval data:",u)}finally{o(!1)}},_=()=>{let u=[...s];if(f==="pending"?u=u.filter(h=>h.overall_status===Ve.PENDING||h.overall_status===Ve.IN_PROGRESS):f==="history"&&(u=u.filter(h=>h.overall_status===Ve.APPROVED||h.overall_status===Ve.REJECTED||h.overall_status===Ve.CANCELLED)),b.search&&(u=u.filter(h=>{var g;return((g=h.submission_notes)==null?void 0:g.toLowerCase().includes(b.search.toLowerCase()))||h.entity_type.toLowerCase().includes(b.search.toLowerCase())})),b.workflow_type){const h=r.filter(g=>g.entity_type===b.workflow_type).map(g=>g.id);u=u.filter(g=>h.includes(g.workflow_id))}b.status.length>0&&(u=u.filter(h=>b.status.includes(h.overall_status))),b.priority.length>0&&(u=u.filter(h=>b.priority.includes(h.priority))),u.sort((h,g)=>new Date(g.submitted_at)-new Date(h.submitted_at)),i(u)},w=async(u,h="")=>{try{console.log("Approving instance:",u,h),t(g=>g.map(j=>j.id===u?{...j,overall_status:Ve.APPROVED,completed_at:new Date,approval_history:[...j.approval_history,{id:Date.now(),action:"approve",approver_name:"當前用戶",decision_date:new Date,comments:h||"核准通過"}]}:j))}catch(g){console.error("Error approving instance:",g)}},N=async(u,h="")=>{try{console.log("Rejecting instance:",u,h),t(g=>g.map(j=>j.id===u?{...j,overall_status:Ve.REJECTED,completed_at:new Date,approval_history:[...j.approval_history,{id:Date.now(),action:"reject",approver_name:"當前用戶",decision_date:new Date,comments:h||"駁回申請"}]}:j))}catch(g){console.error("Error rejecting instance:",g)}};return l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-amber-600"})}):e.jsxs("div",{children:[e.jsx(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"簽核流程管理"}),e.jsx("p",{className:"text-gray-600",children:"管理和監控審批工作流程"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:S,className:"flex items-center px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"重新載入"]})})]})}),e.jsx(GP,{instances:s}),e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-md rounded-xl border border-white/20 shadow-lg mb-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"pending",label:"待簽核",count:s.filter(u=>u.overall_status===Ve.PENDING||u.overall_status===Ve.IN_PROGRESS).length},{key:"all",label:"全部",count:s.length},{key:"history",label:"歷史記錄",count:s.filter(u=>u.overall_status===Ve.APPROVED||u.overall_status===Ve.REJECTED).length}].map(u=>e.jsxs("button",{onClick:()=>y(u.key),className:`py-4 border-b-2 font-medium text-sm ${f===u.key?"border-amber-500 text-amber-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.label," (",u.count,")"]},u.key))})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("select",{value:b.workflow_type,onChange:u=>v({...b,workflow_type:u.target.value}),className:"glass-select font-chinese",children:[e.jsx("option",{value:"",children:"所有類型"}),e.jsx("option",{value:"purchase_order",children:"採購單"}),e.jsx("option",{value:"refund_request",children:"退款申請"}),e.jsx("option",{value:"promotion",children:"促銷活動"})]}),e.jsx(dj,{label:"狀態",options:Object.values(Ve),selected:b.status,onChange:u=>v({...b,status:u})}),e.jsx(dj,{label:"優先級",options:Object.values(Yt),selected:b.priority,onChange:u=>v({...b,priority:u})})]})})]}),e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-4",children:[e.jsx(Ox,{children:n.map((u,h)=>e.jsx(HP,{instance:u,workflow:r.find(g=>g.id===u.workflow_id),index:h,onApprove:g=>w(u.id,g),onReject:g=>N(u.id,g),onViewDetails:()=>{d(u),p(!0)}},u.id))}),n.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white/70 backdrop-blur-md rounded-xl border border-white/20 shadow-lg",children:[e.jsx(Vl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"沒有找到簽核項目"}),e.jsx("p",{className:"text-gray-500",children:f==="pending"?"目前沒有待簽核的項目":"沒有符合篩選條件的項目"})]})]}),e.jsx(ZP,{instance:c,workflow:c?r.find(u=>u.id===c.workflow_id):null,isOpen:x,onClose:()=>{p(!1),d(null)},onApprove:u=>{w(c.id,u),p(!1),d(null)},onReject:u=>{N(c.id,u),p(!1),d(null)}})]})},GP=({instances:s})=>{const t={total:s.length,pending:s.filter(r=>r.overall_status===Ve.PENDING).length,approved:s.filter(r=>r.overall_status===Ve.APPROVED).length,rejected:s.filter(r=>r.overall_status===Ve.REJECTED).length,overdue:s.filter(r=>r.overall_status===Ve.PENDING&&r.due_date&&new Date(r.due_date)<new Date).length};return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"總申請"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:t.pending}),e.jsx("div",{className:"text-sm text-gray-600",children:"待簽核"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.approved}),e.jsx("div",{className:"text-sm text-gray-600",children:"已核准"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.rejected}),e.jsx("div",{className:"text-sm text-gray-600",children:"已駁回"})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-lg p-4 border border-white/20 shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.overdue}),e.jsx("div",{className:"text-sm text-gray-600",children:"逾期"})]})]})},HP=({instance:s,workflow:t,index:r,onApprove:a,onReject:n,onViewDetails:i})=>{m.useState(!1);const[l,o]=m.useState(!1),c=s.due_date&&s.overall_status===Ve.PENDING&&new Date(s.due_date)<new Date;return e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},className:`bg-white/70 backdrop-blur-md rounded-xl p-6 border shadow-lg ${c?"border-red-300 bg-red-50/30":"border-white/20"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[$5(s.overall_status),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:(t==null?void 0:t.workflow_name)||"未知工作流程"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${V5(s.priority)}`,children:s.priority}),c&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"逾期"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"實體類型"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.entity_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"申請者"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["用戶 ",s.submitted_by]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"提交時間"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(s.submitted_at).toLocaleDateString("zh-TW")})]})]}),s.submission_notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"申請說明"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:s.submission_notes})]}),e.jsx(qP,{instance:s,workflow:t}),s.approval_history.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"最近操作"}),e.jsx("div",{className:"space-y-2",children:s.approval_history.slice(-2).map((d,x)=>e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${d.action==="approve"?"bg-green-500":d.action==="reject"?"bg-red-500":"bg-blue-500"}`}),e.jsx("span",{className:"font-medium",children:d.approver_name}),e.jsx("span",{className:"mx-1",children:"·"}),e.jsx("span",{children:d.action==="approve"?"核准":d.action==="reject"?"駁回":"處理"}),e.jsx("span",{className:"mx-1",children:"·"}),e.jsx("span",{children:new Date(d.decision_date).toLocaleDateString("zh-TW")})]},x))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:i,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50",children:"查看詳情"}),s.overall_status===Ve.PENDING&&e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>o(!l),className:"px-3 py-1 text-sm bg-amber-600 text-white rounded hover:bg-amber-700",children:"簽核"})})]})]}),e.jsx(Ox,{children:l&&e.jsx(YP,{onApprove:a,onReject:n,onCancel:()=>o(!1)})})]})},qP=({instance:s,workflow:t})=>!t||!t.approval_steps?null:e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"簽核進度"}),e.jsx("div",{className:"flex items-center space-x-2",children:t.approval_steps.map((r,a)=>{const n=a+1===s.current_step,i=a+1<s.current_step;return a+1>s.current_step,e.jsxs(Md.Fragment,{children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-xs font-medium ${i?"bg-green-500 text-white":n?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:i?"✓":a+1}),e.jsx("div",{className:"flex-1 text-center",children:e.jsx("div",{className:`text-xs font-medium ${n?"text-amber-600":i?"text-green-600":"text-gray-400"}`,children:r.step_name})}),a<t.approval_steps.length-1&&e.jsx(di,{className:`h-4 w-4 ${i?"text-green-500":n?"text-amber-500":"text-gray-300"}`})]},a)})})]}),YP=({onApprove:s,onReject:t,onCancel:r})=>{const[a,n]=m.useState(""),[i,l]=m.useState(""),o=c=>{c==="approve"?s(a):c==="reject"&&t(a),n(""),l("")};return e.jsxs(K.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"簽核意見"}),e.jsx("textarea",{value:a,onChange:c=>n(c.target.value),placeholder:"請輸入簽核意見...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent mb-3"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:r,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50",children:"取消"}),e.jsxs("button",{onClick:()=>o("reject"),className:"flex items-center px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(iw,{className:"h-4 w-4 mr-1"}),"駁回"]}),e.jsxs("button",{onClick:()=>o("approve"),className:"flex items-center px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:[e.jsx(lw,{className:"h-4 w-4 mr-1"}),"核准"]})]})]})},dj=({label:s,options:t,selected:r,onChange:a})=>{const[n,i]=m.useState(!1),[l,o]=m.useState({top:0,left:0,width:0}),c=m.useRef(null),d=()=>{if(c.current){const p=c.current.getBoundingClientRect();o({top:p.bottom+2,left:p.left,width:p.width})}},x=()=>{n||d(),i(!n)};return e.jsxs("div",{ref:c,className:"relative",children:[e.jsxs("button",{onClick:x,className:"flex items-center justify-between w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("span",{children:r.length>0?`${s} (${r.length})`:s}),e.jsx(Ds,{className:"h-4 w-4"})]}),n&&Zo.createPortal(e.jsx("div",{className:"glass-dropdown fixed z-[99999]",style:{top:`${l.top}px`,left:`${l.left}px`,width:`${l.width}px`,zIndex:99999},children:e.jsx("div",{className:"max-h-60 overflow-auto",children:t.map(p=>e.jsx("label",{className:"glass-dropdown-option cursor-pointer",children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("input",{type:"checkbox",checked:r.includes(p),onChange:f=>{f.target.checked?a([...r,p]):a(r.filter(y=>y!==p))},className:"rounded mr-3"}),e.jsx("span",{className:"text-sm",children:p})]})},p))})}),document.body)]})},ZP=({instance:s,workflow:t,isOpen:r,onClose:a,onApprove:n,onReject:i})=>{const[l,o]=m.useState("");return!r||!s?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"簽核詳情"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Zs,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"基本資訊"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"工作流程"}),e.jsx("p",{className:"text-sm text-gray-900",children:t==null?void 0:t.workflow_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"實體類型"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.entity_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"實體ID"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.entity_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"申請者"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["用戶 ",s.submitted_by]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"提交時間"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(s.submitted_at).toLocaleString("zh-TW")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"狀態"}),e.jsxs("p",{className:"text-sm text-gray-900 flex items-center",children:[$5(s.overall_status),e.jsx("span",{className:"ml-2",children:s.overall_status})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"優先級"}),e.jsx("p",{className:"text-sm text-gray-900",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${V5(s.priority)}`,children:s.priority})})]})]})]}),s.submission_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"申請說明"}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.submission_notes})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"簽核歷史"}),e.jsx("div",{className:"space-y-4",children:s.approval_history.map((c,d)=>e.jsxs("div",{className:"border-l-4 border-gray-200 pl-4 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${c.action==="approve"?"bg-green-500":c.action==="reject"?"bg-red-500":"bg-blue-500"}`}),e.jsx("span",{className:"font-medium text-gray-900",children:c.approver_name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",c.approver_role,")"]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(c.decision_date).toLocaleString("zh-TW")})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["操作: ",e.jsx("span",{className:"font-medium",children:c.action==="approve"?"核准":c.action==="reject"?"駁回":c.action==="delegate"?"委派":c.action==="request_info"?"要求補充資訊":"其他"})]}),c.comments&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["意見: ",c.comments]})]},d))})]})]}),s.overall_status===Ve.PENDING&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"簽核操作"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"簽核意見"}),e.jsx("textarea",{value:l,onChange:c=>o(c.target.value),placeholder:"請輸入簽核意見...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"關閉"}),e.jsxs("button",{onClick:()=>i(l),className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(iw,{className:"h-4 w-4 mr-2"}),"駁回"]}),e.jsxs("button",{onClick:()=>n(l),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(lw,{className:"h-4 w-4 mr-2"}),"核准"]})]})]})]})]})})},$5=s=>{switch(s){case Ve.APPROVED:return e.jsx(ae,{className:"h-5 w-5 text-green-500"});case Ve.REJECTED:return e.jsx(Zs,{className:"h-5 w-5 text-red-500"});case Ve.IN_PROGRESS:return e.jsx(ps,{className:"h-5 w-5 text-blue-500"});case Ve.CANCELLED:return e.jsx(of,{className:"h-5 w-5 text-gray-500"});default:return e.jsx(be,{className:"h-5 w-5 text-amber-500"})}},V5=s=>{switch(s){case Yt.CRITICAL:return"bg-red-100 text-red-800 border-red-200";case Yt.URGENT:return"bg-orange-100 text-orange-800 border-orange-200";case Yt.HIGH:return"bg-amber-100 text-amber-800 border-amber-200";case Yt.MEDIUM:return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},QP=()=>{const[s,t]=m.useState(null),[r,a]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState(null),[c,d]=m.useState(!0),[x,p]=m.useState(30),[f,y]=m.useState(new Date);m.useEffect(()=>{if(b(),c){const h=setInterval(b,x*1e3);return()=>clearInterval(h)}},[c,x]);const b=()=>{const h=Fa.getOperationalMetrics();t(h),a(h.alert_system.critical_alerts),i(h.anomaly_monitoring.active_anomalies),y(new Date)},v=h=>{a(g=>g.map(j=>j.alert_id===h?{...j,acknowledged_by:1,acknowledged_at:new Date}:j))},S=h=>{a(g=>g.map(j=>j.alert_id===h?{...j,resolved_at:new Date}:j))};if(!s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-amber-600"})});const{real_time_metrics:_,operational_efficiency:w,anomaly_monitoring:N,alert_system:u}=s;return e.jsxs("div",{children:[e.jsx(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"即時監控儀表板"}),e.jsx("p",{className:"text-gray-600",children:"實時系統狀態、警報和異常監控"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"自動更新"}),e.jsx("button",{onClick:()=>d(!c),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${c?"bg-amber-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${c?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["最後更新: ",f.toLocaleTimeString()]}),e.jsxs("button",{onClick:b,className:"flex items-center px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"刷新"]})]})]})}),e.jsx(XP,{systemHealth:N.system_health}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(KP,{metrics:_})}),e.jsx("div",{children:e.jsx(JP,{alerts:r,onAcknowledge:v,onResolve:S,onViewDetails:o})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsx(eM,{anomalies:n}),e.jsx(tM,{efficiency:w})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(sM,{issues:u.trending_issues}),e.jsx(rM,{metrics:_,anomalies:n,alerts:r})]}),e.jsx(aM,{alert:l,isOpen:!!l,onClose:()=>o(null),onAcknowledge:v,onResolve:S})]})},XP=({systemHealth:s})=>{const r=(()=>{const{database_response_time:a,api_response_time:n,error_rate_percentage:i,queue_processing_status:l}=s;return a>200||n>500||parseFloat(i)>2?{status:"critical",color:"red",text:"嚴重"}:a>100||n>300||parseFloat(i)>1?{status:"warning",color:"amber",text:"警告"}:{status:"healthy",color:"green",text:"正常"}})();return e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"系統健康狀態"}),e.jsxs("div",{className:`flex items-center px-3 py-1 rounded-full text-sm font-medium ${r.color==="green"?"bg-green-100 text-green-800":r.color==="amber"?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:[r.color==="green"?e.jsx(ae,{className:"h-4 w-4 mr-1"}):r.color==="amber"?e.jsx(te,{className:"h-4 w-4 mr-1"}):e.jsx(Zs,{className:"h-4 w-4 mr-1"}),r.text]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg mb-2 mx-auto",children:e.jsx(kx,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.database_response_time,"ms"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"資料庫回應"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg mb-2 mx-auto",children:e.jsx(VE,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.api_response_time,"ms"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"API 回應"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-amber-100 rounded-lg mb-2 mx-auto",children:e.jsx(te,{className:"h-6 w-6 text-amber-600"})}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.error_rate_percentage,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"錯誤率"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-lg mb-2 mx-auto",children:e.jsx(kr,{className:"h-6 w-6 text-purple-600"})}),e.jsx("div",{className:`text-lg font-bold ${s.queue_processing_status==="healthy"?"text-green-600":s.queue_processing_status==="warning"?"text-amber-600":"text-red-600"}`,children:s.queue_processing_status==="healthy"?"正常":s.queue_processing_status==="warning"?"警告":"嚴重"}),e.jsx("div",{className:"text-sm text-gray-600",children:"佇列狀態"})]})]})]})},KP=({metrics:s})=>{const t=[{title:"今日訂單",value:s.orders_today.total_orders,change:"+12.5%",trend:"up",icon:wn,color:"blue",subtitle:`總額: NT$ ${s.orders_today.revenue_today.toLocaleString()}`},{title:"當前訪客",value:s.website_performance.current_visitors,change:"+8.2%",trend:"up",icon:dt,color:"green",subtitle:`轉換率: ${s.website_performance.conversion_rate_today}%`},{title:"庫存警報",value:s.inventory_alerts.low_stock_items,change:"-5.1%",trend:"down",icon:te,color:"amber",subtitle:`缺貨: ${s.inventory_alerts.out_of_stock_items} 項`},{title:"客服工單",value:s.customer_service.open_tickets,change:"+3.7%",trend:"up",icon:be,color:"red",subtitle:`逾期: ${s.customer_service.overdue_tickets} 件`},{title:"系統正常時間",value:`${s.website_performance.uptime_percentage}%`,change:"+0.1%",trend:"up",icon:qs,color:"green",subtitle:`載入時間: ${s.website_performance.page_load_time_avg}s`},{title:"今日營收",value:`NT$ ${Math.round(s.financial_summary.revenue_today/1e3)}K`,change:"+15.3%",trend:"up",icon:We,color:"blue",subtitle:`利潤: NT$ ${Math.round(s.financial_summary.profit_today/1e3)}K`}];return e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"即時營運指標"}),e.jsx(oe,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.map((r,a)=>e.jsxs(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:a*.1},className:"bg-white/50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${r.color==="blue"?"bg-blue-100":r.color==="green"?"bg-green-100":r.color==="amber"?"bg-amber-100":"bg-red-100"}`,children:e.jsx(r.icon,{className:`h-4 w-4 ${r.color==="blue"?"text-blue-600":r.color==="green"?"text-green-600":r.color==="amber"?"text-amber-600":"text-red-600"}`})}),e.jsxs("div",{className:"flex items-center text-sm",children:[r.trend==="up"?e.jsx(Re,{className:"h-3 w-3 text-green-500 mr-1"}):e.jsx(wa,{className:"h-3 w-3 text-red-500 mr-1"}),e.jsx("span",{className:r.trend==="up"?"text-green-600":"text-red-600",children:r.change})]})]}),e.jsx("h4",{className:"text-xs font-medium text-gray-600 mb-1",children:r.title}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mb-1",children:r.value}),e.jsx("p",{className:"text-xs text-gray-500",children:r.subtitle})]},r.title))})]})},JP=({alerts:s,onAcknowledge:t,onResolve:r,onViewDetails:a})=>{const n=s.filter(l=>!l.acknowledged_by),i=s.filter(l=>!l.resolved_at);return e.jsxs(K.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"關鍵警報"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(jn,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-red-600",children:[n.length," 未確認"]})]})]}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[e.jsx(Ox,{children:i.map((l,o)=>e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:o*.05},className:`p-4 rounded-lg border ${l.priority==="critical"?"bg-red-50 border-red-200":l.priority==="high"?"bg-orange-50 border-orange-200":"bg-amber-50 border-amber-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Hu,{className:`h-4 w-4 ${l.priority==="critical"?"text-red-500":l.priority==="high"?"text-orange-500":"text-amber-500"}`}),e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:l.alert_type}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l.priority==="critical"?"bg-red-100 text-red-800":l.priority==="high"?"bg-orange-100 text-orange-800":"bg-amber-100 text-amber-800"}`,children:l.priority})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:l.message}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(l.created_at).toLocaleString("zh-TW")})]}),e.jsxs("div",{className:"flex flex-col space-y-1 ml-3",children:[e.jsx("button",{onClick:()=>a(l),className:"text-xs text-blue-600 hover:text-blue-800",children:"詳情"}),!l.acknowledged_by&&e.jsx("button",{onClick:()=>t(l.alert_id),className:"text-xs text-amber-600 hover:text-amber-800",children:"確認"}),e.jsx("button",{onClick:()=>r(l.alert_id),className:"text-xs text-green-600 hover:text-green-800",children:"解決"})]})]})},l.alert_id))}),i.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ae,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"目前沒有關鍵警報"})]})]})]})},eM=({anomalies:s})=>e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"異常監控"}),e.jsx(Ee,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"space-y-4",children:[s.map((t,r)=>e.jsx(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.1},className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:`h-4 w-4 ${t.severity==="critical"?"text-red-500":t.severity==="high"?"text-orange-500":t.severity==="medium"?"text-amber-500":"text-blue-500"}`}),e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:t.metric_name})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:t.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:["偵測時間: ",new Date(t.detected_at).toLocaleString("zh-TW")]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["建議: ",t.recommended_action]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.severity==="critical"?"bg-red-100 text-red-800":t.severity==="high"?"bg-orange-100 text-orange-800":t.severity==="medium"?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"}`,children:t.severity})]})},t.anomaly_id)),s.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ae,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"系統運行正常，未發現異常"})]})]})]}),tM=({efficiency:s})=>{const t=[{category:"處理效率",metrics:[{label:"每小時處理訂單",value:s.processing_efficiency.orders_processed_per_hour,unit:"單"},{label:"平均處理時間",value:s.processing_efficiency.avg_order_processing_time_minutes,unit:"分鐘"},{label:"自動化比率",value:s.processing_efficiency.automatic_processing_rate,unit:"%"}]},{category:"庫存效率",metrics:[{label:"庫存週轉率",value:s.inventory_efficiency.inventory_turnover_rate,unit:""},{label:"缺貨率",value:s.inventory_efficiency.stockout_rate_percentage,unit:"%"},{label:"庫存準確率",value:s.inventory_efficiency.inventory_accuracy_rate,unit:"%"}]},{category:"客服效率",metrics:[{label:"首次解決率",value:s.service_efficiency.first_contact_resolution_rate,unit:"%"},{label:"平均解決時間",value:s.service_efficiency.avg_ticket_resolution_time_hours,unit:"小時"},{label:"客戶滿意度",value:s.service_efficiency.customer_effort_score,unit:"分"}]}];return e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"營運效率"}),e.jsx(rw,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"space-y-6",children:t.map((r,a)=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:r.category}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:r.metrics.map((n,i)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:n.label}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[n.value,n.unit]})]},i))})]},r.category))})]})},sM=({issues:s})=>e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"趨勢問題"}),e.jsx(oe,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"space-y-4",children:[s.map((t,r)=>e.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.1},className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:t.issue_pattern}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.risk_assessment==="high"?"bg-red-100 text-red-800":t.risk_assessment==="medium"?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"}`,children:t.risk_assessment}),e.jsx("span",{className:`text-xs ${t.trend_direction==="increasing"?"text-red-600":t.trend_direction==="decreasing"?"text-green-600":"text-gray-600"}`,children:t.trend_direction==="increasing"?"↗":t.trend_direction==="decreasing"?"↘":"→"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["發生次數: ",t.occurrence_count," 次"]}),e.jsxs("div",{className:"text-xs text-blue-600",children:["預防建議: ",t.prevention_recommendations.join(", ")]})]},r)),s.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ae,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"目前沒有發現趨勢問題"})]})]})]}),rM=({metrics:s,anomalies:t,alerts:r})=>{const n=(()=>{const i=[];return s.customer_service.open_tickets>20&&i.push({type:"performance",title:"客服工單積壓",description:"當前開放工單數量較高，建議增加客服人力或優化處理流程",priority:"high",action:"查看客服管理"}),s.inventory_alerts.low_stock_items>10&&i.push({type:"inventory",title:"庫存預警",description:"多項商品庫存不足，建議及時補貨以避免缺貨",priority:"medium",action:"檢視庫存狀態"}),parseFloat(s.website_performance.conversion_rate_today)<2&&i.push({type:"marketing",title:"轉換率偏低",description:"今日轉換率低於平均水平，建議檢查網站體驗或行銷策略",priority:"medium",action:"優化使用者體驗"}),t.length>3&&i.push({type:"system",title:"系統異常偵測",description:"系統偵測到多項異常，建議進行全面系統檢查",priority:"high",action:"進行系統診斷"}),r.length>2&&i.push({type:"alert",title:"警報處理",description:"有多個未解決的警報，建議優先處理高優先級警報",priority:"urgent",action:"處理關鍵警報"}),i})();return e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"智能建議"}),e.jsx(mi,{className:"h-5 w-5 text-amber-500"})]}),e.jsxs("div",{className:"space-y-4",children:[n.map((i,l)=>e.jsx(K.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:l*.1},className:"p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(mi,{className:"h-4 w-4 text-amber-500"}),e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:i.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i.priority==="urgent"?"bg-red-100 text-red-800":i.priority==="high"?"bg-orange-100 text-orange-800":"bg-amber-100 text-amber-800"}`,children:i.priority})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:i.description}),e.jsxs("button",{className:"text-xs text-amber-600 hover:text-amber-800 font-medium",children:[i.action," →"]})]})})},l)),n.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ae,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"系統運行良好，暫無特別建議"})]})]})]})},aM=({alert:s,isOpen:t,onClose:r,onAcknowledge:a,onResolve:n})=>!t||!s?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"警報詳情"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Zs,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Hu,{className:`h-6 w-6 ${s.priority==="critical"?"text-red-500":s.priority==="high"?"text-orange-500":"text-amber-500"}`}),e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:s.alert_type}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${s.priority==="critical"?"bg-red-100 text-red-800":s.priority==="high"?"bg-orange-100 text-orange-800":"bg-amber-100 text-amber-800"}`,children:s.priority})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"警報訊息"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"影響區域"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.affected_area})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"發生時間"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(s.created_at).toLocaleString("zh-TW")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"預估影響"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.estimated_impact})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"建議行動"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.suggested_actions.map((i,l)=>e.jsx("li",{className:"text-sm text-gray-700",children:i},l))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"關閉"}),!s.acknowledged_by&&e.jsx("button",{onClick:()=>{a(s.alert_id),r()},className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"確認警報"}),!s.resolved_at&&e.jsx("button",{onClick:()=>{n(s.alert_id),r()},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"標記解決"})]})]})]})}),Ke={ASSET:"asset",LIABILITY:"liability",EQUITY:"equity",REVENUE:"revenue",EXPENSE:"expense",COST_OF_GOODS:"cost_of_goods"},Je={CURRENT_ASSETS:"current_assets",NON_CURRENT_ASSETS:"non_current_assets",CURRENT_LIABILITIES:"current_liabilities",NON_CURRENT_LIABILITIES:"non_current_liabilities",OWNERS_EQUITY:"owners_equity",RETAINED_EARNINGS:"retained_earnings",OPERATING_REVENUE:"operating_revenue",NON_OPERATING_REVENUE:"non_operating_revenue",OPERATING_EXPENSES:"operating_expenses",NON_OPERATING_EXPENSES:"non_operating_expenses",DIRECT_COSTS:"direct_costs",INDIRECT_COSTS:"indirect_costs"},Yh={MANUAL:"manual",ORDER:"order",PAYMENT:"payment",REFUND:"refund",PURCHASE:"purchase",INVENTORY:"inventory",EXPENSE:"expense",PAYROLL:"payroll",DEPRECIATION:"depreciation",ADJUSTMENT:"adjustment",CLOSING:"closing"},ya={DRAFT:"draft",PENDING:"pending",APPROVED:"approved",POSTED:"posted",REVERSED:"reversed"},Da={BALANCE_SHEET:"balance_sheet",INCOME_STATEMENT:"income_statement",CASH_FLOW:"cash_flow",TRIAL_BALANCE:"trial_balance",GENERAL_LEDGER:"general_ledger",ACCOUNTS_RECEIVABLE:"accounts_receivable",ACCOUNTS_PAYABLE:"accounts_payable",INVENTORY_REPORT:"inventory_report",SALES_REPORT:"sales_report",EXPENSE_REPORT:"expense_report"};class nM{constructor(){this.accounts=[],this.journalEntries=[],this.journalEntryLines=[],this.reports=[],this.bankReconciliations=[],this.init()}init(){this.loadFromStorage(),this.accounts.length===0&&this.generateSampleAccounts(),this.journalEntries.length===0&&this.generateSampleJournalEntries(),this.reports.length===0&&this.generateSampleReports()}loadFromStorage(){try{const t=localStorage.getItem("marelle-accounting-accounts"),r=localStorage.getItem("marelle-accounting-entries"),a=localStorage.getItem("marelle-accounting-reports");t&&(this.accounts=JSON.parse(t)),r&&(this.journalEntries=JSON.parse(r)),a&&(this.reports=JSON.parse(a))}catch(t){console.error("載入會計數據失敗:",t)}}saveToStorage(){try{localStorage.setItem("marelle-accounting-accounts",JSON.stringify(this.accounts)),localStorage.setItem("marelle-accounting-entries",JSON.stringify(this.journalEntries)),localStorage.setItem("marelle-accounting-reports",JSON.stringify(this.reports))}catch(t){console.error("保存會計數據失敗:",t)}}generateSampleAccounts(){const t=[{id:"acc_001",accountCode:"1001",accountName:"現金",accountNameEn:"Cash",parentId:null,type:Ke.ASSET,category:Je.CURRENT_ASSETS,level:1,isActive:!0,isSystem:!0,description:"庫存現金",balanceType:"debit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:125e3,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_002",accountCode:"1101",accountName:"銀行存款-第一銀行",accountNameEn:"Bank Deposit - First Bank",parentId:null,type:Ke.ASSET,category:Je.CURRENT_ASSETS,level:1,isActive:!0,isSystem:!0,description:"第一銀行活期存款",balanceType:"debit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:85e4,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_003",accountCode:"1131",accountName:"應收帳款",accountNameEn:"Accounts Receivable",parentId:null,type:Ke.ASSET,category:Je.CURRENT_ASSETS,level:1,isActive:!0,isSystem:!0,description:"客戶應收款項",balanceType:"debit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:245e3,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_004",accountCode:"1141",accountName:"存貨-商品",accountNameEn:"Inventory - Products",parentId:null,type:Ke.ASSET,category:Je.CURRENT_ASSETS,level:1,isActive:!0,isSystem:!0,description:"商品庫存",balanceType:"debit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:32e4,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_005",accountCode:"2101",accountName:"應付帳款",accountNameEn:"Accounts Payable",parentId:null,type:Ke.LIABILITY,category:Je.CURRENT_LIABILITIES,level:1,isActive:!0,isSystem:!0,description:"供應商應付款項",balanceType:"credit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:18e4,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_006",accountCode:"2141",accountName:"應付稅金",accountNameEn:"Tax Payable",parentId:null,type:Ke.LIABILITY,category:Je.CURRENT_LIABILITIES,level:1,isActive:!0,isSystem:!0,description:"應付營業稅等稅金",balanceType:"credit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!0,balance:42e3,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_007",accountCode:"3101",accountName:"資本",accountNameEn:"Capital",parentId:null,type:Ke.EQUITY,category:Je.OWNERS_EQUITY,level:1,isActive:!0,isSystem:!0,description:"股東資本",balanceType:"credit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:1e6,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_008",accountCode:"3201",accountName:"保留盈餘",accountNameEn:"Retained Earnings",parentId:null,type:Ke.EQUITY,category:Je.RETAINED_EARNINGS,level:1,isActive:!0,isSystem:!0,description:"累積保留盈餘",balanceType:"credit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:158e3,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_009",accountCode:"4101",accountName:"商品銷售收入",accountNameEn:"Product Sales Revenue",parentId:null,type:Ke.REVENUE,category:Je.OPERATING_REVENUE,level:1,isActive:!0,isSystem:!0,description:"商品銷售收入",balanceType:"credit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:68e4,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_010",accountCode:"4103",accountName:"運費收入",accountNameEn:"Shipping Revenue",parentId:null,type:Ke.REVENUE,category:Je.OPERATING_REVENUE,level:1,isActive:!0,isSystem:!0,description:"客戶支付的運費收入",balanceType:"credit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:28e3,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_011",accountCode:"5101",accountName:"銷貨成本",accountNameEn:"Cost of Goods Sold",parentId:null,type:Ke.COST_OF_GOODS,category:Je.DIRECT_COSTS,level:1,isActive:!0,isSystem:!0,description:"商品銷售成本",balanceType:"debit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:34e4,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_012",accountCode:"6101",accountName:"薪資費用",accountNameEn:"Payroll Expense",parentId:null,type:Ke.EXPENSE,category:Je.OPERATING_EXPENSES,level:1,isActive:!0,isSystem:!0,description:"員工薪資費用",balanceType:"debit",allowPosting:!0,requireDepartment:!0,requireProject:!1,isTaxAccount:!1,balance:12e4,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_013",accountCode:"6106",accountName:"廣告費",accountNameEn:"Advertising Expense",parentId:null,type:Ke.EXPENSE,category:Je.OPERATING_EXPENSES,level:1,isActive:!0,isSystem:!0,description:"廣告宣傳費用",balanceType:"debit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:45e3,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()},{id:"acc_014",accountCode:"6111",accountName:"刷卡手續費",accountNameEn:"Credit Card Processing Fee",parentId:null,type:Ke.EXPENSE,category:Je.OPERATING_EXPENSES,level:1,isActive:!0,isSystem:!0,description:"信用卡刷卡手續費",balanceType:"debit",allowPosting:!0,requireDepartment:!1,requireProject:!1,isTaxAccount:!1,balance:18e3,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-16T14:30:00").toISOString()}];this.accounts=t,this.saveToStorage()}generateSampleJournalEntries(){const t=[{id:"entry_001",entryNumber:"JE2024090001",entryDate:new Date("2024-09-01T10:00:00").toISOString(),period:"2024-09",sourceType:Yh.ORDER,sourceId:"order_001",referenceNumber:"M2024090001",description:"銷售收入-訂單#M2024090001",totalDebit:2980,totalCredit:2980,status:ya.POSTED,postedAt:new Date("2024-09-01T10:30:00").toISOString(),postedBy:1,isAdjustment:!1,createdBy:1,createdAt:new Date("2024-09-01T10:00:00").toISOString(),updatedAt:new Date("2024-09-01T10:30:00").toISOString(),lines:[{id:"line_001",lineNumber:1,accountId:"acc_003",accountCode:"1131",accountName:"應收帳款",debitAmount:2980,creditAmount:0,description:"銷售商品-客戶應收款"},{id:"line_002",lineNumber:2,accountId:"acc_009",accountCode:"4101",accountName:"商品銷售收入",debitAmount:0,creditAmount:2680,description:"銷售收入"},{id:"line_003",lineNumber:3,accountId:"acc_010",accountCode:"4103",accountName:"運費收入",debitAmount:0,creditAmount:300,description:"運費收入"}]},{id:"entry_002",entryNumber:"JE2024090002",entryDate:new Date("2024-09-01T11:00:00").toISOString(),period:"2024-09",sourceType:Yh.ORDER,sourceId:"order_001",referenceNumber:"M2024090001",description:"銷貨成本-訂單#M2024090001",totalDebit:1340,totalCredit:1340,status:ya.POSTED,postedAt:new Date("2024-09-01T11:30:00").toISOString(),postedBy:1,isAdjustment:!1,createdBy:1,createdAt:new Date("2024-09-01T11:00:00").toISOString(),updatedAt:new Date("2024-09-01T11:30:00").toISOString(),lines:[{id:"line_004",lineNumber:1,accountId:"acc_011",accountCode:"5101",accountName:"銷貨成本",debitAmount:1340,creditAmount:0,description:"商品銷售成本"},{id:"line_005",lineNumber:2,accountId:"acc_004",accountCode:"1141",accountName:"存貨-商品",debitAmount:0,creditAmount:1340,description:"存貨減少"}]},{id:"entry_003",entryNumber:"JE2024090003",entryDate:new Date("2024-09-02T09:00:00").toISOString(),period:"2024-09",sourceType:Yh.PAYMENT,sourceId:"payment_001",referenceNumber:"PAY2024090001",description:"收到客戶付款-信用卡",totalDebit:2980,totalCredit:2980,status:ya.POSTED,postedAt:new Date("2024-09-02T09:30:00").toISOString(),postedBy:1,isAdjustment:!1,createdBy:1,createdAt:new Date("2024-09-02T09:00:00").toISOString(),updatedAt:new Date("2024-09-02T09:30:00").toISOString(),lines:[{id:"line_006",lineNumber:1,accountId:"acc_002",accountCode:"1101",accountName:"銀行存款-第一銀行",debitAmount:2896,creditAmount:0,description:"收到客戶刷卡付款"},{id:"line_007",lineNumber:2,accountId:"acc_014",accountCode:"6111",accountName:"刷卡手續費",debitAmount:84,creditAmount:0,description:"信用卡手續費 2.8%"},{id:"line_008",lineNumber:3,accountId:"acc_003",accountCode:"1131",accountName:"應收帳款",debitAmount:0,creditAmount:2980,description:"應收帳款減少"}]}];this.journalEntries=t,this.saveToStorage()}generateSampleReports(){const t=[{id:"report_001",reportType:Da.INCOME_STATEMENT,reportName:"損益表",periodType:"monthly",periodStart:new Date("2024-09-01").toISOString(),periodEnd:new Date("2024-09-30").toISOString(),status:"completed",generatedAt:new Date("2024-09-16T15:00:00").toISOString(),generatedBy:1,fileFormat:"html",createdAt:new Date("2024-09-16T15:00:00").toISOString()},{id:"report_002",reportType:Da.BALANCE_SHEET,reportName:"資產負債表",periodType:"monthly",periodStart:new Date("2024-09-01").toISOString(),periodEnd:new Date("2024-09-30").toISOString(),status:"completed",generatedAt:new Date("2024-09-16T15:05:00").toISOString(),generatedBy:1,fileFormat:"pdf",createdAt:new Date("2024-09-16T15:05:00").toISOString()}];this.reports=t,this.saveToStorage()}getAllAccounts(){return this.accounts}getAccountById(t){return this.accounts.find(r=>r.id===t)}getAccountsByType(t){return this.accounts.filter(r=>r.type===t)}createAccount(t){const r={id:`acc_${Date.now()}`,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.accounts.push(r),this.saveToStorage(),r}updateAccount(t,r){const a=this.accounts.findIndex(n=>n.id===t);return a!==-1?(this.accounts[a]={...this.accounts[a],...r,updatedAt:new Date().toISOString()},this.saveToStorage(),this.accounts[a]):null}deleteAccount(t){const r=this.accounts.findIndex(a=>a.id===t);return r!==-1?(this.accounts.splice(r,1),this.saveToStorage(),!0):!1}getAllJournalEntries(){return this.journalEntries}getJournalEntryById(t){return this.journalEntries.find(r=>r.id===t)}createJournalEntry(t){const r={id:`entry_${Date.now()}`,entryNumber:this.generateEntryNumber(),status:ya.DRAFT,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.journalEntries.push(r),this.saveToStorage(),r}updateJournalEntry(t,r){const a=this.journalEntries.findIndex(n=>n.id===t);return a!==-1?(this.journalEntries[a]={...this.journalEntries[a],...r,updatedAt:new Date().toISOString()},this.saveToStorage(),this.journalEntries[a]):null}generateEntryNumber(){const t=new Date,r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),n=this.journalEntries.length+1;return`JE${r}${a}${String(n).padStart(4,"0")}`}getAllReports(){return this.reports}generateTrialBalance(t,r){const a=this.accounts.map(l=>({accountCode:l.accountCode,accountName:l.accountName,debitBalance:l.balanceType==="debit"?l.balance:0,creditBalance:l.balanceType==="credit"?l.balance:0})),n=a.reduce((l,o)=>l+o.debitBalance,0),i=a.reduce((l,o)=>l+o.creditBalance,0);return{accounts:a,totalDebit:n,totalCredit:i,isBalanced:n===i}}generateIncomeStatement(t,r){const a=this.getAccountsByType(Ke.REVENUE),n=this.getAccountsByType(Ke.EXPENSE),i=this.getAccountsByType(Ke.COST_OF_GOODS),l=a.reduce((p,f)=>p+f.balance,0),o=i.reduce((p,f)=>p+f.balance,0),c=n.reduce((p,f)=>p+f.balance,0),d=l-o,x=d-c;return{revenue:{accounts:a,total:l},costOfGoods:{accounts:i,total:o},expenses:{accounts:n,total:c},grossProfit:d,netIncome:x}}generateBalanceSheet(t){const r=this.getAccountsByType(Ke.ASSET),a=this.getAccountsByType(Ke.LIABILITY),n=this.getAccountsByType(Ke.EQUITY),i=r.reduce((c,d)=>c+d.balance,0),l=a.reduce((c,d)=>c+d.balance,0),o=n.reduce((c,d)=>c+d.balance,0);return{assets:{accounts:r,total:i},liabilities:{accounts:a,total:l},equity:{accounts:n,total:o},isBalanced:i===l+o}}getDashboardData(){const t=this.generateIncomeStatement(),r=this.generateBalanceSheet(),a=r.assets.total,n=r.liabilities.total,i=r.equity.total,l=t.netIncome,o=n>0?a/n:0,c=i>0?n/i:0,d=t.revenue.total>0?l/t.revenue.total:0;return{totalAssets:a,totalLiabilities:n,totalEquity:i,netIncome:l,totalRevenue:t.revenue.total,totalExpenses:t.expenses.total,grossProfit:t.grossProfit,currentRatio:o,debtToEquity:c,profitMargin:d,recentEntries:this.journalEntries.slice(-5).reverse(),pendingEntries:this.journalEntries.filter(x=>x.status===ya.PENDING).length,monthlyTrends:this.generateMonthlyTrends()}}generateMonthlyTrends(){return[{month:"06",revenue:52e4,expenses:38e4,profit:14e4},{month:"07",revenue:58e4,expenses:42e4,profit:16e4},{month:"08",revenue:65e4,expenses:47e4,profit:18e4},{month:"09",revenue:708e3,expenses:523e3,profit:185e3}]}getAccountTypeDisplayName(t){return{[Ke.ASSET]:"資產",[Ke.LIABILITY]:"負債",[Ke.EQUITY]:"權益",[Ke.REVENUE]:"收入",[Ke.EXPENSE]:"費用",[Ke.COST_OF_GOODS]:"銷貨成本"}[t]||t}getAccountCategoryDisplayName(t){return{[Je.CURRENT_ASSETS]:"流動資產",[Je.NON_CURRENT_ASSETS]:"非流動資產",[Je.CURRENT_LIABILITIES]:"流動負債",[Je.NON_CURRENT_LIABILITIES]:"非流動負債",[Je.OWNERS_EQUITY]:"業主權益",[Je.RETAINED_EARNINGS]:"保留盈餘",[Je.OPERATING_REVENUE]:"營業收入",[Je.NON_OPERATING_REVENUE]:"營業外收入",[Je.OPERATING_EXPENSES]:"營業費用",[Je.NON_OPERATING_EXPENSES]:"營業外費用",[Je.DIRECT_COSTS]:"直接成本",[Je.INDIRECT_COSTS]:"間接成本"}[t]||t}}const Wo=new nM,iM=()=>{const[s,t]=m.useState(null),[r,a]=m.useState(!0),[n,i]=m.useState("current");m.useEffect(()=>{l()},[n]);const l=async()=>{a(!0);try{const d=Wo.getDashboardData();t(d)}catch(d){console.error("載入會計概況失敗:",d)}finally{a(!1)}};if(r)return e.jsx("div",{children:e.jsx("div",{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ps,{className:"h-6 w-6 animate-spin text-[#cc824d]"}),e.jsx("span",{className:"text-gray-600",children:"載入會計概況中..."})]})})})});const o=d=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(d),c=d=>`${(d*100).toFixed(1)}%`;return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"會計管理概況"}),e.jsx("p",{className:"text-gray-600",children:"財務數據一覽與關鍵指標分析"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:n,onChange:d=>i(d.target.value),className:"px-4 py-2 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#cc824d]",children:[e.jsx("option",{value:"current",children:"本月"}),e.jsx("option",{value:"quarter",children:"本季"}),e.jsx("option",{value:"year",children:"本年"})]}),e.jsxs("button",{onClick:l,className:"px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors flex items-center space-x-2",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{children:"重新整理"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(We,{className:"h-6 w-6 text-blue-600"})}),e.jsx(Re,{className:"h-5 w-5 text-green-500"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"總資產"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:o(s.totalAssets)}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+5.2% 較上月"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Re,{className:"h-6 w-6 text-green-600"})}),e.jsx(Re,{className:"h-5 w-5 text-green-500"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"淨收入"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:o(s.netIncome)}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+12.8% 較上月"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(oe,{className:"h-6 w-6 text-purple-600"})}),e.jsx(Re,{className:"h-5 w-5 text-green-500"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"總收入"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:o(s.totalRevenue)}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+8.4% 較上月"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(te,{className:"h-6 w-6 text-orange-600"})}),e.jsx("span",{className:"text-sm px-2 py-1 bg-orange-100 text-orange-600 rounded-full",children:s.pendingEntries})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"待審分錄"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.pendingEntries}),e.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"需要處理"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(Nn,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"財務比率分析"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"流動比率"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:s.currentRatio.toFixed(2)}),e.jsx(Re,{className:"h-4 w-4 text-green-500 ml-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"負債權益比"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:s.debtToEquity.toFixed(2)}),e.jsx(wa,{className:"h-4 w-4 text-red-500 ml-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"淨利率"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:c(s.profitMargin)}),e.jsx(Re,{className:"h-4 w-4 text-green-500 ml-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"毛利率"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:c(s.grossProfit/s.totalRevenue)}),e.jsx(Re,{className:"h-4 w-4 text-green-500 ml-2"})]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(_l,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"月度財務趨勢"]}),e.jsx("div",{className:"space-y-4",children:s.monthlyTrends.map((d,x)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["2024-",d.month]}),e.jsx("span",{className:"font-semibold text-gray-800",children:o(d.profit)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full transition-all duration-300",style:{width:`${d.profit/Math.max(...s.monthlyTrends.map(p=>p.profit))*100}%`}})})]},d.month))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(Bt,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"最近會計分錄"]}),e.jsx("button",{className:"text-[#cc824d] hover:text-[#b3723f] transition-colors",children:"查看全部"})]}),e.jsx("div",{className:"space-y-3",children:s.recentEntries.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:d.entryNumber}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d.status==="posted"?"bg-green-100 text-green-600":d.status==="pending"?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-600"}`,children:d.status==="posted"?"已過帳":d.status==="pending"?"待審核":"草稿"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.description}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[e.jsx(Ir,{className:"h-3 w-3 mr-1"}),new Date(d.entryDate).toLocaleDateString("zh-TW")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:o(d.totalDebit)}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-[#cc824d] transition-colors",children:e.jsx(Ee,{className:"h-3 w-3"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-[#cc824d] transition-colors",children:e.jsx(_e,{className:"h-3 w-3"})})]})]})]},d.id))})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(kr,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"快速操作"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx("span",{children:"新增分錄"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"產生報表"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Nn,{className:"h-4 w-4"}),e.jsx("span",{children:"會計科目"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"財務分析"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(vi,{className:"h-4 w-4"}),e.jsx("span",{children:"匯出資料"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"本月統計"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"收入筆數"}),e.jsx("span",{className:"font-semibold",children:"156"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"支出筆數"}),e.jsx("span",{className:"font-semibold",children:"89"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"待審分錄"}),e.jsx("span",{className:"font-semibold text-orange-600",children:s.pendingEntries})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"科目數量"}),e.jsx("span",{className:"font-semibold",children:"14"})]})]})]})]})]})]})})},lM=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(!0);m.useEffect(()=>{n()},[]);const n=async()=>{a(!0);try{const i=Wo.getAllAccounts();t(i)}catch(i){console.error("載入會計科目失敗:",i)}finally{a(!1)}};return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#fdf8f2]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Nn,{className:"h-12 w-12 animate-pulse text-[#cc824d] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"載入會計科目中..."})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"會計科目管理"}),e.jsx("p",{className:"text-gray-600",children:"管理和維護公司的會計科目表"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"h-4 w-4"}),"新增科目"]})})})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg border border-white/20 shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"科目代碼"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"科目名稱"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"科目類型"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"餘額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(i=>{var l;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.type}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["NT$ ",((l=i.balance)==null?void 0:l.toLocaleString())||"0"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${i.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.isActive?"啟用":"停用"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-green-600 hover:text-green-900",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:e.jsx($e,{className:"h-4 w-4"})})]})})]},i.id)})})]})})}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"尚無會計科目"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"開始建立您的會計科目表"}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"新增第一個科目"]})]})]})},oM=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(!0);m.useEffect(()=>{n()},[]);const n=async()=>{a(!0);try{const o=Wo.getAllJournalEntries();t(o)}catch(o){console.error("載入會計分錄失敗:",o)}finally{a(!1)}},i=o=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(o),l=o=>{const c={[ya.DRAFT]:{color:"bg-gray-100 text-gray-800",text:"草稿"},[ya.PENDING]:{color:"bg-yellow-100 text-yellow-800",text:"待審"},[ya.APPROVED]:{color:"bg-green-100 text-green-800",text:"已審核"},[ya.REJECTED]:{color:"bg-red-100 text-red-800",text:"已拒絕"},[ya.POSTED]:{color:"bg-blue-100 text-blue-800",text:"已過帳"}},d=c[o]||c[ya.DRAFT];return e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d.color}`,children:d.text})};return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#fdf8f2]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Nn,{className:"h-12 w-12 animate-pulse text-[#cc824d] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"載入會計分錄中..."})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"會計分錄管理"}),e.jsx("p",{className:"text-gray-600",children:"管理和審核所有會計分錄"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"h-4 w-4"}),"新增分錄"]})})})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg border border-white/20 shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"分錄編號"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"日期"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"描述"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"金額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.entryNumber}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(o.date).toLocaleDateString("zh-TW")}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"max-w-xs truncate",children:o.description})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i(o.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l(o.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",title:"查看詳情",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-green-600 hover:text-green-900",title:"編輯",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"刪除",children:e.jsx($e,{className:"h-4 w-4"})})]})})]},o.id))})]})})}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"尚無會計分錄"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"開始建立您的第一個會計分錄"}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"新增分錄"]})]})]})},cM=()=>{var p,f;const[s,t]=m.useState([]),[r,a]=m.useState(!0),[n,i]=m.useState(Da.TRIAL_BALANCE),[l,o]=m.useState(null);m.useEffect(()=>{c()},[]);const c=async()=>{a(!0);try{const y=[{type:Da.TRIAL_BALANCE,name:"試算表",description:"驗證會計帳簿平衡"},{type:Da.INCOME_STATEMENT,name:"損益表",description:"公司收支狀況"},{type:Da.BALANCE_SHEET,name:"資產負債表",description:"財務狀況概覽"},{type:Da.CASH_FLOW,name:"現金流量表",description:"現金收支分析"}];t(y);const b=Wo.generateFinancialReport(n);o(b)}catch(y){console.error("載入財務報表失敗:",y)}finally{a(!1)}},d=async y=>{a(!0);try{const b=Wo.generateFinancialReport(y);o(b),i(y)}catch(b){console.error("生成報表失敗:",b)}finally{a(!1)}},x=y=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(y);return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#fdf8f2]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Nn,{className:"h-12 w-12 animate-pulse text-[#cc824d] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"生成財務報表中..."})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"財務報表"}),e.jsx("p",{className:"text-gray-600",children:"生成和查看各種財務報告"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(y=>e.jsx("button",{onClick:()=>d(y.type),className:`px-4 py-2 rounded-lg transition-colors ${n===y.type?"bg-[#cc824d] text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:y.name},y.type))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(vi,{className:"h-4 w-4"}),"匯出PDF"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Bt,{className:"h-4 w-4"}),"匯出Excel"]})]})]})}),l&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg border border-white/20 shadow-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2 flex items-center",children:[e.jsx(oe,{className:"h-6 w-6 mr-2 text-[#cc824d]"}),(p=s.find(y=>y.type===n))==null?void 0:p.name]}),e.jsxs("p",{className:"text-gray-600",children:["報表期間: ",new Date().getFullYear(),"年",new Date().getMonth()+1,"月"]})]}),n===Da.TRIAL_BALANCE&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"科目代碼"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"科目名稱"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"借方餘額"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"貸方餘額"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(f=l.accounts)==null?void 0:f.map(y=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:y.code}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:y.debitBalance?x(y.debitBalance):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:y.creditBalance?x(y.creditBalance):"-"})]},y.code))}),e.jsx("tfoot",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",className:"px-6 py-4 text-sm font-bold text-gray-900",children:"合計"}),e.jsx("td",{className:"px-6 py-4 text-sm font-bold text-right text-gray-900",children:x(l.totalDebit||0)}),e.jsx("td",{className:"px-6 py-4 text-sm font-bold text-right text-gray-900",children:x(l.totalCredit||0)})]})})]})}),n!==Da.TRIAL_BALANCE&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"報表正在開發中"}),e.jsx("p",{className:"text-gray-500",children:"此報表功能即將推出"})]}),n===Da.TRIAL_BALANCE&&l&&e.jsx("div",{className:"mt-6 p-4 rounded-lg bg-gray-50",children:e.jsx("div",{className:"flex items-center",children:l.totalDebit===l.totalCredit?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("span",{className:"text-green-700 font-medium",children:"試算表平衡 - 借貸相等"})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsxs("span",{className:"text-red-700 font-medium",children:["試算表不平衡 - 差額: ",x(Math.abs(l.totalDebit-l.totalCredit))]})]})})})]})]})},dM=()=>{var p,f,y,b,v,S,_,w,N,u,h;const[s,t]=m.useState([]),[r,a]=m.useState(!0),[n,i]=m.useState(""),[l,o]=m.useState(null);m.useEffect(()=>{c()},[]);const c=async()=>{a(!0);try{const g=Wo.getBankReconciliations();t(g),g.length>0&&(i(g[0].bankAccount),o(g[0]))}catch(g){console.error("載入銀行對帳失敗:",g)}finally{a(!1)}},d=g=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(g),x=g=>{const j={completed:{color:"bg-green-100 text-green-800",text:"已完成"},pending:{color:"bg-yellow-100 text-yellow-800",text:"進行中"},review:{color:"bg-blue-100 text-blue-800",text:"待審核"}},T=j[g]||j.pending;return e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T.color}`,children:T.text})};return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#fdf8f2]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Nn,{className:"h-12 w-12 animate-pulse text-[#cc824d] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"載入銀行對帳資料中..."})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"銀行對帳"}),e.jsx("p",{className:"text-gray-600",children:"進行銀行帳戶餘額對帳與調節"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"選擇銀行帳戶"}),e.jsxs("select",{value:n,onChange:g=>i(g.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"",children:"請選擇銀行帳戶"}),s.map(g=>e.jsxs("option",{value:g.bankAccount,children:[g.bankAccount," - ",g.bankName]},g.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"對帳月份"}),e.jsx("input",{type:"month",className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",defaultValue:"2024-09"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"h-4 w-4"}),"新增對帳"]})})]})}),l&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(Bt,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"帳面餘額"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"期初餘額"}),e.jsx("span",{className:"font-semibold text-gray-800",children:d(((p=l.bookBalance)==null?void 0:p.opening)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"本期收入"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["+ ",d(((f=l.bookBalance)==null?void 0:f.income)||0)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"本期支出"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["- ",d(((y=l.bookBalance)==null?void 0:y.expense)||0)]})]}),e.jsx("hr",{className:"border-gray-200"}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"font-bold text-gray-800",children:"帳面期末餘額"}),e.jsx("span",{className:"font-bold text-blue-600",children:d(((b=l.bookBalance)==null?void 0:b.closing)||0)})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(gp,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"銀行餘額"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"銀行對帳單餘額"}),e.jsx("span",{className:"font-semibold text-gray-800",children:d(((v=l.bankBalance)==null?void 0:v.statement)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"在途存款"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["+ ",d(((S=l.bankBalance)==null?void 0:S.depositsInTransit)||0)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"未兌現支票"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["- ",d(((_=l.bankBalance)==null?void 0:_.outstandingChecks)||0)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"銀行手續費"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["- ",d(((w=l.bankBalance)==null?void 0:w.bankCharges)||0)]})]}),e.jsx("hr",{className:"border-gray-200"}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"font-bold text-gray-800",children:"調整後銀行餘額"}),e.jsx("span",{className:"font-bold text-blue-600",children:d(((N=l.bankBalance)==null?void 0:N.adjusted)||0)})]})]})]})]}),l&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-6 border border-white/20 shadow-lg mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"對帳結果"}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-50",children:[e.jsx("div",{className:"flex items-center",children:l.reconciled?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-8 w-8 text-green-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-700",children:"對帳成功"}),e.jsx("p",{className:"text-sm text-gray-600",children:"帳面餘額與銀行餘額一致"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-8 w-8 text-red-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-700",children:"對帳差異"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["差額: ",d(Math.abs((((u=l.bookBalance)==null?void 0:u.closing)||0)-(((h=l.bankBalance)==null?void 0:h.adjusted)||0)))]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(vi,{className:"h-4 w-4"}),"匯出報告"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(ae,{className:"h-4 w-4"}),"完成對帳"]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg border border-white/20 shadow-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"對帳歷史"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"對帳月份"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"銀行帳戶"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"帳面餘額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"銀行餘額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"差異"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(g=>{var j,T,C,E;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.period}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.bankAccount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(((j=g.bookBalance)==null?void 0:j.closing)||0)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(((T=g.bankBalance)==null?void 0:T.adjusted)||0)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(Math.abs((((C=g.bookBalance)==null?void 0:C.closing)||0)-(((E=g.bankBalance)==null?void 0:E.adjusted)||0)))}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x(g.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",title:"查看詳情",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-green-600 hover:text-green-900",title:"下載報告",children:e.jsx(vi,{className:"h-4 w-4"})})]})})]},g.id)})})]})})]}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tw,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"尚無銀行對帳記錄"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"開始進行您的第一次銀行對帳"}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-[#cc824d] text-white rounded-lg hover:bg-[#b3723f] transition-colors",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"新增對帳"]})]})]})},mM=()=>e.jsxs(aa,{children:[e.jsx(q,{index:!0,element:e.jsx(n_,{to:"overview",replace:!0})}),e.jsx(q,{path:"overview",element:e.jsx(iM,{})}),e.jsx(q,{path:"chart-of-accounts",element:e.jsx(lM,{})}),e.jsx(q,{path:"journal-entries",element:e.jsx(oM,{})}),e.jsx(q,{path:"financial-reports",element:e.jsx(cM,{})}),e.jsx(q,{path:"bank-reconciliation",element:e.jsx(dM,{})})]});class uM{constructor(){this.festivals=this.loadFestivals(),this.promotions=this.loadPromotions(),this.coupons=this.loadCoupons()}loadFestivals(){const t=localStorage.getItem("festivals");return t?JSON.parse(t):[{id:"f001",name:"春節年貨節",type:"traditional",startDate:"2025-01-20",endDate:"2025-02-10",status:"active",description:"春節年貨大優惠，全館商品享優惠價格",bannerImage:"/images/festivals/spring-festival.jpg",themeColor:"#ff6b6b",targetProducts:["skincare","makeup"],promotionSettings:{discountType:"percentage",discountValue:15,freeShipping:!0,giftThreshold:2e3,giftItems:["紅包袋","春節禮盒"]},analytics:{views:12500,participation:850,revenue:458e3,conversionRate:6.8},createdAt:"2024-12-15T08:00:00Z",updatedAt:"2025-01-15T10:30:00Z"},{id:"f002",name:"情人節限定",type:"romantic",startDate:"2025-02-10",endDate:"2025-02-15",status:"scheduled",description:"情人節專屬美妝禮盒，傳遞愛意的最佳選擇",bannerImage:"/images/festivals/valentine.jpg",themeColor:"#ff69b4",targetProducts:["gift-sets","perfume"],promotionSettings:{discountType:"buy-one-get-one",discountValue:50,freeShipping:!1,giftThreshold:1500,giftItems:["情人節包裝","玫瑰花瓣"]},analytics:{views:0,participation:0,revenue:0,conversionRate:0},createdAt:"2025-01-20T14:00:00Z",updatedAt:"2025-01-20T14:00:00Z"},{id:"f003",name:"母親節感恩",type:"family",startDate:"2025-05-01",endDate:"2025-05-12",status:"draft",description:"感謝母親的愛，精選美妝保養品限時優惠",bannerImage:"/images/festivals/mothers-day.jpg",themeColor:"#ffa8cc",targetProducts:["anti-aging","luxury"],promotionSettings:{discountType:"fixed",discountValue:200,freeShipping:!0,giftThreshold:3e3,giftItems:["康乃馨","感謝卡片"]},analytics:{views:0,participation:0,revenue:0,conversionRate:0},createdAt:"2025-02-01T09:00:00Z",updatedAt:"2025-02-01T09:00:00Z"}]}loadPromotions(){const t=localStorage.getItem("festival_promotions");return t?JSON.parse(t):[{id:"p001",festivalId:"f001",name:"春節限時折扣",type:"discount",rules:{minAmount:1e3,discountRate:.15,maxDiscount:500},startTime:"2025-01-20T00:00:00Z",endTime:"2025-02-10T23:59:59Z",isActive:!0,usageCount:245,usageLimit:1e3},{id:"p002",festivalId:"f001",name:"滿額贈禮",type:"gift",rules:{minAmount:2e3,giftItems:["春節禮盒","紅包袋"]},startTime:"2025-01-20T00:00:00Z",endTime:"2025-02-10T23:59:59Z",isActive:!0,usageCount:128,usageLimit:500}]}loadCoupons(){const t=localStorage.getItem("festival_coupons");return t?JSON.parse(t):[{id:"c001",festivalId:"f001",code:"SPRING2025",name:"春節專屬優惠券",type:"percentage",value:20,minAmount:1500,maxDiscount:300,validFrom:"2025-01-20T00:00:00Z",validTo:"2025-02-10T23:59:59Z",isActive:!0,totalQuantity:500,usedQuantity:156,targetCustomers:"all"},{id:"c002",festivalId:"f002",code:"VALENTINE2025",name:"情人節甜蜜券",type:"fixed",value:150,minAmount:1e3,maxDiscount:150,validFrom:"2025-02-10T00:00:00Z",validTo:"2025-02-15T23:59:59Z",isActive:!1,totalQuantity:300,usedQuantity:0,targetCustomers:"members"}]}saveFestivals(){localStorage.setItem("festivals",JSON.stringify(this.festivals))}savePromotions(){localStorage.setItem("festival_promotions",JSON.stringify(this.promotions))}saveCoupons(){localStorage.setItem("festival_coupons",JSON.stringify(this.coupons))}getAllFestivals(){return[...this.festivals]}getFestivalById(t){return this.festivals.find(r=>r.id===t)}getFestivalsByStatus(t){return this.festivals.filter(r=>r.status===t)}getActiveFestivals(){const t=new Date;return this.festivals.filter(r=>{const a=new Date(r.startDate),n=new Date(r.endDate);return r.status==="active"&&t>=a&&t<=n})}getUpcomingFestivals(){const t=new Date;return this.festivals.filter(r=>{const a=new Date(r.startDate);return(r.status==="scheduled"||r.status==="active")&&a>t})}createFestival(t){const r={id:"f"+Date.now().toString().slice(-6),...t,analytics:{views:0,participation:0,revenue:0,conversionRate:0},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.festivals.push(r),this.saveFestivals(),r}updateFestival(t,r){const a=this.festivals.findIndex(n=>n.id===t);return a!==-1?(this.festivals[a]={...this.festivals[a],...r,updatedAt:new Date().toISOString()},this.saveFestivals(),this.festivals[a]):null}deleteFestival(t){const r=this.festivals.findIndex(a=>a.id===t);if(r!==-1){const a=this.festivals.splice(r,1)[0];return this.promotions=this.promotions.filter(n=>n.festivalId!==t),this.coupons=this.coupons.filter(n=>n.festivalId!==t),this.saveFestivals(),this.savePromotions(),this.saveCoupons(),a}return null}getPromotionsByFestival(t){return this.promotions.filter(r=>r.festivalId===t)}createPromotion(t){const r={id:"p"+Date.now().toString().slice(-6),...t,usageCount:0,createdAt:new Date().toISOString()};return this.promotions.push(r),this.savePromotions(),r}updatePromotion(t,r){const a=this.promotions.findIndex(n=>n.id===t);return a!==-1?(this.promotions[a]={...this.promotions[a],...r,updatedAt:new Date().toISOString()},this.savePromotions(),this.promotions[a]):null}deletePromotion(t){const r=this.promotions.findIndex(a=>a.id===t);if(r!==-1){const a=this.promotions.splice(r,1)[0];return this.savePromotions(),a}return null}getCouponsByFestival(t){return this.coupons.filter(r=>r.festivalId===t)}createCoupon(t){const r={id:"c"+Date.now().toString().slice(-6),...t,usedQuantity:0,createdAt:new Date().toISOString()};return this.coupons.push(r),this.saveCoupons(),r}updateCoupon(t,r){const a=this.coupons.findIndex(n=>n.id===t);return a!==-1?(this.coupons[a]={...this.coupons[a],...r,updatedAt:new Date().toISOString()},this.saveCoupons(),this.coupons[a]):null}deleteCoupon(t){const r=this.coupons.findIndex(a=>a.id===t);if(r!==-1){const a=this.coupons.splice(r,1)[0];return this.saveCoupons(),a}return null}getFestivalAnalytics(t){const r=this.getFestivalById(t),a=this.getPromotionsByFestival(t),n=this.getCouponsByFestival(t);return{festival:(r==null?void 0:r.analytics)||{},promotions:{total:a.length,active:a.filter(i=>i.isActive).length,totalUsage:a.reduce((i,l)=>i+l.usageCount,0)},coupons:{total:n.length,active:n.filter(i=>i.isActive).length,totalIssued:n.reduce((i,l)=>i+l.totalQuantity,0),totalUsed:n.reduce((i,l)=>i+l.usedQuantity,0)}}}updateFestivalAnalytics(t,r){const a=this.getFestivalById(t);a&&(a.analytics={...a.analytics,...r},this.updateFestival(t,{analytics:a.analytics}))}getOverallStats(){const t=this.festivals.length,r=this.getActiveFestivals().length,a=this.getUpcomingFestivals().length,n=this.festivals.reduce((o,c)=>{var d;return o+(((d=c.analytics)==null?void 0:d.revenue)||0)},0),i=this.festivals.reduce((o,c)=>{var d;return o+(((d=c.analytics)==null?void 0:d.participation)||0)},0),l=this.festivals.length>0?this.festivals.reduce((o,c)=>{var d;return o+(((d=c.analytics)==null?void 0:d.conversionRate)||0)},0)/this.festivals.length:0;return{totalFestivals:t,activeFestivals:r,upcomingFestivals:a,totalRevenue:n,totalParticipation:i,avgConversionRate:l,activePromotions:this.promotions.filter(o=>o.isActive).length,activeCoupons:this.coupons.filter(o=>o.isActive).length}}searchFestivals(t){const r=t.toLowerCase();return this.festivals.filter(a=>a.name.toLowerCase().includes(r)||a.description.toLowerCase().includes(r)||a.type.toLowerCase().includes(r))}filterFestivalsByDateRange(t,r){const a=new Date(t),n=new Date(r);return this.festivals.filter(i=>{const l=new Date(i.startDate),o=new Date(i.endDate);return l>=a&&l<=n||o>=a&&o<=n||l<=a&&o>=n})}filterFestivalsByType(t){return this.festivals.filter(r=>r.type===t)}}const Gt=new uM,xM=()=>{var b,v;const[s,t]=m.useState({}),[r,a]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState([]),[c,d]=m.useState(!0);m.useEffect(()=>{x()},[]);const x=()=>{try{const S=Gt.getOverallStats(),_=Gt.getActiveFestivals(),w=Gt.getUpcomingFestivals();t(S),a(_),i(w),o([{id:1,type:"festival_created",message:"新建節慶活動：情人節限定",timestamp:"2025-01-20T14:00:00Z",icon:Ir,color:"text-blue-500"},{id:2,type:"promotion_activated",message:"春節限時折扣已啟用",timestamp:"2025-01-20T08:00:00Z",icon:Be,color:"text-green-500"},{id:3,type:"coupon_issued",message:"發放500張春節專屬優惠券",timestamp:"2025-01-19T16:30:00Z",icon:ui,color:"text-purple-500"}]),d(!1)}catch(S){console.error("載入數據失敗:",S),d(!1)}},p=S=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(S),f=S=>new Date(S).toLocaleDateString("zh-TW",{year:"numeric",month:"short",day:"numeric"}),y=S=>{const _={active:{text:"進行中",color:"bg-green-100 text-green-800"},scheduled:{text:"已排程",color:"bg-blue-100 text-blue-800"},draft:{text:"草稿",color:"bg-gray-100 text-gray-800"},ended:{text:"已結束",color:"bg-red-100 text-red-800"}},w=_[S]||_.draft;return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.color}`,children:w.text})};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#cc824d]"})}):e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"節慶管理總覽"}),e.jsx("p",{className:"text-gray-600",children:"管理所有節慶活動、促銷設定與效果分析"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ir,{className:"h-8 w-8 text-[#cc824d]"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"總節慶數量"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalFestivals})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsxs("span",{className:"text-green-600 font-medium",children:["+",s.activeFestivals]}),e.jsx("span",{className:"ml-1",children:"個進行中"})]})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(We,{className:"h-8 w-8 text-green-500"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"總收益"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p(s.totalRevenue)})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Re,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-600 font-medium",children:"+12.5%"}),e.jsx("span",{className:"ml-1",children:"較上月"})]})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(dt,{className:"h-8 w-8 text-blue-500"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"總參與人次"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(b=s.totalParticipation)==null?void 0:b.toLocaleString()})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsxs("span",{className:"text-blue-600 font-medium",children:[(v=s.avgConversionRate)==null?void 0:v.toFixed(1),"%"]}),e.jsx("span",{className:"ml-1",children:"平均轉換率"})]})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Be,{className:"h-8 w-8 text-purple-500"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"活躍促銷"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.activePromotions})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ui,{className:"h-4 w-4 text-purple-500 mr-1"}),e.jsx("span",{children:s.activeCoupons}),e.jsx("span",{className:"ml-1",children:"優惠券"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"進行中的節慶"}),e.jsx(oe,{className:"h-5 w-5 text-[#cc824d]"})]}),e.jsx("div",{className:"space-y-4",children:r.length>0?r.map(S=>{var _,w,N,u,h;return e.jsxs("div",{className:"p-4 bg-white/50 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:S.name}),y(S.status)]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:S.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"開始時間:"}),e.jsx("div",{className:"font-medium text-gray-900",children:f(S.startDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"結束時間:"}),e.jsx("div",{className:"font-medium text-gray-900",children:f(S.endDate)})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:(w=(_=S.analytics)==null?void 0:_.views)==null?void 0:w.toLocaleString()}),e.jsx("div",{className:"text-gray-500",children:"瀏覽量"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:(u=(N=S.analytics)==null?void 0:N.participation)==null?void 0:u.toLocaleString()}),e.jsx("div",{className:"text-gray-500",children:"參與人次"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:p(((h=S.analytics)==null?void 0:h.revenue)||0)}),e.jsx("div",{className:"text-gray-500",children:"收益"})]})]})})]},S.id)}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ir,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"目前沒有進行中的節慶活動"})]})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"即將到來的節慶"}),e.jsx(be,{className:"h-5 w-5 text-[#cc824d]"})]}),e.jsx("div",{className:"space-y-4",children:n.length>0?n.map(S=>{var _;return e.jsxs("div",{className:"p-4 bg-white/50 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:S.name}),y(S.status)]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:S.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"開始時間:"}),e.jsx("div",{className:"font-medium text-gray-900",children:f(S.startDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"結束時間:"}),e.jsx("div",{className:"font-medium text-gray-900",children:f(S.endDate)})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"目標商品類別:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(_=S.targetProducts)==null?void 0:_.map((w,N)=>e.jsx("span",{className:"px-2 py-1 bg-[#cc824d]/10 text-[#cc824d] rounded text-xs",children:w},N))})]})})]},S.id)}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(be,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"目前沒有即將到來的節慶活動"})]})})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"最近活動"}),e.jsx(te,{className:"h-5 w-5 text-[#cc824d]"})]}),e.jsx("div",{className:"space-y-4",children:l.map(S=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-white/50 rounded-lg border border-white/30",children:[e.jsx("div",{className:`flex-shrink-0 ${S.color}`,children:e.jsx(S.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.message}),e.jsx("p",{className:"text-sm text-gray-500",children:f(S.timestamp)})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ae,{className:"h-5 w-5 text-green-500"})})]},S.id))})]}),e.jsxs("div",{className:"mt-8 bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"快速操作"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{className:"flex items-center justify-center px-4 py-3 bg-[#cc824d] text-white rounded-lg hover:bg-[#b8734a] transition-colors",children:[e.jsx(Ir,{className:"h-5 w-5 mr-2"}),"新建節慶"]}),e.jsxs("button",{className:"flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Be,{className:"h-5 w-5 mr-2"}),"設定促銷"]}),e.jsxs("button",{className:"flex items-center justify-center px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(ui,{className:"h-5 w-5 mr-2"}),"發放優惠券"]}),e.jsxs("button",{className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(oe,{className:"h-5 w-5 mr-2"}),"查看分析"]})]})]})]})})},hM=()=>{const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(""),[l,o]=m.useState("all"),[c,d]=m.useState("all"),[x,p]=m.useState(!1),[f,y]=m.useState(!1),[b,v]=m.useState(!1),[S,_]=m.useState(null),[w,N]=m.useState(!0),[u,h]=m.useState({name:"",type:"traditional",startDate:"",endDate:"",status:"draft",description:"",bannerImage:"",themeColor:"#ff6b6b",targetProducts:[],promotionSettings:{discountType:"percentage",discountValue:0,freeShipping:!1,giftThreshold:0,giftItems:[]}}),g=[{value:"traditional",label:"傳統節日"},{value:"romantic",label:"浪漫節日"},{value:"family",label:"家庭節日"},{value:"seasonal",label:"季節活動"},{value:"commercial",label:"商業促銷"}],j=[{value:"draft",label:"草稿"},{value:"scheduled",label:"已排程"},{value:"active",label:"進行中"},{value:"ended",label:"已結束"}],T=["skincare","makeup","fragrance","haircare","bodycare","anti-aging","luxury","organic","gift-sets","tools"];m.useEffect(()=>{C()},[]),m.useEffect(()=>{E()},[s,n,l,c]);const C=()=>{try{const A=Gt.getAllFestivals();t(A),N(!1)}catch(A){console.error("載入節慶數據失敗:",A),N(!1)}},E=()=>{let A=[...s];n&&(A=A.filter(V=>V.name.toLowerCase().includes(n.toLowerCase())||V.description.toLowerCase().includes(n.toLowerCase()))),l!=="all"&&(A=A.filter(V=>V.status===l)),c!=="all"&&(A=A.filter(V=>V.type===c)),a(A)},R=()=>{try{const A=Gt.createFestival(u);t([...s,A]),p(!1),P()}catch(A){console.error("創建節慶失敗:",A)}},k=()=>{try{const A=Gt.updateFestival(S.id,u);t(s.map(V=>V.id===S.id?A:V)),y(!1),_(null),P()}catch(A){console.error("更新節慶失敗:",A)}},O=()=>{try{Gt.deleteFestival(S.id),t(s.filter(A=>A.id!==S.id)),v(!1),_(null)}catch(A){console.error("刪除節慶失敗:",A)}},P=()=>{h({name:"",type:"traditional",startDate:"",endDate:"",status:"draft",description:"",bannerImage:"",themeColor:"#ff6b6b",targetProducts:[],promotionSettings:{discountType:"percentage",discountValue:0,freeShipping:!1,giftThreshold:0,giftItems:[]}})},$=A=>{_(A),h({name:A.name,type:A.type,startDate:A.startDate,endDate:A.endDate,status:A.status,description:A.description,bannerImage:A.bannerImage||"",themeColor:A.themeColor||"#ff6b6b",targetProducts:A.targetProducts||[],promotionSettings:A.promotionSettings||{discountType:"percentage",discountValue:0,freeShipping:!1,giftThreshold:0,giftItems:[]}}),y(!0)},I=A=>{_(A),v(!0)},L=A=>new Date(A).toLocaleDateString("zh-TW",{year:"numeric",month:"short",day:"numeric"}),D=A=>{const V={active:{text:"進行中",color:"bg-green-100 text-green-800"},scheduled:{text:"已排程",color:"bg-blue-100 text-blue-800"},draft:{text:"草稿",color:"bg-gray-100 text-gray-800"},ended:{text:"已結束",color:"bg-red-100 text-red-800"}},B=V[A]||V.draft;return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${B.color}`,children:B.text})},M=A=>{const V=g.find(B=>B.value===A);return V?V.label:A};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#cc824d]"})}):e.jsxs("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"節慶管理"}),e.jsx("p",{className:"text-gray-600",children:"管理所有節慶活動的詳細設定"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 bg-[#cc824d] text-white font-medium rounded-lg hover:bg-[#b8734a] transition-colors",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),"新建節慶"]})]}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 mb-8 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsxs("select",{value:l,onChange:A=>o(A.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent appearance-none bg-white",children:[e.jsx("option",{value:"all",children:"所有狀態"}),j.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(_a,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsxs("select",{value:c,onChange:A=>d(A.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent appearance-none bg-white",children:[e.jsx("option",{value:"all",children:"所有類型"}),g.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))]})]})]})}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:["節慶列表 (",r.length,")"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"節慶資訊"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"類型/狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"時間範圍"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"效果數據"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white/30 divide-y divide-gray-200",children:r.map(A=>{var V,B,z,F,W,Y;return e.jsxs("tr",{className:"hover:bg-white/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg flex-shrink-0 flex items-center justify-center",style:{backgroundColor:A.themeColor+"20"},children:e.jsx(ji,{className:"h-6 w-6",style:{color:A.themeColor}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name}),e.jsx("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:A.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-gray-900",children:M(A.type)}),D(A.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:["開始: ",L(A.startDate)]}),e.jsxs("div",{children:["結束: ",L(A.endDate)]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:["瀏覽: ",((B=(V=A.analytics)==null?void 0:V.views)==null?void 0:B.toLocaleString())||0]}),e.jsxs("div",{children:["參與: ",((F=(z=A.analytics)==null?void 0:z.participation)==null?void 0:F.toLocaleString())||0]}),e.jsxs("div",{children:["收益: NT$",((Y=(W=A.analytics)==null?void 0:W.revenue)==null?void 0:Y.toLocaleString())||0]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>$(A),className:"text-[#cc824d] hover:text-[#b8734a] p-1 rounded",title:"編輯",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1 rounded",title:"查看詳情",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>I(A),className:"text-red-600 hover:text-red-800 p-1 rounded",title:"刪除",children:e.jsx($e,{className:"h-4 w-4"})})]})})]},A.id)})})]}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ji,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"沒有找到符合條件的節慶活動"})]})]})]})]}),(x||f)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:x?"新建節慶":"編輯節慶"}),e.jsx("button",{onClick:()=>{p(!1),y(!1),P()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"節慶名稱"}),e.jsx("input",{type:"text",value:u.name,onChange:A=>h({...u,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"輸入節慶名稱"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"節慶類型"}),e.jsx("select",{value:u.type,onChange:A=>h({...u,type:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",children:g.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"狀態"}),e.jsx("select",{value:u.status,onChange:A=>h({...u,status:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",children:j.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"開始日期"}),e.jsx("input",{type:"date",value:u.startDate,onChange:A=>h({...u,startDate:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"結束日期"}),e.jsx("input",{type:"date",value:u.endDate,onChange:A=>h({...u,endDate:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"主題顏色"}),e.jsx("input",{type:"color",value:u.themeColor,onChange:A=>h({...u,themeColor:A.target.value}),className:"w-full h-10 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"描述"}),e.jsx("textarea",{value:u.description,onChange:A=>h({...u,description:A.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"輸入節慶描述"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"橫幅圖片 URL"}),e.jsx("input",{type:"url",value:u.bannerImage,onChange:A=>h({...u,bannerImage:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"輸入圖片 URL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"目標商品類別"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2",children:T.map(A=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.targetProducts.includes(A),onChange:V=>{V.target.checked?h({...u,targetProducts:[...u.targetProducts,A]}):h({...u,targetProducts:u.targetProducts.filter(B=>B!==A)})},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:A})]},A))})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"促銷設定"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"折扣類型"}),e.jsxs("select",{value:u.promotionSettings.discountType,onChange:A=>h({...u,promotionSettings:{...u.promotionSettings,discountType:A.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",children:[e.jsx("option",{value:"percentage",children:"百分比折扣"}),e.jsx("option",{value:"fixed",children:"固定金額"}),e.jsx("option",{value:"buy-one-get-one",children:"買一送一"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"折扣值"}),e.jsx("input",{type:"number",value:u.promotionSettings.discountValue,onChange:A=>h({...u,promotionSettings:{...u.promotionSettings,discountValue:Number(A.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"輸入折扣值"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.promotionSettings.freeShipping,onChange:A=>h({...u,promotionSettings:{...u.promotionSettings,freeShipping:A.target.checked}}),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"免費運送"})]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{p(!1),y(!1),P()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"取消"}),e.jsx("button",{onClick:x?R:k,className:"px-4 py-2 bg-[#cc824d] text-white rounded-md hover:bg-[#b8734a]",children:x?"創建":"更新"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(te,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"確認刪除"})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["確定要刪除節慶「",S==null?void 0:S.name,"」嗎？此操作將同時刪除相關的促銷活動和優惠券，且無法復原。"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"取消"}),e.jsx("button",{onClick:O,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"刪除"})]})]})})]})},pM=()=>{var ve;const[s,t]=m.useState([]),[r,a]=m.useState(""),[n,i]=m.useState([]),[l,o]=m.useState([]),[c,d]=m.useState("promotions"),[x,p]=m.useState(!1),[f,y]=m.useState(!1),[b,v]=m.useState(!1),[S,_]=m.useState(null),[w,N]=m.useState(!1),[u,h]=m.useState(!0),[g,j]=m.useState({festivalId:"",name:"",type:"discount",rules:{minAmount:0,discountRate:0,maxDiscount:0,giftItems:[]},startTime:"",endTime:"",isActive:!0,usageLimit:0}),[T,C]=m.useState({festivalId:"",code:"",name:"",type:"percentage",value:0,minAmount:0,maxDiscount:0,validFrom:"",validTo:"",isActive:!0,totalQuantity:0,targetCustomers:"all"}),E=[{value:"discount",label:"折扣優惠",icon:dE},{value:"gift",label:"滿額贈禮",icon:Be},{value:"shipping",label:"免運優惠",icon:tt},{value:"bundle",label:"組合優惠",icon:ss}],R=[{value:"percentage",label:"百分比折扣"},{value:"fixed",label:"固定金額"}],k=[{value:"all",label:"所有客戶"},{value:"members",label:"會員限定"},{value:"vip",label:"VIP 會員"},{value:"new",label:"新客戶"}];m.useEffect(()=>{O()},[]),m.useEffect(()=>{r&&P(r)},[r]);const O=()=>{try{const U=Gt.getAllFestivals();t(U),U.length>0&&a(U[0].id),h(!1)}catch(U){console.error("載入數據失敗:",U),h(!1)}},P=U=>{try{const ie=Gt.getPromotionsByFestival(U),ce=Gt.getCouponsByFestival(U);i(ie),o(ce)}catch(ie){console.error("載入促銷數據失敗:",ie)}},$=()=>{try{const U=Gt.createPromotion({...g,festivalId:r});i([...n,U]),p(!1),A()}catch(U){console.error("創建促銷失敗:",U)}},I=()=>{try{const U=Gt.updatePromotion(S.id,g);i(n.map(ie=>ie.id===S.id?U:ie)),p(!1),N(!1),A()}catch(U){console.error("更新促銷失敗:",U)}},L=()=>{try{const U=Gt.createCoupon({...T,festivalId:r});o([...l,U]),y(!1),V()}catch(U){console.error("創建優惠券失敗:",U)}},D=()=>{try{const U=Gt.updateCoupon(S.id,T);o(l.map(ie=>ie.id===S.id?U:ie)),y(!1),N(!1),V()}catch(U){console.error("更新優惠券失敗:",U)}},M=()=>{try{c==="promotions"?(Gt.deletePromotion(S.id),i(n.filter(U=>U.id!==S.id))):(Gt.deleteCoupon(S.id),o(l.filter(U=>U.id!==S.id))),v(!1),_(null)}catch(U){console.error("刪除失敗:",U)}},A=()=>{j({festivalId:"",name:"",type:"discount",rules:{minAmount:0,discountRate:0,maxDiscount:0,giftItems:[]},startTime:"",endTime:"",isActive:!0,usageLimit:0})},V=()=>{C({festivalId:"",code:"",name:"",type:"percentage",value:0,minAmount:0,maxDiscount:0,validFrom:"",validTo:"",isActive:!0,totalQuantity:0,targetCustomers:"all"})},B=U=>{var ie,ce;_(U),j({festivalId:U.festivalId,name:U.name,type:U.type,rules:U.rules,startTime:((ie=U.startTime)==null?void 0:ie.split("T")[0])||"",endTime:((ce=U.endTime)==null?void 0:ce.split("T")[0])||"",isActive:U.isActive,usageLimit:U.usageLimit}),N(!0),p(!0)},z=U=>{var ie,ce;_(U),C({festivalId:U.festivalId,code:U.code,name:U.name,type:U.type,value:U.value,minAmount:U.minAmount,maxDiscount:U.maxDiscount,validFrom:((ie=U.validFrom)==null?void 0:ie.split("T")[0])||"",validTo:((ce=U.validTo)==null?void 0:ce.split("T")[0])||"",isActive:U.isActive,totalQuantity:U.totalQuantity,targetCustomers:U.targetCustomers}),N(!0),y(!0)},F=()=>{const U="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let ie="";for(let ce=0;ce<8;ce++)ie+=U.charAt(Math.floor(Math.random()*U.length));C({...T,code:ie})},W=U=>new Date(U).toLocaleDateString("zh-TW",{year:"numeric",month:"short",day:"numeric"}),Y=U=>e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:U?"啟用中":"已停用"}),ne=U=>E.find(ce=>ce.value===U)||{label:U,icon:Be};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#cc824d]"})}):e.jsxs("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"促銷設定"}),e.jsx("p",{className:"text-gray-600",children:"管理節慶促銷活動和優惠券"})]}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 mb-8 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"選擇節慶:"}),e.jsx("select",{value:r,onChange:U=>a(U.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:s.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))})]})}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex",children:[e.jsx("button",{onClick:()=>d("promotions"),className:`px-6 py-4 text-sm font-medium border-b-2 ${c==="promotions"?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-5 w-5 mr-2"}),"促銷活動 (",n.length,")"]})}),e.jsx("button",{onClick:()=>d("coupons"),className:`px-6 py-4 text-sm font-medium border-b-2 ${c==="coupons"?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ui,{className:"h-5 w-5 mr-2"}),"優惠券 (",l.length,")"]})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-end mb-6",children:c==="promotions"?e.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#cc824d] text-white font-medium rounded-lg hover:bg-[#b8734a] transition-colors",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),"新建促銷"]}):e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center px-4 py-2 bg-[#cc824d] text-white font-medium rounded-lg hover:bg-[#b8734a] transition-colors",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),"新建優惠券"]})}),c==="promotions"&&e.jsx("div",{className:"space-y-4",children:n.length>0?n.map(U=>{var ce,qe,ye,Ye;const ie=ne(U.type);return e.jsxs("div",{className:"bg-white/50 border border-white/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-[#cc824d]/10 rounded-lg",children:e.jsx(ie.icon,{className:"h-6 w-6 text-[#cc824d]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[e.jsx("span",{children:ie.label}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["已使用 ",U.usageCount,"/",U.usageLimit]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[W(U.startTime)," - ",W(U.endTime)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[Y(U.isActive),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>B(U),className:"text-[#cc824d] hover:text-[#b8734a] p-1 rounded",title:"編輯",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1 rounded",title:"查看詳情",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{_(U),v(!0)},className:"text-red-600 hover:text-red-800 p-1 rounded",title:"刪除",children:e.jsx($e,{className:"h-4 w-4"})})]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[U.type==="discount"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"最低金額:"}),e.jsxs("div",{className:"font-medium",children:["NT$",(ce=U.rules.minAmount)==null?void 0:ce.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"折扣率:"}),e.jsxs("div",{className:"font-medium",children:[U.rules.discountRate*100,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"最高折扣:"}),e.jsxs("div",{className:"font-medium",children:["NT$",(qe=U.rules.maxDiscount)==null?void 0:qe.toLocaleString()]})]})]}),U.type==="gift"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"最低金額:"}),e.jsxs("div",{className:"font-medium",children:["NT$",(ye=U.rules.minAmount)==null?void 0:ye.toLocaleString()]})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("span",{className:"text-gray-500",children:"贈品:"}),e.jsx("div",{className:"font-medium",children:(Ye=U.rules.giftItems)==null?void 0:Ye.join(", ")})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"使用限制:"}),e.jsxs("div",{className:"font-medium",children:[U.usageLimit," 次"]})]})]})})]},U.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"尚未建立任何促銷活動"})]})}),c==="coupons"&&e.jsx("div",{className:"space-y-4",children:l.length>0?l.map(U=>{var ie,ce,qe;return e.jsxs("div",{className:"bg-white/50 border border-white/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(ui,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:U.name}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-mono rounded",children:U.code})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[e.jsx("span",{children:U.type==="percentage"?`${U.value}% 折扣`:`NT$${U.value} 減免`}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["已使用 ",U.usedQuantity,"/",U.totalQuantity]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[W(U.validFrom)," - ",W(U.validTo)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[Y(U.isActive),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>z(U),className:"text-[#cc824d] hover:text-[#b8734a] p-1 rounded",title:"編輯",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(U.code),className:"text-blue-600 hover:text-blue-800 p-1 rounded",title:"複製代碼",children:e.jsx(hC,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{_(U),v(!0)},className:"text-red-600 hover:text-red-800 p-1 rounded",title:"刪除",children:e.jsx($e,{className:"h-4 w-4"})})]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"最低金額:"}),e.jsxs("div",{className:"font-medium",children:["NT$",(ie=U.minAmount)==null?void 0:ie.toLocaleString()]})]}),U.type==="percentage"&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"最高折扣:"}),e.jsxs("div",{className:"font-medium",children:["NT$",(ce=U.maxDiscount)==null?void 0:ce.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"目標客戶:"}),e.jsx("div",{className:"font-medium",children:(qe=k.find(ye=>ye.value===U.targetCustomers))==null?void 0:qe.label})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"剩餘數量:"}),e.jsx("div",{className:"font-medium",children:U.totalQuantity-U.usedQuantity})]})]})})]},U.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ui,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"尚未建立任何優惠券"})]})})]})]})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:w?"編輯促銷活動":"新建促銷活動"}),e.jsx("button",{onClick:()=>{p(!1),N(!1),A()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"促銷名稱"}),e.jsx("input",{type:"text",value:g.name,onChange:U=>j({...g,name:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"輸入促銷名稱"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"促銷類型"}),e.jsx("select",{value:g.type,onChange:U=>j({...g,type:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",children:E.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"開始時間"}),e.jsx("input",{type:"date",value:g.startTime,onChange:U=>j({...g,startTime:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"結束時間"}),e.jsx("input",{type:"date",value:g.endTime,onChange:U=>j({...g,endTime:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"促銷規則"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"最低消費金額"}),e.jsx("input",{type:"number",value:g.rules.minAmount,onChange:U=>j({...g,rules:{...g.rules,minAmount:Number(U.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"0"})]}),g.type==="discount"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"折扣率 (%)"}),e.jsx("input",{type:"number",value:g.rules.discountRate*100,onChange:U=>j({...g,rules:{...g.rules,discountRate:Number(U.target.value)/100}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"0",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"最高折扣金額"}),e.jsx("input",{type:"number",value:g.rules.maxDiscount,onChange:U=>j({...g,rules:{...g.rules,maxDiscount:Number(U.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"0"})]})]}),g.type==="gift"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"贈品項目 (以逗號分隔)"}),e.jsx("input",{type:"text",value:(ve=g.rules.giftItems)==null?void 0:ve.join(", "),onChange:U=>j({...g,rules:{...g.rules,giftItems:U.target.value.split(",").map(ie=>ie.trim())}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"贈品1, 贈品2, 贈品3"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"使用次數限制"}),e.jsx("input",{type:"number",value:g.usageLimit,onChange:U=>j({...g,usageLimit:Number(U.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"0 表示無限制"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.isActive,onChange:U=>j({...g,isActive:U.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"立即啟用"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{p(!1),N(!1),A()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"取消"}),e.jsx("button",{onClick:w?I:$,className:"px-4 py-2 bg-[#cc824d] text-white rounded-md hover:bg-[#b8734a]",children:w?"更新":"創建"})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:w?"編輯優惠券":"新建優惠券"}),e.jsx("button",{onClick:()=>{y(!1),N(!1),V()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"優惠券名稱"}),e.jsx("input",{type:"text",value:T.name,onChange:U=>C({...T,name:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"輸入優惠券名稱"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"優惠券代碼"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:T.code,onChange:U=>C({...T,code:U.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"輸入或生成代碼"}),e.jsx("button",{onClick:F,className:"px-3 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"生成"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"優惠券類型"}),e.jsx("select",{value:T.type,onChange:U=>C({...T,type:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",children:R.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:T.type==="percentage"?"折扣百分比 (%)":"折扣金額 (NT$)"}),e.jsx("input",{type:"number",value:T.value,onChange:U=>C({...T,value:Number(U.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"最低消費金額"}),e.jsx("input",{type:"number",value:T.minAmount,onChange:U=>C({...T,minAmount:Number(U.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"0"})]}),T.type==="percentage"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"最高折扣金額"}),e.jsx("input",{type:"number",value:T.maxDiscount,onChange:U=>C({...T,maxDiscount:Number(U.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"有效開始日期"}),e.jsx("input",{type:"date",value:T.validFrom,onChange:U=>C({...T,validFrom:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"有效結束日期"}),e.jsx("input",{type:"date",value:T.validTo,onChange:U=>C({...T,validTo:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"發行數量"}),e.jsx("input",{type:"number",value:T.totalQuantity,onChange:U=>C({...T,totalQuantity:Number(U.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"目標客戶"}),e.jsx("select",{value:T.targetCustomers,onChange:U=>C({...T,targetCustomers:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-[#cc824d] focus:border-[#cc824d]",children:k.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:T.isActive,onChange:U=>C({...T,isActive:U.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"立即啟用"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{y(!1),N(!1),V()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"取消"}),e.jsx("button",{onClick:w?D:L,className:"px-4 py-2 bg-[#cc824d] text-white rounded-md hover:bg-[#b8734a]",children:w?"更新":"創建"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(te,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"確認刪除"})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["確定要刪除",c==="promotions"?"促銷活動":"優惠券","「",S==null?void 0:S.name,"」嗎？此操作無法復原。"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"取消"}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"刪除"})]})]})})]})},gM=()=>{var T,C,E,R,k,O,P,$,I,L,D,M,A,V,B;const[s,t]=m.useState([]),[r,a]=m.useState(""),[n,i]=m.useState("30"),[l,o]=m.useState(null),[c,d]=m.useState({}),[x,p]=m.useState([]),[f,y]=m.useState(!0);m.useEffect(()=>{b()},[]),m.useEffect(()=>{r&&v(r)},[r,n]);const b=()=>{try{const z=Gt.getAllFestivals();t(z),z.length>0&&a(z[0].id),y(!1)}catch(z){console.error("載入數據失敗:",z),y(!1)}},v=z=>{try{const F=Gt.getFestivalAnalytics(z),W=Gt.getFestivalById(z);o(F);const Y=(W==null?void 0:W.analytics)||{},ne=Number(Y.revenue)||0,ve=Number(Y.views)||0,U=Number(Y.participation)||0,ie=Number(Y.conversionRate)||0,ce={totalRevenue:ne,totalViews:ve,totalParticipation:U,conversionRate:ie,roi:S(ne,5e4),avgOrderValue:U>0?ne/U:0,clickThroughRate:ve>0?U/ve*100:0};d(ce),_()}catch(F){console.error("載入分析數據失敗:",F),d({totalRevenue:0,totalViews:0,totalParticipation:0,conversionRate:0,roi:0,avgOrderValue:0,clickThroughRate:0})}},S=(z,F)=>{const W=Number(z)||0,Y=Number(F)||0;return Y===0?0:(W-Y)/Y*100},_=()=>{const z=[],F=new Date;for(let W=29;W>=0;W--){const Y=new Date(F);Y.setDate(Y.getDate()-W),z.push({date:Y.toISOString().split("T")[0],views:Math.floor(Math.random()*500)+100,participation:Math.floor(Math.random()*50)+10,revenue:Math.floor(Math.random()*2e4)+5e3,conversions:Math.floor(Math.random()*30)+5})}p(z)},w=z=>z==null||isNaN(z)?new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(0):new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(Number(z)),N=z=>z==null||isNaN(z)?"0.0%":`${Number(z).toFixed(1)}%`,u=z=>z>0?e.jsx(Re,{className:"h-4 w-4 text-green-500"}):z<0?e.jsx(wa,{className:"h-4 w-4 text-red-500"}):null,h=z=>z>0?"text-green-600":z<0?"text-red-600":"text-gray-600",g=()=>{const z=s.find(U=>U.id===r),W=JSON.stringify({festival:z,analytics:l,metrics:c,timeSeriesData:x},null,2),Y="data:application/json;charset=utf-8,"+encodeURIComponent(W),ne=`festival-analytics-${z==null?void 0:z.name}-${new Date().toISOString().split("T")[0]}.json`,ve=document.createElement("a");ve.setAttribute("href",Y),ve.setAttribute("download",ne),ve.click()};if(f)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#cc824d]"})});const j=s.find(z=>z.id===r);return e.jsx("div",{className:"min-h-screen bg-[#fdf8f2] p-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"節慶分析"}),e.jsx("p",{className:"text-gray-600",children:"深入分析節慶活動的效果與ROI"})]}),e.jsxs("button",{onClick:g,className:"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 bg-[#cc824d] text-white font-medium rounded-lg hover:bg-[#b8734a] transition-colors",children:[e.jsx(vi,{className:"h-5 w-5 mr-2"}),"導出數據"]})]}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 mb-8 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"選擇節慶"}),e.jsx("select",{value:r,onChange:z=>a(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:s.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"時間範圍"}),e.jsxs("select",{value:n,onChange:z=>i(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"7",children:"過去7天"}),e.jsx("option",{value:"30",children:"過去30天"}),e.jsx("option",{value:"90",children:"過去3個月"}),e.jsx("option",{value:"365",children:"過去一年"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"狀態"}),e.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${(j==null?void 0:j.status)==="active"?"bg-green-100 text-green-800":(j==null?void 0:j.status)==="scheduled"?"bg-blue-100 text-blue-800":(j==null?void 0:j.status)==="ended"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:(j==null?void 0:j.status)==="active"?"進行中":(j==null?void 0:j.status)==="scheduled"?"已排程":(j==null?void 0:j.status)==="ended"?"已結束":"草稿"})})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(We,{className:"h-8 w-8 text-green-500"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"總收益"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(c.totalRevenue)}),e.jsxs("div",{className:"flex items-center mt-1",children:[u(8.5),e.jsx("span",{className:`text-sm ml-1 ${h(8.5)}`,children:"+8.5%"}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"較上期"})]})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ee,{className:"h-8 w-8 text-blue-500"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"總瀏覽量"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(T=c.totalViews)==null?void 0:T.toLocaleString()}),e.jsxs("div",{className:"flex items-center mt-1",children:[u(12.3),e.jsx("span",{className:`text-sm ml-1 ${h(12.3)}`,children:"+12.3%"}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"較上期"})]})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(dt,{className:"h-8 w-8 text-purple-500"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"參與人次"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(C=c.totalParticipation)==null?void 0:C.toLocaleString()}),e.jsxs("div",{className:"flex items-center mt-1",children:[u(5.7),e.jsx("span",{className:`text-sm ml-1 ${h(5.7)}`,children:"+5.7%"}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"較上期"})]})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Re,{className:"h-8 w-8 text-[#cc824d]"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"轉換率"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(c.conversionRate)}),e.jsxs("div",{className:"flex items-center mt-1",children:[u(-2.1),e.jsx("span",{className:`text-sm ml-1 ${h(-2.1)}`,children:"-2.1%"}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"較上期"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"效果指標"}),e.jsx(oe,{className:"h-5 w-5 text-[#cc824d]"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"ROI (投資回報率)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"收益相對於投資成本的比率"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:N(c.roi)}),e.jsxs("div",{className:"flex items-center",children:[u(15.2),e.jsx("span",{className:`text-sm ${h(15.2)}`,children:"+15.2%"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"平均訂單價值"}),e.jsx("p",{className:"text-xs text-gray-500",children:"每筆訂單的平均金額"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:w(c.avgOrderValue)}),e.jsxs("div",{className:"flex items-center",children:[u(3.8),e.jsx("span",{className:`text-sm ${h(3.8)}`,children:"+3.8%"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"點擊率"}),e.jsx("p",{className:"text-xs text-gray-500",children:"瀏覽到參與的轉換比例"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:N(c.clickThroughRate)}),e.jsxs("div",{className:"flex items-center",children:[u(-1.5),e.jsx("span",{className:`text-sm ${h(-1.5)}`,children:"-1.5%"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"促銷活動表現"}),e.jsx(Be,{className:"h-5 w-5 text-[#cc824d]"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-white/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"促銷活動"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((E=l==null?void 0:l.promotions)==null?void 0:E.total)||0," 個"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"啟用中:"}),e.jsx("span",{className:"font-medium text-green-600 ml-1",children:((R=l==null?void 0:l.promotions)==null?void 0:R.active)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"總使用:"}),e.jsx("span",{className:"font-medium text-gray-900 ml-1",children:((k=l==null?void 0:l.promotions)==null?void 0:k.totalUsage)||0})]})]})]}),e.jsxs("div",{className:"p-3 bg-white/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"優惠券"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((O=l==null?void 0:l.coupons)==null?void 0:O.total)||0," 張"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"已發放:"}),e.jsx("span",{className:"font-medium text-blue-600 ml-1",children:((P=l==null?void 0:l.coupons)==null?void 0:P.totalIssued)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"已使用:"}),e.jsx("span",{className:"font-medium text-purple-600 ml-1",children:(($=l==null?void 0:l.coupons)==null?void 0:$.totalUsed)||0})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"使用率"}),e.jsx("span",{children:((I=l==null?void 0:l.coupons)==null?void 0:I.totalIssued)>0?N((((L=l==null?void 0:l.coupons)==null?void 0:L.totalUsed)||0)/((D=l==null?void 0:l.coupons)==null?void 0:D.totalIssued)*100):"0%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:((M=l==null?void 0:l.coupons)==null?void 0:M.totalIssued)>0?`${(((A=l==null?void 0:l.coupons)==null?void 0:A.totalUsed)||0)/((V=l==null?void 0:l.coupons)==null?void 0:V.totalIssued)*100}%`:"0%"}})})]})]})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"趨勢分析"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("select",{className:"glass-select text-sm font-chinese",children:[e.jsx("option",{value:"views",children:"瀏覽量"}),e.jsx("option",{value:"participation",children:"參與人次"}),e.jsx("option",{value:"revenue",children:"收益"}),e.jsx("option",{value:"conversions",children:"轉換次數"})]})})]}),e.jsx("div",{className:"h-64 bg-white/30 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"趨勢圖表區域"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["顯示過去",n,"天的數據趨勢"]})]})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"客戶參與分析"}),e.jsx(dt,{className:"h-5 w-5 text-[#cc824d]"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Ee,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"新訪客"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.floor(c.totalViews*.65).toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-500",children:"佔總瀏覽 65%"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(dt,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"回頭客"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.floor(c.totalViews*.35).toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-500",children:"佔總瀏覽 35%"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(wn,{className:"h-8 w-8 text-purple-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"轉換客戶"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(B=c.totalParticipation)==null?void 0:B.toLocaleString()}),e.jsxs("p",{className:"text-sm text-gray-500",children:["轉換率 ",N(c.conversionRate)]})]})]})]})]})})};class fM{constructor(){this.storageKeys={campaigns:"marketing_campaigns",adCampaigns:"ad_campaigns",audiences:"marketing_audiences",creativeAssets:"creative_assets",automationRules:"automation_rules",settings:"marketing_settings"},this.initializeDefaultData()}initializeDefaultData(){if(!this.getCampaigns().length){const t=[{id:"mc001",name:"春季美妝節",type:"seasonal",status:"active",description:"春季限定美妝商品促銷活動",schedule:{startDate:"2025-03-01",endDate:"2025-03-31",timezone:"Asia/Taipei",preHeatPeriod:7,phases:[{id:"phase1",name:"預熱期",startDate:"2025-02-22",endDate:"2025-02-28",status:"completed"},{id:"phase2",name:"主要促銷期",startDate:"2025-03-01",endDate:"2025-03-25",status:"active"},{id:"phase3",name:"清倉期",startDate:"2025-03-26",endDate:"2025-03-31",status:"scheduled"}]},animations:{themeType:"seasonal",effectIntensity:"moderate",mobileOptimization:!0,performanceMode:"balanced"},discounts:{rules:[{id:"discount1",type:"percentage",value:20,minAmount:1e3,stackable:!0,targetProducts:["skincare","makeup"]}],stackingPolicy:"stackable",usageLimit:{perUser:3,total:1e4}},advertising:{adCampaigns:["ac001","ac002"],pushNotifications:!0,emailMarketing:!0,socialMediaPosts:["facebook","instagram","line"]},inventory:{reservedStockPercentage:15,priorityAllocation:!0,dynamicInventory:!0,oversellProtection:!0},budget:{totalBudget:5e5,spentBudget:125e3,projectedROI:3.2,actualROI:3.8},objectives:{primaryGoal:"sales",kpis:[{name:"conversion_rate",target:4.5,actual:5.2},{name:"roas",target:3,actual:3.8},{name:"new_customers",target:2e3,actual:2350}]},performance:{impressions:125e4,clicks:65e3,conversions:3380,revenue:19e5,ctr:5.2,conversionRate:5.2,cpa:37,roas:3.8},createdAt:"2024-12-15T08:00:00Z",updatedAt:"2025-01-15T10:30:00Z",createdBy:"admin",status:"active"},{id:"mc002",name:"母親節特惠",type:"festival",status:"scheduled",description:"母親節專屬美妝禮盒優惠",schedule:{startDate:"2025-05-01",endDate:"2025-05-12",timezone:"Asia/Taipei",preHeatPeriod:10,phases:[{id:"phase1",name:"預熱宣傳",startDate:"2025-04-21",endDate:"2025-04-30",status:"scheduled"},{id:"phase2",name:"正式促銷",startDate:"2025-05-01",endDate:"2025-05-12",status:"scheduled"}]},animations:{themeType:"traditional",effectIntensity:"intense",mobileOptimization:!0,performanceMode:"high_quality"},discounts:{rules:[{id:"discount2",type:"bundle",value:25,minAmount:1500,stackable:!1,targetProducts:["gift_sets","skincare"]}],stackingPolicy:"exclusive",usageLimit:{perUser:1,total:5e3}},budget:{totalBudget:3e5,spentBudget:0,projectedROI:3.5},objectives:{primaryGoal:"engagement",kpis:[{name:"gift_box_sales",target:1e3,actual:0},{name:"brand_awareness",target:15,actual:0}]},createdAt:"2025-01-10T08:00:00Z",updatedAt:"2025-01-10T08:00:00Z",createdBy:"admin",status:"scheduled"}];localStorage.setItem(this.storageKeys.campaigns,JSON.stringify(t))}if(!this.getAdCampaigns().length){const t=[{id:"ac001",campaignId:"mc001",name:"春季美妝節 - Facebook廣告",platform:{name:"facebook",accountId:"fb_act_12345",campaignId:"fb_campaign_001"},campaignType:"conversion",creatives:{images:["spring_makeup_banner.jpg","skincare_collection.jpg"],videos:["spring_tutorial.mp4"],texts:["春季限定！全館美妝8折起","新品上市，打造完美春日妝容"],callToActions:["立即購買","了解更多"]},targeting:{demographics:{age:{min:18,max:45},gender:["female"],interests:["beauty","skincare","makeup"]},geotargeting:{countries:["TW"],cities:["台北","台中","高雄"]}},budget:{dailyBudget:3e3,totalBudget:9e4,bidStrategy:"target_roas",targetROAS:3},delivery:{startDate:"2025-03-01",endDate:"2025-03-31",pacing:"standard"},status:"active",performance:{impressions:45e4,clicks:22500,conversions:1125,spend:67500,ctr:5,cpc:3,cpa:60,roas:3.2}},{id:"ac002",campaignId:"mc001",name:"春季美妝節 - Google Ads",platform:{name:"google_ads",accountId:"ga_act_67890",campaignId:"ga_campaign_002"},campaignType:"search",targeting:{keywords:["春季美妝","護膚品推薦","彩妝新品"],demographics:{age:{min:20,max:50},gender:["female"]}},budget:{dailyBudget:2e3,totalBudget:6e4,bidStrategy:"target_cpa",targetCPA:45},status:"active",performance:{impressions:18e4,clicks:14400,conversions:864,spend:43200,ctr:8,cpc:3,cpa:50,roas:2.8}}];localStorage.setItem(this.storageKeys.adCampaigns,JSON.stringify(t))}if(!this.getAudiences().length){const t=[{id:"aud001",name:"高價值客戶",description:"過去12個月消費金額超過10000元的客戶",type:"behavioral",criteria:{behavioral:{purchaseHistory:{totalSpent:{min:1e4},frequency:{min:3},lastPurchase:{days:90}},engagementLevel:"high"}},size:{estimated:1250,actual:1180,lastUpdated:"2025-01-15T10:00:00Z"},refreshFrequency:"weekly",campaigns:["mc001"],performance:{averageCTR:8.5,averageConversionRate:12.3,averageCPA:25,totalRevenue:285e4}},{id:"aud002",name:"新客戶",description:"註冊時間少於30天的新用戶",type:"demographic",criteria:{behavioral:{customerLifecycleStage:"new",registrationDate:{days:30}}},size:{estimated:2800,actual:2650,lastUpdated:"2025-01-15T10:00:00Z"},refreshFrequency:"daily",campaigns:["mc001","mc002"],performance:{averageCTR:6.2,averageConversionRate:3.8,averageCPA:85,totalRevenue:45e4}},{id:"aud003",name:"彩妝愛好者",description:"主要購買彩妝產品的客戶群",type:"psychographic",criteria:{behavioral:{purchaseHistory:{categories:["makeup","cosmetics"],frequency:{min:2}}},psychographic:{interests:["makeup","beauty_trends","color_cosmetics"]}},size:{estimated:3200,actual:3180,lastUpdated:"2025-01-15T10:00:00Z"},refreshFrequency:"weekly",campaigns:["mc001"],performance:{averageCTR:7.8,averageConversionRate:8.9,averageCPA:45,totalRevenue:168e4}}];localStorage.setItem(this.storageKeys.audiences,JSON.stringify(t))}if(!this.getCreativeAssets().length){const t=[{id:"ca001",name:"春季美妝主視覺",type:"image",file:{url:"/assets/creatives/spring_main_visual.jpg",size:2048576,dimensions:{width:1200,height:800},format:"jpg"},variants:[{platform:"facebook",placement:"feed",dimensions:{width:1200,height:628},url:"/assets/creatives/spring_main_visual_fb.jpg"},{platform:"instagram",placement:"story",dimensions:{width:1080,height:1920},url:"/assets/creatives/spring_main_visual_ig_story.jpg"}],tags:["spring","makeup","seasonal","promotion"],category:"campaign_banner",brand:"marelle",usage:{campaigns:["mc001"],platforms:["facebook","instagram"],performance:{impressions:58e4,clicks:23200,ctr:4,conversions:1392,conversionRate:6}},compliance:{approved:!0,approvedBy:"marketing_manager",approvedAt:"2025-02-15T09:00:00Z",issues:[]},version:"1.0",isActive:!0,createdAt:"2025-02-10T08:00:00Z",createdBy:"designer"},{id:"ca002",name:"母親節禮盒廣告影片",type:"video",file:{url:"/assets/creatives/mothers_day_gift_video.mp4",size:15728640,dimensions:{width:1920,height:1080},format:"mp4",duration:30},variants:[{platform:"facebook",placement:"video_feed",dimensions:{width:1280,height:720},url:"/assets/creatives/mothers_day_gift_video_fb.mp4"},{platform:"youtube",placement:"video_ad",dimensions:{width:1920,height:1080},url:"/assets/creatives/mothers_day_gift_video_yt.mp4"}],tags:["mothers_day","gift_box","emotional","family"],category:"video_ad",brand:"marelle",usage:{campaigns:["mc002"],platforms:["facebook","youtube"],performance:{impressions:0,clicks:0,ctr:0,conversions:0,conversionRate:0}},compliance:{approved:!0,approvedBy:"marketing_manager",approvedAt:"2025-01-20T14:00:00Z",issues:[]},version:"1.0",isActive:!0,createdAt:"2025-01-15T08:00:00Z",createdBy:"video_producer"}];localStorage.setItem(this.storageKeys.creativeAssets,JSON.stringify(t))}if(!this.getAutomationRules().length){const t=[{id:"ar001",name:"購物車遺棄挽回",type:"cart_abandonment",status:"active",trigger:{event:"cart_abandoned",conditions:{cartValue:{min:500},timeDelay:15}},actions:[{type:"send_email",delay:0,template:"cart_abandonment_reminder",discount:{type:"percentage",value:10,validityHours:24}},{type:"send_push_notification",delay:60,message:"您的購物車還有商品等待結帳唷！"},{type:"show_retargeting_ad",delay:120,platforms:["facebook","google"]}],performance:{triggered:2850,completed:570,conversionRate:20,revenue:285e3},createdAt:"2024-12-01T08:00:00Z",createdBy:"marketing_automation"},{id:"ar002",name:"生日祝賀與優惠",type:"birthday_campaign",status:"active",trigger:{event:"birthday_approaching",conditions:{advanceDays:7}},actions:[{type:"send_email",delay:0,template:"birthday_wishes",discount:{type:"percentage",value:20,validityDays:30}},{type:"send_sms",delay:0,message:"生日快樂！專屬生日禮已為您準備好"}],performance:{triggered:450,completed:315,conversionRate:70,revenue:189e3},createdAt:"2024-11-15T08:00:00Z",createdBy:"crm_manager"},{id:"ar003",name:"客戶流失挽回",type:"win_back",status:"active",trigger:{event:"customer_inactive",conditions:{inactiveDays:60,previousPurchases:{min:2}}},actions:[{type:"send_email",delay:0,template:"win_back_offer",discount:{type:"percentage",value:25,validityDays:14}},{type:"create_personalized_offer",delay:0,basedOn:"purchase_history"}],performance:{triggered:680,completed:102,conversionRate:15,revenue:153e3},createdAt:"2024-10-20T08:00:00Z",createdBy:"retention_specialist"}];localStorage.setItem(this.storageKeys.automationRules,JSON.stringify(t))}}getCampaigns(){const t=localStorage.getItem(this.storageKeys.campaigns);return t?JSON.parse(t):[]}getCampaignById(t){return this.getCampaigns().find(a=>a.id===t)}createCampaign(t){const r=this.getCampaigns(),a={id:`mc${String(Date.now()).slice(-6)}`,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:t.status||"draft"};return r.push(a),localStorage.setItem(this.storageKeys.campaigns,JSON.stringify(r)),a}updateCampaign(t,r){const a=this.getCampaigns(),n=a.findIndex(i=>i.id===t);return n!==-1?(a[n]={...a[n],...r,updatedAt:new Date().toISOString()},localStorage.setItem(this.storageKeys.campaigns,JSON.stringify(a)),a[n]):null}deleteCampaign(t){const a=this.getCampaigns().filter(n=>n.id!==t);return localStorage.setItem(this.storageKeys.campaigns,JSON.stringify(a)),!0}updateCampaignStatus(t,r){return this.updateCampaign(t,{status:r,updatedAt:new Date().toISOString()})}getAdCampaigns(){const t=localStorage.getItem(this.storageKeys.adCampaigns);return t?JSON.parse(t):[]}getAdCampaignById(t){return this.getAdCampaigns().find(a=>a.id===t)}getAdCampaignsByCampaignId(t){return this.getAdCampaigns().filter(a=>a.campaignId===t)}createAdCampaign(t){const r=this.getAdCampaigns(),a={id:`ac${String(Date.now()).slice(-6)}`,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:t.status||"draft"};return r.push(a),localStorage.setItem(this.storageKeys.adCampaigns,JSON.stringify(r)),a}updateAdCampaign(t,r){const a=this.getAdCampaigns(),n=a.findIndex(i=>i.id===t);return n!==-1?(a[n]={...a[n],...r,updatedAt:new Date().toISOString()},localStorage.setItem(this.storageKeys.adCampaigns,JSON.stringify(a)),a[n]):null}deleteAdCampaign(t){const a=this.getAdCampaigns().filter(n=>n.id!==t);return localStorage.setItem(this.storageKeys.adCampaigns,JSON.stringify(a)),!0}getAudiences(){const t=localStorage.getItem(this.storageKeys.audiences);return t?JSON.parse(t):[]}getAudienceById(t){return this.getAudiences().find(a=>a.id===t)}createAudience(t){const r=this.getAudiences(),a={id:`aud${String(Date.now()).slice(-6)}`,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r.push(a),localStorage.setItem(this.storageKeys.audiences,JSON.stringify(r)),a}updateAudience(t,r){const a=this.getAudiences(),n=a.findIndex(i=>i.id===t);return n!==-1?(a[n]={...a[n],...r,updatedAt:new Date().toISOString()},localStorage.setItem(this.storageKeys.audiences,JSON.stringify(a)),a[n]):null}deleteAudience(t){const a=this.getAudiences().filter(n=>n.id!==t);return localStorage.setItem(this.storageKeys.audiences,JSON.stringify(a)),!0}getCreativeAssets(){const t=localStorage.getItem(this.storageKeys.creativeAssets);return t?JSON.parse(t):[]}getCreativeAssetById(t){return this.getCreativeAssets().find(a=>a.id===t)}createCreativeAsset(t){const r=this.getCreativeAssets(),a={id:`ca${String(Date.now()).slice(-6)}`,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0};return r.push(a),localStorage.setItem(this.storageKeys.creativeAssets,JSON.stringify(r)),a}updateCreativeAsset(t,r){const a=this.getCreativeAssets(),n=a.findIndex(i=>i.id===t);return n!==-1?(a[n]={...a[n],...r,updatedAt:new Date().toISOString()},localStorage.setItem(this.storageKeys.creativeAssets,JSON.stringify(a)),a[n]):null}deleteCreativeAsset(t){const a=this.getCreativeAssets().filter(n=>n.id!==t);return localStorage.setItem(this.storageKeys.creativeAssets,JSON.stringify(a)),!0}getAutomationRules(){const t=localStorage.getItem(this.storageKeys.automationRules);return t?JSON.parse(t):[]}getAutomationRuleById(t){return this.getAutomationRules().find(a=>a.id===t)}createAutomationRule(t){const r=this.getAutomationRules(),a={id:`ar${String(Date.now()).slice(-6)}`,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:t.status||"draft"};return r.push(a),localStorage.setItem(this.storageKeys.automationRules,JSON.stringify(r)),a}updateAutomationRule(t,r){const a=this.getAutomationRules(),n=a.findIndex(i=>i.id===t);return n!==-1?(a[n]={...a[n],...r,updatedAt:new Date().toISOString()},localStorage.setItem(this.storageKeys.automationRules,JSON.stringify(a)),a[n]):null}deleteAutomationRule(t){const a=this.getAutomationRules().filter(n=>n.id!==t);return localStorage.setItem(this.storageKeys.automationRules,JSON.stringify(a)),!0}getMarketingAnalytics(){const t=this.getCampaigns(),r=this.getAdCampaigns(),a=this.getAudiences(),n=this.getAutomationRules(),i=t.reduce((w,N)=>{var u;return w+(((u=N.budget)==null?void 0:u.totalBudget)||0)},0),l=t.reduce((w,N)=>{var u;return w+(((u=N.budget)==null?void 0:u.spentBudget)||0)},0),o=t.reduce((w,N)=>{var u;return w+(((u=N.performance)==null?void 0:u.revenue)||0)},0),c=t.reduce((w,N)=>{var u;return w+(((u=N.performance)==null?void 0:u.impressions)||0)},0),d=t.reduce((w,N)=>{var u;return w+(((u=N.performance)==null?void 0:u.clicks)||0)},0),x=t.reduce((w,N)=>{var u;return w+(((u=N.performance)==null?void 0:u.conversions)||0)},0),p=t.filter(w=>w.status==="active"),f=c>0?d/c*100:0,y=d>0?x/d*100:0,b=l>0?o/l:0,v=x>0?l/x:0,S=r.reduce((w,N)=>{var h,g,j,T;const u=N.platform.name;return w[u]||(w[u]={platform:u,campaigns:0,impressions:0,clicks:0,conversions:0,spend:0,revenue:0}),w[u].campaigns++,w[u].impressions+=((h=N.performance)==null?void 0:h.impressions)||0,w[u].clicks+=((g=N.performance)==null?void 0:g.clicks)||0,w[u].conversions+=((j=N.performance)==null?void 0:j.conversions)||0,w[u].spend+=((T=N.performance)==null?void 0:T.spend)||0,w},{}),_=n.reduce((w,N)=>{var u,h,g;return w.totalTriggered+=((u=N.performance)==null?void 0:u.triggered)||0,w.totalCompleted+=((h=N.performance)==null?void 0:h.completed)||0,w.totalRevenue+=((g=N.performance)==null?void 0:g.revenue)||0,w},{totalTriggered:0,totalCompleted:0,totalRevenue:0});return{overview:{totalCampaigns:t.length,activeCampaigns:p.length,totalBudget:i,totalSpent:l,budgetUtilization:i>0?l/i*100:0,totalRevenue:o,totalROAS:b,totalImpressions:c,totalClicks:d,totalConversions:x,avgCTR:f,avgConversionRate:y,avgCPA:v},platformPerformance:Object.values(S),audienceInsights:{totalAudiences:a.length,averageAudienceSize:a.reduce((w,N)=>{var u;return w+(((u=N.size)==null?void 0:u.actual)||0)},0)/a.length||0,topPerformingAudience:a.sort((w,N)=>{var u,h;return(((u=N.performance)==null?void 0:u.totalRevenue)||0)-(((h=w.performance)==null?void 0:h.totalRevenue)||0)})[0]},automationInsights:{totalRules:n.length,activeRules:n.filter(w=>w.status==="active").length,..._,automationConversionRate:_.totalTriggered>0?_.totalCompleted/_.totalTriggered*100:0}}}getTrendData(t=30){const r=[],a=new Date;for(let n=t-1;n>=0;n--){const i=new Date(a);i.setDate(i.getDate()-n);const l=1e3,o=.8+Math.random()*.4,c=1+.3*Math.sin(n/t*Math.PI*2);r.push({date:i.toISOString().split("T")[0],impressions:Math.floor(l*50*o*c),clicks:Math.floor(l*2.5*o*c),conversions:Math.floor(l*.125*o*c),revenue:Math.floor(l*25*o*c),spend:Math.floor(l*8*o*c)})}return r}getPersonalizedRecommendations(t,r={}){return[{type:"product",products:[{id:"p001",name:"保濕精華液",score:.95,reason:"基於購買歷史"},{id:"p002",name:"抗老面霜",score:.88,reason:"相似用戶喜好"},{id:"p003",name:"維他命C精華",score:.82,reason:"季節推薦"}]},{type:"campaign",campaigns:[{id:"mc001",name:"春季美妝節",score:.92,reason:"符合興趣偏好"},{id:"mc002",name:"母親節特惠",score:.75,reason:"時節相關"}]},{type:"content",content:[{id:"c001",title:"春季護膚指南",type:"article",score:.89},{id:"c002",title:"彩妝教學影片",type:"video",score:.84}]}]}getDynamicPricingRecommendation(t,r=null){const n=.9+Math.random()*.2,i=.95+Math.random()*.1,l=1,o=r?.95+Math.random()*.1:1,c=Math.round(1200*n*i*l*o);return{productId:t,basePrice:1200,recommendedPrice:c,factors:{demand:n,competitor:i,seasonal:l,personal:o},confidence:.85,expectedUplift:Math.random()*10+5}}getCustomerSegmentAnalysis(){return{segments:[{name:"高價值客戶",size:1180,percentage:8.5,avgSpend:2850,avgFrequency:4.2,lifetimeValue:12e3,characteristics:["高消費","忠誠度高","品質導向"]},{name:"新客戶",size:2650,percentage:19.1,avgSpend:650,avgFrequency:1.2,lifetimeValue:1500,characteristics:["價格敏感","需要引導","潛力客戶"]},{name:"彩妝愛好者",size:3180,percentage:22.9,avgSpend:1450,avgFrequency:2.8,lifetimeValue:5200,characteristics:["品類專精","社群活躍","影響者"]},{name:"護膚專家",size:2890,percentage:20.8,avgSpend:1850,avgFrequency:3.5,lifetimeValue:7800,characteristics:["成分關注","長期投資","專業知識"]},{name:"偶爾購買者",size:3980,percentage:28.7,avgSpend:450,avgFrequency:.8,lifetimeValue:800,characteristics:["機會性購買","促銷敏感","需要激活"]}],insights:["高價值客戶雖然只佔8.5%，但貢獻了35%的總收入","新客戶轉換率有待提升，建議加強新手引導","彩妝愛好者具有較高的社群影響力，適合推薦計畫","偶爾購買者群體最大，是激活的重要目標"]}}}const wt=new fM,yM=()=>{var w,N,u,h,g,j,T,C,E,R,k,O,P,$,I,L,D,M,A,V,B,z;const[s,t]=m.useState({}),[r,a]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState([]),[c,d]=m.useState("30d");m.useEffect(()=>{x()},[c]);const x=()=>{const F=wt.getMarketingAnalytics(),W=wt.getCampaigns(),Y=wt.getAdCampaigns(),ne=wt.getTrendData(c==="7d"?7:30);t(F),a(W),i(Y),o(ne)},p=(F,W)=>{wt.updateCampaignStatus(F,W),x()},f=F=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(F||0),y=F=>F>=1e6?(F/1e6).toFixed(1)+"M":F>=1e3?(F/1e3).toFixed(1)+"K":(F==null?void 0:F.toLocaleString())||"0",b=F=>`${(F||0).toFixed(1)}%`,v=F=>({active:"text-green-600 bg-green-50",scheduled:"text-blue-600 bg-blue-50",paused:"text-yellow-600 bg-yellow-50",completed:"text-gray-600 bg-gray-50",draft:"text-purple-600 bg-purple-50",cancelled:"text-red-600 bg-red-50"})[F]||"text-gray-600 bg-gray-50",S=F=>({active:"進行中",scheduled:"已排程",paused:"已暫停",completed:"已完成",draft:"草稿",cancelled:"已取消"})[F]||F,_=F=>({active:e.jsx(rr,{className:"h-4 w-4"}),scheduled:e.jsx(Ir,{className:"h-4 w-4"}),paused:e.jsx(Ba,{className:"h-4 w-4"}),completed:e.jsx(of,{className:"h-4 w-4"}),draft:e.jsx(ar,{className:"h-4 w-4"})})[F]||e.jsx(ar,{className:"h-4 w-4"});return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"行銷管理總覽"}),e.jsx("p",{className:"text-gray-600",children:"統一管理檔期活動、廣告投放與客戶關係"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(xe,{options:[{value:"7d",label:"過去7天"},{value:"30d",label:"過去30天"}],value:c,onChange:d,placeholder:"選擇時間範圍",className:"min-w-[140px]"}),e.jsxs("button",{className:"bg-[#cc824d] text-white px-4 py-2 rounded-lg hover:bg-[#b8753f] transition-colors flex items-center",children:[e.jsx(jn,{className:"h-5 w-5 mr-2"}),"即時警報"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(We,{className:"h-8 w-8 text-[#cc824d]"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"總收入"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f((w=s.overview)==null?void 0:w.totalRevenue)}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Re,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["+",b(15.2)]}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"較上期"})]})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(oe,{className:"h-8 w-8 text-[#cc824d]"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"ROAS"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(((N=s.overview)==null?void 0:N.totalROAS)||0).toFixed(1),"x"]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Re,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["+",b(8.7)]}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"較上期"})]})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ee,{className:"h-8 w-8 text-[#cc824d]"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"總曝光數"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y((u=s.overview)==null?void 0:u.totalImpressions)}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Re,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["+",b(23.1)]}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"較上期"})]})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(gs,{className:"h-8 w-8 text-[#cc824d]"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"轉換率"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b((h=s.overview)==null?void 0:h.avgConversionRate)}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(wa,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["-",b(2.3)]}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"較上期"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"進行中檔期活動"}),e.jsx(Vb,{className:"h-6 w-6 text-[#cc824d]"})]}),e.jsx("div",{className:"space-y-4",children:r.filter(F=>F.status==="active").slice(0,3).map(F=>{var W;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:F.name}),e.jsx("p",{className:"text-sm text-gray-500",children:F.description}),e.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${v(F.status)}`,children:[_(F.status),e.jsx("span",{className:"ml-1",children:S(F.status)})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ROAS: ",(((W=F.budget)==null?void 0:W.actualROI)||0).toFixed(1),"x"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>p(F.id,F.status==="active"?"paused":"active"),className:"p-2 text-gray-400 hover:text-[#cc824d] transition-colors",children:F.status==="active"?e.jsx(Ba,{className:"h-5 w-5"}):e.jsx(rr,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-[#cc824d] transition-colors",children:e.jsx(ar,{className:"h-5 w-5"})})]})]},F.id)})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"平台廣告表現"}),e.jsx(oe,{className:"h-6 w-6 text-[#cc824d]"})]}),e.jsx("div",{className:"space-y-4",children:(g=s.platformPerformance)==null?void 0:g.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-[#cc824d] rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:F.platform.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-medium text-gray-900 capitalize",children:F.platform.replace("_"," ")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[F.campaigns," 個廣告系列"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:f(F.spend)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["CTR: ",F.clicks&&F.impressions?b(F.clicks/F.impressions*100):"0%"]})]})]},F.platform))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"受眾洞察"}),e.jsx(dt,{className:"h-6 w-6 text-[#cc824d]"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"總受眾數"}),e.jsx("span",{className:"font-semibold",children:((j=s.audienceInsights)==null?void 0:j.totalAudiences)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均受眾規模"}),e.jsx("span",{className:"font-semibold",children:y((T=s.audienceInsights)==null?void 0:T.averageAudienceSize)})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"最佳表現受眾"}),e.jsx("p",{className:"text-sm text-gray-900",children:((E=(C=s.audienceInsights)==null?void 0:C.topPerformingAudience)==null?void 0:E.name)||"暫無數據"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["收入: ",f(((O=(k=(R=s.audienceInsights)==null?void 0:R.topPerformingAudience)==null?void 0:k.performance)==null?void 0:O.totalRevenue)||0)]})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"自動化表現"}),e.jsx(ar,{className:"h-6 w-6 text-[#cc824d]"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"啟用規則"}),e.jsx("span",{className:"font-semibold",children:((P=s.automationInsights)==null?void 0:P.activeRules)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"觸發次數"}),e.jsx("span",{className:"font-semibold",children:y(($=s.automationInsights)==null?void 0:$.totalTriggered)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"轉換率"}),e.jsx("span",{className:"font-semibold text-green-600",children:b((I=s.automationInsights)==null?void 0:I.automationConversionRate)})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"自動化收入"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:f((L=s.automationInsights)==null?void 0:L.totalRevenue)})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"預算使用狀況"}),e.jsx(We,{className:"h-6 w-6 text-[#cc824d]"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"總預算"}),e.jsx("span",{className:"font-semibold",children:f((D=s.overview)==null?void 0:D.totalBudget)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#cc824d] h-2 rounded-full",style:{width:`${Math.min(((M=s.overview)==null?void 0:M.budgetUtilization)||0,100)}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"已使用"}),e.jsx("span",{className:"text-sm font-medium",children:b((A=s.overview)==null?void 0:A.budgetUtilization)})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"已花費"}),e.jsx("span",{className:"font-semibold",children:f((V=s.overview)==null?void 0:V.totalSpent)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"剩餘預算"}),e.jsx("span",{className:"font-semibold text-green-600",children:f((((B=s.overview)==null?void 0:B.totalBudget)||0)-(((z=s.overview)==null?void 0:z.totalSpent)||0))})]})]})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"快速操作"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{className:"flex items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Vb,{className:"h-6 w-6 text-[#cc824d] mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"建立檔期"})]}),e.jsxs("button",{className:"flex items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(oe,{className:"h-6 w-6 text-[#cc824d] mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"廣告投放"})]}),e.jsxs("button",{className:"flex items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(dt,{className:"h-6 w-6 text-[#cc824d] mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"受眾分析"})]}),e.jsxs("button",{className:"flex items-center justify-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(ar,{className:"h-6 w-6 text-[#cc824d] mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"自動化設定"})]})]})]})]})})},bM=()=>{const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(""),[l,o]=m.useState("all"),[c,d]=m.useState("all"),[x,p]=m.useState(!1),[f,y]=m.useState(null),[b,v]=m.useState({name:"",type:"seasonal",description:"",startDate:"",endDate:"",budget:0,objectives:{primaryGoal:"sales",kpis:[]}});m.useEffect(()=>{S()},[]),m.useEffect(()=>{_()},[s,n,l,c]);const S=()=>{const k=wt.getCampaigns();t(k)},_=()=>{let k=s;n&&(k=k.filter(O=>O.name.toLowerCase().includes(n.toLowerCase())||O.description.toLowerCase().includes(n.toLowerCase()))),l!=="all"&&(k=k.filter(O=>O.status===l)),c!=="all"&&(k=k.filter(O=>O.type===c)),a(k)},w=()=>{const k={...b,schedule:{startDate:b.startDate,endDate:b.endDate,timezone:"Asia/Taipei",preHeatPeriod:7,phases:[{id:"main",name:"主要促銷期",startDate:b.startDate,endDate:b.endDate,status:"scheduled"}]},budget:{totalBudget:b.budget,spentBudget:0,projectedROI:3},animations:{themeType:"promotional",effectIntensity:"moderate",mobileOptimization:!0,performanceMode:"balanced"},discounts:{rules:[],stackingPolicy:"stackable",usageLimit:{perUser:5,total:1e3}},advertising:{adCampaigns:[],pushNotifications:!0,emailMarketing:!0,socialMediaPosts:["facebook","instagram"]},inventory:{reservedStockPercentage:10,priorityAllocation:!1,dynamicInventory:!0,oversellProtection:!0},performance:{impressions:0,clicks:0,conversions:0,revenue:0,ctr:0,conversionRate:0,cpa:0,roas:0},createdBy:"admin",status:"draft"};wt.createCampaign(k),S(),p(!1),v({name:"",type:"seasonal",description:"",startDate:"",endDate:"",budget:0,objectives:{primaryGoal:"sales",kpis:[]}})},N=(k,O)=>{wt.updateCampaignStatus(k,O),S()},u=k=>{window.confirm("確定要刪除此檔期活動嗎？")&&(wt.deleteCampaign(k),S())},h=k=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(k||0),g=k=>k?new Date(k).toLocaleDateString("zh-TW"):"",j=k=>({active:"text-green-600 bg-green-50 border-green-200",scheduled:"text-blue-600 bg-blue-50 border-blue-200",paused:"text-yellow-600 bg-yellow-50 border-yellow-200",completed:"text-gray-600 bg-gray-50 border-gray-200",draft:"text-purple-600 bg-purple-50 border-purple-200",cancelled:"text-red-600 bg-red-50 border-red-200"})[k]||"text-gray-600 bg-gray-50 border-gray-200",T=k=>({active:"進行中",scheduled:"已排程",paused:"已暫停",completed:"已完成",draft:"草稿",cancelled:"已取消"})[k]||k,C=k=>({festival:"節慶活動",seasonal:"季節性",product_launch:"新品發佈",clearance:"清倉促銷",brand_collab:"品牌合作",flash_sale:"限時搶購"})[k]||k,E=k=>({active:e.jsx(rr,{className:"h-4 w-4"}),scheduled:e.jsx(Ir,{className:"h-4 w-4"}),paused:e.jsx(Ba,{className:"h-4 w-4"}),completed:e.jsx($o,{className:"h-4 w-4"}),draft:e.jsx(_e,{className:"h-4 w-4"})})[k]||e.jsx(be,{className:"h-4 w-4"}),R=k=>{if(!k)return null;const O=new Date,$=new Date(k)-O;return Math.ceil($/(1e3*60*60*24))};return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"檔期活動管理"}),e.jsx("p",{className:"text-gray-600",children:"創建和管理行銷檔期活動"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-[#cc824d] text-white px-6 py-3 rounded-lg hover:bg-[#b8753f] transition-colors flex items-center font-medium",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),"建立新檔期"]})]}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 mb-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("select",{value:l,onChange:k=>o(k.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"所有狀態"}),e.jsx("option",{value:"active",children:"進行中"}),e.jsx("option",{value:"scheduled",children:"已排程"}),e.jsx("option",{value:"paused",children:"已暫停"}),e.jsx("option",{value:"completed",children:"已完成"}),e.jsx("option",{value:"draft",children:"草稿"})]}),e.jsxs("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"所有類型"}),e.jsx("option",{value:"festival",children:"節慶活動"}),e.jsx("option",{value:"seasonal",children:"季節性"}),e.jsx("option",{value:"product_launch",children:"新品發佈"}),e.jsx("option",{value:"clearance",children:"清倉促銷"}),e.jsx("option",{value:"brand_collab",children:"品牌合作"}),e.jsx("option",{value:"flash_sale",children:"限時搶購"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(gs,{className:"h-5 w-5 mr-2"}),"共 ",r.length," 個檔期"]})]})}),e.jsx("div",{className:"space-y-4",children:r.map(k=>{var O,P,$,I,L,D,M,A,V,B,z,F,W,Y,ne,ve,U;return e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:k.name}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${j(k.status)}`,children:[E(k.status),e.jsx("span",{className:"ml-1",children:T(k.status)})]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700 border border-gray-200",children:[e.jsx(_a,{className:"h-4 w-4 mr-1"}),C(k.type)]})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:k.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Ir,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"檔期時間"}),e.jsxs("p",{children:[g((O=k.schedule)==null?void 0:O.startDate)," - ",g((P=k.schedule)==null?void 0:P.endDate)]}),R(($=k.schedule)==null?void 0:$.endDate)!==null&&e.jsx("p",{className:"text-xs text-gray-500",children:R((I=k.schedule)==null?void 0:I.endDate)>0?`剩餘 ${R((L=k.schedule)==null?void 0:L.endDate)} 天`:"已結束"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(We,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"預算使用"}),e.jsxs("p",{children:[h((D=k.budget)==null?void 0:D.spentBudget)," / ",h((M=k.budget)==null?void 0:M.totalBudget)]}),e.jsx("p",{className:"text-xs text-gray-500",children:(A=k.budget)!=null&&A.totalBudget?`使用率 ${((((V=k.budget)==null?void 0:V.spentBudget)||0)/k.budget.totalBudget*100).toFixed(1)}%`:"未設定預算"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(oe,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"表現指標"}),e.jsxs("p",{children:["ROAS: ",(((B=k.budget)==null?void 0:B.actualROI)||((z=k.budget)==null?void 0:z.projectedROI)||0).toFixed(1),"x"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["轉換率: ",(((F=k.performance)==null?void 0:F.conversionRate)||0).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(dt,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"目標設定"}),e.jsx("p",{children:((W=k.objectives)==null?void 0:W.primaryGoal)==="sales"?"銷售導向":((Y=k.objectives)==null?void 0:Y.primaryGoal)==="engagement"?"互動導向":((ne=k.objectives)==null?void 0:ne.primaryGoal)==="awareness"?"認知導向":"其他"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((U=(ve=k.objectives)==null?void 0:ve.kpis)==null?void 0:U.length)||0," 個KPI指標"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[k.status==="active"&&e.jsx("button",{onClick:()=>N(k.id,"paused"),className:"p-2 text-gray-400 hover:text-yellow-600 transition-colors",title:"暫停檔期",children:e.jsx(Ba,{className:"h-5 w-5"})}),k.status==="paused"&&e.jsx("button",{onClick:()=>N(k.id,"active"),className:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"恢復檔期",children:e.jsx(rr,{className:"h-5 w-5"})}),(k.status==="draft"||k.status==="scheduled")&&e.jsx("button",{onClick:()=>N(k.id,"active"),className:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"啟動檔期",children:e.jsx(rr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>y(k),className:"p-2 text-gray-400 hover:text-[#cc824d] transition-colors",title:"編輯檔期",children:e.jsx(_e,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>u(k.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"刪除檔期",children:e.jsx($e,{className:"h-5 w-5"})})]})]})},k.id)})}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ir,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"沒有找到檔期活動"}),e.jsx("p",{className:"text-gray-600 mb-4",children:n||l!=="all"||c!=="all"?"請調整搜尋條件或篩選設定":"開始建立您的第一個檔期活動"}),e.jsx("button",{onClick:()=>p(!0),className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b8753f] transition-colors",children:"建立新檔期"})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"建立新檔期活動"}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"檔期名稱"}),e.jsx("input",{type:"text",value:b.name,onChange:k=>v({...b,name:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"輸入檔期活動名稱"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"檔期類型"}),e.jsxs("select",{value:b.type,onChange:k=>v({...b,type:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"seasonal",children:"季節性"}),e.jsx("option",{value:"festival",children:"節慶活動"}),e.jsx("option",{value:"product_launch",children:"新品發佈"}),e.jsx("option",{value:"clearance",children:"清倉促銷"}),e.jsx("option",{value:"brand_collab",children:"品牌合作"}),e.jsx("option",{value:"flash_sale",children:"限時搶購"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"檔期描述"}),e.jsx("textarea",{value:b.description,onChange:k=>v({...b,description:k.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"描述檔期活動的目標和內容"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"開始日期"}),e.jsx("input",{type:"date",value:b.startDate,onChange:k=>v({...b,startDate:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"結束日期"}),e.jsx("input",{type:"date",value:b.endDate,onChange:k=>v({...b,endDate:k.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"預算金額"}),e.jsx("input",{type:"number",value:b.budget,onChange:k=>v({...b,budget:Number(k.target.value)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"輸入預算金額"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"主要目標"}),e.jsxs("select",{value:b.objectives.primaryGoal,onChange:k=>v({...b,objectives:{...b.objectives,primaryGoal:k.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"sales",children:"銷售導向"}),e.jsx("option",{value:"engagement",children:"互動導向"}),e.jsx("option",{value:"awareness",children:"認知導向"}),e.jsx("option",{value:"retention",children:"客戶留存"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"取消"}),e.jsx("button",{onClick:w,disabled:!b.name||!b.startDate||!b.endDate,className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b8753f] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"建立檔期"})]})]})})]})})},vM=()=>{const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState([]),[c,d]=m.useState(""),[x,p]=m.useState("all"),[f,y]=m.useState("all"),[b,v]=m.useState(!1),[S,_]=m.useState(!1),[w,N]=m.useState("campaigns"),[u,h]=m.useState({name:"",campaignId:"",platform:{name:"facebook",accountId:"",campaignId:""},campaignType:"conversion",budget:{dailyBudget:1e3,bidStrategy:"target_roas",targetROAS:3},targeting:{demographics:{age:{min:18,max:65},gender:["all"],interests:[]},geotargeting:{countries:["TW"],cities:[]}},delivery:{startDate:"",endDate:"",pacing:"standard"}}),[g,j]=m.useState({name:"",type:"image",category:"campaign_banner",tags:[]});m.useEffect(()=>{T()},[]),m.useEffect(()=>{C()},[s,c,x,f]);const T=()=>{t(wt.getAdCampaigns()),a(wt.getCampaigns()),i(wt.getCreativeAssets())},C=()=>{let F=s;c&&(F=F.filter(W=>W.name.toLowerCase().includes(c.toLowerCase()))),x!=="all"&&(F=F.filter(W=>W.platform.name===x)),f!=="all"&&(F=F.filter(W=>W.status===f)),o(F)},E=()=>{const F={...u,creatives:{images:[],videos:[],texts:[],callToActions:["立即購買"]},tracking:{conversionEvents:["purchase","add_to_cart"],utmParameters:{source:u.platform.name,medium:"cpc",campaign:u.name.toLowerCase().replace(/\s+/g,"_")}},performance:{impressions:0,clicks:0,conversions:0,spend:0,ctr:0,cpc:0,cpa:0,roas:0},status:"draft"};wt.createAdCampaign(F),T(),v(!1),P()},R=()=>{const F={...g,file:{url:`/assets/creatives/${g.name.toLowerCase().replace(/\s+/g,"_")}.jpg`,size:1024e3,dimensions:{width:1200,height:800},format:g.type==="image"?"jpg":"mp4"},variants:[],brand:"marelle",usage:{campaigns:[],platforms:[],performance:{impressions:0,clicks:0,ctr:0,conversions:0,conversionRate:0}},compliance:{approved:!1,issues:[]},version:"1.0"};wt.createCreativeAsset(F),T(),_(!1),j({name:"",type:"image",category:"campaign_banner",tags:[]})},k=(F,W)=>{wt.updateAdCampaign(F,{status:W}),T()},O=F=>{window.confirm("確定要刪除此廣告系列嗎？")&&(wt.deleteAdCampaign(F),T())},P=()=>{h({name:"",campaignId:"",platform:{name:"facebook",accountId:"",campaignId:""},campaignType:"conversion",budget:{dailyBudget:1e3,bidStrategy:"target_roas",targetROAS:3},targeting:{demographics:{age:{min:18,max:65},gender:["all"],interests:[]},geotargeting:{countries:["TW"],cities:[]}},delivery:{startDate:"",endDate:"",pacing:"standard"}})},$=F=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(F||0),I=F=>F>=1e6?(F/1e6).toFixed(1)+"M":F>=1e3?(F/1e3).toFixed(1)+"K":(F==null?void 0:F.toLocaleString())||"0",L=F=>`${(F||0).toFixed(1)}%`,D=F=>({facebook:"📘",instagram:"📷",google_ads:"🔍",line:"💚",tiktok:"🎵",youtube:"📺"})[F]||"🌐",M=F=>({facebook:"Facebook",instagram:"Instagram",google_ads:"Google Ads",line:"LINE",tiktok:"TikTok",youtube:"YouTube"})[F]||F,A=F=>({active:"text-green-600 bg-green-50 border-green-200",paused:"text-yellow-600 bg-yellow-50 border-yellow-200",draft:"text-purple-600 bg-purple-50 border-purple-200",review:"text-blue-600 bg-blue-50 border-blue-200",approved:"text-green-600 bg-green-50 border-green-200",completed:"text-gray-600 bg-gray-50 border-gray-200"})[F]||"text-gray-600 bg-gray-50 border-gray-200",V=F=>({active:"投放中",paused:"已暫停",draft:"草稿",review:"審核中",approved:"已批准",completed:"已完成"})[F]||F,B=F=>{const W=r.find(Y=>Y.id===F);return W?W.name:"未關聯檔期"},z=()=>{const F={};return s.forEach(W=>{var ne,ve,U,ie;const Y=W.platform.name;F[Y]||(F[Y]={platform:Y,campaigns:0,totalSpend:0,totalImpressions:0,totalClicks:0,totalConversions:0}),F[Y].campaigns++,F[Y].totalSpend+=((ne=W.performance)==null?void 0:ne.spend)||0,F[Y].totalImpressions+=((ve=W.performance)==null?void 0:ve.impressions)||0,F[Y].totalClicks+=((U=W.performance)==null?void 0:U.clicks)||0,F[Y].totalConversions+=((ie=W.performance)==null?void 0:ie.conversions)||0}),Object.values(F).map(W=>({...W,avgCTR:W.totalImpressions>0?W.totalClicks/W.totalImpressions*100:0,avgCPC:W.totalClicks>0?W.totalSpend/W.totalClicks:0,avgROAS:W.totalSpend>0?W.totalConversions*1e3/W.totalSpend:0}))};return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"廣告投放管理"}),e.jsx("p",{className:"text-gray-600",children:"跨平台廣告系列與創意素材管理"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>_(!0),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center",children:[e.jsx(jo,{className:"h-5 w-5 mr-2"}),"上傳素材"]}),e.jsxs("button",{onClick:()=>v(!0),className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b8753f] transition-colors flex items-center",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),"建立廣告系列"]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>N("campaigns"),className:`py-2 px-1 border-b-2 font-medium text-sm ${w==="campaigns"?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"廣告系列管理"}),e.jsx("button",{onClick:()=>N("platforms"),className:`py-2 px-1 border-b-2 font-medium text-sm ${w==="platforms"?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"平台表現總覽"}),e.jsx("button",{onClick:()=>N("creatives"),className:`py-2 px-1 border-b-2 font-medium text-sm ${w==="creatives"?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"創意素材庫"})]})}),w==="campaigns"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 mb-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("select",{value:x,onChange:F=>p(F.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"所有平台"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"google_ads",children:"Google Ads"}),e.jsx("option",{value:"line",children:"LINE"}),e.jsx("option",{value:"tiktok",children:"TikTok"}),e.jsx("option",{value:"youtube",children:"YouTube"})]}),e.jsxs("select",{value:f,onChange:F=>y(F.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"所有狀態"}),e.jsx("option",{value:"active",children:"投放中"}),e.jsx("option",{value:"paused",children:"已暫停"}),e.jsx("option",{value:"draft",children:"草稿"}),e.jsx("option",{value:"review",children:"審核中"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:["共 ",l.length," 個廣告系列"]})]})}),e.jsx("div",{className:"space-y-4",children:l.map(F=>{var W,Y,ne,ve,U,ie,ce,qe,ye,Ye,is,ys;return e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:D(F.platform.name)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:F.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["關聯檔期: ",B(F.campaignId)]})]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${A(F.status)}`,children:V(F.status)}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700",children:M(F.platform.name)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"曝光數"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:I((W=F.performance)==null?void 0:W.impressions)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"點擊數"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:I((Y=F.performance)==null?void 0:Y.clicks)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["CTR: ",L((ne=F.performance)==null?void 0:ne.ctr)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"轉換數"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:I((ve=F.performance)==null?void 0:ve.conversions)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"花費"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:$((U=F.performance)==null?void 0:U.spend)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["CPC: ",$((ie=F.performance)==null?void 0:ie.cpc)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"ROAS"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[(((ce=F.performance)==null?void 0:ce.roas)||0).toFixed(1),"x"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["CPA: ",$((qe=F.performance)==null?void 0:qe.cpa)]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["預算: ",$((ye=F.budget)==null?void 0:ye.dailyBudget),"/日"]}),e.jsxs("span",{children:["出價策略: ",(Ye=F.budget)==null?void 0:Ye.bidStrategy]}),e.jsxs("span",{children:["投放期間: ",(is=F.delivery)==null?void 0:is.startDate," - ",(ys=F.delivery)==null?void 0:ys.endDate]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[F.status==="active"&&e.jsx("button",{onClick:()=>k(F.id,"paused"),className:"p-2 text-gray-400 hover:text-yellow-600 transition-colors",title:"暫停廣告",children:e.jsx(Ba,{className:"h-5 w-5"})}),F.status==="paused"&&e.jsx("button",{onClick:()=>k(F.id,"active"),className:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"恢復廣告",children:e.jsx(rr,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-[#cc824d] transition-colors",title:"編輯廣告",children:e.jsx(_e,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>O(F.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"刪除廣告",children:e.jsx($e,{className:"h-5 w-5"})})]})]})},F.id)})}),l.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"沒有找到廣告系列"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"開始建立您的第一個廣告系列"}),e.jsx("button",{onClick:()=>v(!0),className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b8753f] transition-colors",children:"建立廣告系列"})]})]}),w==="platforms"&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:z().map(F=>e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-3xl mr-3",children:D(F.platform)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:M(F.platform)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[F.campaigns," 個廣告系列"]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"總花費"}),e.jsx("span",{className:"font-semibold text-gray-900",children:$(F.totalSpend)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"總曝光"}),e.jsx("span",{className:"font-semibold text-gray-900",children:I(F.totalImpressions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"總點擊"}),e.jsx("span",{className:"font-semibold text-gray-900",children:I(F.totalClicks)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均CTR"}),e.jsx("span",{className:"font-semibold text-gray-900",children:L(F.avgCTR)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均CPC"}),e.jsx("span",{className:"font-semibold text-gray-900",children:$(F.avgCPC)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ROAS"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[F.avgROAS.toFixed(1),"x"]})]})]})]},F.platform))}),w==="creatives"&&e.jsx("div",{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(F=>{var W,Y,ne,ve,U,ie,ce;return e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"aspect-w-16 aspect-h-9 mb-4 bg-gray-100 rounded-lg flex items-center justify-center",children:F.type==="image"?e.jsx(jo,{className:"h-12 w-12 text-gray-400"}):e.jsx(rr,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:F.name}),e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[F.type," • ",(Y=(W=F.file)==null?void 0:W.dimensions)==null?void 0:Y.width,"x",(ve=(ne=F.file)==null?void 0:ne.dimensions)==null?void 0:ve.height]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:(U=F.tags)==null?void 0:U.slice(0,3).map(qe=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:qe},qe))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${(ie=F.compliance)!=null&&ie.approved?"bg-green-50 text-green-600":"bg-yellow-50 text-yellow-600"}`,children:(ce=F.compliance)!=null&&ce.approved?"已審核":"待審核"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-[#cc824d] transition-colors",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-[#cc824d] transition-colors",children:e.jsx(_e,{className:"h-4 w-4"})})]})]})]},F.id)})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"建立廣告系列"}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"廣告系列名稱"}),e.jsx("input",{type:"text",value:u.name,onChange:F=>h({...u,name:F.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"輸入廣告系列名稱"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"關聯檔期"}),e.jsxs("select",{value:u.campaignId,onChange:F=>h({...u,campaignId:F.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"",children:"選擇檔期活動"}),r.map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"投放平台"}),e.jsxs("select",{value:u.platform.name,onChange:F=>h({...u,platform:{...u.platform,name:F.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"google_ads",children:"Google Ads"}),e.jsx("option",{value:"line",children:"LINE"}),e.jsx("option",{value:"tiktok",children:"TikTok"}),e.jsx("option",{value:"youtube",children:"YouTube"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"廣告目標"}),e.jsxs("select",{value:u.campaignType,onChange:F=>h({...u,campaignType:F.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"conversion",children:"轉換"}),e.jsx("option",{value:"traffic",children:"流量"}),e.jsx("option",{value:"awareness",children:"認知"}),e.jsx("option",{value:"engagement",children:"互動"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"每日預算"}),e.jsx("input",{type:"number",value:u.budget.dailyBudget,onChange:F=>h({...u,budget:{...u.budget,dailyBudget:Number(F.target.value)}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"出價策略"}),e.jsxs("select",{value:u.budget.bidStrategy,onChange:F=>h({...u,budget:{...u.budget,bidStrategy:F.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"target_roas",children:"目標ROAS"}),e.jsx("option",{value:"target_cpa",children:"目標CPA"}),e.jsx("option",{value:"manual_cpc",children:"手動CPC"}),e.jsx("option",{value:"automatic",children:"自動出價"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"目標ROAS"}),e.jsx("input",{type:"number",step:"0.1",value:u.budget.targetROAS,onChange:F=>h({...u,budget:{...u.budget,targetROAS:Number(F.target.value)}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"開始日期"}),e.jsx("input",{type:"date",value:u.delivery.startDate,onChange:F=>h({...u,delivery:{...u.delivery,startDate:F.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"結束日期"}),e.jsx("input",{type:"date",value:u.delivery.endDate,onChange:F=>h({...u,delivery:{...u.delivery,endDate:F.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"取消"}),e.jsx("button",{onClick:E,disabled:!u.name||!u.delivery.startDate,className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b8753f] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"建立廣告系列"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"上傳創意素材"}),e.jsx("button",{onClick:()=>_(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"素材名稱"}),e.jsx("input",{type:"text",value:g.name,onChange:F=>j({...g,name:F.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"輸入素材名稱"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"素材類型"}),e.jsxs("select",{value:g.type,onChange:F=>j({...g,type:F.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"image",children:"圖片"}),e.jsx("option",{value:"video",children:"影片"}),e.jsx("option",{value:"gif",children:"GIF"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"素材分類"}),e.jsxs("select",{value:g.category,onChange:F=>j({...g,category:F.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"campaign_banner",children:"檔期橫幅"}),e.jsx("option",{value:"product_image",children:"商品圖片"}),e.jsx("option",{value:"video_ad",children:"廣告影片"}),e.jsx("option",{value:"social_post",children:"社群貼文"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"檔案上傳"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(jo,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"拖拽檔案至此處或點擊上傳"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"支援 JPG, PNG, GIF, MP4 格式"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"標籤 (以逗號分隔)"}),e.jsx("input",{type:"text",value:g.tags.join(", "),onChange:F=>j({...g,tags:F.target.value.split(",").map(W=>W.trim()).filter(W=>W)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"例如: 春季, 美妝, 促銷"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t",children:[e.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"取消"}),e.jsx("button",{onClick:R,disabled:!g.name,className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b8753f] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"上傳素材"})]})]})})]})})},jM=()=>{var P,$;const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState({}),[l,o]=m.useState("audiences"),[c,d]=m.useState(""),[x,p]=m.useState("all"),[f,y]=m.useState(!1),[b,v]=m.useState({name:"",description:"",type:"behavioral",criteria:{demographics:{age:{min:18,max:65},gender:["all"]},behavioral:{purchaseHistory:{totalSpent:{min:0},frequency:{min:1}},engagementLevel:"all"},geographic:{countries:["TW"],cities:[]},psychographic:{interests:[],lifestyle:[]}},refreshFrequency:"weekly"});m.useEffect(()=>{S()},[]),m.useEffect(()=>{_()},[s,c,x]);const S=()=>{t(wt.getAudiences()),i(wt.getCustomerSegmentAnalysis())},_=()=>{let I=s;c&&(I=I.filter(L=>L.name.toLowerCase().includes(c.toLowerCase())||L.description.toLowerCase().includes(c.toLowerCase()))),x!=="all"&&(I=I.filter(L=>L.type===x)),a(I)},w=()=>{const I={...b,size:{estimated:Math.floor(Math.random()*5e3)+500,actual:Math.floor(Math.random()*4500)+450,lastUpdated:new Date().toISOString()},campaigns:[],platforms:[],performance:{averageCTR:Math.random()*10+2,averageConversionRate:Math.random()*15+3,averageCPA:Math.random()*100+50,totalRevenue:Math.random()*5e5+1e5},lastRefreshAt:new Date().toISOString()};wt.createAudience(I),S(),y(!1),u()},N=I=>{window.confirm("確定要刪除此受眾群體嗎？")&&(wt.deleteAudience(I),S())},u=()=>{v({name:"",description:"",type:"behavioral",criteria:{demographics:{age:{min:18,max:65},gender:["all"]},behavioral:{purchaseHistory:{totalSpent:{min:0},frequency:{min:1}},engagementLevel:"all"},geographic:{countries:["TW"],cities:[]},psychographic:{interests:[],lifestyle:[]}},refreshFrequency:"weekly"})},h=I=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(I||0),g=I=>I>=1e6?(I/1e6).toFixed(1)+"M":I>=1e3?(I/1e3).toFixed(1)+"K":(I==null?void 0:I.toLocaleString())||"0",j=I=>`${(I||0).toFixed(1)}%`,T=I=>({demographic:e.jsx(dt,{className:"h-5 w-5"}),behavioral:e.jsx(oe,{className:"h-5 w-5"}),psychographic:e.jsx(mi,{className:"h-5 w-5"}),geographic:e.jsx(Jo,{className:"h-5 w-5"}),custom:e.jsx(zu,{className:"h-5 w-5"})})[I]||e.jsx(dt,{className:"h-5 w-5"}),C=I=>({demographic:"人口統計",behavioral:"行為特徵",psychographic:"心理特徵",geographic:"地理位置",custom:"自訂條件"})[I]||I,E=I=>({demographic:"text-blue-600 bg-blue-50 border-blue-200",behavioral:"text-green-600 bg-green-50 border-green-200",psychographic:"text-purple-600 bg-purple-50 border-purple-200",geographic:"text-orange-600 bg-orange-50 border-orange-200",custom:"text-gray-600 bg-gray-50 border-gray-200"})[I]||"text-gray-600 bg-gray-50 border-gray-200",R=(I,L)=>I>=L*1.2?"text-green-600":I>=L*.8?"text-yellow-600":"text-red-600",k=(I="sample_user")=>wt.getPersonalizedRecommendations(I),O=(I="sample_product")=>wt.getDynamicPricingRecommendation(I);return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fdf8f2"},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"受眾管理中心"}),e.jsx("p",{className:"text-gray-600",children:"客戶分群分析、個人化推薦與精準行銷"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"bg-[#cc824d] text-white px-6 py-3 rounded-lg hover:bg-[#b8753f] transition-colors flex items-center font-medium",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),"建立受眾群體"]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>o("audiences"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="audiences"?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"受眾群體管理"}),e.jsx("button",{onClick:()=>o("segments"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="segments"?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"客戶分群洞察"}),e.jsx("button",{onClick:()=>o("personalization"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="personalization"?"border-[#cc824d] text-[#cc824d]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"個人化推薦"})]})}),l==="audiences"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 mb-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("select",{value:x,onChange:I=>p(I.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"所有類型"}),e.jsx("option",{value:"demographic",children:"人口統計"}),e.jsx("option",{value:"behavioral",children:"行為特徵"}),e.jsx("option",{value:"psychographic",children:"心理特徵"}),e.jsx("option",{value:"geographic",children:"地理位置"}),e.jsx("option",{value:"custom",children:"自訂條件"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(gs,{className:"h-5 w-5 mr-2"}),"共 ",r.length," 個受眾群體"]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center text-sm",children:[e.jsx(Ys,{className:"h-4 w-4 mr-2"}),"AI智能分群"]})})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(I=>{var L,D,M,A,V,B,z,F,W,Y;return e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:I.name}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${E(I.type)}`,children:[T(I.type),e.jsx("span",{className:"ml-1",children:C(I.type)})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:I.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-[#cc824d] transition-colors",title:"查看詳情",children:e.jsx(Ee,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-[#cc824d] transition-colors",title:"編輯受眾",children:e.jsx(_e,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>N(I.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"刪除受眾",children:e.jsx($e,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"受眾規模"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:g((L=I.size)==null?void 0:L.actual)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["預估 ",g((D=I.size)==null?void 0:D.estimated)]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"總收入"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:h((M=I.performance)==null?void 0:M.totalRevenue)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均CTR"}),e.jsx("span",{className:`font-semibold ${R((A=I.performance)==null?void 0:A.averageCTR,5)}`,children:j((V=I.performance)==null?void 0:V.averageCTR)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"轉換率"}),e.jsx("span",{className:`font-semibold ${R((B=I.performance)==null?void 0:B.averageConversionRate,5)}`,children:j((z=I.performance)==null?void 0:z.averageConversionRate)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均CPA"}),e.jsx("span",{className:"font-semibold text-gray-900",children:h((F=I.performance)==null?void 0:F.averageCPA)})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["更新頻率: ",I.refreshFrequency==="daily"?"每日":I.refreshFrequency==="weekly"?"每週":I.refreshFrequency==="monthly"?"每月":"手動"]}),e.jsxs("div",{className:"flex space-x-2",children:[((W=I.campaigns)==null?void 0:W.length)>0&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[I.campaigns.length," 個檔期"]}),((Y=I.platforms)==null?void 0:Y.length)>0&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[I.platforms.length," 個平台"]})]})]})})]},I.id)})}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"沒有找到受眾群體"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"開始建立您的第一個受眾群體"}),e.jsx("button",{onClick:()=>y(!0),className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b8753f] transition-colors",children:"建立受眾群體"})]})]}),l==="segments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(P=n.segments)==null?void 0:P.map((I,L)=>{var D;return e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:I.name}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-[#cc824d]",children:j(I.percentage)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[g(I.size)," 人"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"平均消費"}),e.jsx("span",{className:"font-semibold text-gray-900",children:h(I.avgSpend)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"購買頻率"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[I.avgFrequency.toFixed(1)," 次/年"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"終身價值"}),e.jsx("span",{className:"font-semibold text-gray-900",children:h(I.lifetimeValue)})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"主要特徵"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(D=I.characteristics)==null?void 0:D.map((M,A)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:M},A))})]})]},L)})}),n.insights&&e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(mi,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"關鍵洞察"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.insights.map((I,L)=>e.jsxs("div",{className:"flex items-start p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx(mi,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-gray-700",children:I})]},L))})]})]}),l==="personalization"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(wn,{className:"h-8 w-8 text-[#cc824d] mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"商品推薦"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI驅動的個人化商品推薦"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"推薦準確率"}),e.jsx("span",{className:"font-semibold text-green-600",children:"87.3%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"點擊率提升"}),e.jsx("span",{className:"font-semibold text-green-600",children:"+42%"})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(We,{className:"h-8 w-8 text-[#cc824d] mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"動態定價"}),e.jsx("p",{className:"text-sm text-gray-600",children:"個人化價格策略"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"收入提升"}),e.jsx("span",{className:"font-semibold text-green-600",children:"+15.8%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"轉換率改善"}),e.jsx("span",{className:"font-semibold text-green-600",children:"+23%"})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Vo,{className:"h-8 w-8 text-[#cc824d] mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"內容個人化"}),e.jsx("p",{className:"text-sm text-gray-600",children:"客製化內容體驗"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"參與度提升"}),e.jsx("span",{className:"font-semibold text-green-600",children:"+38%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"停留時間"}),e.jsx("span",{className:"font-semibold text-green-600",children:"+28%"})]})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ys,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"個人化推薦示例"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"商品推薦 (示例用戶)"}),e.jsx("div",{className:"space-y-3",children:($=k().find(I=>I.type==="product"))==null?void 0:$.products.map((I,L)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.name}),e.jsx("p",{className:"text-sm text-gray-600",children:I.reason})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-semibold text-[#cc824d]",children:[(I.score*100).toFixed(0),"% 匹配"]})})]},L))})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"動態定價建議"}),(()=>{const I=O();return e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"p-3 bg-white rounded border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"示例商品"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["信心度: ",(I.confidence*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"基礎價格"}),e.jsx("span",{className:"font-semibold",children:h(I.basePrice)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"建議價格"}),e.jsx("span",{className:"font-semibold text-[#cc824d]",children:h(I.recommendedPrice)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"預期提升"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["+",I.expectedUplift.toFixed(1),"%"]})]})]})})})()]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/50 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ar,{className:"h-5 w-5 mr-2 text-[#cc824d]"}),"個人化自動化規則"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"瀏覽行為觸發"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"基於用戶瀏覽歷史推薦相關商品"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"已啟用"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"購買週期預測"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"預測用戶下次購買時間並主動推薦"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"已啟用"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"價格敏感度調整"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"根據用戶行為調整個人化價格"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"測試中"})]})]})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"建立受眾群體"}),e.jsx("button",{onClick:()=>y(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"受眾名稱"}),e.jsx("input",{type:"text",value:b.name,onChange:I=>v({...b,name:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"輸入受眾群體名稱"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"分群類型"}),e.jsxs("select",{value:b.type,onChange:I=>v({...b,type:I.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",children:[e.jsx("option",{value:"demographic",children:"人口統計"}),e.jsx("option",{value:"behavioral",children:"行為特徵"}),e.jsx("option",{value:"psychographic",children:"心理特徵"}),e.jsx("option",{value:"geographic",children:"地理位置"}),e.jsx("option",{value:"custom",children:"自訂條件"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"描述"}),e.jsx("textarea",{value:b.description,onChange:I=>v({...b,description:I.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",placeholder:"描述此受眾群體的特徵和用途"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"分群條件設定"}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"人口統計"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"年齡範圍"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",value:b.criteria.demographics.age.min,onChange:I=>v({...b,criteria:{...b.criteria,demographics:{...b.criteria.demographics,age:{...b.criteria.demographics.age,min:Number(I.target.value)}}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"最小"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"number",value:b.criteria.demographics.age.max,onChange:I=>v({...b,criteria:{...b.criteria,demographics:{...b.criteria.demographics,age:{...b.criteria.demographics.age,max:Number(I.target.value)}}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"最大"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"性別"}),e.jsxs("select",{value:b.criteria.demographics.gender[0],onChange:I=>v({...b,criteria:{...b.criteria,demographics:{...b.criteria.demographics,gender:[I.target.value]}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"不限"}),e.jsx("option",{value:"female",children:"女性"}),e.jsx("option",{value:"male",children:"男性"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"更新頻率"}),e.jsxs("select",{value:b.refreshFrequency,onChange:I=>v({...b,refreshFrequency:I.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"real_time",children:"即時"}),e.jsx("option",{value:"daily",children:"每日"}),e.jsx("option",{value:"weekly",children:"每週"}),e.jsx("option",{value:"monthly",children:"每月"})]})]})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"行為特徵"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"最低消費金額"}),e.jsx("input",{type:"number",value:b.criteria.behavioral.purchaseHistory.totalSpent.min,onChange:I=>v({...b,criteria:{...b.criteria,behavioral:{...b.criteria.behavioral,purchaseHistory:{...b.criteria.behavioral.purchaseHistory,totalSpent:{min:Number(I.target.value)}}}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"最低購買次數"}),e.jsx("input",{type:"number",value:b.criteria.behavioral.purchaseHistory.frequency.min,onChange:I=>v({...b,criteria:{...b.criteria,behavioral:{...b.criteria.behavioral,purchaseHistory:{...b.criteria.behavioral.purchaseHistory,frequency:{min:Number(I.target.value)}}}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"參與度"}),e.jsxs("select",{value:b.criteria.behavioral.engagementLevel,onChange:I=>v({...b,criteria:{...b.criteria,behavioral:{...b.criteria.behavioral,engagementLevel:I.target.value}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"不限"}),e.jsx("option",{value:"high",children:"高參與"}),e.jsx("option",{value:"medium",children:"中等參與"}),e.jsx("option",{value:"low",children:"低參與"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"取消"}),e.jsx("button",{onClick:w,disabled:!b.name||!b.description,className:"bg-[#cc824d] text-white px-6 py-2 rounded-lg hover:bg-[#b8753f] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"建立受眾群體"})]})]})})]})})},yr=class yr{constructor(){this.documents=this.initializeDocuments(),this.workflows=this.initializeWorkflows(),this.approvals=this.initializeApprovals(),this.templates=this.initializeTemplates()}initializeDocuments(){const t=[],r=Object.values(yr.DocumentTypes),a=Object.values(yr.DocumentStatus),n=Object.values(yr.Priority);for(let i=1;i<=200;i++){const l=r[Math.floor(Math.random()*r.length)],o=a[Math.floor(Math.random()*a.length)],c=n[Math.floor(Math.random()*n.length)],d=new Date;d.setDate(d.getDate()-Math.floor(Math.random()*90)),t.push({id:`DOC-${String(i).padStart(6,"0")}`,documentNumber:this.generateDocumentNumber(l,i),type:l,status:o,priority:c,title:this.generateDocumentTitle(l,i),description:this.generateDocumentDescription(l),companyId:"MARELLE_001",branchId:"BRANCH_MAIN",departmentId:this.getRandomDepartment(),partnerId:this.getRandomPartner(l),partnerName:this.getRandomPartnerName(l),partnerType:this.getPartnerType(l),subtotal:Math.floor(Math.random()*1e5)+1e3,taxAmount:0,discountAmount:Math.floor(Math.random()*5e3),totalAmount:0,currency:"TWD",documentDate:d,dueDate:new Date(d.getTime()+Math.floor(Math.random()*30)*24*60*60*1e3),requestedDate:new Date(d.getTime()+Math.floor(Math.random()*15)*24*60*60*1e3),requiresApproval:this.requiresApproval(l,o),approvalLevel:Math.floor(Math.random()*3)+1,approvalHistory:this.generateApprovalHistory(o),currentApprover:this.getCurrentApprover(o),attachments:this.generateAttachments(),relatedDocuments:this.generateRelatedDocuments(l),items:this.generateDocumentItems(l),internalNotes:this.generateInternalNotes(),customerNotes:Math.random()>.7?this.generateCustomerNotes():"",warehouseId:this.getRandomWarehouse(),locationId:this.getRandomLocation(),createdAt:d,updatedAt:new Date(d.getTime()+Math.floor(Math.random()*7)*24*60*60*1e3),createdBy:this.getRandomUser(),updatedBy:this.getRandomUser(),version:"1.0",isLatestVersion:!0,customFields:this.generateCustomFields(l),workflowId:this.getWorkflowId(l),workflowStage:this.getWorkflowStage(o),notifications:this.generateNotifications(),tags:this.generateTags(l),metrics:this.generateMetrics(l,o)})}return t.forEach(i=>{i.taxAmount=Math.floor(i.subtotal*.05),i.totalAmount=i.subtotal+i.taxAmount-i.discountAmount}),t}generateDocumentNumber(t,r){const n={sales_order:"SO",sales_return:"SR",delivery_order:"DO",sales_invoice:"SI",payment_receipt:"PR",refund_receipt:"RR",purchase_request:"PQ",purchase_order:"PO",purchase_return:"RT",goods_receipt:"GR",purchase_invoice:"PI",payment_voucher:"PV",stock_in:"IN",stock_out:"OUT",stock_transfer:"TF",stock_count:"SC",stock_adjustment:"SA",journal_entry:"JE",cash_receipt:"CR",cash_payment:"CP",expense_claim:"EC",expense_reimbursement:"ER"}[t]||"DOC",i=new Date().getFullYear(),l=String(new Date().getMonth()+1).padStart(2,"0"),o=String(r).padStart(4,"0");return`${n}${i}${l}${o}`}generateDocumentTitle(t,r){return{sales_order:`銷售訂單 #${r}`,sales_return:`銷售退貨單 #${r}`,delivery_order:`出貨單 #${r}`,sales_invoice:`銷售發票 #${r}`,payment_receipt:`收款單 #${r}`,refund_receipt:`退款單 #${r}`,purchase_request:`採購申請單 #${r}`,purchase_order:`採購訂單 #${r}`,purchase_return:`採購退貨單 #${r}`,goods_receipt:`收貨單 #${r}`,purchase_invoice:`採購發票 #${r}`,payment_voucher:`付款單 #${r}`,stock_in:`入庫單 #${r}`,stock_out:`出庫單 #${r}`,stock_transfer:`調撥單 #${r}`,stock_count:`盤點單 #${r}`,stock_adjustment:`庫存調整單 #${r}`,journal_entry:`記帳憑證 #${r}`,cash_receipt:`現金收據 #${r}`,cash_payment:`現金支付單 #${r}`,expense_claim:`費用申請單 #${r}`,expense_reimbursement:`費用報銷單 #${r}`}[t]||`單據 #${r}`}generateDocumentDescription(t){return{sales_order:"客戶訂購商品的銷售訂單，需要確認庫存並安排出貨",sales_return:"客戶退貨申請，需要檢查商品狀態並處理退款",delivery_order:"商品出貨指示單，包含配送地址和特殊要求",sales_invoice:"銷售發票，記錄交易明細和稅務資訊",payment_receipt:"客戶付款收據，確認收款金額和方式",refund_receipt:"退款收據，記錄退款原因和金額",purchase_request:"採購需求申請，需要主管審核後轉為採購訂單",purchase_order:"正式採購訂單，向供應商訂購商品或服務",purchase_return:"採購退貨單，向供應商退回不符要求的商品",goods_receipt:"收貨確認單，驗收採購商品的數量和品質",purchase_invoice:"供應商發票，需要核對採購訂單並安排付款",payment_voucher:"付款憑證，向供應商支付貨款",stock_in:"商品入庫單，記錄進貨商品的詳細資訊",stock_out:"商品出庫單，記錄出貨商品的詳細資訊",stock_transfer:"庫存調撥單，在不同倉庫間移動商品",stock_count:"定期盤點單，核實實際庫存與帳面庫存",stock_adjustment:"庫存調整單，修正盤點差異或損耗",journal_entry:"會計記帳憑證，記錄財務交易",cash_receipt:"現金收款記錄，管理現金流入",cash_payment:"現金付款記錄，管理現金流出",expense_claim:"員工費用申請，需要主管審核",expense_reimbursement:"費用報銷單，返還員工墊付費用"}[t]||"業務單據處理"}getRandomDepartment(){const t=["SALES","PURCHASE","WAREHOUSE","FINANCE","ADMIN"];return t[Math.floor(Math.random()*t.length)]}getRandomPartner(t){return["sales_order","sales_return","delivery_order","sales_invoice","payment_receipt","refund_receipt"].includes(t)?`CUST_${String(Math.floor(Math.random()*100)+1).padStart(3,"0")}`:`SUPP_${String(Math.floor(Math.random()*50)+1).padStart(3,"0")}`}getRandomPartnerName(t){if(["sales_order","sales_return","delivery_order","sales_invoice","payment_receipt","refund_receipt"].includes(t)){const a=["美麗佳人","時尚生活","優雅女士","精品小舖","魅力無限","美顏堂","韓系美妝","日式護膚"];return a[Math.floor(Math.random()*a.length)]}else{const a=["韓國化妝品","日本護膚品","歐美彩妝","天然保養","專業美容","國際香水","有機護理","科技美妝"];return a[Math.floor(Math.random()*a.length)]}}getPartnerType(t){return["sales_order","sales_return","delivery_order","sales_invoice","payment_receipt","refund_receipt"].includes(t)?"customer":"supplier"}requiresApproval(t,r){return["purchase_request","purchase_order","expense_claim","stock_adjustment"].includes(t)&&["submitted","pending_approval","approved","rejected"].includes(r)}generateApprovalHistory(t){if(!["pending_approval","approved","rejected","completed"].includes(t))return[];const r=[],a=["王經理","李主管","陳總監","張副理"];return t==="approved"||t==="completed"?r.push({id:"APP_001",approver:a[Math.floor(Math.random()*a.length)],action:"approve",comments:"審核通過，同意執行",timestamp:new Date(Date.now()-Math.floor(Math.random()*7)*24*60*60*1e3),level:1}):t==="rejected"&&r.push({id:"APP_002",approver:a[Math.floor(Math.random()*a.length)],action:"reject",comments:"需要補充更多資料",timestamp:new Date(Date.now()-Math.floor(Math.random()*3)*24*60*60*1e3),level:1}),r}getCurrentApprover(t){if(t==="pending_approval"){const r=["王經理","李主管","陳總監","張副理"];return r[Math.floor(Math.random()*r.length)]}return null}generateAttachments(){const t=[],r=["pdf","jpg","png","doc","xls"],a=["合約文件","商品照片","規格說明","報價單","檢驗報告"],n=Math.floor(Math.random()*4);for(let i=0;i<n;i++)t.push({id:`ATT_${String(i+1).padStart(3,"0")}`,fileName:`${a[i%a.length]}.${r[i%r.length]}`,fileSize:Math.floor(Math.random()*5e3)+100,uploadDate:new Date(Date.now()-Math.floor(Math.random()*30)*24*60*60*1e3),uploadedBy:this.getRandomUser()});return t}generateRelatedDocuments(t){const r=[],a=["parent","child","reference"],n=Math.floor(Math.random()*3);for(let i=0;i<n;i++)r.push({id:`REL_${String(i+1).padStart(3,"0")}`,documentId:`DOC-${String(Math.floor(Math.random()*200)+1).padStart(6,"0")}`,relationType:a[Math.floor(Math.random()*a.length)],description:"相關業務單據"});return r}generateDocumentItems(t){const r=[],a=["韓式水光精華","日系美白面膜","歐美抗老精華","天然保濕乳液","專業遮瑕膏","持久口紅","防水睫毛膏","自然眉筆","溫和卸妝水","深層清潔泡沫","保濕化妝水","滋潤面霜"],n=Math.floor(Math.random()*5)+1;for(let i=0;i<n;i++){const l=Math.floor(Math.random()*10)+1,o=Math.floor(Math.random()*2e3)+100;r.push({id:`ITEM_${String(i+1).padStart(3,"0")}`,lineNumber:i+1,productId:`PROD_${String(Math.floor(Math.random()*100)+1).padStart(3,"0")}`,productName:a[Math.floor(Math.random()*a.length)],quantity:l,unit:"PCS",unitPrice:o,discountPercent:Math.floor(Math.random()*20),discountAmount:Math.floor(o*l*.1),taxRate:5,lineTotal:o*l,description:"高品質美妝保養品",specifications:this.generateSpecifications()})}return r}generateSpecifications(){return[{name:"容量",value:"30ml"},{name:"產地",value:"韓國"},{name:"保存期限",value:"3年"},{name:"適用膚質",value:"所有膚質"}].slice(0,Math.floor(Math.random()*4)+1)}generateInternalNotes(){const t=["優先處理，客戶VIP等級","注意包裝完整性","需要品質檢驗","客戶要求快速出貨","特殊包裝要求","需要主管確認","緊急訂單處理"];return Math.random()>.5?t[Math.floor(Math.random()*t.length)]:""}generateCustomerNotes(){const t=["請小心包裝","生日禮物，請包裝精美","送貨前請電話聯繫","辦公室收件","週末不在家","請放管理室代收"];return t[Math.floor(Math.random()*t.length)]}getRandomWarehouse(){const t=["WH_MAIN","WH_NORTH","WH_SOUTH","WH_CENTRAL"];return t[Math.floor(Math.random()*t.length)]}getRandomLocation(){const t=["A01-01","A01-02","B02-01","B02-02","C03-01"];return t[Math.floor(Math.random()*t.length)]}getRandomUser(){const t=["陳小明","王美麗","李大華","張小芳","劉志強","林雅婷"];return t[Math.floor(Math.random()*t.length)]}generateCustomFields(t){const r={};return["sales_order","purchase_order"].includes(t)&&(r.urgentLevel=Math.floor(Math.random()*5)+1,r.specialRequirements=Math.random()>.7?"特殊包裝":""),t.includes("invoice")&&(r.paymentTerms=Math.random()>.5?"30天":"即期",r.invoiceType=Math.random()>.5?"二聯式":"三聯式"),r}getWorkflowId(t){return{sales_order:"WF_SALES_001",purchase_request:"WF_PURCHASE_001",expense_claim:"WF_EXPENSE_001",stock_adjustment:"WF_INVENTORY_001"}[t]||"WF_STANDARD_001"}getWorkflowStage(t){return{draft:"stage_draft",submitted:"stage_review",pending_approval:"stage_approval",approved:"stage_execution",completed:"stage_completed"}[t]||"stage_unknown"}generateNotifications(){return{emailEnabled:Math.random()>.5,smsEnabled:Math.random()>.7,systemEnabled:!0,recipients:[this.getRandomUser()]}}generateTags(t){const r=["緊急","VIP客戶","大宗採購","品質要求","快速出貨","特殊包裝"],a=Math.floor(Math.random()*3),n=[];for(let i=0;i<a;i++){const l=r[Math.floor(Math.random()*r.length)];n.includes(l)||n.push(l)}return n}generateMetrics(t,r){return{processingTime:Math.floor(Math.random()*48)+1,approvalTime:Math.floor(Math.random()*24)+1,completionRate:Math.floor(Math.random()*100)+1,qualityScore:Math.floor(Math.random()*100)+80}}initializeWorkflows(){return[{id:"WF_SALES_001",name:"銷售流程",description:"從訂單建立到出貨完成的完整流程",documentTypes:["sales_order","delivery_order"],stages:[{id:"stage_draft",name:"草稿",description:"訂單建立中"},{id:"stage_review",name:"審核",description:"訂單審核中"},{id:"stage_confirmed",name:"確認",description:"訂單已確認"},{id:"stage_shipping",name:"出貨",description:"準備出貨中"},{id:"stage_completed",name:"完成",description:"交易完成"}],approvalRequired:!0,approvalType:"sequential"},{id:"WF_PURCHASE_001",name:"採購流程",description:"從採購申請到收貨完成的完整流程",documentTypes:["purchase_request","purchase_order","goods_receipt"],stages:[{id:"stage_request",name:"申請",description:"採購需求申請"},{id:"stage_approval",name:"審批",description:"主管審批中"},{id:"stage_order",name:"訂購",description:"向供應商下單"},{id:"stage_receipt",name:"收貨",description:"商品收貨驗收"},{id:"stage_completed",name:"完成",description:"採購完成"}],approvalRequired:!0,approvalType:"hierarchical"},{id:"WF_INVENTORY_001",name:"庫存管理流程",description:"庫存異動和調整的管理流程",documentTypes:["stock_in","stock_out","stock_adjustment"],stages:[{id:"stage_request",name:"申請",description:"庫存異動申請"},{id:"stage_verification",name:"驗證",description:"庫存數量驗證"},{id:"stage_execution",name:"執行",description:"執行庫存異動"},{id:"stage_completed",name:"完成",description:"異動完成"}],approvalRequired:!1,approvalType:"single"}]}initializeApprovals(){return[{id:"APP_001",documentId:"DOC-000001",workflowId:"WF_PURCHASE_001",approver:"王經理",approverRole:"manager",status:"pending",assignedAt:new Date,level:1,comments:"",options:["approve","reject","hold","return"]},{id:"APP_002",documentId:"DOC-000002",workflowId:"WF_SALES_001",approver:"李主管",approverRole:"supervisor",status:"approved",assignedAt:new Date(Date.now()-2*24*60*60*1e3),completedAt:new Date(Date.now()-1*24*60*60*1e3),level:1,comments:"審核通過，可以進行下一步",options:["approve","reject","hold","return"]}]}initializeTemplates(){return[{id:"TPL_001",name:"標準銷售訂單",type:"sales_order",description:"一般客戶銷售訂單範本",defaultFields:{currency:"TWD",paymentTerms:"30天",shippingMethod:"宅配",taxRate:5},customFields:[{name:"urgentLevel",type:"number",required:!1},{name:"specialPackaging",type:"boolean",required:!1}]}]}getAllDocuments(){return this.documents}getDocumentById(t){return this.documents.find(r=>r.id===t)}getDocumentsByType(t){return this.documents.filter(r=>r.type===t)}getDocumentsByStatus(t){return this.documents.filter(r=>r.status===t)}getPendingApprovals(){return this.documents.filter(t=>t.status==="pending_approval")}getDocumentStatistics(){const t={},r=Object.values(yr.DocumentTypes),a=Object.values(yr.DocumentStatus);return t.byType={},r.forEach(n=>{t.byType[n]=this.documents.filter(i=>i.type===n).length}),t.byStatus={},a.forEach(n=>{t.byStatus[n]=this.documents.filter(i=>i.status===n).length}),t.byPriority={},Object.values(yr.Priority).forEach(n=>{t.byPriority[n]=this.documents.filter(i=>i.priority===n).length}),t.pendingItems={approvals:this.documents.filter(n=>n.status==="pending_approval").length,drafts:this.documents.filter(n=>n.status==="draft").length,inProgress:this.documents.filter(n=>n.status==="in_progress").length,urgent:this.documents.filter(n=>n.priority==="urgent"||n.priority==="critical").length},t.total=this.documents.length,t.completed=this.documents.filter(n=>n.status==="completed").length,t.cancelled=this.documents.filter(n=>n.status==="cancelled").length,t}getWorkflowById(t){return this.workflows.find(r=>r.id===t)}getApprovalById(t){return this.approvals.find(r=>r.id===t)}createDocument(t){const a={id:`DOC-${String(this.documents.length+1).padStart(6,"0")}`,...t,createdAt:new Date,updatedAt:new Date,status:yr.DocumentStatus.DRAFT,version:"1.0",isLatestVersion:!0};return this.documents.push(a),a}updateDocument(t,r){const a=this.documents.findIndex(n=>n.id===t);return a!==-1?(this.documents[a]={...this.documents[a],...r,updatedAt:new Date},this.documents[a]):null}deleteDocument(t){const r=this.documents.findIndex(a=>a.id===t);return r!==-1?this.documents.splice(r,1)[0]:null}searchDocuments(t){return this.documents.filter(r=>{let a=!0;if(t.type&&r.type!==t.type&&(a=!1),t.status&&r.status!==t.status&&(a=!1),t.priority&&r.priority!==t.priority&&(a=!1),t.partnerId&&r.partnerId!==t.partnerId&&(a=!1),t.dateFrom&&r.documentDate<t.dateFrom&&(a=!1),t.dateTo&&r.documentDate>t.dateTo&&(a=!1),t.amountMin&&r.totalAmount<t.amountMin&&(a=!1),t.amountMax&&r.totalAmount>t.amountMax&&(a=!1),t.keyword){const n=t.keyword.toLowerCase();[r.documentNumber,r.title,r.description,r.partnerName].join(" ").toLowerCase().includes(n)||(a=!1)}return a})}};Fi(yr,"DocumentTypes",{SALES_ORDER:"sales_order",SALES_RETURN:"sales_return",DELIVERY_ORDER:"delivery_order",SALES_INVOICE:"sales_invoice",PAYMENT_RECEIPT:"payment_receipt",REFUND_RECEIPT:"refund_receipt",PURCHASE_REQUEST:"purchase_request",PURCHASE_ORDER:"purchase_order",PURCHASE_RETURN:"purchase_return",GOODS_RECEIPT:"goods_receipt",PURCHASE_INVOICE:"purchase_invoice",PAYMENT_VOUCHER:"payment_voucher",STOCK_IN:"stock_in",STOCK_OUT:"stock_out",STOCK_TRANSFER:"stock_transfer",STOCK_COUNT:"stock_count",STOCK_ADJUSTMENT:"stock_adjustment",JOURNAL_ENTRY:"journal_entry",CASH_RECEIPT:"cash_receipt",CASH_PAYMENT:"cash_payment",EXPENSE_CLAIM:"expense_claim",EXPENSE_REIMBURSEMENT:"expense_reimbursement"}),Fi(yr,"DocumentStatus",{DRAFT:"draft",SUBMITTED:"submitted",PENDING_APPROVAL:"pending_approval",APPROVED:"approved",REJECTED:"rejected",CONFIRMED:"confirmed",IN_PROGRESS:"in_progress",PARTIALLY_COMPLETED:"partially_completed",COMPLETED:"completed",CANCELLED:"cancelled",SUSPENDED:"suspended",ERROR:"error",EXPIRED:"expired",CLOSED:"closed",ARCHIVED:"archived"}),Fi(yr,"Priority",{LOW:"low",NORMAL:"normal",HIGH:"high",URGENT:"urgent",CRITICAL:"critical"}),Fi(yr,"ApprovalType",{SINGLE:"single",MULTIPLE:"multiple",SEQUENTIAL:"sequential",PARALLEL:"parallel",MAJORITY:"majority",UNANIMOUS:"unanimous",HIERARCHICAL:"hierarchical"});let Pp=yr;const Go=new Pp,NM=()=>{var N;const[s,t]=m.useState([]),[r,a]=m.useState({}),[n,i]=m.useState(!0),[l,o]=m.useState("all"),[c,d]=m.useState("all"),[x,p]=m.useState("all");m.useEffect(()=>{f()},[]),m.useEffect(()=>{n||it.fromTo(".stat-card",{opacity:0,y:30},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power2.out"})},[n]);const f=async()=>{try{i(!0),await new Promise(g=>setTimeout(g,1e3));const u=Go.getAllDocuments(),h=Go.getDocumentStatistics();t(u),a(h)}catch(u){console.error("載入單據數據失敗:",u)}finally{i(!1)}},y=s.filter(u=>{let h=!0;if(l!=="all"&&(h=h&&u.type===l),c!=="all"&&(h=h&&u.status===c),x!=="all"){const g=new Date,j=new Date(u.documentDate);switch(x){case"today":h=h&&j.toDateString()===g.toDateString();break;case"week":const T=new Date(g.getTime()-7*24*60*60*1e3);h=h&&j>=T;break;case"month":const C=new Date(g.getTime()-30*24*60*60*1e3);h=h&&j>=C;break}}return h}),b=u=>({draft:"bg-gray-100 text-gray-800",submitted:"bg-blue-100 text-blue-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",confirmed:"bg-purple-100 text-purple-800",in_progress:"bg-indigo-100 text-indigo-800",partially_completed:"bg-orange-100 text-orange-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-gray-100 text-gray-800",suspended:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800",closed:"bg-slate-100 text-slate-800",archived:"bg-gray-100 text-gray-800"})[u]||"bg-gray-100 text-gray-800",v=u=>({sales_order:"銷售訂單",sales_return:"銷售退貨",delivery_order:"出貨單",sales_invoice:"銷售發票",payment_receipt:"收款單",refund_receipt:"退款單",purchase_request:"採購申請",purchase_order:"採購訂單",purchase_return:"採購退貨",goods_receipt:"收貨單",purchase_invoice:"採購發票",payment_voucher:"付款單",stock_in:"入庫單",stock_out:"出庫單",stock_transfer:"調撥單",stock_count:"盤點單",stock_adjustment:"庫存調整",journal_entry:"日記帳分錄",cash_receipt:"現金收據",cash_payment:"現金支付",expense_claim:"費用申請",expense_reimbursement:"費用報銷"})[u]||u,S=u=>({draft:"草稿",submitted:"已提交",pending_approval:"待審核",approved:"已審核",rejected:"已拒絕",confirmed:"已確認",in_progress:"執行中",partially_completed:"部分完成",completed:"已完成",cancelled:"已取消",suspended:"已暫停",error:"錯誤",expired:"已過期",closed:"已結案",archived:"已歸檔"})[u]||u,_=u=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(u),w=u=>new Date(u).toLocaleDateString("zh-TW");return n?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"glass p-6 rounded-2xl animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"單據管理總覽"}),e.jsx("p",{className:"text-gray-600 mt-2 font-chinese",children:"統一管理所有業務單據的生命週期與工作流程"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-blue-600",children:e.jsx(Dd,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"總單據數"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.total||0})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-yellow-600",children:e.jsx(cf,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"待審核"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((N=r.pendingItems)==null?void 0:N.approvals)||0})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-green-600",children:e.jsx(No,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"已完成"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.completed||0})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-purple-600",children:e.jsx(hw,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"本月增長"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["+",r.monthlyGrowth||0,"%"]})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsxs("button",{onClick:f,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Gd,{className:"w-4 h-4"}),"重新整理"]}),e.jsxs("button",{className:"px-4 py-2 bg-apricot-500 text-white rounded-lg hover:bg-apricot-600 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Wd,{className:"w-4 h-4"}),"新增單據"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"單據類型分布"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.byType||{}).slice(0,8).map(([u,h])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:v(u)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-apricot-500 h-2 rounded-full",style:{width:`${h/r.total*100}%`}})}),e.jsx("span",{className:"text-sm font-medium w-8",children:h})]})]},u))})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"狀態分布"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.byStatus||{}).slice(0,8).map(([u,h])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b(u)}`,children:S(u)})}),e.jsx("span",{className:"text-sm font-medium",children:h})]},u))})]})]}),e.jsx("div",{className:"glass p-6 rounded-2xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(xe,{value:l,onChange:o,options:[{value:"all",label:"所有類型"},{value:"sales_order",label:"銷售訂單"},{value:"purchase_order",label:"採購訂單"},{value:"stock_in",label:"入庫單"},{value:"stock_out",label:"出庫單"},{value:"sales_invoice",label:"銷售發票"},{value:"purchase_invoice",label:"採購發票"}],placeholder:"選擇單據類型",searchPlaceholder:"搜尋類型...",allowClear:!0}),e.jsx(xe,{value:c,onChange:d,options:[{value:"all",label:"所有狀態"},{value:"draft",label:"草稿"},{value:"submitted",label:"已提交"},{value:"pending_approval",label:"待審核"},{value:"approved",label:"已審核"},{value:"completed",label:"已完成"}],placeholder:"選擇狀態",searchPlaceholder:"搜尋狀態...",allowClear:!0}),e.jsx(xe,{value:x,onChange:p,options:[{value:"all",label:"所有時間"},{value:"today",label:"今天"},{value:"week",label:"本週"},{value:"month",label:"本月"}],placeholder:"選擇時間範圍",searchPlaceholder:"搜尋時間...",allowClear:!0})]})}),e.jsx("div",{className:"glass rounded-2xl overflow-visible",children:e.jsxs("div",{className:"overflow-x-auto overflow-y-visible",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:["單據列表 (",y.length,")"]}),e.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(zd,{className:"w-4 h-4"}),"匯出"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"單據編號"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"類型"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"標題"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"合作夥伴"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"金額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"日期"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.slice(0,20).map(u=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 font-chinese",children:u.documentNumber}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:v(u.type)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:u.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:u.partnerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:_(u.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b(u.status)} font-chinese`,children:S(u.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:w(u.documentDate)})]},u.id))})]})}),y.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Dd,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-chinese",children:"沒有找到單據"}),e.jsx("p",{className:"text-gray-500 font-chinese",children:"請調整搜尋條件或新增第一個單據"})]})]})})]})},wM=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(!0),[n,i]=m.useState("all");m.useState("");const[l,o]=m.useState("all"),[c,d]=m.useState("all"),[x,p]=m.useState(!1),f=["sales_order","sales_return","delivery_order","sales_invoice","payment_receipt","refund_receipt"];m.useEffect(()=>{y()},[]),m.useEffect(()=>{r||it.fromTo(".stat-card",{opacity:0,y:30},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power2.out"})},[r]);const y=async()=>{try{a(!0),await new Promise(T=>setTimeout(T,800));const j=Go.getAllDocuments().filter(T=>f.includes(T.type));t(j)}catch(g){console.error("載入銷售單據失敗:",g)}finally{a(!1)}},b=s.filter(g=>{let j=!0;if(n!=="all"&&g.type!==n&&(j=!1),l!=="all"&&g.status!==l&&(j=!1),c!=="all"){const T=new Date,C=new Date(g.documentDate);switch(c){case"today":j=j&&C.toDateString()===T.toDateString();break;case"week":const E=new Date(T.getTime()-7*24*60*60*1e3);j=j&&C>=E;break;case"month":const R=new Date(T.getTime()-30*24*60*60*1e3);j=j&&C>=R;break}}return j}),v=g=>({draft:"bg-gray-100 text-gray-800",submitted:"bg-blue-100 text-blue-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",confirmed:"bg-purple-100 text-purple-800",in_progress:"bg-indigo-100 text-indigo-800",partially_completed:"bg-orange-100 text-orange-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-gray-100 text-gray-800"})[g]||"bg-gray-100 text-gray-800",S=g=>({sales_order:"銷售訂單",sales_return:"銷售退貨",delivery_order:"出貨單",sales_invoice:"銷售發票",payment_receipt:"收款單",refund_receipt:"退款單"})[g]||g,_=g=>({draft:"草稿",submitted:"已提交",pending_approval:"待審核",approved:"已審核",rejected:"已拒絕",confirmed:"已確認",in_progress:"執行中",partially_completed:"部分完成",completed:"已完成",cancelled:"已取消"})[g]||g,w=g=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(g),N=g=>new Date(g).toLocaleDateString("zh-TW"),h=(()=>{const g={total:b.length,byType:{},byStatus:{},totalAmount:0};return b.forEach(j=>{g.byType[j.type]=(g.byType[j.type]||0)+1,g.byStatus[j.status]=(g.byStatus[j.status]||0)+1,g.totalAmount+=j.totalAmount||0}),g})();return r?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"glass p-6 rounded-2xl animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"銷售單據管理"}),e.jsx("p",{className:"text-gray-600 mt-2 font-chinese",children:"管理銷售訂單、出貨、發票、收款等所有銷售相關單據"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-blue-600",children:e.jsx(Dh,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"銷售單據總數"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.total})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-green-600",children:e.jsx(bp,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"總金額"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(h.totalAmount)})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-yellow-600",children:e.jsx(cf,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"待處理"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(h.byStatus.pending_approval||0)+(h.byStatus.submitted||0)})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-purple-600",children:e.jsx(No,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"已完成"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.byStatus.completed||0})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Gd,{className:"w-4 h-4"}),"重新整理"]}),e.jsxs("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-apricot-500 text-white rounded-lg hover:bg-apricot-600 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Wd,{className:"w-4 h-4"}),"新增銷售單據"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"單據類型分布"}),e.jsx("div",{className:"space-y-3",children:f.map(g=>{const j=h.byType[g]||0,T=h.total>0?j/h.total*100:0;return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:S(g)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-apricot-500 h-2 rounded-full",style:{width:`${T}%`}})}),e.jsx("span",{className:"text-sm font-medium w-8",children:j})]})]},g)})})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"處理狀態"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"草稿"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:h.byStatus.draft||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"待審核"}),e.jsx("span",{className:"text-lg font-bold text-yellow-600",children:h.byStatus.pending_approval||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"已審核"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:h.byStatus.approved||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"已完成"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:h.byStatus.completed||0})]})]})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"快速操作"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>i("sales_order"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(Dh,{className:"w-5 h-5 text-blue-500"}),"檢視銷售訂單"]}),e.jsxs("button",{onClick:()=>i("sales_invoice"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(xw,{className:"w-5 h-5 text-green-500"}),"檢視銷售發票"]}),e.jsxs("button",{onClick:()=>i("payment_receipt"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(bp,{className:"w-5 h-5 text-purple-500"}),"檢視收款單"]}),e.jsxs("button",{onClick:()=>o("pending_approval"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(uw,{className:"w-5 h-5 text-yellow-500"}),"待審核單據"]})]})]})]}),e.jsx("div",{className:"glass p-6 rounded-2xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(xe,{value:n,onChange:i,options:[{value:"all",label:"所有類型"},{value:"sales_order",label:"銷售訂單"},{value:"sales_invoice",label:"銷售發票"},{value:"delivery_order",label:"出貨單"},{value:"payment_receipt",label:"收款單"},{value:"sales_return",label:"銷售退貨"},{value:"refund_receipt",label:"退款單"}],placeholder:"選擇單據類型",searchPlaceholder:"搜尋類型...",allowClear:!0}),e.jsx(xe,{value:l,onChange:o,options:[{value:"all",label:"所有狀態"},{value:"draft",label:"草稿"},{value:"submitted",label:"已提交"},{value:"pending_approval",label:"待審核"},{value:"approved",label:"已審核"},{value:"completed",label:"已完成"}],placeholder:"選擇狀態",searchPlaceholder:"搜尋狀態...",allowClear:!0}),e.jsx(xe,{value:c,onChange:d,options:[{value:"all",label:"所有時間"},{value:"today",label:"今天"},{value:"week",label:"本週"},{value:"month",label:"本月"}],placeholder:"選擇時間範圍",searchPlaceholder:"搜尋時間...",allowClear:!0})]})}),e.jsx("div",{className:"glass rounded-2xl overflow-visible",children:e.jsxs("div",{className:"overflow-x-auto overflow-y-visible",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:["銷售單據列表 (",b.length,")"]}),e.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(zd,{className:"w-4 h-4"}),"匯出"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"單據編號"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"類型"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"客戶"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"金額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"日期"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.slice(0,20).map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 font-chinese",children:g.documentNumber}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:S(g.type)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:g.partnerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:w(g.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${v(g.status)} font-chinese`,children:_(g.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:N(g.documentDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(Cx,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-green-600 hover:text-green-900 transition-colors",children:e.jsx(df,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 transition-colors",children:e.jsx(mf,{className:"w-4 h-4"})})]})})]},g.id))})]})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Dh,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-chinese",children:"沒有找到銷售單據"}),e.jsx("p",{className:"text-gray-500 font-chinese",children:"請調整搜尋條件或新增第一個銷售單據"})]})]})})]})},_M=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(!0),[n,i]=m.useState("all");m.useState("");const[l,o]=m.useState("all"),[c,d]=m.useState("all"),[x,p]=m.useState(!1),f=["purchase_request","purchase_order","purchase_return","goods_receipt","purchase_invoice","payment_voucher"];m.useEffect(()=>{y()},[]),m.useEffect(()=>{r||it.fromTo(".stat-card",{opacity:0,y:30},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power2.out"})},[r]);const y=async()=>{try{a(!0),await new Promise(T=>setTimeout(T,800));const j=Go.getAllDocuments().filter(T=>f.includes(T.type));t(j)}catch(g){console.error("載入採購單據失敗:",g)}finally{a(!1)}},b=s.filter(g=>{let j=!0;if(n!=="all"&&g.type!==n&&(j=!1),l!=="all"&&g.status!==l&&(j=!1),c!=="all"){const T=new Date,C=new Date(g.documentDate);switch(c){case"today":j=j&&C.toDateString()===T.toDateString();break;case"week":const E=new Date(T.getTime()-7*24*60*60*1e3);j=j&&C>=E;break;case"month":const R=new Date(T.getTime()-30*24*60*60*1e3);j=j&&C>=R;break}}return j}),v=g=>({draft:"bg-gray-100 text-gray-800",submitted:"bg-blue-100 text-blue-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",confirmed:"bg-purple-100 text-purple-800",in_progress:"bg-indigo-100 text-indigo-800",partially_completed:"bg-orange-100 text-orange-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-gray-100 text-gray-800"})[g]||"bg-gray-100 text-gray-800",S=g=>({purchase_request:"採購申請",purchase_order:"採購訂單",purchase_return:"採購退貨",goods_receipt:"收貨單",purchase_invoice:"採購發票",payment_voucher:"付款憑證"})[g]||g,_=g=>({draft:"草稿",submitted:"已提交",pending_approval:"待審核",approved:"已審核",rejected:"已拒絕",confirmed:"已確認",in_progress:"執行中",partially_completed:"部分完成",completed:"已完成",cancelled:"已取消"})[g]||g,w=g=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(g),N=g=>new Date(g).toLocaleDateString("zh-TW"),h=(()=>{const g={total:b.length,byType:{},byStatus:{},totalAmount:0};return b.forEach(j=>{g.byType[j.type]=(g.byType[j.type]||0)+1,g.byStatus[j.status]=(g.byStatus[j.status]||0)+1,g.totalAmount+=j.totalAmount||0}),g})();return r?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"glass p-6 rounded-2xl animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"採購單據管理"}),e.jsx("p",{className:"text-gray-600 mt-2 font-chinese",children:"管理採購申請、訂單、收貨、發票、付款等所有採購相關單據"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-indigo-600",children:e.jsx(Dd,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"採購單據總數"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.total})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-orange-600",children:e.jsx(bp,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"總金額"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(h.totalAmount)})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-yellow-600",children:e.jsx(cf,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"待處理"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(h.byStatus.pending_approval||0)+(h.byStatus.submitted||0)})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-green-600",children:e.jsx(No,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"已完成"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.byStatus.completed||0})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Gd,{className:"w-4 h-4"}),"重新整理"]}),e.jsxs("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-apricot-500 text-white rounded-lg hover:bg-apricot-600 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Wd,{className:"w-4 h-4"}),"新增採購單據"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"單據類型分布"}),e.jsx("div",{className:"space-y-3",children:f.map(g=>{const j=h.byType[g]||0,T=h.total>0?j/h.total*100:0;return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:S(g)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-apricot-500 h-2 rounded-full",style:{width:`${T}%`}})}),e.jsx("span",{className:"text-sm font-medium w-8",children:j})]})]},g)})})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"處理狀態"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"草稿"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:h.byStatus.draft||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"待審核"}),e.jsx("span",{className:"text-lg font-bold text-yellow-600",children:h.byStatus.pending_approval||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"已審核"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:h.byStatus.approved||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"已完成"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:h.byStatus.completed||0})]})]})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"快速操作"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>i("purchase_request"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(Dd,{className:"w-5 h-5 text-indigo-500"}),"檢視採購申請"]}),e.jsxs("button",{onClick:()=>i("purchase_order"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(qb,{className:"w-5 h-5 text-blue-500"}),"檢視採購訂單"]}),e.jsxs("button",{onClick:()=>i("purchase_invoice"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(xw,{className:"w-5 h-5 text-green-500"}),"檢視採購發票"]}),e.jsxs("button",{onClick:()=>o("pending_approval"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(uw,{className:"w-5 h-5 text-yellow-500"}),"待審核單據"]})]})]})]}),e.jsx("div",{className:"glass p-6 rounded-2xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(xe,{value:n,onChange:i,options:[{value:"all",label:"所有類型"},{value:"purchase_request",label:"採購申請"},{value:"purchase_order",label:"採購訂單"},{value:"goods_receipt",label:"收貨單"},{value:"purchase_invoice",label:"採購發票"},{value:"payment_voucher",label:"付款憑證"},{value:"purchase_return",label:"採購退貨"}],placeholder:"選擇單據類型",searchPlaceholder:"搜尋類型...",allowClear:!0}),e.jsx(xe,{value:l,onChange:o,options:[{value:"all",label:"所有狀態"},{value:"draft",label:"草稿"},{value:"submitted",label:"已提交"},{value:"pending_approval",label:"待審核"},{value:"approved",label:"已審核"},{value:"completed",label:"已完成"}],placeholder:"選擇狀態",searchPlaceholder:"搜尋狀態...",allowClear:!0}),e.jsx(xe,{value:c,onChange:d,options:[{value:"all",label:"所有時間"},{value:"today",label:"今天"},{value:"week",label:"本週"},{value:"month",label:"本月"}],placeholder:"選擇時間範圍",searchPlaceholder:"搜尋時間...",allowClear:!0})]})}),e.jsx("div",{className:"glass rounded-2xl overflow-visible",children:e.jsxs("div",{className:"overflow-x-auto overflow-y-visible",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:["採購單據列表 (",b.length,")"]}),e.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(zd,{className:"w-4 h-4"}),"匯出"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"單據編號"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"類型"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"供應商"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"金額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"日期"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.slice(0,20).map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 font-chinese",children:g.documentNumber}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:S(g.type)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:g.partnerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:w(g.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${v(g.status)} font-chinese`,children:_(g.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:N(g.documentDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(Cx,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-green-600 hover:text-green-900 transition-colors",children:e.jsx(df,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 transition-colors",children:e.jsx(mf,{className:"w-4 h-4"})})]})})]},g.id))})]})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qb,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-chinese",children:"沒有找到採購單據"}),e.jsx("p",{className:"text-gray-500 font-chinese",children:"請調整搜尋條件或新增第一個採購單據"})]})]})})]})},SM=()=>{const[s,t]=m.useState([]),[r,a]=m.useState(!0),[n,i]=m.useState("all");m.useState("");const[l,o]=m.useState("all"),[c,d]=m.useState("all"),[x,p]=m.useState(!1),f=["stock_in","stock_out","stock_transfer","stock_adjustment","stock_count"];m.useEffect(()=>{y()},[]),m.useEffect(()=>{r||it.fromTo(".stat-card",{opacity:0,y:30},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power2.out"})},[r]);const y=async()=>{try{a(!0),await new Promise(T=>setTimeout(T,800));const j=Go.getAllDocuments().filter(T=>f.includes(T.type));t(j)}catch(g){console.error("載入庫存單據失敗:",g)}finally{a(!1)}},b=s.filter(g=>{let j=!0;if(n!=="all"&&g.type!==n&&(j=!1),l!=="all"&&g.status!==l&&(j=!1),c!=="all"){const T=new Date,C=new Date(g.documentDate);switch(c){case"today":j=j&&C.toDateString()===T.toDateString();break;case"week":const E=new Date(T.getTime()-7*24*60*60*1e3);j=j&&C>=E;break;case"month":const R=new Date(T.getTime()-30*24*60*60*1e3);j=j&&C>=R;break}}return j}),v=g=>({draft:"bg-gray-100 text-gray-800",submitted:"bg-blue-100 text-blue-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",confirmed:"bg-purple-100 text-purple-800",in_progress:"bg-indigo-100 text-indigo-800",partially_completed:"bg-orange-100 text-orange-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-gray-100 text-gray-800"})[g]||"bg-gray-100 text-gray-800",S=g=>({stock_in:"入庫單",stock_out:"出庫單",stock_transfer:"調撥單",stock_adjustment:"庫存調整",stock_count:"盤點單"})[g]||g,_=g=>({draft:"草稿",submitted:"已提交",pending_approval:"待審核",approved:"已審核",rejected:"已拒絕",confirmed:"已確認",in_progress:"執行中",partially_completed:"部分完成",completed:"已完成",cancelled:"已取消"})[g]||g,w=g=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(g),N=g=>new Date(g).toLocaleDateString("zh-TW"),h=(()=>{const g={total:b.length,byType:{},byStatus:{},totalValue:0,monthlyMovement:{in:0,out:0}};return b.forEach(j=>{g.byType[j.type]=(g.byType[j.type]||0)+1,g.byStatus[j.status]=(g.byStatus[j.status]||0)+1,g.totalValue+=j.totalAmount||0;const T=new Date,C=new Date(j.documentDate);C.getMonth()===T.getMonth()&&C.getFullYear()===T.getFullYear()&&(j.type==="stock_in"?g.monthlyMovement.in+=j.totalAmount||0:j.type==="stock_out"&&(g.monthlyMovement.out+=j.totalAmount||0))}),g})();return r?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"glass p-6 rounded-2xl animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"庫存單據管理"}),e.jsx("p",{className:"text-gray-600 mt-2 font-chinese",children:"管理入庫、出庫、調撥、盤點等所有庫存相關單據"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-blue-600",children:e.jsx(Th,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"庫存單據總數"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.total})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-purple-600",children:e.jsx(oD,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"總價值"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(h.totalValue)})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-green-600",children:e.jsx(hw,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"本月入庫"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(h.monthlyMovement.in)})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-red-600",children:e.jsx(hD,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"本月出庫"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(h.monthlyMovement.out)})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Gd,{className:"w-4 h-4"}),"重新整理"]}),e.jsxs("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-apricot-500 text-white rounded-lg hover:bg-apricot-600 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Wd,{className:"w-4 h-4"}),"新增庫存單據"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"單據類型分布"}),e.jsx("div",{className:"space-y-3",children:f.map(g=>{const j=h.byType[g]||0,T=h.total>0?j/h.total*100:0;return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:S(g)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-apricot-500 h-2 rounded-full",style:{width:`${T}%`}})}),e.jsx("span",{className:"text-sm font-medium w-8",children:j})]})]},g)})})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"處理狀態"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"草稿"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:h.byStatus.draft||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"待審核"}),e.jsx("span",{className:"text-lg font-bold text-yellow-600",children:h.byStatus.pending_approval||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"已審核"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:h.byStatus.approved||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 font-chinese",children:"已完成"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:h.byStatus.completed||0})]})]})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-chinese",children:"快速操作"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>i("stock_in"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(eD,{className:"w-5 h-5 text-green-500"}),"檢視入庫單"]}),e.jsxs("button",{onClick:()=>i("stock_out"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(sD,{className:"w-5 h-5 text-red-500"}),"檢視出庫單"]}),e.jsxs("button",{onClick:()=>i("stock_transfer"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx($T,{className:"w-5 h-5 text-blue-500"}),"檢視調撥單"]}),e.jsxs("button",{onClick:()=>i("stock_count"),className:"w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 font-chinese",children:[e.jsx(Th,{className:"w-5 h-5 text-purple-500"}),"檢視盤點單"]})]})]})]}),e.jsx("div",{className:"glass p-6 rounded-2xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(xe,{value:n,onChange:i,options:[{value:"all",label:"所有類型"},{value:"stock_in",label:"入庫單"},{value:"stock_out",label:"出庫單"},{value:"stock_transfer",label:"調撥單"},{value:"stock_adjustment",label:"庫存調整"},{value:"stock_count",label:"盤點單"}],placeholder:"選擇單據類型",searchPlaceholder:"搜尋類型...",allowClear:!0}),e.jsx(xe,{value:l,onChange:o,options:[{value:"all",label:"所有狀態"},{value:"draft",label:"草稿"},{value:"submitted",label:"已提交"},{value:"pending_approval",label:"待審核"},{value:"approved",label:"已審核"},{value:"completed",label:"已完成"}],placeholder:"選擇狀態",searchPlaceholder:"搜尋狀態...",allowClear:!0}),e.jsx(xe,{value:c,onChange:d,options:[{value:"all",label:"所有時間"},{value:"today",label:"今天"},{value:"week",label:"本週"},{value:"month",label:"本月"}],placeholder:"選擇時間範圍",searchPlaceholder:"搜尋時間...",allowClear:!0})]})}),e.jsx("div",{className:"glass rounded-2xl overflow-visible",children:e.jsxs("div",{className:"overflow-x-auto overflow-y-visible",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:["庫存單據列表 (",b.length,")"]}),e.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(zd,{className:"w-4 h-4"}),"匯出"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"單據編號"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"類型"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"說明"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"金額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"日期"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.slice(0,20).map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 font-chinese",children:g.documentNumber}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:S(g.type)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:g.title||g.description||"無說明"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:w(g.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${v(g.status)} font-chinese`,children:_(g.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:N(g.documentDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(Cx,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-green-600 hover:text-green-900 transition-colors",children:e.jsx(df,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 transition-colors",children:e.jsx(mf,{className:"w-4 h-4"})})]})})]},g.id))})]})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Th,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-chinese",children:"沒有找到庫存單據"}),e.jsx("p",{className:"text-gray-500 font-chinese",children:"請調整搜尋條件或新增第一個庫存單據"})]})]})})]})},kM=()=>{const[s,t]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState("pending");m.useState("");const[c,d]=m.useState("all"),[x,p]=m.useState("all");m.useEffect(()=>{f()},[]),m.useEffect(()=>{n||it.fromTo(".stat-card",{opacity:0,y:30},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power2.out"})},[n]);const f=async()=>{try{i(!0),await new Promise(E=>setTimeout(E,800));const T=Go.getAllDocuments().filter(E=>["submitted","pending_approval"].includes(E.status)),C=[{id:1,name:"採購審批流程",type:"purchase",steps:3},{id:2,name:"銷售審批流程",type:"sales",steps:2},{id:3,name:"庫存調整流程",type:"inventory",steps:2},{id:4,name:"財務審批流程",type:"finance",steps:4}];t(T),a(C)}catch(j){console.error("載入審批資料失敗:",j)}finally{i(!1)}},y=s.filter(j=>{let T=!0;if(l!=="all")switch(l){case"pending":T=T&&["submitted","pending_approval"].includes(j.status);break;case"approved":T=T&&j.status==="approved";break;case"rejected":T=T&&j.status==="rejected";break;case"overdue":const C=new Date(Date.now()-3*24*60*60*1e3);T=T&&new Date(j.documentDate)<C&&["submitted","pending_approval"].includes(j.status);break}if(c!=="all"){const C={purchase:["purchase_request","purchase_order","purchase_invoice"],sales:["sales_order","sales_invoice"],inventory:["stock_in","stock_out","stock_adjustment"],finance:["payment_voucher","payment_receipt"]};for(const[E,R]of Object.entries(C))if(c===E){T=T&&R.includes(j.type);break}}return T}),b=j=>({submitted:"bg-blue-100 text-blue-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[j]||"bg-gray-100 text-gray-800",v=j=>({submitted:"已提交",pending_approval:"待審核",approved:"已審核",rejected:"已拒絕"})[j]||j,S=j=>({purchase_request:"採購申請",purchase_order:"採購訂單",purchase_invoice:"採購發票",sales_order:"銷售訂單",sales_invoice:"銷售發票",stock_in:"入庫單",stock_out:"出庫單",stock_adjustment:"庫存調整",payment_voucher:"付款憑證",payment_receipt:"收款單"})[j]||j,_=j=>new Date(j).toLocaleDateString("zh-TW"),w=j=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(j),u=(()=>{const j={total:s.length,pending:s.filter(C=>["submitted","pending_approval"].includes(C.status)).length,approved:s.filter(C=>C.status==="approved").length,rejected:s.filter(C=>C.status==="rejected").length,overdue:0},T=new Date(Date.now()-3*24*60*60*1e3);return j.overdue=s.filter(C=>new Date(C.documentDate)<T&&["submitted","pending_approval"].includes(C.status)).length,j})(),h=j=>{console.log("Approve approval:",j)},g=j=>{console.log("Reject approval:",j)};return n?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"glass p-6 rounded-2xl animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-chinese",children:"審批工作流"}),e.jsx("p",{className:"text-gray-600 mt-2 font-chinese",children:"管理和處理所有需要審批的單據，設定審批工作流程"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-blue-600",children:e.jsx(Dd,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"待審批總數"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.pending})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-green-600",children:e.jsx(No,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"已審核"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.approved})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-red-600",children:e.jsx(Gb,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"已拒絕"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.rejected})]})]})}),e.jsx("div",{className:"stat-card glass p-6 rounded-2xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-orange-600",children:e.jsx(fD,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-chinese",children:"逾期審批"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.overdue})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsxs("button",{onClick:f,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Gd,{className:"w-4 h-4"}),"重新整理"]}),e.jsxs("button",{className:"px-4 py-2 bg-apricot-500 text-white rounded-lg hover:bg-apricot-600 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(Wd,{className:"w-4 h-4"}),"新增工作流"]})]}),e.jsx("div",{className:"glass p-2 rounded-2xl",children:e.jsx("div",{className:"flex space-x-1",children:[{id:"pending",name:"待審批",count:u.pending},{id:"approved",name:"已審核",count:u.approved},{id:"rejected",name:"已拒絕",count:u.rejected},{id:"overdue",name:"逾期",count:u.overdue}].map(j=>e.jsxs("button",{onClick:()=>o(j.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 font-chinese ${l===j.id?"bg-apricot-500 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[j.name,e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l===j.id?"bg-white text-apricot-500":"bg-gray-200 text-gray-600"}`,children:j.count})]},j.id))})}),e.jsx("div",{className:"glass p-6 rounded-2xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(xe,{value:c,onChange:d,options:[{value:"all",label:"所有工作流"},{value:"purchase",label:"採購審批流程"},{value:"sales",label:"銷售審批流程"},{value:"inventory",label:"庫存審批流程"},{value:"finance",label:"財務審批流程"}],placeholder:"選擇工作流",searchPlaceholder:"搜尋工作流...",allowClear:!0}),e.jsx(xe,{value:x,onChange:p,options:[{value:"all",label:"所有時間"},{value:"today",label:"今天"},{value:"week",label:"本週"},{value:"month",label:"本月"}],placeholder:"選擇時間範圍",searchPlaceholder:"搜尋時間...",allowClear:!0})]})}),e.jsxs("div",{className:"glass rounded-2xl overflow-visible",children:[e.jsxs("div",{className:"overflow-x-auto overflow-y-visible",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 font-chinese",children:["審批列表 (",y.length,")"]}),e.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-chinese",children:[e.jsx(zd,{className:"w-4 h-4"}),"匯出"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"單據資訊"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"類型"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"金額"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"提交人"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"狀態"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"提交日期"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-chinese",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.slice(0,20).map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 font-chinese",children:j.documentNumber}),e.jsx("div",{className:"text-sm text-gray-500 font-chinese",children:j.title||"無標題"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:S(j.type)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:w(j.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-chinese",children:j.createdBy||"系統"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b(j.status)} font-chinese`,children:v(j.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-chinese",children:_(j.documentDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",children:e.jsx(Cx,{className:"w-4 h-4"})}),["submitted","pending_approval"].includes(j.status)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(j.id),className:"text-green-600 hover:text-green-900 transition-colors",children:e.jsx(No,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(j.id),className:"text-red-600 hover:text-red-900 transition-colors",children:e.jsx(Gb,{className:"w-4 h-4"})})]})]})})]},j.id))})]})}),y.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(No,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-chinese",children:"沒有找到審批項目"}),e.jsx("p",{className:"text-gray-500 font-chinese",children:"當前篩選條件下沒有需要處理的審批"})]})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6 font-chinese",children:"工作流配置"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map(j=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 font-chinese",children:j.name}),e.jsx(bD,{className:"w-5 h-5 text-gray-400"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-3 font-chinese",children:[j.steps," 個審批步驟"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors font-chinese",children:"編輯"}),e.jsx("button",{className:"flex-1 px-3 py-1 text-xs bg-apricot-100 text-apricot-700 rounded hover:bg-apricot-200 transition-colors font-chinese",children:"設定"})]})]},j.id))})]})]})]})},CM=()=>{const[s,t]=m.useState(!1),[r,a]=m.useState(!1),[n,i]=m.useState(!1),[l,o]=m.useState(""),c=ns(),d=Ga(),x=w=>{w.preventDefault(),l.trim()&&(c(`/admin/products?search=${encodeURIComponent(l)}`),i(!1),o(""))};m.useEffect(()=>{localStorage.getItem("marelle-admin-token")||c("/admin/login"),it.fromTo(".admin-content",{opacity:0,y:20},{opacity:1,y:0,duration:.6,ease:"power2.out"})},[c]);const p=[{name:"總覽",href:"/admin",icon:S8},{name:"商品管理",href:"/admin/products",icon:ss},{name:"訂單管理",href:"/admin/orders",icon:Vl},{name:"物流管理",href:"/admin/logistics",icon:Mr},{name:"優惠管理",href:"/admin/coupons",icon:ui},{name:"節慶管理",href:"/admin/festivals",icon:ji},{name:"行銷管理",href:"/admin/marketing",icon:yp},{name:"會員管理",href:"/admin/members",icon:wr},{name:"贈品管理",href:"/admin/gifts",icon:Be},{name:"供應商管理",href:"/admin/suppliers",icon:tt},{name:"採購管理",href:"/admin/procurement",icon:wn},{name:"會計管理",href:"/admin/accounting",icon:Nn},{name:"用戶追蹤",href:"/admin/user-tracking",icon:oe},{name:"通知管理",href:"/admin/notifications",icon:jn},{name:"數據分析",href:"/admin/analytics",icon:oe},{name:"管理員系統",href:"/admin/admin-management",icon:nf},{name:"系統設定",href:"/admin/settings",icon:kr},{name:"庫存管理",href:"/admin/inventory",icon:un},{name:"單據管理",href:"/admin/documents",icon:Bt}],y=(()=>{const w=d.pathname;return w==="/admin"||w.startsWith("/admin/tasks")||w.startsWith("/admin/approvals")||w.startsWith("/admin/monitoring")?[{name:"儀表板總覽",href:"/admin",icon:oe},{name:"任務管理",href:"/admin/tasks",icon:Vl},{name:"簽核流程",href:"/admin/approvals",icon:Bt},{name:"即時監控",href:"/admin/monitoring",icon:Ys}]:w.startsWith("/admin/products")?[{name:"商品列表",href:"/admin/products",icon:ss},{name:"新增商品",href:"/admin/products/add",icon:ge}]:w.startsWith("/admin/gifts")?[{name:"贈品概覽",href:"/admin/gifts",icon:Be},{name:"階梯規則",href:"/admin/gifts/tier-rules",icon:kr},{name:"會員福利",href:"/admin/gifts/member-benefits",icon:wr},{name:"分配追蹤",href:"/admin/gifts/allocation-tracking",icon:oe}]:w.startsWith("/admin/orders")?[{name:"訂單列表",href:"/admin/orders",icon:Vl},{name:"新增訂單",href:"/admin/orders/new",icon:ge}]:w.startsWith("/admin/members")?[{name:"會員列表",href:"/admin/members",icon:wr},{name:"會員分析",href:"/admin/members/analytics",icon:oe}]:w.startsWith("/admin/suppliers")?[{name:"供應商列表",href:"/admin/suppliers",icon:tt},{name:"新增供應商",href:"/admin/suppliers/add",icon:ge},{name:"商品關聯",href:"/admin/suppliers/products",icon:ss},{name:"績效評估",href:"/admin/suppliers/performance",icon:oe}]:w.startsWith("/admin/procurement")?[{name:"採購總覽",href:"/admin/procurement",icon:oe},{name:"採購單列表",href:"/admin/procurement/orders",icon:Vl},{name:"新增採購單",href:"/admin/procurement/orders/add",icon:ge},{name:"採購建議",href:"/admin/procurement/suggestions",icon:un},{name:"驗收入庫",href:"/admin/procurement/inspection",icon:ss},{name:"成本分析",href:"/admin/procurement/analytics",icon:oe}]:w.startsWith("/admin/logistics")?[{name:"物流總覽",href:"/admin/logistics",icon:Mr},{name:"出貨管理",href:"/admin/logistics/shipments",icon:tt},{name:"運費設定",href:"/admin/logistics/shipping-rates",icon:kr},{name:"物流追蹤",href:"/admin/logistics/tracking",icon:Mr},{name:"退貨管理",href:"/admin/logistics/returns",icon:Mb},{name:"分析報表",href:"/admin/logistics/analytics",icon:oe},{name:"物流商管理",href:"/admin/logistics/providers",icon:tt}]:w.startsWith("/admin/coupons")?[{name:"優惠券列表",href:"/admin/coupons",icon:ui},{name:"新增優惠券",href:"/admin/coupons/new",icon:ge},{name:"疊加規則",href:"/admin/coupons/stacking-rules",icon:kr},{name:"分享管理",href:"/admin/coupons/sharing",icon:Be}]:w.startsWith("/admin/festivals")?[{name:"節慶總覽",href:"/admin/festivals",icon:oe},{name:"節慶管理",href:"/admin/festivals/management",icon:ji},{name:"促銷設定",href:"/admin/festivals/promotions",icon:Be},{name:"節慶分析",href:"/admin/festivals/analytics",icon:oe}]:w.startsWith("/admin/marketing")?[{name:"行銷總覽",href:"/admin/marketing",icon:oe},{name:"檔期管理",href:"/admin/marketing/campaigns",icon:yp},{name:"廣告管理",href:"/admin/marketing/advertising",icon:tt},{name:"受眾管理",href:"/admin/marketing/audiences",icon:wr}]:w.startsWith("/admin/accounting")?[{name:"會計總覽",href:"/admin/accounting",icon:oe},{name:"會計科目",href:"/admin/accounting/chart-of-accounts",icon:Nn},{name:"會計分錄",href:"/admin/accounting/journal-entries",icon:Bt},{name:"財務報表",href:"/admin/accounting/financial-reports",icon:Bt},{name:"銀行對帳",href:"/admin/accounting/bank-reconciliation",icon:Ni}]:w.startsWith("/admin/user-tracking")?[{name:"追蹤總覽",href:"/admin/user-tracking",icon:oe},{name:"行為分析",href:"/admin/user-tracking/behavior",icon:wr},{name:"實時監控",href:"/admin/user-tracking/real-time",icon:Ys},{name:"用戶分群",href:"/admin/user-tracking/segments",icon:wr},{name:"隱私設定",href:"/admin/user-tracking/privacy",icon:qs}]:w.startsWith("/admin/analytics")?[{name:"分析總覽",href:"/admin/analytics",icon:oe},{name:"銷售分析",href:"/admin/analytics/sales",icon:oe},{name:"客戶分析",href:"/admin/analytics/customers",icon:wr},{name:"商品分析",href:"/admin/analytics/products",icon:ss},{name:"營運分析",href:"/admin/analytics/operations",icon:kr},{name:"AI 洞察",href:"/admin/analytics/ai-insights",icon:Ys}]:w.startsWith("/admin/settings")?[{name:"設定總覽",href:"/admin/settings",icon:oe},{name:"一般設定",href:"/admin/settings/general",icon:kr},{name:"安全設定",href:"/admin/settings/security",icon:qs},{name:"通知設定",href:"/admin/settings/notifications",icon:jn},{name:"付款設定",href:"/admin/settings/payments",icon:Ni},{name:"物流設定",href:"/admin/settings/shipping",icon:tt}]:w.startsWith("/admin/documents")?[{name:"單據總覽",href:"/admin/documents",icon:Bt},{name:"銷售單據",href:"/admin/documents/sales",icon:ss},{name:"採購單據",href:"/admin/documents/purchase",icon:wn},{name:"庫存單據",href:"/admin/documents/inventory",icon:un},{name:"審核工作流",href:"/admin/documents/workflow",icon:Vl}]:[]})(),b=y.length>0,v=()=>{localStorage.removeItem("marelle-admin-token"),c("/admin/login")},S=w=>w==="/admin"?d.pathname==="/admin"||d.pathname==="/admin/":d.pathname.startsWith(w),_=w=>d.pathname===w;return e.jsxs("div",{className:"min-h-screen bg-[#fdf8f2] flex",children:[s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>t(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 transform transition-all duration-300 ease-in-out lg:relative ${s?"translate-x-0 w-64":"-translate-x-full w-64"} lg:translate-x-0 ${r?"lg:w-64":"lg:w-16"}`,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:e.jsxs("div",{className:"flex flex-col h-full bg-[#fdf8f2] border-r border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 h-16 border-b border-gray-200",children:[e.jsxs(re,{to:"/admin",className:"flex items-center space-x-3 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 bg-[#cc824d] rounded-lg flex items-center justify-center shadow-sm flex-shrink-0",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"M"})}),e.jsx("span",{className:`font-bold text-xl text-[#2d1e0f] font-serif transition-opacity duration-300 whitespace-nowrap ${r||s?"opacity-100":"lg:opacity-0 lg:w-0 lg:overflow-hidden"}`,children:"管理後台"})]}),e.jsx("button",{onClick:()=>t(!1),className:`lg:hidden p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-opacity duration-300 ${r||s?"opacity-100":"lg:opacity-0"}`,children:e.jsx(bt,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 px-3 py-6 space-y-1",children:p.map(w=>e.jsxs(re,{to:w.href,onClick:()=>t(!1),className:`flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 font-serif group ${S(w.href)?"bg-[#cc824d] text-white shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-[#cc824d]"}`,title:r||s?"":w.name,children:[e.jsx(w.icon,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:`ml-3 transition-opacity duration-300 whitespace-nowrap ${r||s?"opacity-100":"lg:opacity-0 lg:w-0 lg:overflow-hidden"}`,children:w.name}),!(r||s)&&e.jsx("div",{className:"hidden lg:block absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50",children:w.name})]},w.name))}),e.jsx("div",{className:"p-3 border-t border-gray-200",children:e.jsxs("button",{onClick:v,className:"flex items-center w-full px-3 py-3 text-sm font-medium text-gray-700 rounded-lg hover:bg-red-50 hover:text-red-600 transition-all duration-200 font-serif group",title:r||s?"":"登出",children:[e.jsx(Mb,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:`ml-3 transition-opacity duration-300 whitespace-nowrap ${r||s?"opacity-100":"lg:opacity-0 lg:w-0 lg:overflow-hidden"}`,children:"登出"}),!(r||s)&&e.jsx("div",{className:"hidden lg:block absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50",children:"登出"})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx("header",{className:"bg-[#fdf8f2] border-b border-gray-200 sticky top-0 z-30 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 lg:px-8 h-16",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("button",{onClick:()=>t(!0),className:"lg:hidden p-2 text-gray-400 hover:text-gray-600 rounded-lg mr-4",children:e.jsx(sw,{className:"w-5 h-5"})}),b?e.jsx("div",{className:"flex space-x-6",children:y.map(w=>{const N=w.icon,u=_(w.href);return e.jsxs(re,{to:w.href,className:`flex items-center space-x-2 px-3 py-2 text-sm font-medium transition-all duration-200 border-b-2 hover:text-[#cc824d] ${u?"text-[#cc824d] border-[#cc824d]":"text-gray-600 border-transparent hover:border-gray-300"}`,children:[N&&e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"font-chinese",children:w.name})]},w.href)})}):e.jsx("div",{className:"text-sm text-gray-500 font-serif",children:e.jsx("span",{className:"text-gray-700",children:"管理後台"})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"relative",children:n?e.jsxs("form",{onSubmit:x,className:"flex items-center",children:[e.jsx("input",{type:"text",value:l,onChange:w=>o(w.target.value),placeholder:"全域搜尋商品、訂單...",className:"w-64 px-4 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#cc824d] focus:border-transparent",autoFocus:!0,onBlur:()=>{l.trim()||i(!1)}}),e.jsx("button",{type:"button",onClick:()=>{i(!1),o("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(bt,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>i(!0),className:"p-2 text-gray-400 hover:text-[#cc824d] rounded-lg transition-colors",title:"全域搜尋",children:e.jsx(lf,{className:"w-5 h-5"})})}),e.jsx("span",{className:"text-sm text-gray-600 font-serif",children:"歡迎回來，管理員"}),e.jsx(re,{to:"/",className:"px-4 py-2 text-sm font-medium text-[#cc824d] border border-[#cc824d] rounded-lg hover:bg-[#cc824d] hover:text-white transition-all duration-200 font-serif",children:"查看網站"})]})]})}),e.jsx("main",{className:"admin-content flex-1 p-6 bg-[#fdf8f2] overflow-auto",children:e.jsxs(aa,{children:[e.jsx(q,{index:!0,element:e.jsx(TP,{})}),e.jsx(q,{path:"tasks",element:e.jsx(LP,{})}),e.jsx(q,{path:"approvals",element:e.jsx(WP,{})}),e.jsx(q,{path:"monitoring",element:e.jsx(QP,{})}),e.jsx(q,{path:"products",element:e.jsx(ET,{})}),e.jsx(q,{path:"products/add",element:e.jsx(jD,{})}),e.jsx(q,{path:"products/edit/:id",element:e.jsx(ND,{})}),e.jsx(q,{path:"orders/*",element:e.jsx(kD,{})}),e.jsx(q,{path:"logistics/*",element:e.jsx(KA,{})}),e.jsx(q,{path:"coupons/*",element:e.jsx(zA,{})}),e.jsx(q,{path:"festivals",element:e.jsx(xM,{})}),e.jsx(q,{path:"festivals/management",element:e.jsx(hM,{})}),e.jsx(q,{path:"festivals/promotions",element:e.jsx(pM,{})}),e.jsx(q,{path:"festivals/analytics",element:e.jsx(gM,{})}),e.jsx(q,{path:"marketing",element:e.jsx(yM,{})}),e.jsx(q,{path:"marketing/campaigns",element:e.jsx(bM,{})}),e.jsx(q,{path:"marketing/advertising",element:e.jsx(vM,{})}),e.jsx(q,{path:"marketing/audiences",element:e.jsx(jM,{})}),e.jsx(q,{path:"accounting/*",element:e.jsx(mM,{})}),e.jsx(q,{path:"user-tracking",element:e.jsx(wP,{})}),e.jsx(q,{path:"user-tracking/behavior",element:e.jsx(_P,{})}),e.jsx(q,{path:"user-tracking/real-time",element:e.jsx(SP,{})}),e.jsx(q,{path:"user-tracking/segments",element:e.jsx(kP,{})}),e.jsx(q,{path:"user-tracking/privacy",element:e.jsx(CP,{})}),e.jsx(q,{path:"members/*",element:e.jsx(HD,{})}),e.jsx(q,{path:"gifts/*",element:e.jsx(hA,{})}),e.jsx(q,{path:"suppliers/*",element:e.jsx(_A,{})}),e.jsx(q,{path:"procurement/*",element:e.jsx(LA,{})}),e.jsx(q,{path:"notifications/*",element:e.jsx(YD,{})}),e.jsx(q,{path:"analytics/*",element:e.jsx(PD,{})}),e.jsx(q,{path:"admin-management/*",element:e.jsx(aA,{})}),e.jsx(q,{path:"settings/*",element:e.jsx(UD,{})}),e.jsx(q,{path:"inventory",element:e.jsx(WD,{})}),e.jsx(q,{path:"documents",element:e.jsx(NM,{})}),e.jsx(q,{path:"documents/sales",element:e.jsx(wM,{})}),e.jsx(q,{path:"documents/purchase",element:e.jsx(_M,{})}),e.jsx(q,{path:"documents/inventory",element:e.jsx(SM,{})}),e.jsx(q,{path:"documents/workflow",element:e.jsx(kM,{})})]})})]})]})},EM=()=>{const[s,t]=m.useState({username:"",password:""}),[r,a]=m.useState(!1),[n,i]=m.useState(!1),[l,o]=m.useState(""),c=ns(),d=(p,f)=>{t(y=>({...y,[p]:f})),l&&o("")},x=async p=>{p.preventDefault(),i(!0),o(""),await new Promise(f=>setTimeout(f,1e3)),s.username==="admin@marelle.com.tw"&&s.password==="Walkerkevin2580"?(localStorage.setItem("marelle-admin-token","mock-token"),c("/admin")):o("帳號或密碼錯誤"),i(!1)};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-[#fdf8f2]",children:[e.jsx(Bd,{}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center py-8 pt-16",children:[e.jsxs("form",{onSubmit:x,className:"w-full max-w-md mx-auto bg-transparent flex flex-col items-center",children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2d1e0f] mb-8 mt-2 tracking-wider",children:"登入"}),e.jsxs("div",{className:"w-full flex flex-col gap-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:s.username,onChange:p=>d("username",p.target.value),className:"block w-full border-0 border-b border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#bfae9b] placeholder-[#bfae9b] font-serif",placeholder:"信箱或手機號碼",required:!0,autoFocus:!0})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r?"text":"password",value:s.password,onChange:p=>d("password",p.target.value),className:"block w-full border-0 border-b border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#bfae9b] placeholder-[#bfae9b] font-serif",placeholder:"密碼",required:!0}),e.jsx("button",{type:"button",onClick:()=>a(p=>!p),className:"absolute right-0 top-1/2 -translate-y-1/2 text-[#bfae9b] hover:text-[#a88c6b]",tabIndex:-1,children:r?e.jsx(Gu,{className:"w-5 h-5"}):e.jsx(Ee,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",className:"text-xs text-[#bfae9b] hover:underline font-serif",children:"忘記密碼？"})}),l&&e.jsx("div",{className:"text-red-600 text-sm font-serif text-center",children:l}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-[#cc824d] hover:bg-[#b86c37] text-white text-base font-bold py-3 rounded transition-colors font-serif tracking-wider mt-2 disabled:bg-[#e5ded6] disabled:text-[#bfae9b]",children:n?"登入中...":"開始購物吧！"})]}),e.jsxs("div",{className:"w-full flex items-center my-6",children:[e.jsx("div",{className:"flex-1 h-px bg-[#e5ded6]"}),e.jsx("span",{className:"mx-4 text-[#bfae9b] text-sm font-serif",children:"或使用社群帳號登入"}),e.jsx("div",{className:"flex-1 h-px bg-[#e5ded6]"})]}),e.jsxs("div",{className:"flex gap-6 justify-center mb-8",children:[e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-[#00c300] flex items-center justify-center shadow hover:scale-105 transition-transform",children:e.jsx("i",{className:"fa-brands fa-line text-white text-2xl"})}),e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-[#1877f2] flex items-center justify-center shadow hover:scale-105 transition-transform",children:e.jsx("i",{className:"fa-brands fa-facebook-f text-white text-2xl"})})]})]}),e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center mt-8",children:[e.jsx("h3",{className:"text-xl font-serif font-bold text-[#2d1e0f] mb-4 tracking-wider",children:"還不是會員？"}),e.jsx("button",{onClick:()=>c("/admin/register"),className:"w-full border border-[#cc824d] text-[#cc824d] text-base font-bold py-3 rounded transition-colors font-serif tracking-wider hover:bg-[#f7ede3]",children:"註冊會員"})]})]}),e.jsx("footer",{className:"w-full mt-24 px-8 pb-8 pt-16 bg-transparent text-[#bfae9b] text-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"Lo-Fi warehouse"}),e.jsxs("div",{className:"mb-2 text-xs",children:["A missing piece of homestyle",e.jsx("br",{}),"歡迎你的來過，帶走一個你喜歡的風格"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"品牌資訊"}),e.jsxs("div",{className:"text-xs leading-6",children:["會員帳戶",e.jsx("br",{}),"品牌理念",e.jsx("br",{}),"品牌故事"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"常見問題"}),e.jsxs("div",{className:"text-xs leading-6",children:["訂單狀態",e.jsx("br",{}),"購物須知",e.jsx("br",{}),"配送說明",e.jsx("br",{}),"退換貨服務"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"聯絡我們"}),e.jsxs("div",{className:"text-xs leading-6",children:["LINE ID：@lofiwarehouse",e.jsx("br",{}),"客服時間：週一至週五 10:00 - 18:00",e.jsx("br",{}),"信箱：lofi-warehouse.service@lofi-house.com"]})]})]})})]})},TM=()=>{const[s,t]=m.useState({country:"TW",phone:"",email:"",agree1:!1,agree2:!1}),r=ns(),a=(l,o)=>{t(c=>({...c,[l]:o}))},n=l=>{t(o=>({...o,[l]:!o[l]}))},i=l=>{l.preventDefault()};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-[#fdf8f2]",children:[e.jsx(Bd,{}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center py-8 pt-16",children:[e.jsxs("form",{onSubmit:i,className:"w-full max-w-md mx-auto flex flex-col items-center",children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2d1e0f] mb-8 mt-2 tracking-wider",children:"註冊會員"}),e.jsxs("div",{className:"w-full flex flex-col gap-6",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:s.country,onChange:l=>a("country",l.target.value),className:"border-0 border-b-2 border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#cc824d] transition-colors duration-200 font-serif appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2rem"},children:[e.jsx("option",{value:"TW",children:"🇹🇼 TW+886"}),e.jsx("option",{value:"US",children:"🇺🇸 US+1"}),e.jsx("option",{value:"CN",children:"🇨🇳 CN+86"}),e.jsx("option",{value:"JP",children:"🇯🇵 JP+81"}),e.jsx("option",{value:"KR",children:"🇰🇷 KR+82"})]}),e.jsx("input",{type:"tel",value:s.phone,onChange:l=>a("phone",l.target.value),className:"flex-1 border-0 border-b border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#bfae9b] placeholder-[#bfae9b] font-serif",placeholder:"912 345 678",required:!0})]}),e.jsx("div",{children:e.jsx("input",{type:"email",value:s.email,onChange:l=>a("email",l.target.value),className:"block w-full border-0 border-b border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#bfae9b] placeholder-[#bfae9b] font-serif",placeholder:"電郵",required:!0})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#bfae9b]",children:[e.jsx("input",{type:"checkbox",id:"agree1",checked:s.agree1,onChange:()=>n("agree1"),className:"accent-[#cc824d]"}),e.jsx("label",{htmlFor:"agree1",children:"我願意接收Lo-Fi warehouse 居家生活館最新優惠活動及及服務推播/簡訊/郵件"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#bfae9b]",children:[e.jsx("input",{type:"checkbox",id:"agree2",checked:s.agree2,onChange:()=>n("agree2"),className:"accent-[#cc824d]"}),e.jsxs("label",{htmlFor:"agree2",children:["我同意網站 ",e.jsx("a",{href:"#",className:"underline",children:"服務條款及隱私權條款"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-[#e5ded6] text-[#bfae9b] text-base font-bold py-3 rounded font-serif tracking-wider mt-2 cursor-not-allowed",disabled:!0,children:"下一步"})]}),e.jsxs("div",{className:"w-full flex items-center my-6",children:[e.jsx("div",{className:"flex-1 h-px bg-[#e5ded6]"}),e.jsx("span",{className:"mx-4 text-[#bfae9b] text-sm font-serif",children:"或使用社群帳號註冊"}),e.jsx("div",{className:"flex-1 h-px bg-[#e5ded6]"})]}),e.jsxs("div",{className:"flex gap-6 justify-center mb-8",children:[e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-[#00c300] flex items-center justify-center shadow hover:scale-105 transition-transform",children:e.jsx("i",{className:"fa-brands fa-line text-white text-2xl"})}),e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-[#1877f2] flex items-center justify-center shadow hover:scale-105 transition-transform",children:e.jsx("i",{className:"fa-brands fa-facebook-f text-white text-2xl"})})]})]}),e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center mt-8",children:[e.jsx("h3",{className:"text-xl font-serif font-bold text-[#2d1e0f] mb-2 tracking-wider",children:"已經有帳號？"}),e.jsx("div",{className:"text-[#bfae9b] text-sm mb-4",children:"立即登入享有更多優惠！"}),e.jsx("button",{onClick:()=>r("/admin/login"),className:"w-full border border-[#cc824d] text-[#cc824d] text-base font-bold py-3 rounded transition-colors font-serif tracking-wider hover:bg-[#f7ede3]",children:"登入"})]})]}),e.jsx("footer",{className:"w-full mt-24 px-8 pb-8 pt-16 bg-transparent text-[#bfae9b] text-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"Lo-Fi warehouse"}),e.jsxs("div",{className:"mb-2 text-xs",children:["A missing piece of homestyle",e.jsx("br",{}),"歡迎你的來過，帶走一個你喜歡的風格"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"品牌資訊"}),e.jsxs("div",{className:"text-xs leading-6",children:["會員帳戶",e.jsx("br",{}),"品牌理念",e.jsx("br",{}),"品牌故事"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"常見問題"}),e.jsxs("div",{className:"text-xs leading-6",children:["訂單狀態",e.jsx("br",{}),"購物須知",e.jsx("br",{}),"配送說明",e.jsx("br",{}),"退換貨服務"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"聯絡我們"}),e.jsxs("div",{className:"text-xs leading-6",children:["LINE ID：@lofiwarehouse",e.jsx("br",{}),"客服時間：週一至週五 10:00 - 18:00",e.jsx("br",{}),"信箱：lofi-warehouse.service@lofi-house.com"]})]})]})})]})},DM=()=>{const[s,t]=m.useState({username:"",password:""}),[r,a]=m.useState(!1),[n,i]=m.useState(!1),[l,o]=m.useState(""),c=ns(),d=(p,f)=>{t(y=>({...y,[p]:f})),l&&o("")},x=async p=>{p.preventDefault(),i(!0),o(""),await new Promise(f=>setTimeout(f,1e3)),s.username==="user"&&s.password==="password"?c("/"):o("帳號或密碼錯誤"),i(!1)};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-[#fdf8f2]",children:[e.jsx(Bd,{}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center py-8 pt-16",children:[e.jsxs("form",{onSubmit:x,className:"w-full max-w-md mx-auto bg-transparent flex flex-col items-center",children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2d1e0f] mb-8 mt-2 tracking-wider",children:"登入"}),e.jsxs("div",{className:"w-full flex flex-col gap-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:s.username,onChange:p=>d("username",p.target.value),className:"block w-full border-0 border-b border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#bfae9b] placeholder-[#bfae9b] font-serif",placeholder:"信箱或手機號碼",required:!0,autoFocus:!0})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r?"text":"password",value:s.password,onChange:p=>d("password",p.target.value),className:"block w-full border-0 border-b border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#bfae9b] placeholder-[#bfae9b] font-serif",placeholder:"密碼",required:!0}),e.jsx("button",{type:"button",onClick:()=>a(p=>!p),className:"absolute right-0 top-1/2 -translate-y-1/2 text-[#bfae9b] hover:text-[#a88c6b]",tabIndex:-1,children:r?e.jsx(Gu,{className:"w-5 h-5"}):e.jsx(Ee,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",className:"text-xs text-[#bfae9b] hover:underline font-serif",children:"忘記密碼？"})}),l&&e.jsx("div",{className:"text-red-600 text-sm font-serif text-center",children:l}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-[#cc824d] hover:bg-[#b86c37] text-white text-base font-bold py-3 rounded transition-colors font-serif tracking-wider mt-2 disabled:bg-[#e5ded6] disabled:text-[#bfae9b]",children:n?"登入中...":"開始購物吧！"})]}),e.jsxs("div",{className:"w-full flex items-center my-6",children:[e.jsx("div",{className:"flex-1 h-px bg-[#e5ded6]"}),e.jsx("span",{className:"mx-4 text-[#bfae9b] text-sm font-serif",children:"或使用社群帳號登入"}),e.jsx("div",{className:"flex-1 h-px bg-[#e5ded6]"})]}),e.jsxs("div",{className:"flex gap-6 justify-center mb-8",children:[e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-[#00c300] flex items-center justify-center shadow hover:scale-105 transition-transform",children:e.jsx("i",{className:"fa-brands fa-line text-white text-2xl"})}),e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-[#1877f2] flex items-center justify-center shadow hover:scale-105 transition-transform",children:e.jsx("i",{className:"fa-brands fa-facebook-f text-white text-2xl"})})]})]}),e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center mt-8",children:[e.jsx("h3",{className:"text-xl font-serif font-bold text-[#2d1e0f] mb-4 tracking-wider",children:"還不是會員？"}),e.jsx("button",{onClick:()=>c("/register"),className:"w-full border border-[#cc824d] text-[#cc824d] text-base font-bold py-3 rounded transition-colors font-serif tracking-wider hover:bg-[#f7ede3]",children:"註冊會員"})]})]}),e.jsx("footer",{className:"w-full mt-24 px-8 pb-8 pt-16 bg-transparent text-[#bfae9b] text-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"Lo-Fi warehouse"}),e.jsxs("div",{className:"mb-2 text-xs",children:["A missing piece of homestyle",e.jsx("br",{}),"歡迎你的來過，帶走一個你喜歡的風格"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"品牌資訊"}),e.jsxs("div",{className:"text-xs leading-6",children:["會員帳戶",e.jsx("br",{}),"品牌理念",e.jsx("br",{}),"品牌故事"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"常見問題"}),e.jsxs("div",{className:"text-xs leading-6",children:["訂單狀態",e.jsx("br",{}),"購物須知",e.jsx("br",{}),"配送說明",e.jsx("br",{}),"退換貨服務"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"聯絡我們"}),e.jsxs("div",{className:"text-xs leading-6",children:["LINE ID：@lofiwarehouse",e.jsx("br",{}),"客服時間：週一至週五 10:00 - 18:00",e.jsx("br",{}),"信箱：lofi-warehouse.service@lofi-house.com"]})]})]})})]})},AM=()=>{const[s,t]=m.useState({country:"TW",phone:"",email:"",agree1:!1,agree2:!1}),r=ns(),a=(l,o)=>{t(c=>({...c,[l]:o}))},n=l=>{t(o=>({...o,[l]:!o[l]}))},i=l=>{l.preventDefault()};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-[#fdf8f2]",children:[e.jsx(Bd,{}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center py-8 pt-16",children:[e.jsxs("form",{onSubmit:i,className:"w-full max-w-md mx-auto flex flex-col items-center",children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2d1e0f] mb-8 mt-2 tracking-wider",children:"註冊會員"}),e.jsxs("div",{className:"w-full flex flex-col gap-6",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:s.country,onChange:l=>a("country",l.target.value),className:"border-0 border-b-2 border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#cc824d] transition-colors duration-200 font-serif appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2rem"},children:[e.jsx("option",{value:"TW",children:"🇹🇼 TW+886"}),e.jsx("option",{value:"US",children:"🇺🇸 US+1"}),e.jsx("option",{value:"CN",children:"🇨🇳 CN+86"}),e.jsx("option",{value:"JP",children:"🇯🇵 JP+81"}),e.jsx("option",{value:"KR",children:"🇰🇷 KR+82"})]}),e.jsx("input",{type:"tel",value:s.phone,onChange:l=>a("phone",l.target.value),className:"flex-1 border-0 border-b border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#bfae9b] placeholder-[#bfae9b] font-serif",placeholder:"912 345 678",required:!0})]}),e.jsx("div",{children:e.jsx("input",{type:"email",value:s.email,onChange:l=>a("email",l.target.value),className:"block w-full border-0 border-b border-[#e5ded6] bg-transparent text-base py-3 px-0 focus:ring-0 focus:border-[#bfae9b] placeholder-[#bfae9b] font-serif",placeholder:"電郵",required:!0})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#bfae9b]",children:[e.jsx("input",{type:"checkbox",id:"agree1",checked:s.agree1,onChange:()=>n("agree1"),className:"accent-[#cc824d]"}),e.jsx("label",{htmlFor:"agree1",children:"我願意接收Lo-Fi warehouse 居家生活館最新優惠活動及及服務推播/簡訊/郵件"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#bfae9b]",children:[e.jsx("input",{type:"checkbox",id:"agree2",checked:s.agree2,onChange:()=>n("agree2"),className:"accent-[#cc824d]"}),e.jsxs("label",{htmlFor:"agree2",children:["我同意網站 ",e.jsx("a",{href:"#",className:"underline",children:"服務條款及隱私權條款"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-[#e5ded6] text-[#bfae9b] text-base font-bold py-3 rounded font-serif tracking-wider mt-2 cursor-not-allowed",disabled:!0,children:"下一步"})]}),e.jsxs("div",{className:"w-full flex items-center my-6",children:[e.jsx("div",{className:"flex-1 h-px bg-[#e5ded6]"}),e.jsx("span",{className:"mx-4 text-[#bfae9b] text-sm font-serif",children:"或使用社群帳號註冊"}),e.jsx("div",{className:"flex-1 h-px bg-[#e5ded6]"})]}),e.jsxs("div",{className:"flex gap-6 justify-center mb-8",children:[e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-[#00c300] flex items-center justify-center shadow hover:scale-105 transition-transform",children:e.jsx("i",{className:"fa-brands fa-line text-white text-2xl"})}),e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-[#1877f2] flex items-center justify-center shadow hover:scale-105 transition-transform",children:e.jsx("i",{className:"fa-brands fa-facebook-f text-white text-2xl"})})]})]}),e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center mt-8",children:[e.jsx("h3",{className:"text-xl font-serif font-bold text-[#2d1e0f] mb-2 tracking-wider",children:"已經有帳號？"}),e.jsx("div",{className:"text-[#bfae9b] text-sm mb-4",children:"立即登入享有更多優惠！"}),e.jsx("button",{onClick:()=>r("/login"),className:"w-full border border-[#cc824d] text-[#cc824d] text-base font-bold py-3 rounded transition-colors font-serif tracking-wider hover:bg-[#f7ede3]",children:"登入"})]})]}),e.jsx("footer",{className:"w-full mt-24 px-8 pb-8 pt-16 bg-transparent text-[#bfae9b] text-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"Lo-Fi warehouse"}),e.jsxs("div",{className:"mb-2 text-xs",children:["A missing piece of homestyle",e.jsx("br",{}),"歡迎你的來過，帶走一個你喜歡的風格"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"品牌資訊"}),e.jsxs("div",{className:"text-xs leading-6",children:["會員帳戶",e.jsx("br",{}),"品牌理念",e.jsx("br",{}),"品牌故事"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"常見問題"}),e.jsxs("div",{className:"text-xs leading-6",children:["訂單狀態",e.jsx("br",{}),"購物須知",e.jsx("br",{}),"配送說明",e.jsx("br",{}),"退換貨服務"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-serif font-bold mb-2",children:"聯絡我們"}),e.jsxs("div",{className:"text-xs leading-6",children:["LINE ID：@lofiwarehouse",e.jsx("br",{}),"客服時間：週一至週五 10:00 - 18:00",e.jsx("br",{}),"信箱：lofi-warehouse.service@lofi-house.com"]})]})]})})]})};it.registerPlugin(ke);function IM(){return m.useEffect(()=>{it.fromTo(".animate-on-load",{opacity:0,y:30},{opacity:1,y:0,duration:.8,stagger:.2,ease:"power2.out"})},[]),e.jsx(x_,{children:e.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-cream-50 to-apricot-50",children:e.jsxs(aa,{children:[e.jsx(q,{path:"/*",element:e.jsxs(e.Fragment,{children:[e.jsx(Bd,{}),e.jsx("main",{className:"flex-grow",children:e.jsxs(aa,{children:[e.jsx(q,{path:"/",element:e.jsx(yT,{})}),e.jsx(q,{path:"/products",element:e.jsx(_T,{})}),e.jsx(q,{path:"/products/:id",element:e.jsx(ST,{})}),e.jsx(q,{path:"/cart",element:e.jsx(kT,{})}),e.jsx(q,{path:"/checkout",element:e.jsx(CT,{})})]})}),e.jsx(gT,{})]})}),e.jsx(q,{path:"/login",element:e.jsx(DM,{})}),e.jsx(q,{path:"/register",element:e.jsx(AM,{})}),e.jsx(q,{path:"/admin/login",element:e.jsx(EM,{})}),e.jsx(q,{path:"/admin/register",element:e.jsx(TM,{})}),e.jsx(q,{path:"/admin/*",element:e.jsx(CM,{})})]})})})}Zh.createRoot(document.getElementById("root")).render(e.jsx(Md.StrictMode,{children:e.jsx(IM,{})}));
